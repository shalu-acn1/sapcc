import{c as F,d as I,m as M}from"./chunk-QKV5QP3B.js";import{Ee as y,Fe as P,Le as b,Pe as A,Qc as C,Za as m,ma as a,na as v,oa as l,qa as r,we as S}from"./chunk-PRP3ZKGZ.js";import{a as g,b as h}from"./chunk-25N2FLV6.js";var f=class{},B=(()=>{class t{constructor(){this.adapter=r(f)}getActiveConfigurations(e){return this.adapter.getActiveConfigurations(e)}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=a({token:t,factory:t.\u0275fac})}}return t})(),E=(()=>{class t{constructor(){this.queryService=r(A),this.commandService=r(b),this.opfBaseConnector=r(B),this.activeConfigurationsQuery=e=>this.queryService.create(()=>this.opfBaseConnector.getActiveConfigurations(e))}getActiveConfigurationsState(e){return this.activeConfigurationsQuery(e).getState()}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=a({token:t,factory:t.\u0275fac})}}return t})(),O=[E,{provide:M,useExisting:E}],H=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=m({type:t})}static{this.\u0275inj=v({providers:[...O,B]})}}return t})(),R=(()=>{class t{initialize(){this.baseSiteService&&this.baseSiteService.getActive().subscribe(e=>this._activeBaseSite=e)}constructor(){this.opfConfig=r(I),this.opfApiConfig=r(F),this.baseSiteService=r(S),this.initialize()}buildUrl(e,i){let o=this.getBaseEndpoint(),n=this.getEndpointFromContext(e);if(i){let{urlParams:s,queryParams:p}=i;if(s&&n&&(n=y.resolve(n,s,!0)),p){let c={encoder:new P};if(n.includes("?")){let u;[n,u]=n.split("?"),c=h(g({},c),{fromString:u})}let d=this.getHttpParamsFromQueryParams(p,c).toString();d.length&&(n+="?"+d)}}return`${o}/${this._activeBaseSite}/${n}`}getEndpointFromContext(e){let i=this.opfApiConfig.backend?.opfApi?.endpoints;return i?i[e]:""}getBaseEndpoint(){return this.opfConfig&&this.opfConfig.opf&&this.opfConfig.opf.opfBaseUrl?this.opfConfig.opf.opfBaseUrl:""}getHttpParamsFromQueryParams(e,i){let o=new C(i);return Object.keys(e).forEach(n=>{let s=e[n];s!==void 0&&(s===null?o=o.delete(n):o=o.set(n,s))}),o}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275prov=a({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),T=new l("OpfActiveConfigurationsNormalizer");export{f as a,H as b,R as c,T as d};
