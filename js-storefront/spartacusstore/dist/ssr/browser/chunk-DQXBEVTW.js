import{oa as ct}from"./chunk-H2QHHFZD.js";import{$b as S,Ab as w,Bb as l,Cc as et,Cd as T,D as m,Dg as $,Eb as g,Eg as F,Ic as y,Kd as L,La as J,Lb as f,M as E,Mb as W,Nb as h,Pa as r,Q as B,Sd as nt,Td as O,Ub as X,Wa as u,Xf as b,Xg as k,Ya as V,Za as d,ac as C,bb as v,ce as rt,da as q,ga as Y,ib as o,ke as ot,ma as Z,me as R,n as U,na as p,oe as D,pa as N,pe as at,q as A,sb as a,sg as j,tb as s,ub as I,uc as tt,va as G,vb as P,wa as H,wb as M,wc as z,xc as Q,yb as K,zd as it}from"./chunk-PRP3ZKGZ.js";import"./chunk-25N2FLV6.js";var ft={backend:{occ:{endpoints:{product:{variants:"products/${productCode}?fields=name,purchasable,baseOptions(DEFAULT),baseProduct,variantOptions(DEFAULT),variantType"}}}}},lt=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=d({type:e})}static{this.\u0275inj=p({providers:[L(ft)],imports:[y]})}}return e})();function mt(e,c){if(e&1&&(a(0,"option",4),f(1),s()),e&2){let i=c.$implicit,t=l();g("value",i.code),o("selected",i.code===(t.product==null?null:t.product.code)),r(),h(" ",t.getVariantOptionValue(i.variantOptionQualifiers)," ")}}function gt(e,c){if(e&1&&(a(0,"option",5),f(1),s()),e&2){let i=c.$implicit,t=l();g("value",i.code),o("selected",i.code===(t.product==null?null:t.product.code)),r(),h(" ",t.getVariantOptionValue(i.variantOptionQualifiers)," ")}}var ht=e=>({"selected-variant":e});function St(e,c){if(e&1&&(a(0,"div",4),f(1),S(2,"cxTranslate"),a(3,"span",5),f(4),s()()),e&2){let i=l();r(),h(" ",C(2,2,"productVariants.style"),": "),r(3),W(i.getVariantOptionValue(i.variants==null?null:i.variants.selected.variantOptionQualifiers))}}function Ct(e,c){if(e&1){let i=K();a(0,"li",6)(1,"button",7),w("click",function(){let n=G(i).$implicit,_=l();return H(_.changeStyle(n.code))}),I(2,"img",8),s()()}if(e&2){let i=c.$implicit,t=l();o("ngClass",X(4,ht,i.code===(t.variants==null||t.variants.selected==null?null:t.variants.selected.code))),r(2),g("src",t.getVariantThumbnailUrl(i.variantOptionQualifiers),J),g("title",t.getVariantOptionValue(i.variantOptionQualifiers)),g("alt",t.getVariantOptionValue(i.variantOptionQualifiers))}}function yt(e,c){if(e&1&&I(0,"cx-product-variant-style-selector",5),e&2){let i=l(3);o("variants",i.variants[i.variantType.STYLE])}}function _t(e,c){if(e&1&&I(0,"cx-product-variant-size-selector",6),e&2){let i=l(2).ngIf,t=l();o("product",i)("variants",t.variants[t.variantType.SIZE])}}function xt(e,c){if(e&1&&I(0,"cx-product-variant-color-selector",6),e&2){let i=l(2).ngIf,t=l();o("product",i)("variants",t.variants[t.variantType.COLOR])}}function Vt(e,c){if(e&1&&(a(0,"div",2),v(1,yt,1,1,"cx-product-variant-style-selector",3)(2,_t,1,2,"cx-product-variant-size-selector",4)(3,xt,1,2,"cx-product-variant-color-selector",4),s()),e&2){let i=l(2);r(),o("ngIf",i.variants[i.variantType.STYLE]),r(),o("ngIf",i.variants[i.variantType.SIZE]),r(),o("ngIf",i.variants[i.variantType.COLOR])}}function It(e,c){if(e&1&&(P(0),v(1,Vt,4,3,"div",1),M()),e&2){let i=c.ngIf;r(),o("ngIf",i.baseOptions==null?null:i.baseOptions.length)}}var Pt=(()=>{class e{constructor(i){this.routingService=i}changeColor(i,t){return i&&this.routingService.go({cxRoute:"product",params:{code:i,name:t}}),null}getVariantOptionValue(i){let t=i.find(n=>n.qualifier===O.COLOR);return t?t.value:""}static{this.\u0275fac=function(t){return new(t||e)(u(R))}}static{this.\u0275cmp=V({type:e,selectors:[["cx-product-variant-color-selector"]],inputs:{product:"product",variants:"variants"},standalone:!1,decls:7,vars:4,consts:[[1,"variant-selector"],[1,"variant-name"],[1,"form-control","variant-select",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value","selected"]],template:function(t,n){t&1&&(P(0),a(1,"div",0)(2,"div",1),f(3),S(4,"cxTranslate"),s(),a(5,"select",2),w("change",function(x){return n.changeColor(x.target.value,n.product==null?null:n.product.name)}),v(6,mt,2,3,"option",3),s()(),M()),t&2&&(r(3),h("",C(4,2,"productVariants.color"),":"),r(3),o("ngForOf",n.variants==null?null:n.variants.options))},dependencies:[z,$],encapsulation:2,changeDetection:0})}}return e})(),pt=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=d({type:e})}static{this.\u0275inj=p({imports:[y,T,j,F]})}}return e})(),Mt=(()=>{class e{constructor(i,t){this.productService=i,this.routingService=t}changeSize(i){return i&&this.productService.get(i,b.LIST).pipe(m(D),E(1)).subscribe(t=>{this.routingService.go({cxRoute:"product",params:t})}),null}getVariantOptionValue(i){let t=i.find(n=>n.qualifier===O.SIZE);return t?t.value:""}static{this.\u0275fac=function(t){return new(t||e)(u(k),u(R))}}static{this.\u0275cmp=V({type:e,selectors:[["cx-product-variant-size-selector"]],inputs:{product:"product",variants:"variants"},standalone:!1,decls:11,vars:10,consts:[[1,"variant-selector"],[1,"variant-name"],[1,"form-control","variant-select",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],["href","#",1,"size-guide",3,"title"],[3,"value","selected"]],template:function(t,n){t&1&&(P(0),a(1,"div",0)(2,"div",1),f(3),S(4,"cxTranslate"),s(),a(5,"select",2),w("change",function(x){return n.changeSize(x.target.value)}),v(6,gt,2,3,"option",3),s(),a(7,"a",4),S(8,"cxTranslate"),f(9),S(10,"cxTranslate"),s()(),M()),t&2&&(r(3),h("",C(4,4,"productVariants.size"),":"),r(3),o("ngForOf",n.variants==null?null:n.variants.options),r(),g("title",C(8,6,"productVariants.sizeGuideLabel")),r(2),h(" ",C(10,8,"productVariants.sizeGuideLabel")," "))},dependencies:[z,$],encapsulation:2,changeDetection:0})}}return e})(),dt=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=d({type:e})}static{this.\u0275inj=p({imports:[y,T,j,F]})}}return e})(),Tt=(()=>{class e{constructor(i,t,n){this.config=i,this.productService=t,this.routingService=n,this.variantQualifier=O}getVariantOptionValue(i){let t=i.find(n=>n.qualifier===O.STYLE);return t?t.value:""}getVariantThumbnailUrl(i){let t=i.find(n=>n.image);return t?`${this.config?.backend?.occ?.baseUrl}${t.image?.url}`:""}changeStyle(i){return i&&this.productService.get(i,b.LIST).pipe(m(D),E(1)).subscribe(t=>{this.routingService.go({cxRoute:"product",params:t})}),null}static{this.\u0275fac=function(t){return new(t||e)(u(rt),u(k),u(R))}}static{this.\u0275cmp=V({type:e,selectors:[["cx-product-variant-style-selector"]],inputs:{variants:"variants"},standalone:!1,decls:5,vars:2,consts:[[1,"variant-selector"],["class","variant-name",4,"ngIf"],[1,"variant-list"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"variant-name"],[1,"style-name"],[3,"ngClass"],[1,"variant-button",3,"click"],[3,"src","title","alt"]],template:function(t,n){t&1&&(P(0),a(1,"div",0),v(2,St,5,4,"div",1),a(3,"ul",2),v(4,Ct,3,6,"li",3),s()(),M()),t&2&&(r(2),o("ngIf",n.variants.selected),r(2),o("ngForOf",n.variants==null?null:n.variants.options))},dependencies:[tt,z,Q,$],encapsulation:2,changeDetection:0})}}return e})(),ut=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=d({type:e})}static{this.\u0275inj=p({imports:[y,T,j,F]})}}return e})(),Ot=(()=>{class e{constructor(i){this.currentProductService=i,this.variants={},this.variantType=nt}ngOnInit(){this.product$=this.currentProductService.getProduct().pipe(m(at),m(i=>!!i.baseOptions),B(),Y(i=>{i.baseOptions.forEach(t=>{t?.variantType&&(this.variants[t.variantType]=t)})}))}static{this.\u0275fac=function(t){return new(t||e)(u(ct))}}static{this.\u0275cmp=V({type:e,selectors:[["cx-product-variants-container"]],standalone:!1,decls:2,vars:3,consts:[[4,"ngIf"],["class","variant-section",4,"ngIf"],[1,"variant-section"],[3,"variants",4,"ngIf"],[3,"product","variants",4,"ngIf"],[3,"variants"],[3,"product","variants"]],template:function(t,n){t&1&&(v(0,It,2,1,"ng-container",0),S(1,"async")),t&2&&o("ngIf",C(1,1,n.product$))},dependencies:[Q,Tt,Mt,Pt,et],encapsulation:2,changeDetection:0})}}return e})(),Dt=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=d({type:e})}static{this.\u0275inj=p({imports:[y,T,j,F,ut,dt,pt]})}}return e})(),bt=(()=>{class e{constructor(i,t,n){this.productService=i,this.semanticPathService=t,this.router=n}canActivate(i){let t=i.params?.productCode;return t?this.productService.get(t,b.VARIANTS).pipe(m(D),q(n=>{if(!n.purchasable){let _=this.findPurchasableProductCode(n);if(_)return this.productService.get(_,b.LIST).pipe(m(D),E(1),A(x=>this.router.createUrlTree(this.semanticPathService.transform({cxRoute:"product",params:x}))))}return U(!0)})):U(!0)}findPurchasableProductCode(i){if(i.variantOptions?.length){let t=i.variantOptions.filter(n=>n.stock&&n.stock.stockLevel?n:!1);return t&&t.length?t[0]?.code:i.variantOptions[0]?.code}}static{this.\u0275fac=function(t){return new(t||e)(N(k),N(ot),N(it))}}static{this.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),vt=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=d({type:e})}static{this.\u0275inj=p({providers:[L({cmsComponents:{ProductVariantSelectorComponent:{component:Ot,guards:[bt]}}})],imports:[Dt,pt,dt,ut]})}}return e})();var Yt=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=d({type:e})}static{this.\u0275inj=p({imports:[lt,vt]})}}return e})();export{Yt as ProductVariantsModule};
