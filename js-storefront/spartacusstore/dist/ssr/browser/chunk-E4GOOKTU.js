import{d as Ot}from"./chunk-MOKI6WPS.js";import{b as Ve,d as _t,e as Ce,f as Ne}from"./chunk-MTN5X6Q6.js";import{$ as H,A as ve,Aa as ri,B as Pe,C as me,Ca as ni,E as kt,F as Le,G as et,Ha as te,Ia as ue,J as Vt,K as ut,L as Nt,M as ft,Ma as ke,Mb as E,Na as tt,Nb as xt,Oa as B,P as Ie,Pa as O,X as Bt,Xa as Ge,Z as Dt,Za as it,_ as gt,a as mt,b as j,ba as Rt,c as A,d as Y,e as W,g as Oe,h as Xt,j as U,k as Zt,l as J,la as ti,n as ei,nb as $t,ob as Ut,p as X,pa as ii,q as Pt,qa as Me,r as It,s as Z,ua as pe,uc as oi,w as ee,x as Mt,xa as qt}from"./chunk-H2QHHFZD.js";import{$b as s,Ab as y,Ad as Je,Af as N,Bb as p,Ca as St,Cc as L,Cd as ce,D as ye,Df as $e,Dg as q,Eb as w,Ef as Ue,Eg as ae,Fa as Tt,Ff as dt,Hb as He,Ib as Qe,Ic as se,Jb as Ke,Kb as ze,Kd as z,Lb as f,Ld as at,Lf as Ee,M as ot,Mb as I,Mf as G,Nb as _,Ob as Be,Pa as i,Pb as we,Qb as be,Qd as At,Qf as de,Rb as Fe,Rf as Ae,Tb as oe,Ub as b,V as bt,Wa as P,Xa as Qt,Ya as R,Za as K,a as nt,ac as a,ae as lt,bb as g,bc as Et,c as wt,d as le,da as Ft,de as Re,ec as De,fh as Ze,ga as ge,gc as Kt,hb as F,ib as o,ma as xe,me as D,na as Q,ne as qe,ng as pt,oa as st,pa as V,q as fe,qa as T,r as We,rg as Xe,sb as c,sg as _e,tb as l,ub as d,uc as zt,uf as Jt,va as h,vb as re,wa as C,wb as ne,wc as Se,xc as $,yb as M,ye as Te,ze as ct,zf as k}from"./chunk-PRP3ZKGZ.js";import{a as Wt,b as Ht}from"./chunk-25N2FLV6.js";function ui(t,u){t&1&&(c(0,"div")(1,"div",10),d(2,"cx-spinner"),l()())}function fi(t,u){if(t&1){let e=M();c(0,"div",11)(1,"p",12),f(2),s(3,"cxTranslate"),l()(),c(4,"div",13)(5,"button",14),y("click",function(){h(e);let r=p(2);return C(r.closeAccount())}),f(6),s(7,"cxTranslate"),l(),c(8,"button",15),y("click",function(){h(e);let r=p(2);return C(r.dismissModal("Cancel"))}),f(9),s(10,"cxTranslate"),l()()}t&2&&(i(2),_(" ",a(3,3,"closeAccount.confirmAccountClosureMessage")," "),i(4),_(" ",a(7,5,"closeAccount.closeMyAccount")," "),i(3),_(" ",a(10,7,"common.cancel")," "))}function gi(t,u){if(t&1){let e=M();re(0),c(1,"div",2),y("esc",function(){h(e);let r=p();return C(r.dismissModal("Escape click"))}),c(2,"div",3)(3,"div",4)(4,"h3",5),f(5),s(6,"cxTranslate"),l(),c(7,"button",6),s(8,"cxTranslate"),s(9,"cxTranslate"),y("click",function(){h(e);let r=p();return C(r.dismissModal("Cross click"))}),c(10,"span",7),d(11,"cx-icon",8),l()()(),g(12,ui,3,0,"div",9),s(13,"async"),g(14,fi,11,9,"ng-template",null,0,De),l()(),ne()}if(t&2){let e=ze(15),n=p();i(),o("cxFocus",n.focusConfig),i(4),_(" ",a(6,7,"closeAccount.confirmAccountClosure")," "),i(2),w("title",a(8,9,"common.close")),F("aria-label",a(9,11,"common.close")),i(4),o("type",n.iconTypes.CLOSE),i(),o("ngIf",a(13,13,n.isLoading$))("ngIfElse",e)}}var xi=["element"],S=t=>({label:t});function _i(t,u){t&1&&d(0,"cx-spinner",8)}function vi(t,u){if(t&1&&(d(0,"cx-form-errors",9),s(1,"cxTranslate")),t&2){let e=p();o("translationParams",b(4,S,a(1,2,"forgottenPassword.emailAddress.label")))("control",e.form.get("userEmail"))}}function hi(t,u){if(t&1&&d(0,"cx-form-errors",10),t&2){let e=p();o("control",e.form.get("userEmail"))}}var Yt=()=>({}),ai=()=>({cxRoute:"termsAndConditions"}),li=()=>({cxRoute:"login"});function Ci(t,u){t&1&&(d(0,"div",34),s(1,"cxTranslate")),t&2&&F("aria-label",a(1,1,"common.loaded"))}function yi(t,u){if(t&1&&(d(0,"cx-form-errors",35),s(1,"cxTranslate")),t&2){let e=p(2);o("translationParams",b(4,S,a(1,2,"register.firstName.label")))("control",e.registerForm.get("firstName"))}}function wi(t,u){if(t&1&&d(0,"cx-form-errors",31),t&2){let e=p(2);o("control",e.registerForm.get("firstName"))}}function bi(t,u){if(t&1&&(d(0,"cx-form-errors",36),s(1,"cxTranslate")),t&2){let e=p(2);o("translationParams",b(4,S,a(1,2,"register.lastName.label")))("control",e.registerForm.get("lastName"))}}function Fi(t,u){if(t&1&&d(0,"cx-form-errors",31),t&2){let e=p(2);o("control",e.registerForm.get("lastName"))}}function Si(t,u){if(t&1&&(d(0,"cx-form-errors",37),s(1,"cxTranslate")),t&2){let e=p(2);o("translationParams",b(4,S,a(1,2,"register.emailAddress.label")))("control",e.registerForm.get("email"))}}function Ti(t,u){if(t&1&&d(0,"cx-form-errors",31),t&2){let e=p(2);o("control",e.registerForm.get("email"))}}function Ei(t,u){if(t&1&&(d(0,"cx-form-errors",38),s(1,"cxTranslate")),t&2){let e=p(2);o("translationParams",b(4,S,a(1,2,"register.password.label")))("control",e.registerForm.get("password"))}}function Ai(t,u){if(t&1&&d(0,"cx-form-errors",31),t&2){let e=p(2);o("control",e.registerForm.get("password"))}}function Pi(t,u){if(t&1&&(d(0,"cx-form-errors",39),s(1,"cxTranslate")),t&2){let e=p(2);o("translationParams",b(4,S,a(1,2,"register.confirmPassword.label")))("control",e.registerForm.get("passwordconf"))}}function Ii(t,u){if(t&1&&d(0,"cx-form-errors",31),t&2){let e=p(2);o("control",e.registerForm.get("passwordconf"))}}function Mi(t,u){if(t&1&&(c(0,"label"),d(1,"input",40),c(2,"span",27),f(3),l()()),t&2){let e=p().ngIf,n=p(2);i(),o("checked",n.isConsentGiven(e.consent)),i(2),_(" ",e.template," ")}}function ki(t,u){if(t&1&&(re(0),g(1,Mi,4,2,"label",24),ne()),t&2){let e=u.ngIf;i(),o("ngIf",e.template)}}function Vi(t,u){t&1&&(re(0),d(1,"cx-form-required-asterisks"),ne())}function Ni(t,u){if(t&1){let e=M();c(0,"div")(1,"label")(2,"input",44),y("change",function(r){h(e);let m=p().index,x=p(3);return C(x.updateAdditionalConsents(r,m))}),l(),c(3,"span",27),f(4),g(5,Vi,2,0,"ng-container",24),l(),d(6,"cx-form-errors",31),l()()}if(t&2){let e=u.ngIf,n=p(),r=n.$implicit,m=n.index,x=p().ngIf;i(2),o("required",x[m].required)("name",e),i(2),_(" ",x[m].template.description," "),i(),o("ngIf",x[m].required),i(),o("control",r.get("isConsentGranted"))}}function Bi(t,u){if(t&1&&(c(0,"div",43),g(1,Ni,7,5,"div",24),l()),t&2){let e=u.index,n=p().ngIf;o("formGroupName",e),i(),o("ngIf",n[e]==null||n[e].template==null?null:n[e].template.id)}}function Di(t,u){if(t&1&&(c(0,"div",41),g(1,Bi,2,2,"div",42),l()),t&2){let e=p(2);i(),o("ngForOf",e.additionalConsents.controls)}}function Ri(t,u){if(t&1&&(d(0,"cx-form-errors",45),s(1,"cxTranslate")),t&2){let e=p(2);o("translationParams",b(4,S,a(1,2,"register.termsAndConditions")))("control",e.registerForm.get("termsandconditions"))}}function qi(t,u){if(t&1&&d(0,"cx-form-errors",31),t&2){let e=p(2);o("control",e.registerForm.get("termsandconditions"))}}function $i(t,u){if(t&1){let e=M();c(0,"section",2),g(1,Ci,2,3,"div",3),c(2,"div",4)(3,"div",5)(4,"div",6),d(5,"cx-form-required-legend"),c(6,"form",7),y("ngSubmit",function(){h(e);let r=p();return C(r.submitForm())}),c(7,"div",8)(8,"label")(9,"span",9),f(10),s(11,"cxTranslate"),l(),d(12,"ng-select",10),s(13,"async"),s(14,"cxTranslate"),l()(),c(15,"div",8)(16,"label")(17,"span",9),f(18),s(19,"cxTranslate"),d(20,"cx-form-required-asterisks"),l(),d(21,"input",11),s(22,"cxTranslate"),g(23,yi,2,6,"cx-form-errors",12)(24,wi,1,1,"cx-form-errors",13),l()(),c(25,"div",8)(26,"label")(27,"span",9),f(28),s(29,"cxTranslate"),d(30,"cx-form-required-asterisks"),l(),d(31,"input",14),s(32,"cxTranslate"),g(33,bi,2,6,"cx-form-errors",15)(34,Fi,1,1,"cx-form-errors",13),l()(),c(35,"div",8)(36,"label")(37,"span",9),f(38),s(39,"cxTranslate"),d(40,"cx-form-required-asterisks"),l(),d(41,"input",16),s(42,"cxTranslate"),g(43,Si,2,6,"cx-form-errors",17)(44,Ti,1,1,"cx-form-errors",13),l()(),c(45,"div",8)(46,"label")(47,"span",9),f(48),s(49,"cxTranslate"),d(50,"cx-form-required-asterisks"),l(),d(51,"input",18),s(52,"cxTranslate"),s(53,"cxTranslate"),c(54,"p",19),f(55),s(56,"cxTranslate"),l(),g(57,Ei,2,6,"cx-form-errors",20)(58,Ai,1,1,"cx-form-errors",13),l()(),c(59,"div",8)(60,"label")(61,"span",9),f(62),s(63,"cxTranslate"),d(64,"cx-form-required-asterisks"),l(),d(65,"input",21),s(66,"cxTranslate"),s(67,"cxTranslate"),g(68,Pi,2,6,"cx-form-errors",22)(69,Ii,1,1,"cx-form-errors",13),l()(),c(70,"div",8)(71,"div",23),g(72,ki,2,1,"ng-container",24),s(73,"async"),l()(),g(74,Di,2,1,"div",25),c(75,"div",8)(76,"div",23)(77,"label"),d(78,"input",26),c(79,"span",27),f(80),s(81,"cxTranslate"),c(82,"a",28),s(83,"cxUrl"),f(84),s(85,"cxTranslate"),l(),d(86,"cx-form-required-asterisks"),l(),g(87,Ri,2,6,"cx-form-errors",29)(88,qi,1,1,"cx-form-errors",13),l()()(),c(89,"cx-captcha",30),y("confirmed",function(){h(e);let r=p();return C(r.captchaConfirmed())}),l(),d(90,"cx-form-errors",31),c(91,"button",32),f(92),s(93,"cxTranslate"),l(),c(94,"a",33),s(95,"cxUrl"),f(96),s(97,"cxTranslate"),l()()()()()()}if(t&2){let e,n,r,m,x,v=p();i(),o("cxFeature","!a11yRemoveStatusLoadedRole"),i(5),o("formGroup",v.registerForm),i(4),I(a(11,52,"register.titleOptional")),i(2),o("clearable",!1)("items",a(13,54,v.titles$))("placeholder",a(14,56,"register.selectTitle"))("searchable",!1)("cxNgSelectA11y",oe(98,Yt)),i(6),_("",a(19,58,"register.firstName.label")," "),i(3),w("placeholder",a(22,60,"register.firstName.placeholder")),F("aria-invalid",((e=v.registerForm.get("firstName"))==null?null:e.touched)&&((e=v.registerForm.get("firstName"))==null?null:e.invalid))("aria-errormessage","firstNameError"),i(2),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(4),_("",a(29,62,"register.lastName.label")," "),i(3),w("placeholder",a(32,64,"register.lastName.placeholder")),F("aria-invalid",((n=v.registerForm.get("lastName"))==null?null:n.touched)&&((n=v.registerForm.get("lastName"))==null?null:n.invalid))("aria-errormessage","lastNameError"),i(2),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(4),_("",a(39,66,"register.emailAddress.label")," "),i(3),w("placeholder",a(42,68,"register.emailAddress.placeholder")),F("aria-invalid",((r=v.registerForm.get("email"))==null?null:r.touched)&&((r=v.registerForm.get("email"))==null?null:r.invalid))("aria-errormessage","emailError"),i(2),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(4),_("",a(49,70,"register.password.label")," "),i(3),w("placeholder",a(52,72,"register.password.placeholder")),F("aria-label",a(53,74,"register.password.placeholder")),i(4),_(" ",a(56,76,"register.passwordMinRequirements")," "),i(2),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(4),_("",a(63,78,"register.confirmPassword.label")," "),i(3),w("placeholder",a(66,80,"register.confirmPassword.placeholder")),F("aria-label",a(67,82,"register.confirmPassword.placeholder"))("aria-invalid",((m=v.registerForm.get("passwordconf"))==null?null:m.touched)&&((m=v.registerForm.get("passwordconf"))==null?null:m.invalid))("aria-errormessage","passwordconfError"),i(3),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(3),o("ngIf",a(73,84,v.anonymousConsent$)),i(2),o("ngIf",v.additionalRegistrationConsents),i(4),F("aria-invalid",((x=v.registerForm.get("termsandconditions"))==null?null:x.touched)&&((x=v.registerForm.get("termsandconditions"))==null?null:x.invalid))("aria-errormessage","termsandconditionsError"),i(2),_(" ",a(81,86,"register.confirmThatRead")," "),i(2),o("routerLink",a(83,88,oe(99,ai))),i(2),_(" ",a(85,90,"register.termsAndConditions")," "),i(3),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(2),o("control",v.registerForm.get("captcha")),i(2),_(" ",a(93,92,"register.register")," "),i(2),o("routerLink",a(95,94,oe(100,li))),i(2),I(a(97,96,"register.signIn"))}}function Ui(t,u){t&1&&(c(0,"div",46),d(1,"cx-spinner"),l())}function Oi(t,u){t&1&&d(0,"cx-spinner",2)}function Li(t,u){if(t&1&&(d(0,"cx-form-errors",11),s(1,"cxTranslate")),t&2){let e=p(2);o("translationParams",b(4,S,a(1,2,"register.newPassword")))("control",e.form.get("password"))}}function Gi(t,u){if(t&1&&d(0,"cx-form-errors",12),t&2){let e=p(2);o("control",e.form.get("password"))}}function ji(t,u){if(t&1&&(d(0,"cx-form-errors",13),s(1,"cxTranslate")),t&2){let e=p(2);o("translationParams",b(4,S,a(1,2,"register.passwordMinRequirements")))("control",e.form.get("passwordConfirm"))}}function Yi(t,u){if(t&1&&d(0,"cx-form-errors",12),t&2){let e=p(2);o("control",e.form.get("passwordConfirm"))}}function Wi(t,u){if(t&1){let e=M();c(0,"form",3),y("ngSubmit",function(){let r=h(e).ngIf,m=p();return C(m.onSubmit(r))}),d(1,"cx-form-required-legend"),c(2,"label")(3,"span",4),f(4),s(5,"cxTranslate"),d(6,"cx-form-required-asterisks"),l(),d(7,"input",5),s(8,"cxTranslate"),s(9,"cxTranslate"),g(10,Li,2,6,"cx-form-errors",6)(11,Gi,1,1,"cx-form-errors",7),l(),c(12,"label")(13,"span",4),f(14),s(15,"cxTranslate"),d(16,"cx-form-required-asterisks"),l(),d(17,"input",8),s(18,"cxTranslate"),s(19,"cxTranslate"),g(20,ji,2,6,"cx-form-errors",9)(21,Yi,1,1,"cx-form-errors",7),l(),c(22,"button",10),f(23),s(24,"cxTranslate"),l()()}if(t&2){let e,n,r=p();o("formGroup",r.form),i(4),_("",a(5,17,"register.newPassword")," "),i(3),w("placeholder",a(8,19,"register.password.placeholder")),F("aria-label",a(9,21,"register.password.placeholder"))("aria-invalid",((e=r.form.get("password"))==null?null:e.touched)&&((e=r.form.get("password"))==null?null:e.invalid))("aria-errormessage","passwordError"),i(3),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(3),_("",a(15,23,"register.passwordMinRequirements")," "),i(3),w("placeholder",a(18,25,"register.confirmPassword.placeholder")),F("aria-label",a(19,27,"register.confirmPassword.placeholder"))("aria-invalid",((n=r.form.get("passwordConfirm"))==null?null:n.touched)&&((n=r.form.get("passwordConfirm"))==null?null:n.invalid))("aria-errormessage","passwordConfirmError"),i(3),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(),o("disabled",r.form.disabled),i(),_(" ",a(24,29,"register.resetPassword")," ")}}var Hi=()=>({cxRoute:"home"});function Qi(t,u){t&1&&d(0,"cx-spinner",12)}function Ki(t,u){if(t&1&&(d(0,"cx-form-errors",13),s(1,"cxTranslate")),t&2){let e=p();o("translationParams",b(4,S,a(1,2,"updateEmailForm.newEmailAddress.label")))("control",e.form.get("email"))}}function zi(t,u){if(t&1&&d(0,"cx-form-errors",14),t&2){let e=p();o("control",e.form.get("email"))}}function Ji(t,u){if(t&1&&(d(0,"cx-form-errors",15),s(1,"cxTranslate")),t&2){let e=p();o("translationParams",b(4,S,a(1,2,"updateEmailForm.confirmNewEmailAddress.label")))("control",e.form.get("confirmEmail"))}}function Xi(t,u){if(t&1&&d(0,"cx-form-errors",14),t&2){let e=p();o("control",e.form.get("confirmEmail"))}}function Zi(t,u){if(t&1&&(d(0,"cx-form-errors",16),s(1,"cxTranslate")),t&2){let e=p();o("translationParams",b(4,S,a(1,2,"updateEmailForm.password.label")))("control",e.form.get("password"))}}function er(t,u){if(t&1&&d(0,"cx-form-errors",14),t&2){let e=p();o("control",e.form.get("password"))}}function tr(t,u){t&1&&d(0,"cx-spinner",7)}function ir(t,u){if(t&1){let e=M();c(0,"button",8),y("click",function(){h(e);let r=p();return C(r.onEdit())}),f(1),s(2,"cxTranslate"),l()}t&2&&(i(),_(" ",a(2,1,"common.edit")," "))}function rr(t,u){if(t&1&&(c(0,"div")(1,"div",1)(2,"label",9),f(3),s(4,"cxTranslate"),l(),c(5,"label",10),f(6),s(7,"async"),l()()()),t&2){let e,n=p();i(3),_(" ",a(4,2,"myAccountV2Email.email")," "),i(3),_(" ",(e=a(7,4,n.user$))==null?null:e.uid," ")}}function nr(t,u){if(t&1){let e=M();c(0,"cx-message",11),s(1,"cxTranslate"),y("closeMessage",function(){h(e);let r=p();return C(r.closeDialogConfirmationAlert())}),l()}if(t&2){let e=p();o("text",a(1,2,"myAccountV2Email.reloginIndicator"))("type",e.globalMessageType.MSG_TYPE_INFO)}}function or(t,u){if(t&1&&(d(0,"cx-form-errors",26),s(1,"cxTranslate")),t&2){let e=p(2);o("translationParams",b(4,S,a(1,2,"updateEmailForm.newEmailAddress.label")))("control",e.form.get("email"))}}function sr(t,u){if(t&1&&d(0,"cx-form-errors",27),t&2){let e=p(2);o("control",e.form.get("email"))}}function ar(t,u){if(t&1&&(d(0,"cx-form-errors",28),s(1,"cxTranslate")),t&2){let e=p(2);o("translationParams",b(4,S,a(1,2,"updateEmailForm.confirmNewEmailAddress.label")))("control",e.form.get("confirmEmail"))}}function lr(t,u){if(t&1&&d(0,"cx-form-errors",27),t&2){let e=p(2);o("control",e.form.get("confirmEmail"))}}function cr(t,u){if(t&1&&(d(0,"cx-form-errors",29),s(1,"cxTranslate")),t&2){let e=p(2);o("translationParams",b(4,S,a(1,2,"updateEmailForm.password.label")))("control",e.form.get("password"))}}function dr(t,u){if(t&1&&d(0,"cx-form-errors",27),t&2){let e=p(2);o("control",e.form.get("password"))}}function pr(t,u){if(t&1){let e=M();c(0,"div",12)(1,"form",13),y("ngSubmit",function(){h(e);let r=p();return C(r.onSubmit())}),c(2,"label")(3,"span",9),f(4),s(5,"cxTranslate"),l(),d(6,"input",14),s(7,"async"),l(),c(8,"label")(9,"span",9),f(10),s(11,"cxTranslate"),l(),d(12,"input",15),s(13,"cxTranslate"),g(14,or,2,6,"cx-form-errors",16)(15,sr,1,1,"cx-form-errors",17),l(),c(16,"label")(17,"span",9),f(18),s(19,"cxTranslate"),l(),d(20,"input",18),s(21,"cxTranslate"),g(22,ar,2,6,"cx-form-errors",19)(23,lr,1,1,"cx-form-errors",17),l(),c(24,"label")(25,"span",20),f(26),s(27,"cxTranslate"),l(),d(28,"input",21),s(29,"cxTranslate"),s(30,"cxTranslate"),g(31,cr,2,6,"cx-form-errors",22)(32,dr,1,1,"cx-form-errors",17),l(),c(33,"div",23)(34,"button",24),y("click",function(){h(e);let r=p();return C(r.cancelEdit())}),f(35),s(36,"cxTranslate"),l(),c(37,"button",25),y("click",function(){h(e);let r=p();return C(r.onSubmit())}),f(38),s(39,"cxTranslate"),l()()()()}if(t&2){let e,n,r,m,x=p();i(),o("formGroup",x.form),i(3),I(a(5,25,"myAccountV2Email.emailAddress")),i(2),o("value",(e=a(7,27,x.user$))==null?null:e.uid),i(4),I(a(11,29,"myAccountV2Email.newEmailAddress")),i(2),w("placeholder",a(13,31,"myAccountV2Email.emailPlaceHolder")),F("aria-invalid",((n=x.form.get("email"))==null?null:n.touched)&&((n=x.form.get("email"))==null?null:n.invalid))("aria-errormessage","emailError"),i(2),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(3),I(a(19,33,"myAccountV2Email.confirmNewEmailAddress")),i(2),w("placeholder",a(21,35,"myAccountV2Email.emailPlaceHolder")),F("aria-invalid",((r=x.form.get("confirmEmail"))==null?null:r.touched)&&((r=x.form.get("confirmEmail"))==null?null:r.invalid))("aria-errormessage","confirmEmailError"),i(2),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(3),I(a(27,37,"myAccountV2Email.password")),i(2),w("placeholder",a(29,39,"myAccountV2Email.passwordPlaceHolder")),F("aria-label",a(30,41,"myAccountV2Email.passwordPlaceHolder"))("aria-invalid",((m=x.form.get("password"))==null?null:m.touched)&&((m=x.form.get("password"))==null?null:m.invalid))("aria-errormessage","passwordError"),i(3),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(3),_(" ",a(36,43,"common.cancel")," "),i(2),o("disabled",x.form.disabled),i(),_(" ",a(39,45,"common.save")," ")}}function mr(t,u){t&1&&d(0,"cx-spinner",12)}function ur(t,u){if(t&1&&(d(0,"cx-form-errors",13),s(1,"cxTranslate")),t&2){let e=p();o("translationParams",b(4,S,a(1,2,"updatePasswordForm.oldPassword.label")))("control",e.form.get("oldPassword"))}}function fr(t,u){if(t&1&&d(0,"cx-form-errors",14),t&2){let e=p();o("control",e.form.get("oldPassword"))}}function gr(t,u){if(t&1&&(d(0,"cx-form-errors",15),s(1,"cxTranslate")),t&2){let e=p();o("translationParams",b(4,S,a(1,2,"updatePasswordForm.newPassword.label")))("control",e.form.get("newPassword"))}}function xr(t,u){if(t&1&&d(0,"cx-form-errors",14),t&2){let e=p();o("control",e.form.get("newPassword"))}}function _r(t,u){if(t&1&&(d(0,"cx-form-errors",16),s(1,"cxTranslate")),t&2){let e=p();o("translationParams",b(4,S,a(1,2,"updatePasswordForm.confirmPassword.label")))("control",e.form.get("newPasswordConfirm"))}}function vr(t,u){if(t&1&&d(0,"cx-form-errors",14),t&2){let e=p();o("control",e.form.get("newPasswordConfirm"))}}function hr(t,u){t&1&&d(0,"cx-spinner",16)}function Cr(t,u){if(t&1){let e=M();c(0,"cx-message",17),s(1,"cxTranslate"),y("closeMessage",function(){h(e);let r=p();return C(r.closeDialogConfirmationAlert())}),l()}if(t&2){let e=p();o("text",a(1,2,"myAccountV2PasswordForm.reloginIndicator"))("type",e.globalMessageType.MSG_TYPE_INFO)}}function yr(t,u){if(t&1&&(d(0,"cx-form-errors",18),s(1,"cxTranslate")),t&2){let e=p();o("translationParams",b(4,S,a(1,2,"updatePasswordForm.oldPassword.label")))("control",e.form.get("oldPassword"))}}function wr(t,u){if(t&1&&d(0,"cx-form-errors",19),t&2){let e=p();o("control",e.form.get("oldPassword"))}}function br(t,u){if(t&1&&(d(0,"cx-form-errors",20),s(1,"cxTranslate")),t&2){let e=p();o("translationParams",b(4,S,a(1,2,"updatePasswordForm.newPassword.label")))("control",e.form.get("newPassword"))}}function Fr(t,u){if(t&1&&d(0,"cx-form-errors",19),t&2){let e=p();o("control",e.form.get("newPassword"))}}function Sr(t,u){if(t&1&&(d(0,"cx-form-errors",21),s(1,"cxTranslate")),t&2){let e=p();o("translationParams",b(4,S,a(1,2,"updatePasswordForm.confirmPassword.label")))("control",e.form.get("newPasswordConfirm"))}}function Tr(t,u){if(t&1&&d(0,"cx-form-errors",19),t&2){let e=p();o("control",e.form.get("newPasswordConfirm"))}}var yt=t=>({ariaLabel:t});function Er(t,u){t&1&&d(0,"cx-spinner",14)}function Ar(t,u){if(t&1&&(c(0,"ng-option",15),f(1),l()),t&2){let e=u.$implicit;o("value",e.code),i(),I(e.name)}}function Pr(t,u){if(t&1&&(d(0,"cx-form-errors",16),s(1,"cxTranslate")),t&2){let e=p();o("translationParams",b(4,S,a(1,2,"updateProfileForm.firstName.label")))("control",e.form.get("firstName"))}}function Ir(t,u){if(t&1&&d(0,"cx-form-errors",17),t&2){let e=p();o("control",e.form.get("firstName"))}}function Mr(t,u){if(t&1&&(d(0,"cx-form-errors",18),s(1,"cxTranslate")),t&2){let e=p();o("translationParams",b(4,S,a(1,2,"updateProfileForm.lastName.label")))("control",e.form.get("lastName"))}}function kr(t,u){if(t&1&&d(0,"cx-form-errors",17),t&2){let e=p();o("control",e.form.get("lastName"))}}function Vr(t,u){if(t&1&&(d(0,"cx-form-errors",19),s(1,"cxTranslate")),t&2){let e=p();o("translationParams",b(4,S,a(1,2,"updateProfileForm.customerId")))("control",e.form.get("customerId"))}}function Nr(t,u){if(t&1&&d(0,"cx-form-errors",17),t&2){let e=p();o("control",e.form.get("customerId"))}}function Br(t,u){t&1&&d(0,"cx-spinner",6)}function Dr(t,u){if(t&1){let e=M();c(0,"button",7),y("click",function(){h(e);let r=p();return C(r.onEdit())}),f(1),s(2,"cxTranslate"),l()}t&2&&(i(),_(" ",a(2,1,"common.edit")," "))}function Rr(t,u){if(t&1&&(c(0,"div")(1,"div",1)(2,"label",8),f(3),s(4,"cxTranslate"),l(),c(5,"label",9),f(6),s(7,"async"),l()(),c(8,"div",1)(9,"label",8),f(10),s(11,"cxTranslate"),l(),c(12,"label",9),f(13),s(14,"async"),s(15,"async"),l()(),c(16,"div",1)(17,"label",8),f(18),s(19,"cxTranslate"),l(),c(20,"label",9),f(21),s(22,"async"),l()()()),t&2){let e,n,r,m=p();i(3),_(" ",a(4,7,"myAccountV2UserProfile.title")," "),i(3),_(" ",(e=a(7,9,m.user$))==null?null:e.title," "),i(4),_(" ",a(11,11,"myAccountV2UserProfile.name")," "),i(3),Be(" ",(n=a(14,13,m.user$))==null?null:n.firstName," ",(n=a(15,15,m.user$))==null?null:n.lastName," "),i(5),_(" ",a(19,17,"myAccountV2UserProfile.customerId")," "),i(3),_(" ",(r=a(22,19,m.user$))==null?null:r.customerId," ")}}function qr(t,u){if(t&1&&(c(0,"ng-option",25),f(1),l()),t&2){let e=u.$implicit;o("value",e.code),i(),I(e.name)}}function $r(t,u){if(t&1&&(d(0,"cx-form-errors",26),s(1,"cxTranslate")),t&2){let e=p(2);o("translationParams",b(4,S,a(1,2,"updateProfileForm.firstName.label")))("control",e.form.get("firstName"))}}function Ur(t,u){if(t&1&&d(0,"cx-form-errors",27),t&2){let e=p(2);o("control",e.form.get("firstName"))}}function Or(t,u){if(t&1&&(d(0,"cx-form-errors",28),s(1,"cxTranslate")),t&2){let e=p(2);o("translationParams",b(4,S,a(1,2,"updateProfileForm.lastName.label")))("control",e.form.get("lastName"))}}function Lr(t,u){if(t&1&&d(0,"cx-form-errors",27),t&2){let e=p(2);o("control",e.form.get("lastName"))}}function Gr(t,u){if(t&1&&(d(0,"cx-form-errors",29),s(1,"cxTranslate")),t&2){let e=p(2);o("translationParams",b(4,S,a(1,2,"updateProfileForm.customerId")))("control",e.form.get("customerId"))}}function jr(t,u){if(t&1&&d(0,"cx-form-errors",27),t&2){let e=p(2);o("control",e.form.get("customerId"))}}function Yr(t,u){if(t&1){let e=M();c(0,"div",10)(1,"form",11),y("ngSubmit",function(){h(e);let r=p();return C(r.onSubmit())}),c(2,"label")(3,"span",12),f(4),s(5,"cxTranslate"),l(),c(6,"ng-select",13),s(7,"cxTranslate"),g(8,qr,2,2,"ng-option",14),s(9,"async"),l()(),c(10,"label")(11,"span",12),f(12),s(13,"cxTranslate"),l(),d(14,"input",15),g(15,$r,2,6,"cx-form-errors",16)(16,Ur,1,1,"cx-form-errors",17),l(),c(17,"label")(18,"span",12),f(19),s(20,"cxTranslate"),l(),d(21,"input",18),g(22,Or,2,6,"cx-form-errors",19)(23,Lr,1,1,"cx-form-errors",17),l(),c(24,"label")(25,"span",12),f(26),s(27,"cxTranslate"),l(),d(28,"input",20),g(29,Gr,2,6,"cx-form-errors",21)(30,jr,1,1,"cx-form-errors",17),l()(),c(31,"div",22)(32,"button",23),y("click",function(){h(e);let r=p();return C(r.cancelEdit())}),f(33),s(34,"cxTranslate"),l(),c(35,"button",24),y("click",function(){h(e);let r=p();return C(r.onSubmit())}),f(36),s(37,"cxTranslate"),l()()()}if(t&2){let e,n,r,m=p();i(),o("formGroup",m.form),i(3),I(a(5,24,"myAccountV2UserProfile.title")),i(2),o("clearable",!1)("searchable",!1)("cxNgSelectA11y",b(40,yt,a(7,26,"myAccountV2UserProfile.title"))),i(2),o("ngForOf",a(9,28,m.titles$)),i(4),I(a(13,30,"myAccountV2UserProfile.firstName")),i(2),F("aria-invalid",((e=m.form.get("firstName"))==null?null:e.touched)&&((e=m.form.get("firstName"))==null?null:e.invalid))("aria-errormessage","firstNameError"),i(),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(3),I(a(20,32,"myAccountV2UserProfile.lastName")),i(2),F("aria-invalid",((n=m.form.get("lastName"))==null?null:n.touched)&&((n=m.form.get("lastName"))==null?null:n.invalid))("aria-errormessage","lastNameError"),i(),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(3),I(a(27,34,"myAccountV2UserProfile.customerId")),i(2),F("aria-invalid",((r=m.form.get("customerId"))==null?null:r.touched)&&((r=m.form.get("customerId"))==null?null:r.invalid))("aria-errormessage","customerIdError"),i(),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(3),_(" ",a(34,36,"common.cancel")," "),i(2),o("disabled",m.form.disabled),i(),_(" ",a(37,38,"common.save")," ")}}var Wr=["submit"],ci=()=>({required:"true"});function Hr(t,u){if(t&1&&(d(0,"cx-form-errors",32),s(1,"cxTranslate")),t&2){let e=p(3);o("translationParams",b(4,S,a(1,2,"addressForm.country")))("control",e.addressForm.get("country.isocode"))}}function Qr(t,u){if(t&1&&d(0,"cx-form-errors",33),t&2){let e=p(3);o("control",e.addressForm.get("country.isocode"))}}function Kr(t,u){if(t&1){let e=M();c(0,"div")(1,"label")(2,"span",6),f(3),s(4,"cxTranslate"),d(5,"cx-form-required-asterisks"),l(),c(6,"ng-select",30),s(7,"cxTranslate"),y("change",function(r){h(e);let m=p(2);return C(m.countrySelected(r))}),l(),g(8,Hr,2,6,"cx-form-errors",31)(9,Qr,1,1,"cx-form-errors",9),l()()}if(t&2){let e=p().ngIf;i(3),_("",a(4,9,"addressForm.country")," "),i(3),w("placeholder",a(7,11,"addressForm.selectOne")),o("inputAttrs",oe(13,ci))("searchable",!0)("clearable",!1)("items",e)("cxNgSelectA11y",oe(14,Yt)),i(2),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages")}}function zr(t,u){if(t&1&&(re(0),g(1,Kr,10,15,"div",3),ne()),t&2){let e=u.ngIf;i(),o("ngIf",e.length!==0)}}function Jr(t,u){if(t&1&&(c(0,"div")(1,"label")(2,"span",6),f(3),s(4,"cxTranslate"),l(),d(5,"ng-select",34),s(6,"cxTranslate"),s(7,"cxTranslate"),l()()),t&2){let e=p().ngIf;i(3),I(a(4,6,"addressForm.titleOptional")),i(2),o("searchable",!0)("clearable",!1)("items",e)("placeholder",a(6,8,"addressForm.title"))("cxNgSelectA11y",b(12,yt,a(7,10,"addressForm.title")))}}function Xr(t,u){if(t&1&&(re(0),g(1,Jr,8,14,"div",3),ne()),t&2){let e=u.ngIf;i(),o("ngIf",e.length!==0)}}function Zr(t,u){if(t&1&&(c(0,"div",5),g(1,Xr,2,1,"ng-container",3),s(2,"async"),l()),t&2){let e=p();i(),o("ngIf",a(2,1,e.titles$))}}function en(t,u){if(t&1&&(d(0,"cx-form-errors",35),s(1,"cxTranslate")),t&2){let e=p();o("translationParams",b(4,S,a(1,2,"addressForm.firstName.label")))("control",e.addressForm.get("firstName"))}}function tn(t,u){if(t&1&&d(0,"cx-form-errors",33),t&2){let e=p();o("control",e.addressForm.get("firstName"))}}function rn(t,u){if(t&1&&(d(0,"cx-form-errors",36),s(1,"cxTranslate")),t&2){let e=p();o("translationParams",b(4,S,a(1,2,"addressForm.lastName.label")))("control",e.addressForm.get("lastName"))}}function nn(t,u){if(t&1&&d(0,"cx-form-errors",33),t&2){let e=p();o("control",e.addressForm.get("lastName"))}}function on(t,u){if(t&1&&(d(0,"cx-form-errors",37),s(1,"cxTranslate")),t&2){let e=p();o("translationParams",b(4,S,a(1,2,"addressForm.address1")))("control",e.addressForm.get("line1"))}}function sn(t,u){if(t&1&&d(0,"cx-form-errors",33),t&2){let e=p();o("control",e.addressForm.get("line1"))}}function an(t,u){if(t&1&&(d(0,"cx-form-errors",38),s(1,"cxTranslate")),t&2){let e=p();o("translationParams",b(4,S,a(1,2,"addressForm.city.label")))("control",e.addressForm.get("town"))}}function ln(t,u){if(t&1&&d(0,"cx-form-errors",33),t&2){let e=p();o("control",e.addressForm.get("town"))}}function cn(t,u){if(t&1&&(d(0,"cx-form-errors",39),s(1,"cxTranslate")),t&2){let e=p();o("translationParams",b(4,S,a(1,2,"addressForm.zipCode.label")))("control",e.addressForm.get("postalCode"))}}function dn(t,u){if(t&1&&d(0,"cx-form-errors",33),t&2){let e=p();o("control",e.addressForm.get("postalCode"))}}function pn(t,u){if(t&1&&(re(0),c(1,"div",23)(2,"label")(3,"span",6),f(4),s(5,"cxTranslate"),d(6,"cx-form-required-asterisks"),l(),d(7,"ng-select",41),s(8,"cxTranslate"),s(9,"cxTranslate"),d(10,"cx-form-errors",33),l()(),ne()),t&2){let e=p().ngIf,n=p();i(4),_("",a(5,10,"addressForm.state")," "),i(3),w("bindLabel",e[0].name?"name":"isocode"),w("bindValue",e[0].name?"isocode":"region"),w("placeholder",a(8,12,"addressForm.selectOne")),o("inputAttrs",oe(16,ci))("searchable",!0)("clearable",!1)("items",e)("cxNgSelectA11y",b(17,yt,a(9,14,"addressForm.state"))),i(3),o("control",n.addressForm.get("region.isocode"))}}function mn(t,u){if(t&1&&(re(0,40),g(1,pn,11,19,"ng-container",3),ne()),t&2){let e=u.ngIf;i(),o("ngIf",e.length!==0)}}function un(t,u){if(t&1){let e=M();c(0,"div",5)(1,"div",42)(2,"label")(3,"input",43),y("change",function(){h(e);let r=p();return C(r.toggleDefaultAddress())}),l(),c(4,"span",44),f(5),s(6,"cxTranslate"),l()()()()}t&2&&(i(5),I(a(6,1,"addressForm.setAsDefault")))}function fn(t,u){if(t&1){let e=M();c(0,"div",28)(1,"button",45),y("click",function(){h(e);let r=p();return C(r.back())}),f(2),s(3,"cxTranslate"),l()()}if(t&2){let e=p();i(2),_(" ",e.cancelBtnLabel||a(3,1,"addressForm.chooseAddress")," ")}}function gn(t,u){t&1&&(d(0,"div",10),s(1,"cxTranslate")),t&2&&F("aria-label",a(1,1,"common.loaded"))}function xn(t,u){if(t&1){let e=M();c(0,"div",11)(1,"cx-card",12),s(2,"async"),y("editCard",function(){let r=h(e).$implicit,m=p(3);return C(m.editAddressButtonHandle(r))})("setDefaultCard",function(){let r=h(e).$implicit,m=p(3);return C(m.setAddressAsDefault(r))})("deleteCard",function(){let r,m=h(e).$implicit,x=p(3);return C(x.setEdit((r=m.id)!==null&&r!==void 0?r:""))})("cancelCard",function(){h(e);let r=p(3);return C(r.cancelCard())}),l()()}if(t&2){let e=u.$implicit,n=u.index,r=p(3);i(),o("index",n)("border",!0)("fitToContainer",!0)("content",a(2,5,r.getCardContent(e)))("editMode",e.id===r.editCard)}}function _n(t,u){if(t&1&&(c(0,"div",7),g(1,gn,2,3,"div",8)(2,xn,3,7,"div",9),s(3,"async"),l()),t&2){let e=p(2);i(),o("cxFeature","!a11yRemoveStatusLoadedRole"),i(),o("ngForOf",a(3,2,e.addresses$))}}function vn(t,u){if(t&1){let e=M();re(0),c(1,"div",3)(2,"div",4)(3,"button",5),y("click",function(){h(e);let r=p();return C(r.addAddressButtonHandle())}),f(4),s(5,"cxTranslate"),l()()(),g(6,_n,4,4,"div",6),s(7,"async"),ne()}if(t&2){let e=p(),n=ze(7);i(4),_(" ",a(5,3,"addressBook.addNewAddress")," "),i(2),o("ngIf",!a(7,5,e.addressesStateLoading$))("ngIfElse",n)}}function hn(t,u){if(t&1){let e=M();re(0),c(1,"section")(2,"h2",13),f(3),s(4,"cxTranslate"),l(),c(5,"cx-address-form",14),s(6,"cxTranslate"),s(7,"cxTranslate"),s(8,"async"),s(9,"async"),y("submitAddress",function(r){h(e);let m=p();return C(m.addAddressSubmit(r))})("backToAddress",function(){h(e);let r=p();return C(r.addAddressCancel())})("cancelCard",function(){h(e);let r=p();return C(r.cancelCard())}),l()(),ne()}if(t&2){let e,n,r=p();i(3),_(" ",a(4,6,"addressBook.addNewDeliveryAddress")," "),i(2),w("actionBtnLabel",a(6,8,"addressBook.addAddress")),w("cancelBtnLabel",a(7,10,"addressBook.backToAddressList")),o("showTitleCode",!0)("showCancelBtn",((e=a(8,12,r.addresses$))==null?null:e.length)!==0)("setAsDefaultField",((n=a(9,14,r.addresses$))==null?null:n.length)!==0)}}function Cn(t,u){if(t&1){let e=M();re(0),c(1,"section")(2,"h2",13),f(3),s(4,"cxTranslate"),l(),c(5,"cx-address-form",15),s(6,"cxTranslate"),s(7,"cxTranslate"),y("submitAddress",function(r){h(e);let m=p();return C(m.editAddressSubmit(r))})("backToAddress",function(){h(e);let r=p();return C(r.editAddressCancel())}),l()(),ne()}if(t&2){let e=p();i(3),_(" ",a(4,5,"addressBook.editDeliveryAddress")," "),i(2),w("actionBtnLabel",a(6,7,"addressBook.updateAddress")),w("cancelBtnLabel",a(7,9,"addressBook.backToAddressList")),o("showTitleCode",!0)("addressData",e.currentAddress)}}function yn(t,u){t&1&&(c(0,"div",16),d(1,"cx-spinner"),l())}function wn(t,u){t&1&&(c(0,"h3",23),f(1),s(2,"cxTranslate"),l()),t&2&&(i(),_(" ",a(2,1,"addressSuggestion.verifyYourAddress")," "))}function bn(t,u){t&1&&(c(0,"div",23),f(1),s(2,"cxTranslate"),l()),t&2&&(i(),_(" ",a(2,1,"addressSuggestion.verifyYourAddress")," "))}function Fn(t,u){if(t&1){let e=M();c(0,"div",12)(1,"input",24),Fe("ngModelChange",function(r){h(e);let m=p(2);return be(m.selectedAddress,r)||(m.selectedAddress=r),C(r)}),l(),c(2,"label",25),f(3),s(4,"cxTranslate"),l(),c(5,"div",26)(6,"div",16)(7,"div",17),f(8),l(),c(9,"div",17),f(10),l(),c(11,"div",17),f(12),l(),c(13,"div",17)(14,"span"),f(15),l()(),c(16,"div",17),f(17),l(),c(18,"div",17),f(19),l(),c(20,"div",17),f(21),l()()()()}if(t&2){let e=u.$implicit,n=u.index,r=p().ngIf,m=p();i(),we("ngModel",m.selectedAddress),o("value",e)("id","suggested-addresses--suggested-"+n),i(),o("for","suggested-addresses--suggested-"+n),i(),Be(" ",a(4,13,"addressSuggestion.suggestedAddress")," ",r.suggestedAddresses.length>1?n+1:null," "),i(5),I(e==null?null:e.firstName),i(2),I(e==null?null:e.lastName),i(2),I(e==null?null:e.line1),i(3),I(e==null?null:e.line2),i(2),I(e==null?null:e.town),i(2),_(" ",e==null||e.region==null?null:e.region.isocode," "),i(2),_(" ",e==null?null:e.postalCode," ")}}function Sn(t,u){if(t&1){let e=M();c(0,"div",2)(1,"div",3),g(2,wn,3,3,"h3",4)(3,bn,3,3,"div",4),c(4,"button",5),s(5,"cxTranslate"),s(6,"cxTranslate"),y("click",function(){h(e);let r=p();return C(r.closeModal("Cross click"))}),c(7,"span",6),d(8,"cx-icon",7),l()()(),c(9,"div",8)(10,"div",9)(11,"p"),f(12),s(13,"cxTranslate"),s(14,"cxTranslate"),l()(),c(15,"div",10),g(16,Fn,22,15,"div",11),c(17,"div",12)(18,"input",13),Fe("ngModelChange",function(r){h(e);let m=p();return be(m.selectedAddress,r)||(m.selectedAddress=r),C(r)}),l(),c(19,"label",14),f(20),s(21,"cxTranslate"),l(),c(22,"div",15)(23,"div",16)(24,"div",17),f(25),l(),c(26,"div",17),f(27),l(),c(28,"div",17)(29,"span"),f(30),l()(),c(31,"div",17),f(32),l(),c(33,"div",17),f(34),l()()()()()(),c(35,"div",18)(36,"div",19)(37,"div",20)(38,"button",21),y("click",function(){h(e);let r=p();return C(r.closeModal("Edit address"))}),f(39),s(40,"cxTranslate"),l(),c(41,"button",22),y("click",function(){h(e);let r=p();return C(r.closeModal(r.selectedAddress))}),f(42),s(43,"cxTranslate"),l()()()()()}if(t&2){let e=u.ngIf,n=p();i(2),o("cxFeature","a11yDialogsHeading"),i(),o("cxFeature","!a11yDialogsHeading"),i(),w("title",a(5,20,"common.close")),F("aria-label",a(6,22,"common.close")),i(4),o("type",n.iconTypes.CLOSE),i(4),Be(" ",a(13,24,"addressSuggestion.ensureAccuracySuggestChange")," ",a(14,26,"addressSuggestion.chooseAddressToUse")," "),i(4),o("ngForOf",e.suggestedAddresses),i(2),we("ngModel",n.selectedAddress),o("value",e.enteredAddress),i(2),_(" ",a(21,28,"addressSuggestion.enteredAddress")," "),i(5),Be(" ",e.enteredAddress==null?null:e.enteredAddress.firstName," ",e.enteredAddress==null?null:e.enteredAddress.lastName," "),i(2),I(e.enteredAddress==null?null:e.enteredAddress.line1),i(3),I(e.enteredAddress==null?null:e.enteredAddress.line2),i(2),Be(" ",e.enteredAddress==null?null:e.enteredAddress.town," ",e.enteredAddress==null||e.enteredAddress.region==null?null:e.enteredAddress.region.isocode," "),i(2),_(" ",e.enteredAddress==null?null:e.enteredAddress.postalCode," "),i(5),_(" ",a(40,30,"addressSuggestion.editAddress")," "),i(3),_(" ",a(43,32,"addressSuggestion.saveAddress")," ")}}function Tn(t,u){t&1&&(d(0,"div",26),s(1,"cxTranslate")),t&2&&F("aria-label",a(1,1,"common.loaded"))}function En(t,u){if(t&1&&(d(0,"cx-form-errors",27),s(1,"cxTranslate")),t&2){let e=p(2);o("translationParams",b(4,S,a(1,2,"register.firstName.label")))("control",e.registerForm.get("firstName"))}}function An(t,u){if(t&1&&d(0,"cx-form-errors",23),t&2){let e=p(2);o("control",e.registerForm.get("firstName"))}}function Pn(t,u){if(t&1&&(d(0,"cx-form-errors",27),s(1,"cxTranslate")),t&2){let e=p(2);o("translationParams",b(4,S,a(1,2,"register.lastName.label")))("control",e.registerForm.get("lastName"))}}function In(t,u){if(t&1&&d(0,"cx-form-errors",23),t&2){let e=p(2);o("control",e.registerForm.get("lastName"))}}function Mn(t,u){if(t&1&&(d(0,"cx-form-errors",27),s(1,"cxTranslate")),t&2){let e=p(2);o("translationParams",b(4,S,a(1,2,"register.emailAddress.label")))("control",e.registerForm.get("email"))}}function kn(t,u){if(t&1&&d(0,"cx-form-errors",23),t&2){let e=p(2);o("control",e.registerForm.get("email"))}}function Vn(t,u){if(t&1&&(c(0,"label"),d(1,"input",28),c(2,"span",20),f(3),l()()),t&2){let e=u.ngIf,n=p(2);i(),o("checked",n.isConsentGiven(e.consent)),i(2),_(" ",e.template," ")}}function Nn(t,u){if(t&1){let e=M();c(0,"div")(1,"label")(2,"input",31),y("change",function(r){h(e);let m=p().index,x=p(3);return C(x.updateAdditionalConsents(r,m))}),l(),c(3,"span",20),f(4),l(),d(5,"cx-form-errors",23),l()()}if(t&2){let e=u.ngIf,n=p(),r=n.$implicit,m=n.index,x=p().ngIf;i(2),o("required",x[m].required)("name",e)("formControlName",m),i(2),_(" ",x[m].template.description," "),i(),o("control",r)}}function Bn(t,u){if(t&1&&(c(0,"div",16),g(1,Nn,6,5,"div",17),l()),t&2){let e=u.index,n=p().ngIf;i(),o("ngIf",n[e]==null||n[e].template==null?null:n[e].template.id)}}function Dn(t,u){if(t&1&&(c(0,"div",29),g(1,Bn,2,1,"div",30),l()),t&2){let e=p(2);i(),o("ngForOf",e.additionalConsents.controls)}}function Rn(t,u){if(t&1&&(d(0,"cx-form-errors",27),s(1,"cxTranslate")),t&2){let e=p(2);o("translationParams",b(4,S,a(1,2,"register.termsAndConditions")))("control",e.registerForm.get("termsandconditions"))}}function qn(t,u){if(t&1&&d(0,"cx-form-errors",23),t&2){let e=p(2);o("control",e.registerForm.get("termsandconditions"))}}function $n(t,u){if(t&1){let e=M();c(0,"section",2),g(1,Tn,2,3,"div",3),c(2,"div",4)(3,"div",5)(4,"div",6)(5,"form",7),y("ngSubmit",function(){h(e);let r=p();return C(r.submitForm())}),c(6,"div",8)(7,"label")(8,"span",9),f(9),s(10,"cxTranslate"),l(),d(11,"ng-select",10),s(12,"async"),s(13,"cxTranslate"),l()(),c(14,"div",8)(15,"label")(16,"span",9),f(17),s(18,"cxTranslate"),d(19,"cx-form-required-asterisks"),l(),d(20,"input",11),s(21,"cxTranslate"),g(22,En,2,6,"cx-form-errors",12)(23,An,1,1,"cx-form-errors",13),l()(),c(24,"div",8)(25,"label")(26,"span",9),f(27),s(28,"cxTranslate"),d(29,"cx-form-required-asterisks"),l(),d(30,"input",14),s(31,"cxTranslate"),g(32,Pn,2,6,"cx-form-errors",12)(33,In,1,1,"cx-form-errors",13),l()(),c(34,"div",8)(35,"label")(36,"span",9),f(37),s(38,"cxTranslate"),d(39,"cx-form-required-asterisks"),l(),d(40,"input",15),s(41,"cxTranslate"),g(42,Mn,2,6,"cx-form-errors",12)(43,kn,1,1,"cx-form-errors",13),l()(),c(44,"div",8)(45,"div",16),g(46,Vn,4,2,"label",17),s(47,"async"),l()(),g(48,Dn,2,1,"div",18),c(49,"div",8)(50,"div",16)(51,"label"),d(52,"input",19),c(53,"span",20),f(54),s(55,"cxTranslate"),c(56,"a",21),s(57,"cxUrl"),f(58),s(59,"cxTranslate"),l(),d(60,"cx-form-required-asterisks"),l(),g(61,Rn,2,6,"cx-form-errors",12)(62,qn,1,1,"cx-form-errors",13),l()()(),c(63,"cx-captcha",22),y("confirmed",function(){h(e);let r=p();return C(r.captchaConfirmed())}),l(),d(64,"cx-form-errors",23),c(65,"button",24),f(66),s(67,"cxTranslate"),l(),c(68,"a",25),s(69,"cxUrl"),f(70),s(71,"cxTranslate"),l()()()()()()}if(t&2){let e=p();i(),o("cxFeature","!a11yRemoveStatusLoadedRole"),i(4),o("formGroup",e.registerForm),i(4),I(a(10,31,"register.title")),i(2),o("clearable",!1)("items",a(12,33,e.titles$))("placeholder",a(13,35,"register.selectTitle"))("searchable",!1)("cxNgSelectA11y",oe(63,Yt)),i(6),_("",a(18,37,"register.firstName.label")," "),i(3),w("placeholder",a(21,39,"register.firstName.placeholder")),i(2),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(4),_("",a(28,41,"register.lastName.label")," "),i(3),w("placeholder",a(31,43,"register.lastName.placeholder")),i(2),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(4),_("",a(38,45,"register.emailAddress.label")," "),i(3),w("placeholder",a(41,47,"register.emailAddress.placeholder")),i(2),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(3),o("ngIf",a(47,49,e.anonymousConsent$)),i(2),o("ngIf",e.additionalRegistrationConsents),i(6),_(" ",a(55,51,"register.confirmThatRead")," "),i(2),o("routerLink",a(57,53,oe(64,ai))),i(2),_(" ",a(59,55,"register.termsAndConditions")," "),i(3),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(2),o("control",e.registerForm.get("captcha")),i(2),_(" ",a(67,57,"register.furtherRegistration")," "),i(2),o("routerLink",a(69,59,oe(65,li))),i(2),I(a(71,61,"register.signIn"))}}function Un(t,u){t&1&&(c(0,"div",32),d(1,"cx-spinner"),l())}var On=["noReceiveCodeLink"],Ln=["resendLink"],Gn=()=>({cxRoute:"register"}),jn=t=>({seconds:t}),Yn=t=>({"disabled-link":t}),Wn=t=>({waitTime:t});function Hn(t,u){if(t&1&&(c(0,"div",19),f(1),s(2,"cxTranslate"),l()),t&2){let e=p();i(),_(" ",Et(2,1,"register.rateLimitForRegistrationMessage",b(4,jn,e.waitTimeForRateLimit))," ")}}function Qn(t,u){if(t&1&&(re(0),f(1),s(2,"cxTranslate"),ne()),t&2){let e=p(2);i(),_(" ",Et(2,1,"verificationTokenForm.sendRateLime",b(4,Wn,e.waitTime))," ")}}function Kn(t,u){if(t&1){let e=M();c(0,"div",20)(1,"div",21)(2,"span",22)(3,"a",23,1),y("keydown.enter",function(){h(e);let r=p();return C(r.resendOTP())})("keydown.space",function(){h(e);let r=p();return C(r.resendOTP())})("click",function(){h(e);let r=p();return C(r.resendOTP())}),f(5),s(6,"cxTranslate"),l(),g(7,Qn,3,6,"ng-container",24),l()(),c(8,"div",25)(9,"a",26,2),y("keydown",function(r){h(e);let m=p();return C(m.onOpenInfoDailogKeyDown(r))})("click",function(){h(e);let r=p();return C(r.openInfoDailog())}),f(11),s(12,"cxTranslate"),l()()()}if(t&2){let e=p();i(3),o("ngClass",b(8,Yn,e.isResendDisabled)),i(2),_(" ",a(6,4,"verificationTokenForm.resend")," "),i(2),o("ngIf",e.isResendDisabled),i(4),_(" ",a(12,6,"verificationTokenForm.noReceiveCode")," ")}}function zn(t,u){if(t&1&&(d(0,"cx-form-errors",27),s(1,"cxTranslate")),t&2){let e=p();o("translationParams",b(4,S,a(1,2,"register.password.label")))("control",e.registerForm.get("password"))}}function Jn(t,u){if(t&1&&d(0,"cx-form-errors",6),t&2){let e=p();o("control",e.registerForm.get("password"))}}function Xn(t,u){if(t&1&&(d(0,"cx-form-errors",27),s(1,"cxTranslate")),t&2){let e=p();o("translationParams",b(4,S,a(1,2,"register.confirmPassword.label")))("control",e.registerForm.get("passwordconf"))}}function Zn(t,u){if(t&1&&d(0,"cx-form-errors",6),t&2){let e=p();o("control",e.registerForm.get("passwordconf"))}}function eo(t,u){t&1&&(c(0,"div",28),d(1,"cx-spinner"),l())}var to=(()=>{class t{handleClick(e){e.target.tagName===this.el.nativeElement.tagName&&this.dismissModal("Cross click")}constructor(e,n,r,m,x,v,ie){this.authService=e,this.globalMessageService=n,this.routingService=r,this.translationService=m,this.userProfile=x,this.launchDialogService=v,this.el=ie,this.iconTypes=Bt,this.focusConfig={trap:!0,block:!0,autofocus:"button",focusOnEscape:!0},this.loading$=new le(!1)}get isLoading$(){return this.loading$.asObservable()}ngOnInit(){this.isLoggedIn$=this.authService.isUserLoggedIn()}onSuccess(){this.dismissModal("Success"),this.translationService.translate("closeAccount.accountClosedSuccessfully").pipe(bt()).subscribe(e=>{this.globalMessageService.add(e,k.MSG_TYPE_CONFIRMATION)}),this.authService.coreLogout().then(()=>{this.routingService.go({cxRoute:"home"})})}onError(){this.dismissModal("Error"),this.translationService.translate("closeAccount.accountClosedFailure").pipe(bt()).subscribe(e=>{this.globalMessageService.add(e,k.MSG_TYPE_ERROR)})}dismissModal(e){this.launchDialogService.closeDialog(e)}closeAccount(){this.loading$.next(!0),this.userProfile.close().subscribe({next:()=>{this.onSuccess(),this.loading$.next(!1)},error:()=>{this.onError(),this.loading$.next(!1)}})}static{this.\u0275fac=function(n){return new(n||t)(P(Te),P(N),P(D),P(pt),P(Ve),P(Ie),P(Tt))}}static{this.\u0275cmp=R({type:t,selectors:[["cx-close-account-modal"]],hostBindings:function(n,r){n&1&&y("click",function(x){return r.handleClick(x)})},standalone:!1,decls:2,vars:3,consts:[["loaded",""],[4,"ngIf"],[1,"modal-dialog","modal-dialog-centered","cx-close-account-modal",3,"esc","cxFocus"],[1,"modal-content","cx-close-account-modal-container"],[1,"cx-close-account-modal-header","cx-modal-header"],[1,"cx-close-account-modal-title"],["type","button",1,"close",3,"click","title"],["aria-hidden","true"],[3,"type"],[4,"ngIf","ngIfElse"],[1,"cx-spinner"],[1,"modal-body"],[1,"cx-confirmation"],[1,"cx-close-account-modal-footer","cx-modal-footer"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-block","btn-secondary",3,"click"]],template:function(n,r){n&1&&(g(0,gi,16,15,"ng-container",1),s(1,"async")),n&2&&o("ngIf",a(1,1,r.isLoggedIn$))},dependencies:[$,Dt,H,Vt,L,q],encapsulation:2,changeDetection:0})}}return t})(),io={launch:{CLOSE_ACCOUNT:{inline:!0,component:to,dialogType:Nt.DIALOG}}},ro=(()=>{class t{constructor(e,n){this.launchDialogService=e,this.vcr=n,this.routingService=T(D,{optional:!0})}openModal(){this.launchDialogService.openDialog(ft.CLOSE_ACCOUNT,this.element,this.vcr)?.pipe(ot(1)).subscribe()}navigateTo(e){this.routingService?.go({cxRoute:e})}static{this.\u0275fac=function(n){return new(n||t)(P(Ie),P(Qt))}}static{this.\u0275cmp=R({type:t,selectors:[["cx-close-account"]],viewQuery:function(n,r){if(n&1&&He(xi,5),n&2){let m;Qe(m=Ke())&&(r.element=m.first)}},standalone:!1,decls:11,vars:6,consts:[["element",""],[1,"col-lg-8","col-md-9"],[1,"row","cx-btn-group"],[1,"col-sm-6"],[1,"btn","btn-block","btn-secondary",3,"click"],[1,"btn","btn-block","btn-primary",3,"click"]],template:function(n,r){if(n&1){let m=M();c(0,"div",1)(1,"div",2)(2,"div",3)(3,"button",4),y("click",function(){return h(m),C(r.navigateTo("home"))}),f(4),s(5,"cxTranslate"),l()(),c(6,"div",3)(7,"button",5,0),y("click",function(){return h(m),C(r.openModal())}),f(9),s(10,"cxTranslate"),l()()()()}n&2&&(i(4),_(" ",a(5,2,"common.cancel")," "),i(5),_(" ",a(10,4,"closeAccount.closeMyAccount")," "))},dependencies:[q],encapsulation:2,changeDetection:0})}}return t})(),no=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=K({type:t})}static{this.\u0275inj=Q({providers:[z({cmsComponents:{CloseAccountComponent:{component:ro,guards:[$e]}}}),z(io)],imports:[se,ce,_e,ae,gt,pe,ut,Me]})}}return t})(),Lt=(()=>{class t{constructor(e,n,r,m){this.userPasswordService=e,this.routingService=n,this.authConfigService=r,this.globalMessage=m,this.busy$=new le(!1),this.isUpdating$=this.busy$.pipe(ge(x=>x===!0?this.form.disable():this.form.enable())),this.form=new Oe({userEmail:new U("",[A.required,E.emailValidator])})}requestEmail(){if(!this.form.valid){this.form.markAllAsTouched();return}this.busy$.next(!0),this.userPasswordService.requestForgotPasswordEmail(this.form.value.userEmail).subscribe({next:()=>this.onSuccess(),error:e=>this.onError(e)})}onSuccess(){this.globalMessage.add({key:"forgottenPassword.passwordResetEmailSent"},k.MSG_TYPE_CONFIRMATION),this.busy$.next(!1),this.form.reset(),this.redirect()}onError(e){this.busy$.next(!1)}redirect(){this.authConfigService.getOAuthFlow()===lt.ResourceOwnerPasswordFlow&&this.routingService.go({cxRoute:"login"})}static{this.\u0275fac=function(n){return new(n||t)(V(Ce),V(D),V(Re),V(N))}}static{this.\u0275prov=xe({token:t,factory:t.\u0275fac})}}return t})(),oo=(()=>{class t{constructor(e){this.service=e,this.routingService=T(D,{optional:!0}),this.form=this.service.form,this.isUpdating$=this.service.isUpdating$}onSubmit(){this.service.requestEmail()}navigateTo(e){this.routingService?.go({cxRoute:e})}static{this.\u0275fac=function(n){return new(n||t)(P(Lt))}}static{this.\u0275cmp=R({type:t,selectors:[["cx-forgot-password"]],standalone:!1,decls:19,vars:21,consts:[["class","overlay",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"label-content"],["required","true","type","email","formControlName","userEmail",1,"form-control",3,"placeholder"],["id","userEmailError",3,"translationParams","control",4,"cxFeature"],[3,"control",4,"cxFeature"],[1,"btn","btn-block","btn-secondary",3,"click"],[1,"btn","btn-block","btn-primary",3,"disabled"],[1,"overlay"],["id","userEmailError",3,"translationParams","control"],[3,"control"]],template:function(n,r){if(n&1&&(g(0,_i,1,0,"cx-spinner",0),s(1,"async"),d(2,"cx-form-required-legend"),c(3,"form",1),y("ngSubmit",function(){return r.onSubmit()}),c(4,"label")(5,"span",2),f(6),s(7,"cxTranslate"),d(8,"cx-form-required-asterisks"),l(),d(9,"input",3),s(10,"cxTranslate"),g(11,vi,2,6,"cx-form-errors",4)(12,hi,1,1,"cx-form-errors",5),l(),c(13,"button",6),y("click",function(){return r.navigateTo("login")}),f(14),s(15,"cxTranslate"),l(),c(16,"button",7),f(17),s(18,"cxTranslate"),l()()),n&2){let m;o("ngIf",a(1,11,r.isUpdating$)),i(3),o("formGroup",r.form),i(3),_("",a(7,13,"forgottenPassword.emailAddress.label")," "),i(3),w("placeholder",a(10,15,"forgottenPassword.emailAddress.placeholder")),F("aria-invalid",((m=r.form.get("userEmail"))==null?null:m.touched)&&((m=r.form.get("userEmail"))==null?null:m.invalid))("aria-errormessage","userEmailError"),i(2),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(2),_(" ",a(15,17,"common.cancel")," "),i(2),o("disabled",r.form.disabled),i(),_(" ",a(18,19,"common.submit")," ")}},dependencies:[$,J,j,Y,W,ee,X,Z,te,H,G,B,O,L,q],encapsulation:2,changeDetection:0})}}return t})(),so=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=K({type:t})}static{this.\u0275inj=Q({providers:[z({cmsComponents:{ForgotPasswordComponent:{component:oo,guards:[Ue],providers:[{provide:Lt,useClass:Lt,deps:[Ce,D,Re,N]}]}}})],imports:[se,me,ce,_e,ae,ue,pe,de,Me,B,O]})}}return t})(),je=(()=>{class t{constructor(e,n,r){this.userRegisterFacade=e,this.globalMessageService=n,this.fb=r,this.featureConfigService=T(Ee)}register(e){return this.userRegisterFacade.register(e)}getTitles(){return this.userRegisterFacade.getTitles()}postRegisterMessage(){this.featureConfigService.isEnabled("a11yPostRegisterSuccessMessage")?this.globalMessageService.add({key:"register.postRegisterSuccessMessage"},k.MSG_TYPE_CONFIRMATION):this.globalMessageService.add({key:"register.postRegisterMessage"},k.MSG_TYPE_CONFIRMATION)}getAdditionalConsents(){return[]}generateAdditionalConsentsFormControl(){return this.fb?.array([])??void 0}collectDataFromRegisterForm(e){let{firstName:n,lastName:r,email:m,password:x,titleCode:v}=e;return{firstName:n,lastName:r,password:x,titleCode:v,uid:m.toLowerCase()}}static{this.\u0275fac=function(n){return new(n||t)(V(Ne),V(N),V(ve))}}static{this.\u0275prov=xe({token:t,factory:t.\u0275fac})}}return t})(),ao=(()=>{class t{get additionalConsents(){return this.registerForm?.get("additionalConsents")}updateAdditionalConsents(e,n){let{checked:r}=e.target;this.registerForm.value.additionalConsents[n].isConsentGranted=r}constructor(e,n,r,m,x,v,ie){this.globalMessageService=e,this.fb=n,this.router=r,this.anonymousConsentsService=m,this.anonymousConsentsConfig=x,this.authConfigService=v,this.registerComponentService=ie,this.featureConfigService=T(Ee),this.passwordValidators=this.featureConfigService?.isEnabled("formErrorsDescriptiveMessages")?this.featureConfigService.isEnabled("enableSecurePasswordValidation")?E.securePasswordValidators:this.featureConfigService.isEnabled("enableConsecutiveCharactersPasswordRequirement")?[...E.passwordValidators,E.noConsecutiveCharacters]:E.passwordValidators:[this.featureConfigService.isEnabled("enableSecurePasswordValidation")?E.securePasswordValidator:this.featureConfigService.isEnabled("enableConsecutiveCharactersPasswordRequirement")?E.strongPasswordValidator:E.passwordValidator],this.isLoading$=new le(!1),this.subscription=new nt,this.registerForm=this.fb.group({titleCode:[null],firstName:["",A.required],lastName:["",A.required],email:["",[A.required,E.emailValidator]],password:["",[A.required,...this.passwordValidators]],passwordconf:["",A.required],newsletter:new U({value:!1,disabled:this.isConsentRequired()}),additionalConsents:this.registerComponentService.generateAdditionalConsentsFormControl?.()??this.fb.array([]),termsandconditions:[!1,A.requiredTrue],captcha:[!1,A.requiredTrue]},{validators:E.passwordsMustMatch("password","passwordconf")}),Ae("a11yPasswordVisibliltyBtnValueOverflow")}ngOnInit(){this.titles$=this.registerComponentService.getTitles().pipe(fe(n=>n.sort(xt))),this.subscription.add(this.globalMessageService.get().pipe(ye(n=>!!Object.keys(n).length)).subscribe(n=>{let r=n&&n[k.MSG_TYPE_ERROR];r&&r.some(m=>m.raw==="This field is required.")&&(this.globalMessageService.remove(k.MSG_TYPE_ERROR),this.globalMessageService.add({key:"register.titleRequired"},k.MSG_TYPE_ERROR))}));let e=this.anonymousConsentsConfig?.anonymousConsents?.registerConsent??"";this.anonymousConsent$=We([this.anonymousConsentsService.getConsent(e),this.anonymousConsentsService.getTemplate(e)]).pipe(fe(([n,r])=>({consent:n,template:r?.description?r.description:""}))),this.additionalRegistrationConsents=this.registerComponentService?.getAdditionalConsents()||[],this.subscription.add(this.registerForm.get("newsletter").valueChanges.subscribe(()=>{this.toggleAnonymousConsent()}))}submitForm(){this.registerForm.valid?this.registerUser():this.registerForm.markAllAsTouched()}registerUser(){this.isLoading$.next(!0),this.registerComponentService.register(this.collectDataFromRegisterForm(this.registerForm.value)).subscribe({next:()=>this.onRegisterUserSuccess(),complete:()=>this.isLoading$.next(!1),error:()=>this.isLoading$.next(!1)})}titleSelected(e){this.registerForm.controls.titleCode.setValue(e.code)}collectDataFromRegisterForm(e){return this.registerComponentService.collectDataFromRegisterForm(e)}isConsentGiven(e){return this.anonymousConsentsService.isConsentGiven(e)}isConsentRequired(){let e=this.anonymousConsentsConfig?.anonymousConsents?.requiredConsents,n=this.anonymousConsentsConfig?.anonymousConsents?.registerConsent;return e&&n?e.includes(n):!1}onRegisterUserSuccess(){this.authConfigService.getOAuthFlow()===lt.ResourceOwnerPasswordFlow&&this.router.go("login"),this.registerComponentService.postRegisterMessage()}toggleAnonymousConsent(){let e=this.anonymousConsentsConfig?.anonymousConsents?.registerConsent;e&&(this.registerForm.get("newsletter").value?this.anonymousConsentsService.giveConsent(e):this.anonymousConsentsService.withdrawConsent(e))}captchaConfirmed(){this.registerForm.get("captcha")?.setValue(!0)}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||t)(P(N),P(ve),P(D),P(ct),P(dt),P(Re),P(je))}}static{this.\u0275cmp=R({type:t,selectors:[["cx-register"]],standalone:!1,decls:4,vars:4,consts:[["loading",""],["class","cx-page-section container",4,"ngIf","ngIfElse"],[1,"cx-page-section","container"],["role","status",4,"cxFeature"],[1,"row","justify-content-center"],[1,"col-md-6"],[1,"cx-section"],[3,"ngSubmit","formGroup"],[1,"form-group"],[1,"label-content"],["bindLabel","name","bindValue","code","formControlName","titleCode","id","title-select",3,"clearable","items","placeholder","searchable","cxNgSelectA11y"],["required","true","type","text","name","firstname","formControlName","firstName",1,"form-control",3,"placeholder"],["id","firstNameError",3,"translationParams","control",4,"cxFeature"],[3,"control",4,"cxFeature"],["required","true","type","text","name","lastname","formControlName","lastName",1,"form-control",3,"placeholder"],["id","lastNameError",3,"translationParams","control",4,"cxFeature"],["required","true","type","email","name","email","formControlName","email",1,"form-control",3,"placeholder"],["id","emailError",3,"translationParams","control",4,"cxFeature"],["required","true","type","password","name","password","formControlName","password","aria-describedby","password-input-hint","cxPasswordVisibilitySwitch","",1,"form-control",3,"placeholder"],["id","password-input-hint",1,"input-hint"],[3,"translationParams","control",4,"cxFeature"],["required","true","type","password","name","confirmpassword","formControlName","passwordconf","cxPasswordVisibilitySwitch","",1,"form-control",3,"placeholder"],["id","passwordconfError",3,"translationParams","control",4,"cxFeature"],[1,"form-check"],[4,"ngIf"],["formArrayName","additionalConsents","class","form-group",4,"ngIf"],["required","true","type","checkbox","name","termsandconditions","formControlName","termsandconditions"],[1,"form-check-label"],["target","_blank","rel","noopener noreferrer",3,"routerLink"],["id","termsandconditionsError",3,"translationParams","control",4,"cxFeature"],[3,"confirmed"],[3,"control"],["type","submit",1,"btn","btn-block","btn-primary"],[1,"cx-login-link","btn-link",3,"routerLink"],["role","status"],["id","firstNameError",3,"translationParams","control"],["id","lastNameError",3,"translationParams","control"],["id","emailError",3,"translationParams","control"],[3,"translationParams","control"],["id","passwordconfError",3,"translationParams","control"],["type","checkbox","name","newsletter","formControlName","newsletter",1,"form-check-input",3,"checked"],["formArrayName","additionalConsents",1,"form-group"],["class","form-check",3,"formGroupName",4,"ngFor","ngForOf"],[1,"form-check",3,"formGroupName"],["type","checkbox","formControlName","isConsentGranted",3,"change","required","name"],["id","termsandconditionsError",3,"translationParams","control"],[1,"cx-spinner"]],template:function(n,r){if(n&1&&(g(0,$i,98,101,"section",1),s(1,"async"),g(2,Ui,2,0,"ng-template",null,0,De)),n&2){let m=ze(3);o("ngIf",!a(1,2,r.isLoading$))("ngIfElse",m)}},dependencies:[$t,Se,$,J,j,mt,Y,W,ee,Mt,X,Z,Pt,It,Je,H,te,B,O,Ge,Le,ke,G,L,Xe,q],encapsulation:2})}}return t})(),lo=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=K({type:t})}static{this.\u0275inj=Q({providers:[z({cmsComponents:{RegisterCustomerComponent:{component:ao,guards:[Ue],providers:[{provide:je,useClass:je,deps:[Ne,N,ve]}]}}})],imports:[Ut,se,me,ce,_e,ae,pe,ue,B,O,it,et,tt,de]})}}return t})(),Gt=(()=>{class t{constructor(e,n,r){this.userPasswordService=e,this.routingService=n,this.globalMessage=r,this.featureConfigService=T(Ee),this.passwordValidators=this.featureConfigService?.isEnabled("formErrorsDescriptiveMessages")?this.featureConfigService.isEnabled("enableSecurePasswordValidation")?E.securePasswordValidators:this.featureConfigService.isEnabled("enableConsecutiveCharactersPasswordRequirement")?[...E.passwordValidators,E.noConsecutiveCharacters]:E.passwordValidators:[this.featureConfigService.isEnabled("enableSecurePasswordValidation")?E.securePasswordValidator:this.featureConfigService.isEnabled("enableConsecutiveCharactersPasswordRequirement")?E.strongPasswordValidator:E.passwordValidator],this.busy$=new le(!1),this.isUpdating$=this.busy$.pipe(ge(m=>m===!0?this.form.disable():this.form.enable())),this.resetToken$=this.routingService.getRouterState().pipe(fe(m=>m.state.queryParams.token)),this.form=new Oe({password:new U("",[A.required,...this.passwordValidators]),passwordConfirm:new U("",A.required)},{validators:E.passwordsMustMatch("password","passwordConfirm")})}resetPassword(e){if(!this.form.valid){this.form.markAllAsTouched();return}this.busy$.next(!0);let n=this.form.get("password").value;this.userPasswordService.reset(e,n).subscribe({next:()=>this.onSuccess(),error:r=>this.onError(r)})}onSuccess(){this.globalMessage.add({key:"forgottenPassword.passwordResetSuccess"},k.MSG_TYPE_CONFIRMATION),this.busy$.next(!1),this.form.reset(),this.redirect()}onError(e){this.busy$.next(!1),e instanceof At&&(e.details??[]).forEach(n=>{n.message&&this.globalMessage.add({raw:n.message},k.MSG_TYPE_ERROR)})}redirect(){this.routingService.go({cxRoute:"login"})}static{this.\u0275fac=function(n){return new(n||t)(V(Ce),V(D),V(N))}}static{this.\u0275prov=xe({token:t,factory:t.\u0275fac})}}return t})(),co=(()=>{class t{constructor(e){this.service=e,this.form=this.service.form,this.isUpdating$=this.service.isUpdating$,this.token$=this.service.resetToken$,Ae("a11yPasswordVisibliltyBtnValueOverflow")}onSubmit(e){this.service.resetPassword(e)}static{this.\u0275fac=function(n){return new(n||t)(P(Gt))}}static{this.\u0275cmp=R({type:t,selectors:[["cx-reset-password"]],hostAttrs:[1,"user-form"],standalone:!1,decls:4,vars:6,consts:[["class","overlay",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"overlay"],[3,"ngSubmit","formGroup"],[1,"label-content"],["required","true","type","password","formControlName","password","cxPasswordVisibilitySwitch","",1,"form-control",3,"placeholder"],["id","passwordError",3,"translationParams","control",4,"cxFeature"],[3,"control",4,"cxFeature"],["required","true","type","password","formControlName","passwordConfirm","cxPasswordVisibilitySwitch","",1,"form-control",3,"placeholder"],["id","passwordConfirmError",3,"translationParams","control",4,"cxFeature"],[1,"btn","btn-block","btn-primary",3,"disabled"],["id","passwordError",3,"translationParams","control"],[3,"control"],["id","passwordConfirmError",3,"translationParams","control"]],template:function(n,r){n&1&&(g(0,Oi,1,0,"cx-spinner",0),s(1,"async"),g(2,Wi,25,31,"form",1),s(3,"async")),n&2&&(o("ngIf",a(1,2,r.isUpdating$)),i(2),o("ngIf",a(3,4,r.token$)))},dependencies:[$,J,j,Y,W,ee,X,Z,te,H,ke,G,B,O,L,q],encapsulation:2,changeDetection:0})}}return t})(),po=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=K({type:t})}static{this.\u0275inj=Q({providers:[z({cmsComponents:{ResetPasswordComponent:{component:co,guards:[Ue],providers:[{provide:Gt,useClass:Gt,deps:[Ce,D,N]}]}}})],imports:[se,Pe,me,ce,ae,ue,pe,tt,de,B,O]})}}return t})(),vt=(()=>{class t{constructor(e,n,r,m,x){this.userEmail=e,this.routingService=n,this.globalMessageService=r,this.authService=m,this.authRedirectService=x,this.busy$=new le(!1),this.updateSucceed$=new wt,this.isUpdating$=this.busy$.pipe(ge(v=>v===!0?this.form.disable():this.form.enable())),this.form=new Oe({email:new U("",[A.required,E.emailValidator]),confirmEmail:new U("",[A.required]),password:new U("",[A.required])},{validators:E.emailsMustMatch("email","confirmEmail")})}save(){if(!this.form.valid){this.form.markAllAsTouched();return}this.busy$.next(!0);let e=this.form.get("confirmEmail")?.value,n=this.form.get("password")?.value;this.userEmail.update(n,e).subscribe({next:()=>this.onSuccess(e),error:r=>this.onError(r)})}onSuccess(e){this.globalMessageService.add({key:"updateEmailForm.emailUpdateSuccess",params:{newUid:e}},k.MSG_TYPE_CONFIRMATION),this.busy$.next(!1),this.form.reset(),this.updateSucceed$.next(!0),this.authRedirectService.setRedirectUrl(this.routingService.getUrl({cxRoute:"home"})),this.authService.coreLogout().then(()=>{this.routingService.go({cxRoute:"login"},{state:{newUid:e}})})}onError(e){this.busy$.next(!1),this.updateSucceed$.next(!1)}static{this.\u0275fac=function(n){return new(n||t)(V(_t),V(D),V(N),V(Te),V(qe))}}static{this.\u0275prov=xe({token:t,factory:t.\u0275fac})}}return t})(),mo=(()=>{class t{constructor(e){this.service=e,this.form=this.service.form,this.isUpdating$=this.service.isUpdating$,Ae("a11yPasswordVisibliltyBtnValueOverflow")}onSubmit(){this.service.save()}static{this.\u0275fac=function(n){return new(n||t)(P(vt))}}static{this.\u0275cmp=R({type:t,selectors:[["cx-update-email"]],hostAttrs:[1,"user-form"],standalone:!1,decls:39,vars:47,consts:[["class","overlay",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"label-content"],["required","true","type","email","name","email","formControlName","email",1,"form-control",3,"placeholder"],["id","emailError",3,"translationParams","control",4,"cxFeature"],[3,"control",4,"cxFeature"],["required","true","type","email","name","confirmEmail","formControlName","confirmEmail",1,"form-control",3,"placeholder"],["id","confirmEmailError",3,"translationParams","control",4,"cxFeature"],["required","true","type","password","name","password","formControlName","password","autocomplete","new-password","cxPasswordVisibilitySwitch","",1,"form-control",3,"placeholder"],["id","passwordError",3,"translationParams","control",4,"cxFeature"],["cxBtnLikeLink","",1,"btn","btn-block","btn-secondary",3,"routerLink"],[1,"btn","btn-block","btn-primary",3,"disabled"],[1,"overlay"],["id","emailError",3,"translationParams","control"],[3,"control"],["id","confirmEmailError",3,"translationParams","control"],["id","passwordError",3,"translationParams","control"]],template:function(n,r){if(n&1&&(g(0,Qi,1,0,"cx-spinner",0),s(1,"async"),d(2,"cx-form-required-legend"),c(3,"form",1),y("ngSubmit",function(){return r.onSubmit()}),c(4,"label")(5,"span",2),f(6),s(7,"cxTranslate"),d(8,"cx-form-required-asterisks"),l(),d(9,"input",3),s(10,"cxTranslate"),g(11,Ki,2,6,"cx-form-errors",4)(12,zi,1,1,"cx-form-errors",5),l(),c(13,"label")(14,"span",2),f(15),s(16,"cxTranslate"),d(17,"cx-form-required-asterisks"),l(),d(18,"input",6),s(19,"cxTranslate"),g(20,Ji,2,6,"cx-form-errors",7)(21,Xi,1,1,"cx-form-errors",5),l(),c(22,"label")(23,"span",2),f(24),s(25,"cxTranslate"),d(26,"cx-form-required-asterisks"),l(),d(27,"input",8),s(28,"cxTranslate"),s(29,"cxTranslate"),g(30,Zi,2,6,"cx-form-errors",9)(31,er,1,1,"cx-form-errors",5),l(),c(32,"a",10),s(33,"cxUrl"),f(34),s(35,"cxTranslate"),l(),c(36,"button",11),f(37),s(38,"cxTranslate"),l()()),n&2){let m,x;o("ngIf",a(1,24,r.isUpdating$)),i(3),o("formGroup",r.form),i(3),_("",a(7,26,"updateEmailForm.newEmailAddress.label")," "),i(3),w("placeholder",a(10,28,"updateEmailForm.newEmailAddress.placeholder")),F("aria-invalid",((m=r.form.get("email"))==null?null:m.touched)&&((m=r.form.get("email"))==null?null:m.invalid))("aria-errormessage","emailError"),i(2),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(3),_("",a(16,30,"updateEmailForm.confirmNewEmailAddress.label")," "),i(3),w("placeholder",a(19,32,"updateEmailForm.confirmNewEmailAddress.placeholder")),F("aria-invalid",((x=r.form.get("confirmEmail"))==null?null:x.touched)&&((x=r.form.get("confirmEmail"))==null?null:x.invalid))("aria-errormessage","confirmEmailError"),i(2),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(3),_("",a(25,34,"updateEmailForm.password.label")," "),i(3),w("placeholder",a(28,36,"updateEmailForm.password.placeholder")),F("aria-label",a(29,38,"updateEmailForm.password.placeholder"))("aria-describedby","passwordError"),i(3),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(),o("routerLink",a(33,40,oe(46,Hi))),i(2),_(" ",a(35,42,"common.cancel")," "),i(2),o("disabled",r.form.disabled),i(),_(" ",a(38,44,"common.save")," ")}},dependencies:[$,J,j,Y,W,ee,X,Z,H,Je,te,ke,G,ii,B,O,L,Xe,q],encapsulation:2,changeDetection:0})}}return t})(),uo=(()=>{class t{constructor(){this.emailComponentService=T(vt),this.userProfile=T(Ve),this.form=this.emailComponentService.form,this.isUpdating$=this.emailComponentService.isUpdating$,this.user$=this.userProfile.get().pipe(ye(e=>!!e)),this.globalMessageType=k}ngOnInit(){this.isEditing=!1}onSubmit(){this.emailComponentService.save(),this.emailComponentService.updateSucceed$.subscribe(e=>{this.isEditing=!e})}onEdit(){this.isEditing=!0,this.showingAlert=!0,this.form.reset()}cancelEdit(){this.isEditing=!1}closeDialogConfirmationAlert(){this.showingAlert=!1}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=R({type:t,selectors:[["cx-my-account-v2-email"]],standalone:!1,decls:13,vars:12,consts:[["class","overlay",4,"ngIf$","ngIf"],[1,"flex-line"],[1,"headertext"],["class","editButton",3,"click",4,"ngIf"],[4,"ngIf"],[3,"text","type","closeMessage",4,"ngIf"],["class","email-editing-area",4,"ngIf"],[1,"overlay"],[1,"editButton",3,"click"],[1,"text-head"],[1,"value"],[3,"closeMessage","text","type"],[1,"email-editing-area"],[3,"ngSubmit","formGroup"],["type","text","readonly","",1,"form-control",3,"value"],["required","true","type","email","name","email","formControlName","email",1,"form-control",3,"placeholder"],["id","emailError",3,"translationParams","control",4,"cxFeature"],[3,"control",4,"cxFeature"],["required","true","type","email","name","confirmEmail","formControlName","confirmEmail",1,"form-control",3,"placeholder"],["id","confirmEmailError",3,"translationParams","control",4,"cxFeature"],[1,"label-content,","text-head"],["required","true","type","password","name","password","formControlName","password","autocomplete","new-password","cxPasswordVisibilitySwitch","",1,"form-control",3,"placeholder"],["id","passwordError",3,"translationParams","control",4,"cxFeature"],[1,"btn-group"],[1,"btn","button-cancel","button",3,"click"],[1,"btn","btn-primary","button",3,"click","disabled"],["id","emailError",3,"translationParams","control"],[3,"control"],["id","confirmEmailError",3,"translationParams","control"],["id","passwordError",3,"translationParams","control"]],template:function(n,r){n&1&&(g(0,tr,1,0,"cx-spinner",0),s(1,"async"),s(2,"async"),c(3,"div")(4,"div",1)(5,"label",2),f(6),s(7,"cxTranslate"),l(),g(8,ir,3,3,"button",3),l(),c(9,"div"),g(10,rr,8,6,"div",4),l(),g(11,nr,2,4,"cx-message",5)(12,pr,40,47,"div",6),l()),n&2&&(o("ngIf",a(1,6,r.isUpdating$)||!a(2,8,r.user$)),i(6),_("",a(7,10,"myAccountV2Email.myEmailAddress")," "),i(2),o("ngIf",!r.isEditing),i(2),o("ngIf",!r.isEditing),i(),o("ngIf",r.isEditing&&r.showingAlert),i(),o("ngIf",r.isEditing))},dependencies:[$,J,j,Y,W,ee,X,Z,H,te,ke,G,Rt,L,q],encapsulation:2,changeDetection:0})}}return t})(),fo=new st("feature flag to enable enhanced UI for email related pages under My-Account",{providedIn:"root",factory:()=>!1}),go={cmsComponents:{UpdateEmailComponent:{component:uo}}},xo=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=K({type:t})}static{this.\u0275inj=Q({providers:[z({cmsComponents:{UpdateEmailComponent:{component:mo,guards:[$e],providers:[{provide:vt,useClass:vt,deps:[_t,D,N,Te,qe]}]}}}),at(()=>T(fo)?go:{})],imports:[se,Pe,me,pe,_e,ce,ae,ue,tt,de,qt,Me,B,O]})}}return t})(),di=new st("feature flag to enable enhanced UI for Update Password related pages under My-Account",{providedIn:"root",factory:()=>!1}),ht=(()=>{class t{constructor(e,n,r,m,x){this.userPasswordService=e,this.routingService=n,this.globalMessageService=r,this.authRedirectService=m,this.authService=x,this.featureConfigService=T(Ee),this.passwordValidators=this.featureConfigService?.isEnabled("formErrorsDescriptiveMessages")?this.featureConfigService.isEnabled("enableSecurePasswordValidation")?E.securePasswordValidators:this.featureConfigService.isEnabled("enableConsecutiveCharactersPasswordRequirement")?[...E.passwordValidators,E.noConsecutiveCharacters]:E.passwordValidators:[this.featureConfigService.isEnabled("enableSecurePasswordValidation")?E.securePasswordValidator:this.featureConfigService.isEnabled("enableConsecutiveCharactersPasswordRequirement")?E.strongPasswordValidator:E.passwordValidator],this.busy$=new le(!1),this.usingV2=T(di),this.isUpdating$=this.busy$.pipe(ge(v=>v===!0?this.form.disable():this.form.enable())),this.form=new Oe({oldPassword:new U("",A.required),newPassword:new U("",[A.required,...this.passwordValidators]),newPasswordConfirm:new U("",A.required)},{validators:this.getPasswordValidators()})}updatePassword(){if(!this.form.valid){this.form.markAllAsTouched();return}this.busy$.next(!0);let e=this.form.get("oldPassword")?.value,n=this.form.get("newPassword")?.value;this.userPasswordService.update(e,n).subscribe({next:()=>this.onSuccess(),error:r=>this.onError(r)})}onSuccess(){this.globalMessageService.add({key:this.usingV2?"myAccountV2PasswordForm.passwordUpdateSuccess":"updatePasswordForm.passwordUpdateSuccess"},k.MSG_TYPE_CONFIRMATION),this.busy$.next(!1),this.form.reset(),this.authRedirectService?.setRedirectUrl(this.routingService.getUrl({cxRoute:"home"})),this.authService?.coreLogout().then(()=>{this.routingService.go({cxRoute:"login"})})}onError(e){e instanceof At&&e.details?.[0].type==="AccessDeniedError"&&this.globalMessageService.add({key:this.usingV2?"myAccountV2PasswordForm.accessDeniedError":"updatePasswordForm.accessDeniedError"},k.MSG_TYPE_ERROR),this.busy$.next(!1),this.form.reset()}getPasswordValidators(){let e=E.passwordsMustMatch("newPassword","newPasswordConfirm");return this.featureConfigService.isEnabled("enablePasswordsCannotMatchInPasswordUpdateForm")?[e,E.passwordsCannotMatch("oldPassword","newPassword")]:[e]}static{this.\u0275fac=function(n){return new(n||t)(V(Ce),V(D),V(N),V(qe),V(Te))}}static{this.\u0275prov=xe({token:t,factory:t.\u0275fac})}}return t})(),_o=(()=>{class t{constructor(e){this.service=e,this.routingService=T(D,{optional:!0}),this.form=this.service.form,this.isUpdating$=this.service.isUpdating$,Ae("a11yPasswordVisibliltyBtnValueOverflow")}onSubmit(){this.service.updatePassword()}navigateTo(e){this.routingService?.go({cxRoute:e})}static{this.\u0275fac=function(n){return new(n||t)(P(ht))}}static{this.\u0275cmp=R({type:t,selectors:[["cx-update-password"]],hostAttrs:[1,"user-form"],standalone:!1,decls:40,vars:50,consts:[["class","overlay",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"label-content"],["required","true","type","password","name","oldPassword","formControlName","oldPassword","cxPasswordVisibilitySwitch","",1,"form-control",3,"placeholder"],["id","oldPasswordError",3,"translationParams","control",4,"cxFeature"],[3,"control",4,"cxFeature"],["required","true","type","password","name","newPassword","formControlName","newPassword","cxPasswordVisibilitySwitch","",1,"form-control",3,"placeholder"],["id","newPasswordError",3,"translationParams","control",4,"cxFeature"],["required","true","type","password","name","newPasswordConfirm","formControlName","newPasswordConfirm","cxPasswordVisibilitySwitch","",1,"form-control",3,"placeholder"],["id","newPasswordConfirmError",3,"translationParams","control",4,"cxFeature"],[1,"btn","btn-block","btn-secondary",3,"click"],[1,"btn","btn-block","btn-primary",3,"disabled"],[1,"overlay"],["id","oldPasswordError",3,"translationParams","control"],[3,"control"],["id","newPasswordError",3,"translationParams","control"],["id","newPasswordConfirmError",3,"translationParams","control"]],template:function(n,r){if(n&1&&(g(0,mr,1,0,"cx-spinner",0),s(1,"async"),d(2,"cx-form-required-legend"),c(3,"form",1),y("ngSubmit",function(){return r.onSubmit()}),c(4,"label")(5,"span",2),f(6),s(7,"cxTranslate"),d(8,"cx-form-required-asterisks"),l(),d(9,"input",3),s(10,"cxTranslate"),s(11,"cxTranslate"),g(12,ur,2,6,"cx-form-errors",4)(13,fr,1,1,"cx-form-errors",5),l(),c(14,"label")(15,"span",2),f(16),s(17,"cxTranslate"),d(18,"cx-form-required-asterisks"),l(),d(19,"input",6),s(20,"cxTranslate"),s(21,"cxTranslate"),g(22,gr,2,6,"cx-form-errors",7)(23,xr,1,1,"cx-form-errors",5),l(),c(24,"label")(25,"span",2),f(26),s(27,"cxTranslate"),d(28,"cx-form-required-asterisks"),l(),d(29,"input",8),s(30,"cxTranslate"),s(31,"cxTranslate"),g(32,_r,2,6,"cx-form-errors",9)(33,vr,1,1,"cx-form-errors",5),l(),c(34,"button",10),y("click",function(){return r.navigateTo("home")}),f(35),s(36,"cxTranslate"),l(),c(37,"button",11),f(38),s(39,"cxTranslate"),l()()),n&2){let m,x,v;o("ngIf",a(1,26,r.isUpdating$)),i(3),o("formGroup",r.form),i(3),_("",a(7,28,"updatePasswordForm.oldPassword.label")," "),i(3),w("placeholder",a(10,30,"updatePasswordForm.oldPassword.placeholder")),F("aria-label",a(11,32,"updatePasswordForm.oldPassword.placeholder"))("aria-invalid",((m=r.form.get("oldPassword"))==null?null:m.touched)&&((m=r.form.get("oldPassword"))==null?null:m.invalid))("aria-errormessage","oldPasswordError"),i(3),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(3),_("",a(17,34,"updatePasswordForm.newPassword.label")," "),i(3),w("placeholder",a(20,36,"updatePasswordForm.newPassword.placeholder")),F("aria-label",a(21,38,"updatePasswordForm.newPassword.placeholder"))("aria-invalid",((x=r.form.get("newPassword"))==null?null:x.touched)&&((x=r.form.get("newPassword"))==null?null:x.invalid))("aria-errormessage","newPasswordError"),i(3),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(3),_("",a(27,40,"updatePasswordForm.confirmPassword.label")," "),i(3),w("placeholder",a(30,42,"updatePasswordForm.confirmPassword.placeholder")),F("aria-label",a(31,44,"updatePasswordForm.confirmPassword.placeholder"))("aria-invalid",((v=r.form.get("newPasswordConfirm"))==null?null:v.touched)&&((v=r.form.get("newPasswordConfirm"))==null?null:v.invalid))("aria-errormessage","newPasswordConfirmError"),i(3),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(2),_(" ",a(36,46,"common.cancel")," "),i(2),o("disabled",r.form.disabled),i(),_(" ",a(39,48,"common.save")," ")}},dependencies:[$,J,j,Y,W,ee,X,Z,H,te,ke,G,B,O,L,q],encapsulation:2,changeDetection:0})}}return t})(),vo=(()=>{class t{constructor(){this.service=T(ht),this.showingAlert=!0,this.globalMessageType=k,this.form=this.service.form,this.isUpdating$=this.service.isUpdating$,Ae("a11yPasswordVisibliltyBtnValueOverflow")}onSubmit(){this.service.updatePassword()}onCancel(){this.oldPassword="",this.newPassword="",this.newPasswordConfirm=""}closeDialogConfirmationAlert(){this.showingAlert=!1}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=R({type:t,selectors:[["cx-my-account-v2-password"]],standalone:!1,decls:41,vars:57,consts:[["class","overlay",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"myaccount-password-header"],[3,"text","type","closeMessage",4,"ngIf"],[1,"myaccount-label-padding"],[1,"label-content","myaccount-password-label"],["required","true","type","password","name","oldPassword","formControlName","oldPassword","cxPasswordVisibilitySwitch","",1,"form-control",3,"ngModelChange","ngModel","placeholder"],["id","oldPasswordError",3,"translationParams","control",4,"cxFeature"],[3,"control",4,"cxFeature"],["required","true","type","password","name","newPassword","formControlName","newPassword","cxPasswordVisibilitySwitch","",1,"form-control",3,"ngModelChange","ngModel","placeholder"],["id","newPasswordError",3,"translationParams","control",4,"cxFeature"],["required","true","type","password","name","newPasswordConfirm","formControlName","newPasswordConfirm","cxPasswordVisibilitySwitch","",1,"form-control",3,"ngModelChange","ngModel","placeholder"],["id","newPasswordConfirmError",3,"translationParams","control",4,"cxFeature"],[1,"password-btn-group"],[1,"btn","myaccount-password-button","myaccount-password-button-cancel",3,"click"],[1,"btn","btn-primary","myaccount-password-button",3,"disabled"],[1,"overlay"],[3,"closeMessage","text","type"],["id","oldPasswordError",3,"translationParams","control"],[3,"control"],["id","newPasswordError",3,"translationParams","control"],["id","newPasswordConfirmError",3,"translationParams","control"]],template:function(n,r){if(n&1&&(g(0,hr,1,0,"cx-spinner",0),s(1,"async"),c(2,"form",1),y("ngSubmit",function(){return r.onSubmit()}),c(3,"label",2),f(4),s(5,"cxTranslate"),l(),g(6,Cr,2,4,"cx-message",3),c(7,"label",4)(8,"span",5),f(9),s(10,"cxTranslate"),l(),c(11,"input",6),s(12,"cxTranslate"),s(13,"cxTranslate"),Fe("ngModelChange",function(x){return be(r.oldPassword,x)||(r.oldPassword=x),x}),l(),g(14,yr,2,6,"cx-form-errors",7)(15,wr,1,1,"cx-form-errors",8),l(),c(16,"label",4)(17,"span",5),f(18),s(19,"cxTranslate"),l(),c(20,"input",9),s(21,"cxTranslate"),s(22,"cxTranslate"),Fe("ngModelChange",function(x){return be(r.newPassword,x)||(r.newPassword=x),x}),l(),g(23,br,2,6,"cx-form-errors",10)(24,Fr,1,1,"cx-form-errors",8),l(),c(25,"label",4)(26,"span",5),f(27),s(28,"cxTranslate"),l(),c(29,"input",11),s(30,"cxTranslate"),s(31,"cxTranslate"),Fe("ngModelChange",function(x){return be(r.newPasswordConfirm,x)||(r.newPasswordConfirm=x),x}),l(),g(32,Sr,2,6,"cx-form-errors",12)(33,Tr,1,1,"cx-form-errors",8),l(),c(34,"div",13)(35,"button",14),y("click",function(){return r.onCancel()}),f(36),s(37,"cxTranslate"),l(),c(38,"button",15),f(39),s(40,"cxTranslate"),l()()()),n&2){let m,x,v;o("ngIf",a(1,31,r.isUpdating$)),i(2),o("formGroup",r.form),i(2),_("",a(5,33,"myAccountV2PasswordForm.newPasswordTitle")," "),i(2),o("ngIf",r.showingAlert),i(3),I(a(10,35,"myAccountV2PasswordForm.oldPassword.label")),i(2),w("placeholder",a(12,37,"myAccountV2PasswordForm.oldPassword.placeholder")),we("ngModel",r.oldPassword),F("aria-label",a(13,39,"myAccountV2PasswordForm.oldPassword.placeholder"))("aria-invalid",((m=r.form.get("oldPassword"))==null?null:m.touched)&&((m=r.form.get("oldPassword"))==null?null:m.invalid))("aria-errormessage","oldPasswordError"),i(3),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(3),I(a(19,41,"myAccountV2PasswordForm.newPassword.label")),i(2),w("placeholder",a(21,43,"myAccountV2PasswordForm.newPassword.placeholder")),we("ngModel",r.newPassword),F("aria-label",a(22,45,"myAccountV2PasswordForm.newPassword.placeholder"))("aria-invalid",((x=r.form.get("newPassword"))==null?null:x.touched)&&((x=r.form.get("newPassword"))==null?null:x.invalid))("aria-errormessage","newPasswordError"),i(3),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(3),I(a(28,47,"myAccountV2PasswordForm.confirmPassword.label")),i(2),w("placeholder",a(30,49,"myAccountV2PasswordForm.confirmPassword.placeholder")),we("ngModel",r.newPasswordConfirm),F("aria-label",a(31,51,"myAccountV2PasswordForm.confirmPassword.placeholder"))("aria-invalid",((v=r.form.get("newPasswordConfirm"))==null?null:v.touched)&&((v=r.form.get("newPasswordConfirm"))==null?null:v.invalid))("aria-errormessage","newPasswordConfirmError"),i(3),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(3),_(" ",a(37,53,"common.cancel")," "),i(2),o("disabled",r.form.disabled),i(),_(" ",a(40,55,"common.save")," ")}},dependencies:[$,J,j,Y,W,ee,X,Z,H,te,ke,G,Rt,L,q],encapsulation:2,changeDetection:0})}}return t})(),ho={cmsComponents:{UpdatePasswordComponent:{component:vo}}},Co=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=K({type:t})}static{this.\u0275inj=Q({providers:[z({cmsComponents:{UpdatePasswordComponent:{component:_o,guards:[$e],providers:[{provide:ht,useClass:ht,deps:[Ce,D,N,qe,Te]}]}}}),at(()=>T(di)?ho:{})],imports:[se,Pe,me,pe,ae,ue,_e,ce,tt,de,qt,Me,B,O]})}}return t})(),Ct=(()=>{class t{constructor(e,n){this.userProfile=e,this.globalMessageService=n,this.user$=this.userProfile.get().pipe(ye(r=>!!r)),this.busy$=new le(!1),this.updateSucceed$=new wt,this.isUpdating$=this.user$.pipe(ge(r=>this.form.patchValue(r)),Ft(r=>this.busy$),ge(r=>r===!0?this.form.disable():this.form.enable())),this.titles$=this.userProfile.getTitles(),this.form=new Oe({customerId:new U(""),titleCode:new U(""),firstName:new U("",A.required),lastName:new U("",A.required)})}updateProfile(){if(!this.form.valid){this.form.markAllAsTouched();return}this.busy$.next(!0),this.userProfile.update(this.form.value).subscribe({next:()=>this.onSuccess(),error:e=>this.onError(e)})}onSuccess(){this.globalMessageService.add({key:"updateProfileForm.profileUpdateSuccess"},k.MSG_TYPE_CONFIRMATION),this.busy$.next(!1),this.form.reset(),this.updateSucceed$.next(!0)}onError(e){this.busy$.next(!1),this.updateSucceed$.next(!1)}static{this.\u0275fac=function(n){return new(n||t)(V(Ve),V(N))}}static{this.\u0275prov=xe({token:t,factory:t.\u0275fac})}}return t})(),yo=(()=>{class t{constructor(e){this.service=e,this.routingService=T(D,{optional:!0}),this.form=this.service.form,this.isUpdating$=this.service.isUpdating$,this.titles$=this.service.titles$}onSubmit(){this.service.updateProfile()}navigateTo(e){this.routingService?.go({cxRoute:e})}static{this.\u0275fac=function(n){return new(n||t)(P(Ct))}}static{this.\u0275cmp=R({type:t,selectors:[["cx-update-profile"]],hostAttrs:[1,"user-form"],standalone:!1,decls:43,vars:51,consts:[["class","overlay",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"label-content"],["formControlName","titleCode","id","title-select",3,"clearable","searchable","cxNgSelectA11y"],[3,"value",4,"ngFor","ngForOf"],["required","true","type","text","name","firstName","formControlName","firstName",1,"form-control",3,"placeholder"],["id","firstNameError",3,"translationParams","control",4,"cxFeature"],[3,"control",4,"cxFeature"],["required","true","type","text","name","lastName","formControlName","lastName",1,"form-control",3,"placeholder"],["id","lastNameError",3,"translationParams","control",4,"cxFeature"],["required","true","type","text","name","customerId","formControlName","customerId","readonly","",1,"form-control"],["id","customerIdError",3,"translationParams","control",4,"cxFeature"],["type","button",1,"btn","btn-block","btn-secondary",3,"click"],[1,"btn","btn-block","btn-primary",3,"disabled"],[1,"overlay"],[3,"value"],["id","firstNameError",3,"translationParams","control"],[3,"control"],["id","lastNameError",3,"translationParams","control"],["id","customerIdError",3,"translationParams","control"]],template:function(n,r){if(n&1&&(g(0,Er,1,0,"cx-spinner",0),s(1,"async"),d(2,"cx-form-required-legend"),c(3,"form",1),y("ngSubmit",function(){return r.onSubmit()}),c(4,"label")(5,"span",2),f(6),s(7,"cxTranslate"),l(),c(8,"ng-select",3),s(9,"cxTranslate"),g(10,Ar,2,2,"ng-option",4),s(11,"async"),l()(),c(12,"label")(13,"span",2),f(14),s(15,"cxTranslate"),d(16,"cx-form-required-asterisks"),l(),d(17,"input",5),s(18,"cxTranslate"),g(19,Pr,2,6,"cx-form-errors",6)(20,Ir,1,1,"cx-form-errors",7),l(),c(21,"label")(22,"span",2),f(23),s(24,"cxTranslate"),d(25,"cx-form-required-asterisks"),l(),d(26,"input",8),s(27,"cxTranslate"),g(28,Mr,2,6,"cx-form-errors",9)(29,kr,1,1,"cx-form-errors",7),l(),c(30,"label")(31,"span",2),f(32),s(33,"cxTranslate"),l(),d(34,"input",10),g(35,Vr,2,6,"cx-form-errors",11)(36,Nr,1,1,"cx-form-errors",7),l(),c(37,"button",12),y("click",function(){return r.navigateTo("home")}),f(38),s(39,"cxTranslate"),l(),c(40,"button",13),f(41),s(42,"cxTranslate"),l()()),n&2){let m,x,v;o("ngIf",a(1,27,r.isUpdating$)),i(3),o("formGroup",r.form),i(3),I(a(7,29,"updateProfileForm.title")),i(2),o("clearable",!1)("searchable",!1)("cxNgSelectA11y",b(49,yt,a(9,31,"updateProfileForm.title"))),i(2),o("ngForOf",a(11,33,r.titles$)),i(4),_("",a(15,35,"updateProfileForm.firstName.label")," "),i(3),w("placeholder",a(18,37,"updateProfileForm.firstName.placeholder")),F("aria-invalid",((m=r.form.get("firstName"))==null?null:m.touched)&&((m=r.form.get("firstName"))==null?null:m.invalid))("aria-errormessage","firstNameError"),i(2),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(3),_("",a(24,39,"updateProfileForm.lastName.label")," "),i(3),w("placeholder",a(27,41,"updateProfileForm.lastName.placeholder")),F("aria-invalid",((x=r.form.get("lastName"))==null?null:x.touched)&&((x=r.form.get("lastName"))==null?null:x.invalid))("aria-errormessage","lastNameError"),i(2),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(3),I(a(33,43,"updateProfileForm.customerId")),i(2),F("aria-invalid",((v=r.form.get("customerId"))==null?null:v.touched)&&((v=r.form.get("customerId"))==null?null:v.invalid))("aria-errormessage","customerIdError"),i(),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(2),_(" ",a(39,45,"common.cancel")," "),i(2),o("disabled",r.form.disabled),i(),_(" ",a(42,47,"common.save")," ")}},dependencies:[Se,$,J,j,Y,W,ee,X,Z,H,te,Le,kt,Ge,G,B,O,L,q],encapsulation:2,changeDetection:0})}}return t})(),wo=(()=>{class t{constructor(){this.service=T(Ct),this.form=this.service.form,this.isUpdating$=this.service.isUpdating$,this.titles$=this.service.titles$,this.user$=this.service.user$}ngOnInit(){this.isEditing=!1}onSubmit(){this.service.updateProfile(),this.service.updateSucceed$.subscribe(e=>{this.isEditing=!e})}cancelEdit(){this.isEditing=!1,this.form.setValue(this.originalEditValue)}onEdit(){this.isEditing=!0,this.originalEditValue=this.form.value}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=R({type:t,selectors:[["cx-my-account-v2-profile"]],standalone:!1,decls:12,vars:11,consts:[["class","overlay",4,"ngIf"],[1,"flex-line"],[1,"headertext"],["class","editButton",3,"click",4,"ngIf"],[4,"ngIf"],["class","myaccount-editing-area",4,"ngIf"],[1,"overlay"],[1,"editButton",3,"click"],[1,"text-head"],[1,"value"],[1,"myaccount-editing-area"],[3,"ngSubmit","formGroup"],[1,"label-content,","text-head"],["formControlName","titleCode","id","title-select",3,"clearable","searchable","cxNgSelectA11y"],[3,"value",4,"ngFor","ngForOf"],["required","true","type","text","name","firstName","formControlName","firstName",1,"form-control"],["id","firstNameError",3,"translationParams","control",4,"cxFeature"],[3,"control",4,"cxFeature"],["required","true","type","text","name","lastName","formControlName","lastName",1,"form-control"],["id","lastNameError",3,"translationParams","control",4,"cxFeature"],["required","true","type","text","name","customerId","formControlName","customerId","readonly","",1,"form-control"],["id","customerIdError",3,"translationParams","control",4,"cxFeature"],[1,"btn-group"],[1,"btn","button-cancel","button",3,"click"],[1,"btn","btn-primary","button",3,"click","disabled"],[3,"value"],["id","firstNameError",3,"translationParams","control"],[3,"control"],["id","lastNameError",3,"translationParams","control"],["id","customerIdError",3,"translationParams","control"]],template:function(n,r){n&1&&(g(0,Br,1,0,"cx-spinner",0),s(1,"async"),s(2,"async"),c(3,"div")(4,"div")(5,"div",1)(6,"label",2),f(7),s(8,"cxTranslate"),l(),g(9,Dr,3,3,"button",3),l()(),g(10,Rr,23,21,"div",4)(11,Yr,38,42,"div",5),l()),n&2&&(o("ngIf",a(1,5,r.isUpdating$)||!a(2,7,r.user$)),i(7),_("",a(8,9,"myAccountV2UserProfile.myInformation")," "),i(2),o("ngIf",!r.isEditing),i(),o("ngIf",!r.isEditing),i(),o("ngIf",r.isEditing))},dependencies:[Se,$,J,j,Y,W,ee,X,Z,H,te,Le,kt,Ge,G,L,q],encapsulation:2,changeDetection:0})}}return t})(),bo=new st("feature flag to enable enhanced UI for profile related pages under My-Account",{providedIn:"root",factory:()=>!1}),Fo={cmsComponents:{UpdateProfileComponent:{component:wo}}},So=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=K({type:t})}static{this.\u0275inj=Q({providers:[z({cmsComponents:{UpdateProfileComponent:{component:yo,guards:[$e],providers:[{provide:Ct,useClass:Ct,deps:[Ve,N]}]}}}),at(()=>T(bo)?Fo:{})],imports:[se,Pe,me,pe,ae,ue,ce,_e,et,it,de,Me,B,O]})}}return t})(),To=(()=>{class t{constructor(e){this.userAddressService=e}getAddresses(){return this.userAddressService.getAddresses()}getAddressesStateLoading(){return this.userAddressService.getAddressesLoading()}loadAddresses(){this.userAddressService.loadAddresses()}addUserAddress(e){this.userAddressService.addUserAddress(e)}updateUserAddress(e,n){this.userAddressService.updateUserAddress(e,n)}setAddressAsDefault(e){this.userAddressService.setAddressAsDefault(e)}deleteUserAddress(e){this.userAddressService.deleteUserAddress(e)}static{this.\u0275fac=function(n){return new(n||t)(V(Ze))}}static{this.\u0275prov=xe({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Eo=(()=>{class t{constructor(e,n,r,m,x,v){this.fb=e,this.userAddressService=n,this.globalMessageService=r,this.translation=m,this.launchDialogService=x,this.userProfileFacade=v,this.selectedCountry$=new le(""),this.setAsDefaultField=!0,this.showCancelBtn=!0,this.submitAddress=new St,this.backToAddress=new St,this.subscription=new nt,this.addressForm=this.fb.group({country:this.fb.group({isocode:[null,A.required]}),titleCode:[""],firstName:["",A.required],lastName:["",A.required],line1:["",A.required],line2:[""],town:["",A.required],region:this.fb.group({isocode:[null,A.required]}),postalCode:["",A.required],phone:"",cellphone:"",defaultAddress:[!1]})}ngOnInit(){this.countries$=this.countries||this.userAddressService.getDeliveryCountries().pipe(ge(e=>{Object.keys(e).length===0&&this.userAddressService.loadDeliveryCountries()})),this.titles$=this.getTitles(),this.regions$=this.selectedCountry$.pipe(Ft(e=>this.userAddressService.getRegions(e)),ge(e=>{let n=this.addressForm.get("region.isocode");e&&e.length>0?n?.enable():n?.disable()})),this.addressData&&Object.keys(this.addressData).length!==0&&(this.addressForm.patchValue(this.addressData),this.countrySelected(this.addressData.country),this.addressData.region&&this.regionSelected(this.addressData.region)),this.addresses$=this.userAddressService.getAddresses()}getTitles(){return We([this.translation.translate("addressForm.defaultTitle"),this.userProfileFacade.getTitles()]).pipe(fe(([e,n])=>{let r={code:"",name:e};return n.sort(xt),[r,...n]}))}handleAddressVerificationResults(e){e.decision==="ACCEPT"?this.submitAddress.emit(this.addressForm.value):e.decision==="REJECT"?e.errors?.errors.some(n=>n.subject==="titleCode")?this.globalMessageService.add({key:"addressForm.titleRequired"},k.MSG_TYPE_ERROR):this.globalMessageService.add({key:"addressForm.invalidAddress"},k.MSG_TYPE_ERROR):e.decision==="REVIEW"&&this.openSuggestedAddress(e)}countrySelected(e){this.addressForm.get("country")?.get("isocode")?.setValue(e?.isocode),this.selectedCountry$.next(e?.isocode??"")}regionSelected(e){this.addressForm.get("region")?.get("isocode")?.setValue(e.isocode)}toggleDefaultAddress(){this.addressForm.controls.defaultAddress.setValue(this.addressForm.value.defaultAddress)}back(){this.backToAddress.emit()}verifyAddress(){if(this.addressForm.valid){let e=this.addressForm.get("region"),n=e?.value?.isocode;n&&this.regions$.pipe(ot(1)).subscribe(r=>{if(r.length){let m=r.find(x=>x.isocode===n);e?.patchValue({isocodeShort:m?.isocodeShort})}else e?.reset()}),this.addressForm.dirty?this.subscription.add(this.userAddressService.verifyAddress(this.addressForm.value).subscribe(r=>{this.handleAddressVerificationResults(r)})):this.submitAddress.emit(void 0)}else this.addressForm.markAllAsTouched(),this.globalMessageService.add({key:"formErrors.globalMessage"},k.MSG_TYPE_ASSISTIVE)}openSuggestedAddress(e){this.launchDialogService.openDialogAndSubscribe(ft.SUGGESTED_ADDRESSES,this.element,{enteredAddress:this.addressForm.value,suggestedAddresses:e.suggestedAddresses}),this.subscription.add(this.launchDialogService.dialogClose.pipe(ye(n=>!!n)).subscribe(n=>{if(typeof n=="object"){let r=Ht(Wt({},n),{titleCode:this.addressForm.value.titleCode,phone:this.addressForm.value.phone,selected:!0});this.submitAddress.emit(r)}}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||t)(P(ve),P(Ze),P(N),P(pt),P(Ie),P(Ve))}}static{this.\u0275cmp=R({type:t,selectors:[["cx-address-form"]],viewQuery:function(n,r){if(n&1&&He(Wr,5),n&2){let m;Qe(m=Ke())&&(r.element=m.first)}},inputs:{addressData:"addressData",actionBtnLabel:"actionBtnLabel",cancelBtnLabel:"cancelBtnLabel",setAsDefaultField:"setAsDefaultField",showTitleCode:"showTitleCode",showCancelBtn:"showCancelBtn",countries:"countries"},outputs:{submitAddress:"submitAddress",backToAddress:"backToAddress"},standalone:!1,decls:91,vars:83,consts:[["submit",""],[3,"ngSubmit","formGroup"],["formGroupName","country",1,"form-group"],[4,"ngIf"],["class","form-group",4,"ngIf"],[1,"form-group"],[1,"label-content","required"],["required","true","type","text","formControlName","firstName",1,"form-control",3,"placeholder"],["id","firstNameError",3,"translationParams","control",4,"cxFeature"],[3,"control",4,"cxFeature"],["required","true","type","text","formControlName","lastName",1,"form-control",3,"placeholder"],["id","lastNameError",3,"translationParams","control",4,"cxFeature"],["required","true","type","text","formControlName","line1",1,"form-control",3,"placeholder"],["id","line1Error",3,"translationParams","control",4,"cxFeature"],[1,"label-content"],["type","text","formControlName","line2",1,"form-control",3,"placeholder"],[1,"row"],[1,"form-group","col-sm-6"],["required","true","type","text","formControlName","town",1,"form-control",3,"placeholder"],["id","townError",3,"translationParams","control",4,"cxFeature"],["required","true","type","text","formControlName","postalCode",1,"form-control",3,"placeholder"],["id","postalCodeError",3,"translationParams","control",4,"cxFeature"],["formGroupName","region",4,"ngIf"],[1,"form-group","col-md-6"],["type","tel","formControlName","phone",1,"form-control",3,"placeholder"],["type","tel","formControlName","cellphone",1,"form-control",3,"placeholder"],[1,"cx-address-form-btns"],["class","col-md-13 col-lg-6",4,"ngIf"],[1,"col-md-13","col-lg-6"],["type","submit",1,"btn","btn-block","btn-primary"],["id","country-select","formControlName","isocode","bindLabel","name","bindValue","isocode",1,"country-select",3,"change","inputAttrs","searchable","clearable","items","placeholder","cxNgSelectA11y"],[3,"translationParams","control",4,"cxFeature"],[3,"translationParams","control"],[3,"control"],["id","title-select","formControlName","titleCode","bindLabel","name","bindValue","code",3,"searchable","clearable","items","placeholder","cxNgSelectA11y"],["id","firstNameError",3,"translationParams","control"],["id","lastNameError",3,"translationParams","control"],["id","line1Error",3,"translationParams","control"],["id","townError",3,"translationParams","control"],["id","postalCodeError",3,"translationParams","control"],["formGroupName","region"],["formControlName","isocode","id","region-select",1,"region-select",3,"inputAttrs","searchable","clearable","items","bindLabel","bindValue","placeholder","cxNgSelectA11y"],[1,"form-check"],["type","checkbox","formControlName","defaultAddress",1,"form-check-input",3,"change"],[1,"form-check-label"],[1,"btn","btn-block","btn-secondary",3,"click"]],template:function(n,r){if(n&1){let m=M();d(0,"cx-form-required-legend"),c(1,"form",1),y("ngSubmit",function(){return h(m),C(r.verifyAddress())}),c(2,"div",2),g(3,zr,2,1,"ng-container",3),s(4,"async"),l(),g(5,Zr,3,3,"div",4),c(6,"div",5)(7,"label")(8,"span",6),f(9),s(10,"cxTranslate"),d(11,"cx-form-required-asterisks"),l(),d(12,"input",7),s(13,"cxTranslate"),g(14,en,2,6,"cx-form-errors",8)(15,tn,1,1,"cx-form-errors",9),l()(),c(16,"div",5)(17,"label")(18,"span",6),f(19),s(20,"cxTranslate"),d(21,"cx-form-required-asterisks"),l(),d(22,"input",10),s(23,"cxTranslate"),g(24,rn,2,6,"cx-form-errors",11)(25,nn,1,1,"cx-form-errors",9),l()(),c(26,"div",5)(27,"label")(28,"span",6),f(29),s(30,"cxTranslate"),d(31,"cx-form-required-asterisks"),l(),d(32,"input",12),s(33,"cxTranslate"),g(34,on,2,6,"cx-form-errors",13)(35,sn,1,1,"cx-form-errors",9),l()(),c(36,"div",5)(37,"label")(38,"span",14),f(39),s(40,"cxTranslate"),l(),d(41,"input",15),s(42,"cxTranslate"),l()(),c(43,"div",16)(44,"div",17)(45,"label")(46,"span",6),f(47),s(48,"cxTranslate"),d(49,"cx-form-required-asterisks"),l(),d(50,"input",18),s(51,"cxTranslate"),g(52,an,2,6,"cx-form-errors",19)(53,ln,1,1,"cx-form-errors",9),l()(),c(54,"div",17)(55,"label")(56,"span",6),f(57),s(58,"cxTranslate"),d(59,"cx-form-required-asterisks"),l(),d(60,"input",20),s(61,"cxTranslate"),g(62,cn,2,6,"cx-form-errors",21)(63,dn,1,1,"cx-form-errors",9),l()(),g(64,mn,2,1,"ng-container",22),s(65,"async"),l(),c(66,"div",16)(67,"div",23)(68,"label")(69,"span",14),f(70),s(71,"cxTranslate"),l(),d(72,"input",24),s(73,"cxTranslate"),l()(),c(74,"div",23)(75,"label")(76,"span",14),f(77),s(78,"cxTranslate"),l(),d(79,"input",25),s(80,"cxTranslate"),l()()(),g(81,un,7,3,"div",4),s(82,"async"),c(83,"div",26)(84,"div",16),g(85,fn,4,3,"div",27),c(86,"div",28)(87,"button",29,0),f(89),s(90,"cxTranslate"),l()()()()()}if(n&2){let m,x,v,ie,he,Ye;i(),o("formGroup",r.addressForm),i(2),o("ngIf",a(4,43,r.countries$)),i(2),o("ngIf",r.showTitleCode),i(4),_("",a(10,45,"addressForm.firstName.label")," "),i(3),w("placeholder",a(13,47,"addressForm.firstName.placeholder")),F("aria-invalid",((m=r.addressForm.get("firstName"))==null?null:m.touched)&&((m=r.addressForm.get("firstName"))==null?null:m.invalid))("aria-errormessage","firstNameError"),i(2),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(4),_("",a(20,49,"addressForm.lastName.label")," "),i(3),w("placeholder",a(23,51,"addressForm.lastName.placeholder")),F("aria-invalid",((x=r.addressForm.get("lastName"))==null?null:x.touched)&&((x=r.addressForm.get("lastName"))==null?null:x.invalid))("aria-errormessage","lastNameError"),i(2),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(4),_("",a(30,53,"addressForm.address1")," "),i(3),w("placeholder",a(33,55,"addressForm.streetAddress")),F("aria-invalid",((v=r.addressForm.get("line1"))==null?null:v.touched)&&((v=r.addressForm.get("line1"))==null?null:v.invalid))("aria-errormessage","line1Error"),i(2),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(4),I(a(40,57,"addressForm.address2")),i(2),w("placeholder",a(42,59,"addressForm.aptSuite")),i(6),_("",a(48,61,"addressForm.city.label")," "),i(3),w("placeholder",a(51,63,"addressForm.city.placeholder")),F("aria-invalid",((ie=r.addressForm.get("town"))==null?null:ie.touched)&&((ie=r.addressForm.get("town"))==null?null:ie.invalid))("aria-errormessage","townError"),i(2),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(4),_("",a(58,65,"addressForm.zipCode.label")," "),i(3),w("placeholder",a(61,67,"addressForm.zipCode.placeholder")),F("aria-invalid",((he=r.addressForm.get("postalCode"))==null?null:he.touched)&&((he=r.addressForm.get("postalCode"))==null?null:he.invalid))("aria-errormessage","postalCodeError"),i(2),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(),o("ngIf",a(65,69,r.regions$)),i(6),I(a(71,71,"addressForm.phoneNumber.label")),i(2),w("placeholder",a(73,73,"addressForm.phoneNumber.placeholder")),i(5),I(a(78,75,"addressForm.cellphone.label")),i(2),w("placeholder",a(80,77,"addressForm.cellphone.placeholder")),i(2),o("ngIf",((Ye=a(82,79,r.addresses$))==null?null:Ye.length)&&r.setAsDefaultField),i(4),o("ngIf",r.showCancelBtn),i(4),_(" ",r.actionBtnLabel||a(90,81,"common.continue")," ")}},dependencies:[Ge,$,J,j,mt,Y,W,ee,X,Z,Pt,Le,te,G,B,O,L,q],encapsulation:2,changeDetection:0})}}return t})(),Ao=(()=>{class t{constructor(e,n,r){this.service=e,this.translation=n,this.globalMessageService=r,this.showAddAddressForm=!1,this.showEditAddressForm=!1}ngOnInit(){this.addresses$=this.service.getAddresses(),this.addressesStateLoading$=this.service.getAddressesStateLoading(),this.service.loadAddresses()}addAddressButtonHandle(){this.showEditAddressForm=!1,this.showAddAddressForm=!0}editAddressButtonHandle(e){this.showAddAddressForm=!1,this.showEditAddressForm=!0,this.currentAddress=e}addAddressSubmit(e){this.showAddAddressForm=!1,this.service.addUserAddress(e)}addAddressCancel(){this.showAddAddressForm=!1}editAddressSubmit(e){this.showEditAddressForm=!1,e&&this.currentAddress.id&&this.service.updateUserAddress(this.currentAddress.id,e)}editAddressCancel(){this.showEditAddressForm=!1}getCardContent(e){return We([this.translation.translate("addressCard.default"),this.translation.translate("addressCard.setAsDefault"),this.translation.translate("common.delete"),this.translation.translate("common.edit"),this.translation.translate("addressBook.areYouSureToDeleteAddress"),this.translation.translate("addressCard.phoneNumber"),this.translation.translate("addressCard.mobileNumber")]).pipe(fe(([n,r,m,x,v,ie,he])=>{let Ye="";e.region&&e.region.isocode&&(Ye=e.region.isocode+", ");let rt=[];e.defaultAddress||rt.push({name:r,event:"default"}),rt.push({name:x,event:"edit"}),rt.push({name:m,event:"delete"});let mi=oi(e,ie,he);return{role:"application",textBold:e.firstName+" "+e.lastName,text:[e.line1,e.line2,e.town+", "+Ye+e.country?.isocode,e.postalCode,mi],actions:rt,header:e.defaultAddress?`\u2713 ${n}`:"",deleteMsg:v,label:e.defaultAddress?"addressBook.defaultDeliveryAddress":"addressBook.additionalDeliveryAddress"}}))}setAddressAsDefault(e){this.service.setAddressAsDefault(e.id??""),this.globalMessageService.add({key:"addressMessages.setAsDefaultSuccessfully",params:{streetAddress:e.line1}},k.MSG_TYPE_CONFIRMATION)}deleteAddress(e){this.service.deleteUserAddress(e)}setEdit(e){this.editCard!==e?this.editCard=e:this.deleteAddress(e)}cancelCard(){this.editCard=null}static{this.\u0275fac=function(n){return new(n||t)(P(To),P(pt),P(N))}}static{this.\u0275cmp=R({type:t,selectors:[["cx-address-book"]],standalone:!1,decls:8,vars:7,consts:[["loading",""],[1,"cx-section"],[4,"ngIf"],[1,"row"],[1,"col-md-6"],[1,"btn","btn-block","btn-secondary",3,"click"],["class","row cx-address-deck",4,"ngIf","ngIfElse"],[1,"row","cx-address-deck"],["role","status",4,"cxFeature"],["class","col-md-6 cx-address-card",4,"ngFor","ngForOf"],["role","status"],[1,"col-md-6","cx-address-card"],[3,"editCard","setDefaultCard","deleteCard","cancelCard","index","border","fitToContainer","content","editMode"],[1,"cx-section-msg"],[1,"cx-form",3,"submitAddress","backToAddress","cancelCard","showTitleCode","showCancelBtn","actionBtnLabel","cancelBtnLabel","setAsDefaultField"],[3,"submitAddress","backToAddress","showTitleCode","actionBtnLabel","cancelBtnLabel","addressData"],[1,"col-md-12","cx-address-spinner"]],template:function(n,r){if(n&1&&(c(0,"div",1),g(1,vn,8,7,"ng-container",2),s(2,"async"),g(3,hn,10,16,"ng-container",2),s(4,"async"),g(5,Cn,8,11,"ng-container",2),l(),g(6,yn,2,0,"ng-template",null,0,De)),n&2){let m,x;i(),o("ngIf",((m=a(2,3,r.addresses$))==null?null:m.length)&&!(r.showAddAddressForm||r.showEditAddressForm)),i(2),o("ngIf",(!((x=a(4,5,r.addresses$))!=null&&x.length)||r.showAddAddressForm)&&!r.showEditAddressForm),i(2),o("ngIf",r.showEditAddressForm)}},dependencies:[Se,$,ri,Eo,H,G,L,q],encapsulation:2})}}return t})(),Po=(()=>{class t{handleClick(e){e.target.tagName===this.el.nativeElement.tagName&&this.closeModal("Cross click")}constructor(e,n){this.launchDialogService=e,this.el=n,this.iconTypes=Bt,this.focusConfig={trap:!0,block:!0,autofocus:"button",focusOnEscape:!0},this.data$=this.launchDialogService.data$}ngOnInit(){this.data$.pipe(ot(1)).subscribe(e=>this.setSelectedAddress(e))}closeModal(e){this.launchDialogService.closeDialog(e)}setSelectedAddress(e){this.selectedAddress=e.suggestedAddresses?.length?e.suggestedAddresses[0]:e.enteredAddress}static{this.\u0275fac=function(n){return new(n||t)(P(Ie),P(Tt))}}static{this.\u0275cmp=R({type:t,selectors:[["cx-suggested-addresses-dialog"]],hostBindings:function(n,r){n&1&&y("click",function(x){return r.handleClick(x)})},standalone:!1,decls:3,vars:4,consts:[["role","dialog","aria-labelledby","dialogTitle",1,"modal-dialog","modal-dialog-centered","modal-lg","cx-suggested-addresses-dialog",3,"esc","cxFocus"],["class","modal-content cx-suggested-addresses-container",4,"ngIf"],[1,"modal-content","cx-suggested-addresses-container"],[1,"cx-suggested-addresses-header","cx-modal-header"],["id","dialogTitle","class","cx-suggested-addresses-title",4,"cxFeature"],["type","button",1,"close",3,"click","title"],["aria-hidden","true"],[3,"type"],["ngForm","",1,"modal-body"],[1,"cx-dialog-info"],[1,"cx-dialog-options"],["class","form-check",4,"ngFor","ngForOf"],[1,"form-check"],["type","radio","name","selectedAddress","id","suggested-addresses--entered",1,"form-check-input",3,"ngModelChange","ngModel","value"],["for","suggested-addresses--entered",1,"form-check-label","cx-dialog-label"],[1,"cx-dialog-entered"],[1,"cx-card-container"],[1,"cx-card-label"],[1,"cx-suggested-addresses-footer","cx-modal-footer"],[1,"row"],[1,"cx-dialog-actions","col-sm-12","col-md-12","col-lg-6","offset-lg-6"],[1,"btn","btn-secondary","cx-dialog-buttons",3,"click"],["cxAutoFocus","",1,"btn","btn-primary","cx-dialog-buttons",3,"click"],["id","dialogTitle",1,"cx-suggested-addresses-title"],["type","radio","name","selectedAddress",1,"form-check-input",3,"ngModelChange","ngModel","value","id"],[1,"form-check-label","cx-dialog-label",3,"for"],[1,"cx-dialog-suggested"]],template:function(n,r){n&1&&(c(0,"div",0),y("esc",function(){return r.closeModal("Escape clicked")}),g(1,Sn,44,34,"div",1),s(2,"async"),l()),n&2&&(o("cxFocus",r.focusConfig),i(),o("ngIf",a(2,2,r.data$)))},dependencies:[Se,$,j,ei,Y,W,Zt,Xt,Dt,Vt,G,L,q],encapsulation:2,changeDetection:0})}}return t})(),Io=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=K({type:t})}static{this.\u0275inj=Q({imports:[it,se,me,Pe,ce,et,gt,ae,ue,ut,de,B,O]})}}return t})(),Mo={launch:{SUGGESTED_ADDRESSES:{inlineRoot:!0,component:Po,dialogType:Nt.DIALOG}}},ko=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=K({type:t})}static{this.\u0275inj=Q({providers:[z({cmsComponents:{AccountAddressBookComponent:{component:Ao,guards:[$e]}}}),z(Mo),Ze],imports:[se,ni,Io,pe,ae,de]})}}return t})(),pi="REGISTRATION",Vo=(()=>{class t{get additionalConsents(){return this.registerForm?.get("additionalConsents")}updateAdditionalConsents(e,n){let{checked:r}=e.target;this.registerForm.value.additionalConsents[n]=r}constructor(){this.globalMessageService=T(N),this.fb=T(ve),this.router=T(D),this.anonymousConsentsService=T(ct),this.anonymousConsentsConfig=T(dt),this.clientAuthenticationTokenService=T(Jt),this.registerComponentService=T(je),this.routingService=T(D),this.registrationVerificationTokenFacade=T(Ot),this.isLoading$=new le(!1),this.subscription=new nt,this.registerForm=this.fb.group({titleCode:[null],firstName:["",A.required],lastName:["",A.required],email:["",[A.required,E.emailValidator]],newsletter:new U({value:!1,disabled:this.isConsentRequired()}),additionalConsents:this.registerComponentService.generateAdditionalConsentsFormControl?.()??this.fb.array([]),termsandconditions:[!1,A.requiredTrue],captcha:[!1,A.requiredTrue]}),Ae("a11yPasswordVisibliltyBtnValueOverflow")}ngOnInit(){this.titles$=this.registerComponentService.getTitles().pipe(fe(n=>n.sort(xt))),this.subscription.add(this.globalMessageService.get().pipe(ye(n=>!!Object.keys(n).length)).subscribe(n=>{let r=n&&n[k.MSG_TYPE_ERROR];r&&r.some(m=>m.raw==="This field is required.")&&(this.globalMessageService.remove(k.MSG_TYPE_ERROR),this.globalMessageService.add({key:"register.titleRequired"},k.MSG_TYPE_ERROR))}));let e=this.anonymousConsentsConfig?.anonymousConsents?.registerConsent??"";this.anonymousConsent$=We([this.anonymousConsentsService.getConsent(e),this.anonymousConsentsService.getTemplate(e)]).pipe(fe(([n,r])=>({consent:n,template:r?.description?r.description:""}))),this.additionalRegistrationConsents=this.registerComponentService?.getAdditionalConsents()||[],this.subscription.add(this.registerForm.get("newsletter")?.valueChanges.subscribe(()=>{this.toggleAnonymousConsent()}))}submitForm(){this.registerForm.valid?this.sendRegistrationVerificationToken():this.registerForm.markAllAsTouched()}sendRegistrationVerificationToken(){this.isLoading$.next(!0),this.clientAuthenticationTokenService.loadClientAuthenticationToken();let e=this.collectDataFromRegisterForm();this.registrationVerificationTokenFacade.createVerificationToken(e).subscribe({next:n=>this.goToVerificationTokenForm(n),error:n=>{this.routingService.go({cxRoute:"verifyTokenForRegistration"},{state:{errorStatus:n.status,titleCode:this.registerForm.value.titleCode,firstName:this.registerForm.value.firstName,lastName:this.registerForm.value.lastName,loginId:this.registerForm.value.email.toLowerCase()}}),this.isLoading$.next(!1)},complete:()=>this.onCreateRegistrationVerificationTokenComplete()})}onCreateRegistrationVerificationTokenComplete(){this.isLoading$.next(!1)}collectDataFromRegisterForm(){return{loginId:this.registerForm.value.email.toLowerCase(),purpose:pi}}goToVerificationTokenForm(e){this.routingService.go({cxRoute:"verifyTokenForRegistration"},{state:{loginId:this.registerForm.value.email.toLowerCase(),tokenId:e.tokenId,expiresIn:e.expiresIn,titleCode:this.registerForm.value.titleCode,firstName:this.registerForm.value.firstName,lastName:this.registerForm.value.lastName}})}isConsentGiven(e){return this.anonymousConsentsService.isConsentGiven(e)}isConsentRequired(){let e=this.anonymousConsentsConfig?.anonymousConsents?.requiredConsents,n=this.anonymousConsentsConfig?.anonymousConsents?.registerConsent;return e&&n?e.includes(n):!1}toggleAnonymousConsent(){let e=this.anonymousConsentsConfig?.anonymousConsents?.registerConsent;e&&(this.registerForm.get("newsletter")?.value?this.anonymousConsentsService.giveConsent(e):this.anonymousConsentsService.withdrawConsent(e))}captchaConfirmed(){this.registerForm.get("captcha")?.setValue(!0)}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=R({type:t,selectors:[["cx-otp-register-form"]],standalone:!1,decls:4,vars:4,consts:[["loading",""],["class","cx-page-section container",4,"ngIf","ngIfElse"],[1,"cx-page-section","container"],["role","status",4,"cxFeature"],[1,"row","justify-content-center"],[1,"col-md-6"],[1,"cx-section"],[3,"ngSubmit","formGroup"],[1,"form-group"],[1,"label-content"],["bindLabel","name","bindValue","code","formControlName","titleCode","id","title-select",3,"clearable","items","placeholder","searchable","cxNgSelectA11y"],["required","true","type","text","name","firstname","formControlName","firstName",1,"form-control",3,"placeholder"],[3,"translationParams","control",4,"cxFeature"],[3,"control",4,"cxFeature"],["required","true","type","text","name","lastname","formControlName","lastName",1,"form-control",3,"placeholder"],["required","true","type","email","name","email","formControlName","email",1,"form-control",3,"placeholder"],[1,"form-check"],[4,"ngIf"],["formArrayName","additionalConsents","class","form-group",4,"ngIf"],["required","true","type","checkbox","name","termsandconditions","formControlName","termsandconditions"],[1,"form-check-label"],["target","_blank","rel","noopener noreferrer",3,"routerLink"],[3,"confirmed"],[3,"control"],["type","submit",1,"btn","btn-block","btn-primary"],[1,"cx-login-link","btn-link",3,"routerLink"],["role","status"],[3,"translationParams","control"],["type","checkbox","name","newsletter","formControlName","newsletter",1,"form-check-input",3,"checked"],["formArrayName","additionalConsents",1,"form-group"],["class","form-check",4,"ngFor","ngForOf"],["type","checkbox",3,"change","required","name","formControlName"],[1,"cx-spinner"]],template:function(n,r){if(n&1&&(g(0,$n,72,66,"section",1),s(1,"async"),g(2,Un,2,0,"ng-template",null,0,De)),n&2){let m=ze(3);o("ngIf",!a(1,2,r.isLoading$))("ngIfElse",m)}},dependencies:[Se,$,Je,G,J,j,mt,Y,W,ee,Mt,X,Z,It,Le,Ge,$t,H,te,B,L,Xe,q],encapsulation:2})}}return t})(),No=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=K({type:t})}static{this.\u0275inj=Q({providers:[z({cmsComponents:{RegisterCustomerWithOTPComponent:{component:Vo,guards:[Ue],providers:[{provide:je,useClass:je,deps:[Ne,ve]}]}}})],imports:[se,ce,_e,ti,ae,de,Me,me,et,it,Ut,pe,ue,B]})}}return t})(),si=1e4,jt=(()=>{class t{constructor(){this.globalMessageService=T(N),this.userRegisterFacade=T(Ne),this.featureConfigService=T(Ee)}displayMessage(e,n){this.globalMessageService.add({key:e,params:n},k.MSG_TYPE_CONFIRMATION,si)}register(e){return this.userRegisterFacade.register(e)}postRegisterMessage(){this.featureConfigService.isEnabled("a11yPostRegisterSuccessMessage")?this.displayMessage("register.postRegisterSuccessMessage",si):this.globalMessageService.add({key:"register.postRegisterMessage"},k.MSG_TYPE_CONFIRMATION)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=xe({token:t,factory:t.\u0275fac})}}return t})(),Bo=(()=>{class t{constructor(){this.fb=T(ve),this.router=T(D),this.authConfigService=T(Re),this.registrationVerificationTokenFacade=T(Ot),this.service=T(jt),this.globalMessage=T(N),this.launchDialogService=T(Ie),this.featureConfigService=T(Ee),this.passwordValidators=this.getPasswordValidators(),this.cdr=T(Kt),this.waitTime=60,this.waitTimeForRateLimit=300,this.registerForm=this.fb.group({password:["",[A.required,...this.passwordValidators]],passwordconf:["",A.required],tokenCode:["",A.required],titleCode:[""],firstName:[""],lastName:[""],email:[""],tokenId:[""]},{validators:E.passwordsMustMatch("password","passwordconf")}),this.isLoading$=new le(!1),this.isResendDisabled=!0}getPasswordValidators(){return this.featureConfigService?.isEnabled("formErrorsDescriptiveMessages")?this.featureConfigService.isEnabled("enableSecurePasswordValidation")?E.securePasswordValidators:this.featureConfigService.isEnabled("enableConsecutiveCharactersPasswordRequirement")?[...E.passwordValidators,E.noConsecutiveCharacters]:E.passwordValidators:this.featureConfigService.isEnabled("enableSecurePasswordValidation")?E.securePasswordValidator:E.passwordValidators}ngOnInit(){history.state&&(this.tokenId=history.state.tokenId,this.target=history.state.loginId,this.titleCode=history.state.titleCode,this.firstName=history.state.firstName,this.lastName=history.state.lastName,this.errorStatus=history.state.errorStatus,history.pushState({tokenId:"",loginId:"",titleCode:"",firstName:"",lastName:"",errorStatus:""},"verifyTokenForRegistration")),this.errorStatus===400?(this.upToRateLimit=!0,this.tokenId="invalidTokenId",this.startRateLimitWaitTimeInterval()):!this.target||!this.tokenId||!this.firstName||!this.lastName?this.router.go(["/login/register"]):(this.startWaitTimeInterval(),this.service.displayMessage("verificationTokenForm.createVerificationToken",{target:this.target}))}onSubmit(){this.registerForm.valid?this.registerUserWithVerificationToken():this.registerForm.markAllAsTouched()}registerUserWithVerificationToken(){this.isLoading$.next(!0),this.registerForm.setValue({titleCode:this.titleCode,firstName:this.firstName,lastName:this.lastName,email:this.target,tokenId:this.tokenId,password:this.registerForm.value.password,tokenCode:this.registerForm.value.tokenCode,passwordconf:this.registerForm.value.passwordconf}),this.service.register(this.collectDataFromRegisterForm(this.registerForm.value)).subscribe({next:()=>this.onRegisterUserSuccess(),complete:()=>this.isLoading$.next(!1),error:e=>{e.status===400&&(this.registerForm.get("tokenCode")?.setErrors({invalidTokenCodeError:e.message}),this.globalMessage.remove(k.MSG_TYPE_ERROR)),this.isLoading$.next(!1)}})}collectDataFromRegisterForm(e){let{email:n,firstName:r,lastName:m,password:x,titleCode:v,tokenId:ie,tokenCode:he}=e;return{uid:n.toLowerCase(),firstName:r,lastName:m,password:x,titleCode:v,verificationTokenId:ie,verificationTokenCode:he}}onRegisterUserSuccess(){this.authConfigService.getOAuthFlow()===lt.ResourceOwnerPasswordFlow&&this.router.go("login"),this.service.postRegisterMessage()}resendOTP(){this.isResendDisabled=!0,this.resendLink.nativeElement.tabIndex=-1,this.waitTime=60,this.startWaitTimeInterval(),this.createRegistrationVerificationToken(this.target,pi).subscribe({next:e=>this.tokenId=e.tokenId,complete:()=>this.service.displayMessage("verificationTokenForm.createVerificationToken",{target:this.target})})}createRegistrationVerificationToken(e,n){return this.registrationVerificationTokenFacade.createVerificationToken({loginId:e,purpose:n})}startWaitTimeInterval(){let e=setInterval(()=>{this.waitTime--,this.cdr.detectChanges(),this.waitTime<=0&&(clearInterval(e),this.isResendDisabled=!1,this.resendLink.nativeElement.tabIndex=0,this.cdr.detectChanges())},1e3)}startRateLimitWaitTimeInterval(){let e=setInterval(()=>{this.waitTimeForRateLimit--,this.cdr.detectChanges(),this.waitTimeForRateLimit<=0&&(clearInterval(e),this.upToRateLimit=!1,this.isResendDisabled=!1,this.cdr.detectChanges())},1e3)}openInfoDailog(){this.launchDialogService.openDialogAndSubscribe(ft.ACCOUNT_VERIFICATION_TOKEN,this.element)}onOpenInfoDailogKeyDown(e){(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),this.openInfoDailog())}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=R({type:t,selectors:[["cx-registration-verification-token-form"]],viewQuery:function(n,r){if(n&1&&(He(On,5),He(Ln,5)),n&2){let m;Qe(m=Ke())&&(r.element=m.first),Qe(m=Ke())&&(r.resendLink=m.first)}},standalone:!1,decls:50,vars:47,consts:[["loading",""],["resendLink",""],["noReceiveCodeLink",""],[3,"ngSubmit","formGroup"],[1,"label-content"],["required","true","formControlName","tokenCode",1,"form-control",3,"placeholder"],[3,"control"],["class","rate-limit-error-display",4,"ngIf"],["type","hidden","formControlName","tokenId",3,"ngModelChange","ngModel"],["class","resend-link-text",4,"ngIf"],[1,"form-group"],["required","true","type","password","name","password","formControlName","password","aria-describedby","password-input-hint","cxPasswordVisibilitySwitch","",1,"form-control",3,"placeholder"],["id","password-input-hint",1,"input-hint"],[3,"translationParams","control",4,"cxFeature"],[3,"control",4,"cxFeature"],["required","true","type","password","name","confirmpassword","formControlName","passwordconf","cxPasswordVisibilitySwitch","",1,"form-control",3,"placeholder"],[1,"verify-container"],["type","submit",1,"btn","btn-block","btn-primary",3,"disabled"],[1,"btn","btn-block","btn-secondary","btn-register",3,"routerLink"],[1,"rate-limit-error-display"],[1,"resend-link-text"],[1,"left-text"],["role","timer","aria-live","polite","aria-atomic","true"],["role","button","tabindex","-1",1,"btn-link",3,"keydown.enter","keydown.space","click","ngClass"],[4,"ngIf"],[1,"right-text"],["role","button","tabindex","0",1,"btn-link",3,"keydown","click"],[3,"translationParams","control"],[1,"cx-spinner"]],template:function(n,r){if(n&1){let m=M();c(0,"form",3),y("ngSubmit",function(){return h(m),C(r.onSubmit())}),c(1,"label")(2,"span",4),f(3),s(4,"cxTranslate"),d(5,"cx-form-required-asterisks"),f(6," >"),l(),d(7,"input",5),s(8,"cxTranslate"),d(9,"cx-form-errors",6),g(10,Hn,3,6,"div",7),l(),c(11,"input",8),Fe("ngModelChange",function(v){return h(m),be(r.tokenId,v)||(r.tokenId=v),C(v)}),l(),g(12,Kn,13,10,"div",9),c(13,"div",10)(14,"label")(15,"span",4),f(16),s(17,"cxTranslate"),d(18,"cx-form-required-asterisks"),f(19," >"),l(),d(20,"input",11),s(21,"cxTranslate"),s(22,"cxTranslate"),c(23,"p",12),f(24),s(25,"cxTranslate"),l(),g(26,zn,2,6,"cx-form-errors",13)(27,Jn,1,1,"cx-form-errors",14),l()(),c(28,"div",10)(29,"label")(30,"span",4),f(31),s(32,"cxTranslate"),d(33,"cx-form-required-asterisks"),f(34," >"),l(),d(35,"input",15),s(36,"cxTranslate"),s(37,"cxTranslate"),g(38,Xn,2,6,"cx-form-errors",13)(39,Zn,1,1,"cx-form-errors",14),l()(),c(40,"div",16)(41,"button",17),f(42),s(43,"cxTranslate"),l(),c(44,"button",18),s(45,"cxUrl"),f(46),s(47,"cxTranslate"),l()()(),g(48,eo,2,0,"ng-template",null,0,De)}n&2&&(o("formGroup",r.registerForm),i(3),_(" ",a(4,22,"verificationTokenForm.verificationCode.label")," "),i(4),w("placeholder",a(8,24,"verificationTokenForm.verificationCode.placeholder")),i(2),o("control",r.registerForm.get("tokenCode")),i(),o("ngIf",r.upToRateLimit),i(),we("ngModel",r.tokenId),i(),o("ngIf",!r.upToRateLimit),i(4),_("",a(17,26,"register.password.label")," "),i(4),w("placeholder",a(21,28,"register.password.placeholder")),F("aria-label",a(22,30,"register.password.placeholder")),i(4),_(" ",a(25,32,"register.passwordMinRequirements")," "),i(2),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(4),_("",a(32,34,"register.confirmPassword.label")," "),i(4),w("placeholder",a(36,36,"register.confirmPassword.placeholder")),F("aria-label",a(37,38,"register.confirmPassword.placeholder")),i(3),o("cxFeature","formErrorsDescriptiveMessages"),i(),o("cxFeature","!formErrorsDescriptiveMessages"),i(2),o("disabled",r.registerForm.disabled),i(),_(" ",a(43,40,"register.register")," "),i(2),o("routerLink",a(45,42,oe(46,Gn))),i(2),_(" ",a(47,44,"verificationTokenForm.back")," "))},dependencies:[zt,$,J,j,Y,W,ee,X,Z,Je,te,H,G,B,Xe,q],encapsulation:2,changeDetection:0})}}return t})(),Do=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=K({type:t})}static{this.\u0275inj=Q({providers:[z({cmsComponents:{VerifyOTPForRegistrationComponent:{component:Bo,guards:[Ue],providers:[{provide:jt,useClass:jt,deps:[N,Ne]}]}}})],imports:[se,Pe,ut,me,ce,_e,gt,ae,ue,pe,de,B]})}}return t})(),ps=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=K({type:t})}static{this.\u0275inj=Q({imports:[lo,So,xo,Co,so,po,no,ko,No,Do]})}}return t})();export{Eo as a,Io as b,ps as c};
