import{a as ne,b as re,c as ae,d as se}from"./chunk-4QGFQKK3.js";import{a as te,d as ie,g as oe,j as S}from"./chunk-QKV5QP3B.js";import"./chunk-WPN2OLOU.js";import"./chunk-EU5ZHKTW.js";import{J,K as Q,L as X,P as ee}from"./chunk-H2QHHFZD.js";import{$b as R,Ab as h,Bb as w,Cc as $,Eg as Z,Fa as F,I as b,Ic as v,Kd as M,Lb as O,Nb as D,Oc as W,Pa as c,Te as G,Uc as z,Ya as j,Za as a,ac as H,bb as k,da as l,gc as K,he as U,ib as y,ma as m,n as f,na as r,ng as q,q as I,qa as n,r as A,rf as Y,sb as u,tb as g,va as N,vb as T,wa as x,wb as B,xc as V,yb as P,z as L}from"./chunk-PRP3ZKGZ.js";import{a as C,b as E}from"./chunk-25N2FLV6.js";function le(e,fe){if(e&1){let t=P();u(0,"div",2)(1,"div",3)(2,"p",4),O(3),g()(),u(4,"div",5)(5,"button",6),h("click",function(){N(t);let o=w();return x(o.dismissModal("Cancel"))}),O(6),g()()()}if(e&2){let t=fe.ngIf;c(3),D(" ",t==null?null:t.message," "),c(3),D(" ",t==null?null:t.confirm," ")}}var me=(()=>{class e{constructor(){this.translationService=n(q)}getMessageAndConfirmTranslations(t){return A([this.getLabelTranslation(S.messageKey,t.messageString,t.messageKey,t.messageReplacements),this.getLabelTranslation(S.confirmKey,t.confirmString,t.confirmKey,t.confirmReplacements)]).pipe(I(i=>({message:i[0],confirm:i[1]})))}getLabelTranslation(t,i,o,d){let p=this.translationService.translate(t);if(i)return f(i);if(o){let _=this.translationService.translate(o).pipe(l(s=>s?f(s):p));return d?this.translationService.translate(o,d).pipe(l(s=>s?f(s):_)):_}else return p}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=m({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),ue=(()=>{class e{handleClick(t){t.target.tagName===this.el.nativeElement.tagName&&this.dismissModal("Backdrop click")}initialize(){L(1).subscribe({complete:()=>{this.cd.markForCheck()}})}constructor(){this.launchDialogService=n(ee),this.el=n(F),this.cd=n(K),this.opfErrorModalService=n(me),this.focusConfig={trap:!0,block:!0,autofocus:"button",focusOnEscape:!0},this.initialize()}ngOnInit(){this.opfErrorDialogOptions$=this.launchDialogService.data$.pipe(l(t=>this.opfErrorModalService.getMessageAndConfirmTranslations(t)))}dismissModal(t){this.launchDialogService.closeDialog(t)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=j({type:e,selectors:[["cx-opf-error-modal"]],hostBindings:function(i,o){i&1&&h("click",function(p){return o.handleClick(p)})},standalone:!1,decls:4,vars:4,consts:[[1,"modal-dialog","modal-dialog-centered","cx-opf-error-modal",3,"esc","cxFocus"],["class","modal-content cx-opf-error-modal-container",4,"ngIf"],[1,"modal-content","cx-opf-error-modal-container"],[1,"modal-body"],[1,"cx-confirmation"],[1,"cx-opf-error-modal-footer","cx-modal-footer"],[1,"btn","btn-primary",3,"click"]],template:function(i,o){i&1&&(T(0),u(1,"div",0),h("esc",function(){return o.dismissModal("Escape click")}),k(2,le,7,2,"div",1),R(3,"async"),g(),B()),i&2&&(c(),y("cxFocus",o.focusConfig),c(),y("ngIf",H(3,2,o.opfErrorDialogOptions$)))},dependencies:[V,J,$],encapsulation:2,changeDetection:0})}}return e})(),ge={launch:{OPF_ERROR:{inline:!0,component:ue,dialogType:X.POPOVER_CENTER_BACKDROP}}},he=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=a({type:e})}static{this.\u0275inj=r({providers:[M(ge)],imports:[v,Z,Q]})}}return e})(),de=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=a({type:e})}static{this.\u0275inj=r({imports:[he]})}}return e})();var ve=(()=>{class e{constructor(){this.http=n(z),this.converter=n(G),this.opfEndpointsService=n(ae),this.config=n(ie),this.opfMetadataStatePersistanceService=n(oe),this.logger=n(U),this.headerWithNoLanguage={accept:"application/json","Content-Type":"application/json"},this.header=E(C({},this.headerWithNoLanguage),{"Accept-Language":this.opfMetadataStatePersistanceService.getActiveLanguage()}),this.headerWithContentLanguage=E(C({},this.headerWithNoLanguage),{"Content-Language":this.opfMetadataStatePersistanceService.getActiveLanguage()})}getActiveConfigurations(t){let i=new W(this.header).set(te,this.config.opf?.commerceCloudPublicKey||"");return this.http.get(this.getActiveConfigurationsEndpoint(t),{headers:i}).pipe(b(o=>{throw Y(o,this.logger)}),this.converter.pipeable(se))}getActiveConfigurationsEndpoint(t){return this.opfEndpointsService.buildUrl("getActiveConfigurations",{queryParams:t})}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=m({token:e,factory:e.\u0275fac})}}return e})(),Me={backend:{opfApi:{endpoints:{getActiveConfigurations:"active-configurations"}}}},pe=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=a({type:e})}static{this.\u0275inj=r({providers:[M(Me),{provide:ne,useClass:ve}],imports:[v]})}}return e})();var Ye=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=a({type:e})}static{this.\u0275inj=r({imports:[pe,re,de]})}}return e})();export{Ye as OpfBaseModule};
