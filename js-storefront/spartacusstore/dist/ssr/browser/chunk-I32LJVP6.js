import{Gd as h,Kd as v,M as a,Ng as y,Vc as m,Za as l,da as d,db as f,ma as s,me as g,na as u,nc as p,pa as r,pf as I,qa as c}from"./chunk-PRP3ZKGZ.js";var M=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275prov=s({token:t,factory:function(e){let o=null;return e?o=new(e||t):o=r(h),o},providedIn:"root"})}}return t})(),j="smartEdit",E=(()=>{class t{get cmsTicketId(){return this._cmsTicketId}constructor(i,e,o){this.config=i,this.location=e,this.scriptLoader=o,this.featureModulesService=c(y)}load(){this.isLaunchedInSmartEdit()&&(this.featureModulesService.resolveFeature(j).subscribe(),this.scriptLoader?.embedScript({src:"assets/webApplicationInjector.js",params:void 0,attributes:{id:"text/smartedit-injector","data-smartedit-allow-origin":this.config.smartEdit?.allowOrigin}}))}isLaunchedInSmartEdit(){let i=this.location.path().split("?")[0],o=this.location.path().split("?")[1]?.split("&").find(n=>n.startsWith("cmsTicketId="));return this._cmsTicketId=o?.split("=")[1],i.split("/").pop()===this.config.smartEdit?.storefrontPreviewRoute&&!!this._cmsTicketId}static{this.\u0275fac=function(e){return new(e||t)(r(M),r(p),r(I))}}static{this.\u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),S={smartEdit:{storefrontPreviewRoute:"cx-preview",allowOrigin:"localhost:9002"}},P=(()=>{class t{constructor(i){this.service=i,this.routingService=c(g)}intercept(i,e){let o=this.service.cmsTicketId;return o?i.url.includes("/productList")?this.setRequestForProductListPage(i,e,o):((i.url.includes("/cms/")||i.url.includes("/products/"))&&(i=i.clone({setParams:{cmsTicketId:o}})),e.handle(i)):e.handle(i)}setRequestForProductListPage(i,e,o){return this.routingService.getPageContext().pipe(a(1),d(n=>(i=i.clone(n.id?{setParams:{cmsTicketId:o,categoryCode:n.id}}:{setParams:{cmsTicketId:o}}),e.handle(i))))}static{this.\u0275fac=function(e){return new(e||t)(r(E))}}static{this.\u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),T=[{provide:m,useExisting:P,multi:!0}];function w(t){return()=>{t.load()}}var x=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275mod=l({type:t})}static{this.\u0275inj=u({providers:[...T,v(S),{provide:f,useFactory:w,deps:[E],multi:!0}]})}}return t})();export{M as a,j as b,x as c};
