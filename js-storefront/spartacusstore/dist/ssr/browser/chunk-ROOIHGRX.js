import{A as na,B as ia,C as Fi,D as ra,E as zt,a as bi,b as zo,c as Ai,e as Ue,f as bt,g as _e,h as Un,i as Xe,j as Zo,k as Hn,l as gt,m as Ko,n as Wo,o as qn,q as ft,r as Yt,s as Li,t as wi,u as Jo,v as jn,w as Xo,x as ea,y as ta,z as Mi}from"./chunk-WPN2OLOU.js";import{b as Qt,c as Ti}from"./chunk-KKL3JXKW.js";import"./chunk-VVCV3FQN.js";import{f as Go}from"./chunk-MTN5X6Q6.js";import{a as Di,b as Yo}from"./chunk-QWRPYGZR.js";import{C as Nn,H as $n,O as Je,P as Vn,Q as Gt,S as Qo,T as Ri,W as Si}from"./chunk-EU5ZHKTW.js";import{$ as pt,$a as ut,A as bo,Aa as wn,B as hi,C as st,Ca as Mn,Da as qt,Ea as mt,G as Ao,H as Lo,Ha as Fn,Ia as jt,J as It,Ja as Po,Jb as jo,K as An,L as Et,M as ct,Ma as No,Mb as Ve,Na as $o,Oa as kn,P as xe,Pa as Bn,Q as wo,Qa as Vo,R as Ln,Ra as Uo,S as Mo,U as Ke,V as Fo,W as Ci,X as dt,Ya as Dt,Z as lt,_ as Rt,_a as Ho,ab as qo,b as Ro,ba as yi,bb as _t,c as Ht,d as So,e as Tn,eb as Ei,fa as Oi,fb as Pn,g as vi,j as xi,l as Dn,ma as ko,na as Bo,p as bn,pa as St,qa as Tt,s as To,ua as We,w as Do,xa as Ii}from"./chunk-H2QHHFZD.js";import{$ as pi,$b as a,$e as ho,Ab as T,Ad as he,Ae as yn,Af as be,Ag as ge,Ba as mi,Bb as m,Bc as ot,Bd as $t,Cc as j,Cd as $e,D as W,De as On,Df as re,Dg as B,Eb as se,Eg as ce,F as Zr,Fa as Pt,Ga as eo,Ge,Gf as ve,H as li,Hb as nt,Hc as co,Hf as Ye,I as Q,Ib as it,Ic as ie,Jb as rt,Kb as L,Kd as ee,Ke as Vt,La as ui,Lb as u,Ld as xn,Le as In,Lf as yo,M as ne,Mb as J,Mf as ze,Nb as _,Ob as yt,Oc as Se,Oe as Ot,Og as Eo,Pa as r,Q as mn,Qf as Ze,Re as vo,Rf as Rn,Ta as to,Tb as X,Te as De,Tf as Sn,Ub as S,Uc as je,Ud as y,Ue as Qe,V as un,Vb as Re,Vd as _o,Wa as E,Wb as Ne,Wd as at,Wf as Oo,Xa as tt,Xb as ro,Ya as w,Yd as go,Ye as En,Za as N,Ze as xo,_ as Kr,_d as Te,_f as Io,a as Me,aa as Wr,ab as fn,ac as d,ad as gi,bb as g,bc as V,bd as lo,ca as Jr,cc as oo,d as Pe,da as $,ec as q,ga as H,gc as Nt,gd as Fe,hb as k,hd as z,he as ue,i as Ct,ia as _n,ib as l,id as G,jd as po,kd as mo,ke as hn,ma as D,mb as no,me as Ce,mf as Ut,n as Y,na as P,nd as le,ng as ye,oa as Xr,od as ke,oe as fi,pa as v,pd as pe,q as x,qa as R,qd as uo,qf as Co,r as K,rc as ao,rf as oe,rg as Oe,s as zr,sb as s,sc as so,sg as Ae,tb as c,ub as h,uc as _i,va as b,vb as O,ve as Cn,wa as A,wb as I,wc as de,xa as gn,xb as ae,xc as M,yb as F,ye as fo,zb as io,zd as vn,zf as fe}from"./chunk-PRP3ZKGZ.js";import{a as Z,b as Ee}from"./chunk-25N2FLV6.js";var xs=(()=>{class t{convert(e,n){return n===void 0&&(n=Z({},e)),e.sapBillingAddress&&!n.paymentInfo?.billingAddress&&(n.paymentInfo=Ee(Z({},n.paymentInfo),{billingAddress:e.sapBillingAddress})),n}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),oa=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=P({providers:[{provide:ft,useExisting:xs,multi:!0}]})}}return t})();var Zt=class{},ht=(()=>{class t{constructor(e){this.adapter=e}get(e,n){return this.adapter.load(e,n)}getHistory(e,n,i,p){return this.adapter.loadHistory(e,n,i,p)}getConsignmentTracking(e,n,i){return this.adapter.getConsignmentTracking(e,n,i)}cancel(e,n,i){return this.adapter.cancel(e,n,i)}return(e,n){return this.adapter.createReturnRequest(e,n)}getReturnRequestDetail(e,n){return this.adapter.loadReturnRequestDetail(e,n)}getReturnRequestList(e,n,i,p){return this.adapter.loadReturnRequestList(e,n,i,p)}cancelReturnRequest(e,n,i){return this.adapter.cancelReturnRequest(e,n,i)}static{this.\u0275fac=function(n){return new(n||t)(v(Zt))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),Kt=class{},_a=(()=>{class t{constructor(e){this.adapter=e}placeOrder(e,n,i){return this.adapter.placeOrder(e,n,i)}placePaymentAuthorizedOrder(e,n,i){return this.adapter.placePaymentAuthorizedOrder(e,n,i)}static{this.\u0275fac=function(n){return new(n||t)(v(Kt))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),Wt=class{},ga=(()=>{class t{constructor(e){this.adapter=e}reorder(e,n){return this.adapter.reorder(e,n)}static{this.\u0275fac=function(n){return new(n||t)(v(Wt))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),Jt=class{},zn=(()=>{class t{constructor(e){this.adapter=e}load(e,n){return this.adapter.load(e,n)}loadReplenishmentDetailsHistory(e,n,i,p,f){return this.adapter.loadReplenishmentDetailsHistory(e,n,i,p,f)}cancelReplenishmentOrder(e,n){return this.adapter.cancelReplenishmentOrder(e,n)}loadHistory(e,n,i,p){return this.adapter.loadHistory(e,n,i,p)}static{this.\u0275fac=function(n){return new(n||t)(v(Jt))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),Xt=class{},fa=(()=>{class t{constructor(e){this.adapter=e}scheduleReplenishmentOrder(e,n,i,p){return this.adapter.scheduleReplenishmentOrder(e,n,i,p)}static{this.\u0275fac=function(n){return new(n||t)(v(Xt))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),en=class{},va=(()=>{class t{constructor(){this.adapter=R(en)}getOrderAttachments(e,n){return this.adapter.getOrderAttachments(e,n)}downloadOrderAttachment(e,n,i){return this.adapter.downloadOrderAttachment(e,n,i)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),xa="[Order] Load Consignment Tracking",ys="[Order] Load Consignment Tracking Fail",ha="[Order] Load Consignment Tracking Success",Ca="[Order] Clear Consignment Tracking",$i=class{constructor(o){this.payload=o,this.type=xa}},Vi=class{constructor(o){this.payload=o,this.type=ys,this.error=o}},Ui=class{constructor(o){this.payload=o,this.type=ha}},Hi=class{constructor(){this.type=Ca}},ya="order",At="cancelOrder",Lt="cancelReturn",xt="cancelReplenishmentOrder",tn="[Order] User Orders",nn="[Order] Order Return Requests",et="[Order] Return Request Details",rn="[Order] User Order Details",on="[Order] User Replenishment Orders",an="[Order] User Replenishment Order Details",Zn="consignment-tracking-by-id-entities",Kn="order-by-id-entities";function Wn(t,o){return`${t},${o}`}var Oa="[Order] Load Order Details",Os="[Order] Load Order Details Fail",Ia="[Order] Load Order Details Success",Is="[Order] Clear Order Details",Ea="[Order] Cancel Order",Es="[Order] Cancel Order Fail",Rs="[Order] Cancel Order Success",Ss="[Order] Reset Cancel Order Process",qi=class extends y.LoaderLoadAction{constructor(o){super(rn),this.payload=o,this.type=Oa}},Gn=class extends y.LoaderFailAction{constructor(o){super(rn,o),this.payload=o,this.type=Os}},Qn=class extends y.LoaderSuccessAction{constructor(o){super(rn),this.payload=o,this.type=Ia}},ji=class extends y.LoaderResetAction{constructor(){super(rn),this.type=Is}},Gi=class extends y.EntityLoadAction{constructor(o){super(ve,At),this.payload=o,this.type=Ea}},Qi=class extends y.EntityFailAction{constructor(o){super(ve,At,o),this.payload=o,this.type=Es}},Yi=class extends y.EntitySuccessAction{constructor(){super(ve,At),this.type=Rs}},zi=class extends y.EntityLoaderResetAction{constructor(){super(ve,At),this.type=Ss}},Ra="[Order] Create Order Return Request",Ts="[Order] Create Order Return Request Fail",Ds="[Order] Create Order Return Request Success",Sa="[Order] Load Order Return Request details",bs="[Order] Load Order Return Request details Fail",As="[Order] Load Order Return Request details Success",Ta="[Order] Cancel Order Return Request",Ls="[Order] Cancel Order Return Request Fail",ws="[Order] Cancel Order Return Request Success",Da="[Order] Load User Order Return Request List",Ms="[Order] Load User Order Return Request List Fail",ba="[Order] Load User Order Return Request List Success",Fs="[Order] Clear Order Return Request Details",ks="[Order] Clear Order Return Request List",Bs="[Order] Reset Cancel Return Request Process",Zi=class extends y.LoaderLoadAction{constructor(o){super(et),this.payload=o,this.type=Ra}},Ki=class extends y.LoaderFailAction{constructor(o){super(et,o),this.payload=o,this.type=Ts}},Wi=class extends y.LoaderSuccessAction{constructor(o){super(et),this.payload=o,this.type=Ds}},Ji=class extends y.LoaderLoadAction{constructor(o){super(et),this.payload=o,this.type=Sa}},Xi=class extends y.LoaderFailAction{constructor(o){super(et,o),this.payload=o,this.type=bs}},er=class extends y.LoaderSuccessAction{constructor(o){super(et),this.payload=o,this.type=As}},tr=class extends y.EntityLoadAction{constructor(o){super(ve,Lt),this.payload=o,this.type=Ta}},nr=class extends y.EntityFailAction{constructor(o){super(ve,Lt,o),this.payload=o,this.type=Ls}},ir=class extends y.EntitySuccessAction{constructor(){super(ve,Lt),this.type=ws}},rr=class extends y.LoaderLoadAction{constructor(o){super(nn),this.payload=o,this.type=Da}},or=class extends y.LoaderFailAction{constructor(o){super(nn,o),this.payload=o,this.type=Ms}},ar=class extends y.LoaderSuccessAction{constructor(o){super(nn),this.payload=o,this.type=ba}},sr=class extends y.LoaderResetAction{constructor(){super(et),this.type=Fs}},cr=class extends y.LoaderResetAction{constructor(){super(nn),this.type=ks}},dr=class extends y.EntityLoaderResetAction{constructor(){super(ve,Lt),this.type=Bs}},Aa="[Order] Load User Orders",La="[Order] Load User Orders Fail",wa="[Order] Load User Orders Success",Ps="[Order] Clear User Orders",lr=class extends y.LoaderLoadAction{constructor(o){super(tn),this.payload=o,this.type=Aa}},pr=class extends y.LoaderFailAction{constructor(o){super(tn,o),this.payload=o,this.type=La}},mr=class extends y.LoaderSuccessAction{constructor(o){super(tn),this.payload=o,this.type=wa}},Yn=class extends y.LoaderResetAction{constructor(){super(tn),this.type=Ps}},Ma="[Order] Load Replenishment Order Details",Fa="[Order] Load Replenishment Order Details Success",Ns="[Order] Load Replenishment Order Details Fail",$s="[Order] Clear Replenishment Order Details",ka="[Order] Cancel Replenishment Order",Fr="[Order] Cancel Replenishment Order Success",Vs="[Order] Cancel Replenishment Order Fail",Us="[Order] Clear Cancel Replenishment Order",ur=class extends y.LoaderLoadAction{constructor(o){super(an),this.payload=o,this.type=Ma}},_r=class extends y.LoaderSuccessAction{constructor(o){super(an),this.payload=o,this.type=Fa}},gr=class extends y.LoaderFailAction{constructor(o){super(an,o),this.payload=o,this.type=Ns}},fr=class extends y.LoaderResetAction{constructor(){super(an),this.type=$s}},vr=class extends y.EntityLoadAction{constructor(o){super(ve,xt),this.payload=o,this.type=ka}},xr=class extends y.EntitySuccessAction{constructor(o){super(ve,xt),this.payload=o,this.type=Fr}},hr=class extends y.EntityFailAction{constructor(o){super(ve,xt,o),this.payload=o,this.type=Vs}},Cr=class extends y.EntityLoaderResetAction{constructor(){super(ve,xt),this.type=Us}},Ba="[Order] Load User Replenishment Orders",Hs="[Order] Load User Replenishment Orders Fail",Pa="[Order] Load User Replenishment Orders Success",qs="[Order] Clear User Replenishment Orders",yr=class extends y.LoaderLoadAction{constructor(o){super(on),this.payload=o,this.type=Ba}},Or=class extends y.LoaderFailAction{constructor(o){super(on,o),this.payload=o,this.type=Hs}},Ir=class extends y.LoaderSuccessAction{constructor(o){super(on),this.payload=o,this.type=Pa}},Er=class extends y.LoaderResetAction{constructor(){super(on),this.type=qs}},Na="[Order] Load Consignment Tracking By ID Data",$a="[Order] Load  Consignment Tracking By ID Data Fail",Va="[Order] Load Consignment Tracking By ID Data Success",Rr=class extends y.EntityLoadAction{constructor(o){super(Zn,Wn(o.orderCode,o.consignmentCode)),this.payload=o,this.type=Na}},Sr=class extends y.EntityFailAction{constructor(o){super(Zn,Wn(o.orderCode,o.consignmentCode),o.error),this.payload=o,this.type=$a}},Tr=class extends y.EntitySuccessAction{constructor(o){super(Zn,Wn(o.orderCode,o.consignmentCode)),this.payload=o,this.type=Va}},Ua="[Order] Load Order By ID Data",Ha="[Order] Load Order By ID Data Fail",qa="[Order] Load Order By ID Data Success",Dr=class extends y.EntityLoadAction{constructor(o){super(Kn,o.code),this.payload=o,this.type=Ua}},br=class extends y.EntityFailAction{constructor(o){super(Kn,o.code,o.error),this.payload=o,this.type=Ha}},Ar=class extends y.EntitySuccessAction{constructor(o){super(Kn,o.code??""),this.payload=o,this.type=qa}};var He=po(ya),js=G(He,t=>t.consignmentTracking),Gs=G(js,t=>t.tracking),ja=G(He,t=>t.orderDetail),Qs=G(ja,t=>y.loaderValueSelector(t)),Ys=G(ja,t=>y.loaderLoadingSelector(t)),kr=G(He,t=>t.orderReturn),zs=G(kr,t=>y.loaderValueSelector(t)),Zs=G(kr,t=>y.loaderLoadingSelector(t)),Ks=G(kr,t=>y.loaderSuccessSelector(t)&&!y.loaderLoadingSelector(t)),Ga=G(He,t=>t.orderReturnList),h_=G(Ga,t=>y.loaderValueSelector(t)),Br=G(He,t=>t.orders),Ws=G(Br,t=>y.loaderSuccessSelector(t)),C_=G(Br,t=>y.loaderValueSelector(t)),Jn=G(He,t=>t.replenishmentOrder),Js=G(Jn,t=>y.loaderValueSelector(t)),Xs=G(Jn,t=>y.loaderLoadingSelector(t)),ec=G(Jn,t=>y.loaderSuccessSelector(t)),tc=G(Jn,t=>y.loaderErrorSelector(t)),sn=G(He,t=>t.replenishmentOrders),y_=G(sn,t=>y.loaderValueSelector(t)),nc=G(sn,t=>y.loaderLoadingSelector(t)),ic=G(sn,t=>y.loaderErrorSelector(t)),rc=G(sn,t=>y.loaderSuccessSelector(t)),oc=G(He,t=>t.consignmentTrackingById),Qa=(t,o)=>G(oc,e=>y.entityLoaderStateSelector(e,Wn(t,o))),ac=(t,o)=>G(Qa(t,o),e=>y.loaderValueSelector(e));var sc=G(He,t=>t.orderById),Ya=t=>G(sc,o=>y.entityLoaderStateSelector(o,t)),cc=t=>G(Ya(t),o=>y.loaderValueSelector(o));var Lr=(()=>{class t{constructor(e,n,i,p){this.store=e,this.processStateStore=n,this.userIdService=i,this.routingService=p}getOrderDetails(){return this.store.pipe(z(Qs))}loadOrderDetails(e){this.userIdService.takeUserId().subscribe(n=>{this.store.dispatch(new qi({userId:n,orderCode:e}))})}clearOrderDetails(){this.store.dispatch(new ji)}getOrderHistoryList(e){return this.store.pipe(z(Br),H(n=>{n.loading||n.success||n.error||this.loadOrderList(e)}),x(n=>n.value))}getOrderHistoryListLoaded(){return this.store.pipe(z(Ws))}loadOrderList(e,n,i){this.userIdService.takeUserId(!0).subscribe({next:p=>{let f;this.routingService.getRouterState().pipe(ne(1)).subscribe(C=>{f=C?.state?.params?.replenishmentOrderCode}).unsubscribe(),this.store.dispatch(new lr({userId:p,pageSize:e,currentPage:n,sort:i,replenishmentOrderCode:f}))},error:()=>{}})}clearOrderList(){this.store.dispatch(new Yn)}getConsignmentTracking(){return this.store.pipe(z(Gs))}loadConsignmentTracking(e,n){this.userIdService.takeUserId().subscribe(i=>{this.store.dispatch(new $i({userId:i,orderCode:e,consignmentCode:n}))})}clearConsignmentTracking(){this.store.dispatch(new Hi)}cancelOrder(e,n){this.userIdService.takeUserId().subscribe(i=>{this.store.dispatch(new Gi({userId:i,orderCode:e,cancelRequestInput:n}))})}getCancelOrderLoading(){return this.processStateStore.pipe(z(Ye.getProcessLoadingFactory(At)))}getCancelOrderSuccess(){return this.processStateStore.pipe(z(Ye.getProcessSuccessFactory(At)))}resetCancelOrderProcessState(){return this.store.dispatch(new zi)}getOrderDetailsLoading(){return this.store.pipe(z(Ys))}getQueryParams(e){return null}static{this.\u0275fac=function(n){return new(n||t)(v(Fe),v(Fe),v(Te),v(Ce))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),wr=(()=>{class t{constructor(e,n,i){this.store=e,this.processStateStore=n,this.userIdService=i}createOrderReturnRequest(e){this.userIdService.takeUserId().subscribe(n=>{this.store.dispatch(new Zi({userId:n,returnRequestInput:e}))})}getOrderReturnRequest(){return this.store.pipe(z(zs))}getOrderReturnRequestList(e){return this.store.pipe(z(Ga),H(n=>{n.loading||n.success||n.error||this.loadOrderReturnRequestList(e)}),x(n=>n.value))}loadOrderReturnRequestDetail(e){this.userIdService.takeUserId().subscribe(n=>{this.store.dispatch(new Ji({userId:n,returnRequestCode:e}))})}loadOrderReturnRequestList(e,n,i){this.userIdService.takeUserId(!0).subscribe({next:p=>{this.store.dispatch(new rr({userId:p,pageSize:e,currentPage:n,sort:i}))},error:()=>{}})}clearOrderReturnRequestList(){this.store.dispatch(new cr)}getReturnRequestLoading(){return this.store.pipe(z(Zs))}getReturnRequestSuccess(){return this.store.pipe(z(Ks))}clearOrderReturnRequestDetail(){this.store.dispatch(new sr)}cancelOrderReturnRequest(e,n){this.userIdService.takeUserId().subscribe(i=>{this.store.dispatch(new tr({userId:i,returnRequestCode:e,returnRequestModification:n}))})}getCancelReturnRequestLoading(){return this.processStateStore.pipe(z(Ye.getProcessLoadingFactory(Lt)))}getCancelReturnRequestSuccess(){return this.processStateStore.pipe(z(Ye.getProcessSuccessFactory(Lt)))}resetCancelReturnRequestProcessState(){return this.store.dispatch(new dr)}static{this.\u0275fac=function(n){return new(n||t)(v(Fe),v(Fe),v(Te))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),aa=(()=>{class t{constructor(e,n,i,p,f){this.activeCartFacade=e,this.userIdService=n,this.commandService=i,this.orderConnector=p,this.eventService=f,this.placedOrder$=new Pe(void 0),this.placeOrderCommand=this.commandService.create(C=>this.checkoutPreconditions().pipe($(([U,te])=>this.orderConnector.placeOrder(U,te,C).pipe(H(we=>{this.placedOrder$.next(we),this.eventService.dispatch({userId:U,cartId:te,cartCode:te,order:we},bi)})))),{strategy:Vt.CancelPrevious}),this.placePaymentAuthorizedOrderCommand=this.commandService.create(C=>this.checkoutPreconditions().pipe($(([U,te])=>this.orderConnector.placePaymentAuthorizedOrder(U,te,C).pipe(H(we=>{this.setPlacedOrder(we),this.eventService.dispatch({order:we,userId:U,cartId:te,cartCode:te},bi)})))),{strategy:Vt.CancelPrevious})}checkoutPreconditions(){return K([this.userIdService.takeUserId(),this.activeCartFacade.takeActiveCartId(),this.activeCartFacade.isGuestCart()]).pipe(ne(1),x(([e,n,i])=>{if(!e||!n||e===at&&!i)throw new Error("Checkout conditions not met");return[e,n]}))}placeOrder(e){return this.placeOrderCommand.execute(e)}placePaymentAuthorizedOrder(e){return this.placePaymentAuthorizedOrderCommand.execute(e)}getOrderDetails(){return this.placedOrder$.asObservable()}clearPlacedOrder(){this.placedOrder$.next(void 0)}setPlacedOrder(e){this.placedOrder$.next(e)}getPickupEntries(){return this.getOrderDetails().pipe(x(e=>e?.entries?.filter(n=>n.deliveryPointOfService!==void 0)||[]))}getDeliveryEntries(){return this.getOrderDetails().pipe(x(e=>e?.entries?.filter(n=>n.deliveryPointOfService===void 0)||[]))}static{this.\u0275fac=function(n){return new(n||t)(v($n),v(Te),v(In),v(_a),v(Ot))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),sa=(()=>{class t{constructor(e,n,i,p,f){this.commandService=e,this.reorderOrderConnector=n,this.userIdService=i,this.activeCartFacade=p,this.multiCartFacade=f,this.reorderCommand=this.commandService.create(({orderId:C})=>this.reorderPreconditions().pipe($(U=>this.reorderOrderConnector.reorder(C,U))),{strategy:Vt.CancelPrevious})}reorder(e){return this.reorderCommand.execute({orderId:e})}reorderPreconditions(){return K([this.userIdService.takeUserId(),this.activeCartFacade.getActiveCartId()]).pipe(ne(1),x(([e,n])=>{if(!e)throw new Error("Must be logged in to reorder");return n&&this.multiCartFacade.deleteCart(n,e),e}))}static{this.\u0275fac=function(n){return new(n||t)(v(In),v(ga),v(Te),v($n),v(Nn))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),ca=(()=>{class t{constructor(e,n,i){this.store=e,this.processStateStore=n,this.userIdService=i}loadReplenishmentOrderDetails(e){this.userIdService.takeUserId(!0).subscribe({next:n=>{this.store.dispatch(new ur({userId:n,replenishmentOrderCode:e}))},error:()=>{}})}getReplenishmentOrderDetails(){return this.store.pipe(z(Js))}getReplenishmentOrderDetailsLoading(){return this.store.pipe(z(Xs))}getReplenishmentOrderDetailsSuccess(){return this.store.pipe(z(ec))}getReplenishmentOrderDetailsError(){return this.store.pipe(z(tc))}clearReplenishmentOrderDetails(){this.store.dispatch(new fr)}cancelReplenishmentOrder(e){this.userIdService.takeUserId(!0).subscribe({next:n=>{this.store.dispatch(new vr({userId:n,replenishmentOrderCode:e}))},error:()=>{}})}getCancelReplenishmentOrderLoading(){return this.processStateStore.pipe(z(Ye.getProcessLoadingFactory(xt)))}getCancelReplenishmentOrderSuccess(){return this.processStateStore.pipe(z(Ye.getProcessSuccessFactory(xt)))}getCancelReplenishmentOrderError(){return this.processStateStore.pipe(z(Ye.getProcessErrorFactory(xt)))}clearCancelReplenishmentOrderProcessState(){this.store.dispatch(new Cr)}getReplenishmentOrderHistoryList(e){return this.store.pipe(z(sn),H(n=>{n.loading||n.success||n.error||this.loadReplenishmentOrderList(e)}),x(n=>n.value))}getReplenishmentOrderHistoryListLoading(){return this.store.pipe(z(nc))}getReplenishmentOrderHistoryListError(){return this.store.pipe(z(ic))}getReplenishmentOrderHistoryListSuccess(){return this.store.pipe(z(rc))}loadReplenishmentOrderList(e,n,i){this.userIdService.takeUserId(!0).subscribe({next:p=>{this.store.dispatch(new yr({userId:p,pageSize:e,currentPage:n,sort:i}))},error:()=>{}})}clearReplenishmentOrderList(){this.store.dispatch(new Er)}static{this.\u0275fac=function(n){return new(n||t)(v(Fe),v(Fe),v(Te))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),da=(()=>{class t{constructor(e,n,i,p,f,C){this.activeCartFacade=e,this.userIdService=n,this.commandService=i,this.scheduledReplenishmentOrderConnector=p,this.eventService=f,this.orderFacade=C,this.scheduleReplenishmentOrderCommand=this.commandService.create(({form:U,termsChecked:te})=>this.checkoutPreconditions().pipe($(([we,di])=>this.scheduledReplenishmentOrderConnector.scheduleReplenishmentOrder(di,U,te,we).pipe(H(Yr=>{this.orderFacade.setPlacedOrder(Yr),this.eventService.dispatch({userId:we,cartId:di,cartCode:di,replenishmentOrder:Yr},zo)})))),{strategy:Vt.CancelPrevious})}checkoutPreconditions(){return K([this.userIdService.takeUserId(),this.activeCartFacade.takeActiveCartId(),this.activeCartFacade.isGuestCart()]).pipe(ne(1),x(([e,n,i])=>{if(!e||!n||e===at&&!i)throw new Error("Order conditions not met");return[e,n]}))}scheduleReplenishmentOrder(e,n){return this.scheduleReplenishmentOrderCommand.execute({termsChecked:n,form:e})}static{this.\u0275fac=function(n){return new(n||t)(v($n),v(Te),v(In),v(fa),v(Ot),v(_e))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),dc=(()=>{class t{constructor(){this.logger=R(ue),this.actions$=R(ke),this.orderConnector=R(ht),this.loadConsignmentTrackingById$=le(()=>this.actions$.pipe(pe(Na),x(e=>e.payload),$(e=>this.orderConnector.getConsignmentTracking(e.orderCode,e.consignmentCode,e.userId).pipe(x(n=>new Tr({orderCode:e.orderCode,consignmentCode:e.consignmentCode,consignmentTracking:n})),Q(n=>Y(new Sr({orderCode:e.orderCode,consignmentCode:e.consignmentCode,error:oe(n,this.logger)})))))))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),lc=(()=>{class t{constructor(e,n){this.actions$=e,this.orderConnector=n,this.logger=R(ue),this.loadConsignmentTracking$=le(()=>this.actions$.pipe(pe(xa),x(i=>i.payload),$(i=>this.orderConnector.getConsignmentTracking(i.orderCode,i.consignmentCode,i.userId).pipe(x(p=>new Ui(p)),Q(p=>Y(new Vi(oe(p,this.logger))))))))}static{this.\u0275fac=function(n){return new(n||t)(v(ke),v(ht))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),pc=(()=>{class t{constructor(){this.logger=R(ue),this.actions$=R(ke),this.orderConnector=R(ht),this.loadOrderById$=le(()=>this.actions$.pipe(pe(Ua),x(e=>e.payload),zr(({userId:e,code:n})=>this.orderConnector.get(e,n).pipe(x(i=>new Ar(i)),Q(i=>Y(new br({code:n,error:oe(i,this.logger)})))))))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),mc=(()=>{class t{constructor(e,n,i,p,f){this.actions$=e,this.orderConnector=n,this.globalMessageService=i,this.userIdService=p,this.store=f,this.logger=R(ue),this.loadOrderDetails$=le(()=>this.actions$.pipe(pe(Oa),x(C=>C.payload),$(C=>this.orderConnector.get(C.userId,C.orderCode).pipe(x(U=>new Qn(U)),Q(U=>Y(new Gn(oe(U,this.logger)))))))),this.cancelOrder$=le(()=>this.actions$.pipe(pe(Ea),x(C=>C.payload),$(C=>this.orderConnector.cancel(C.userId,C.orderCode,C.cancelRequestInput).pipe(x(()=>new Yi),Q(U=>(U.error?.errors.forEach(te=>this.globalMessageService.add(te.message,fe.MSG_TYPE_ERROR)),Y(new Qi(oe(U,this.logger))))))))),this.resetOrderDetails$=le(()=>this.actions$.pipe(pe(Cn.LANGUAGE_CHANGE,Cn.CURRENCY_CHANGE),_n(this.userIdService.getUserId(),this.store.pipe(W(C=>!!C.order?.orderDetail),x(C=>C.order.orderDetail.value?.code))),$(([,C,U])=>U?this.orderConnector.get(C,U).pipe(x(te=>new Qn(te)),Q(te=>Y(new Gn(oe(te,this.logger))))):Ct)))}static{this.\u0275fac=function(n){return new(n||t)(v(ke),v(ht),v(be),v(Te),v(Fe))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),uc=(()=>{class t{constructor(e,n){this.actions$=e,this.orderConnector=n,this.logger=R(ue),this.createReturnRequest$=le(()=>this.actions$.pipe(pe(Ra),x(i=>i.payload),$(i=>this.orderConnector.return(i.userId,i.returnRequestInput).pipe(x(p=>new Wi(p)),Q(p=>Y(new Ki(oe(p,this.logger)))))))),this.loadReturnRequest$=le(()=>this.actions$.pipe(pe(Sa),x(i=>i.payload),$(i=>this.orderConnector.getReturnRequestDetail(i.userId,i.returnRequestCode).pipe(x(p=>new er(p)),Q(p=>Y(new Xi(oe(p,this.logger)))))))),this.cancelReturnRequest$=le(()=>this.actions$.pipe(pe(Ta),x(i=>i.payload),$(i=>this.orderConnector.cancelReturnRequest(i.userId,i.returnRequestCode,i.returnRequestModification).pipe(x(()=>new ir),Q(p=>Y(new nr(oe(p,this.logger)))))))),this.loadReturnRequestList$=le(()=>this.actions$.pipe(pe(Da),x(i=>i.payload),$(i=>this.orderConnector.getReturnRequestList(i.userId,i.pageSize,i.currentPage,i.sort).pipe(x(p=>new ar(p)),Q(p=>Y(new or(oe(p,this.logger))))))))}static{this.\u0275fac=function(n){return new(n||t)(v(ke),v(ht))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),_c=(()=>{class t{constructor(e,n,i){this.actions$=e,this.orderConnector=n,this.replenishmentOrderConnector=i,this.logger=R(ue),this.loadUserOrders$=le(()=>this.actions$.pipe(pe(Aa),x(p=>p.payload),$(p=>(p.replenishmentOrderCode?this.replenishmentOrderConnector.loadReplenishmentDetailsHistory(p.userId,p.replenishmentOrderCode??"",p.pageSize,p.currentPage,p.sort):this.orderConnector.getHistory(p.userId,p.pageSize,p.currentPage,p.sort)).pipe(x(f=>new mr(f)),Q(f=>Y(new pr(oe(f,this.logger)))))))),this.resetUserOrders$=le(()=>this.actions$.pipe(pe(Cn.LANGUAGE_CHANGE),x(()=>new Yn)))}static{this.\u0275fac=function(n){return new(n||t)(v(ke),v(ht),v(zn))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),gc=(()=>{class t{constructor(e,n,i){this.actions$=e,this.replenishmentOrderConnector=n,this.globalMessageService=i,this.logger=R(ue),this.loadReplenishmentOrderDetails$=le(()=>this.actions$.pipe(pe(Ma),x(p=>p.payload),$(p=>this.replenishmentOrderConnector.load(p.userId,p.replenishmentOrderCode).pipe(x(f=>new _r(f)),Q(f=>Y(new gr(oe(f,this.logger)))))))),this.cancelReplenishmentOrder$=le(()=>this.actions$.pipe(pe(ka),x(p=>p.payload),$(p=>this.replenishmentOrderConnector.cancelReplenishmentOrder(p.userId,p.replenishmentOrderCode).pipe(x(f=>new xr(f)),Q(f=>(f?.error?.errors.forEach(C=>this.globalMessageService.add(C.message,fe.MSG_TYPE_ERROR)),Y(new hr(oe(f,this.logger)))))))))}static{this.\u0275fac=function(n){return new(n||t)(v(ke),v(zn),v(be))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),fc=(()=>{class t{constructor(e,n){this.actions$=e,this.replenishmentOrderConnector=n,this.logger=R(ue),this.loadUserReplenishmentOrders$=le(()=>this.actions$.pipe(pe(Ba),x(i=>i.payload),$(i=>this.replenishmentOrderConnector.loadHistory(i.userId,i.pageSize,i.currentPage,i.sort).pipe(x(p=>new Ir(p)),Q(p=>Y(new Or(oe(p,this.logger))))))))}static{this.\u0275fac=function(n){return new(n||t)(v(ke),v(zn))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),vc=[_c,mc,lc,uc,gc,fc,dc,pc],ki=void 0;function xc(t=ki,o){switch(o.type){case Va:return o.payload.consignmentTracking?o.payload.consignmentTracking:ki;case $a:return ki}return t}var Bi=void 0;function hc(t=Bi,o){switch(o.type){case qa:return o.payload?o.payload:Bi;case Ha:return Bi}return t}var la={tracking:{}};function Cc(t=la,o){switch(o.type){case ha:return{tracking:o.payload};case Ca:return la}return t}var yc={};function Oc(t=yc,o){switch(o.type){case Ia:return o.payload}return t}var pa={returnRequests:[],pagination:{},sorts:[]};function Ic(t=pa,o){switch(o.type){case ba:return o.payload?o.payload:pa}return t}var Pi={orders:[],pagination:{},sorts:[]};function Ec(t=Pi,o){switch(o.type){case wa:return o.payload?o.payload:Pi;case La:return Pi}return t}var ma={};function Rc(t=ma,o){switch(o.type){case Fa:case Fr:return o.payload?o.payload:ma;default:return t}}var Ni={replenishmentOrders:[],pagination:{},sorts:[]};function Sc(t=Ni,o){switch(o.type){case Pa:return o.payload?o.payload:Ni;case Fr:{let e=o.payload,n=[...t.replenishmentOrders??[]],i=n.findIndex(p=>p.replenishmentOrderCode===e.replenishmentOrderCode);return i===-1?Ni:(n[i]=Z({},e),Ee(Z({},t),{replenishmentOrders:n}))}}return t}function Tc(){return{orders:y.loaderReducer(tn,Ec),orderDetail:y.loaderReducer(rn,Oc),replenishmentOrders:y.loaderReducer(on,Sc),orderReturn:y.loaderReducer(et),orderReturnList:y.loaderReducer(nn,Ic),consignmentTracking:Cc,replenishmentOrder:y.loaderReducer(an,Rc),orderById:y.entityLoaderReducer(Kn,hc),consignmentTrackingById:y.entityLoaderReducer(Zn,xc)}}var za=new Xr("OrderReducers"),Dc={provide:za,useFactory:Tc},Xn=(()=>{class t{constructor(){this.orderReturnRequestService=R(wr),this.store=R(Fe),this.userIdService=R(Te),this.orderHistoryService=R(Lr)}clearOrderList(){this.orderHistoryService.clearOrderList()}getOrderDetailsWithTracking(e){return this.getOrderDetailsV2(e).pipe($(n=>{let i=Z({},n);i.consignments=[];let p=(n?.consignments??[]).map(f=>{let C=Z({},f);return f.code&&f.trackingID?this.getConsignmentTracking(n?.code??"",f.code).pipe(x(U=>(C.consignmentTracking=U,i.consignments?.push(C),i))):(i.consignments?.push(C),Y(i))});return p===void 0||p.length<1?Y(i):K(p).pipe($(f=>f!==void 0?Y(f[0]):Y(n)))}))}getOrderHistoryListWithDetails(e){let n={};return this.orderHistoryService.getOrderHistoryList(e).pipe($(i=>{n.pagination=i?.pagination,n.sorts=i?.sorts,n.orders=[];let p=(i?.orders??[]).map(f=>{let C=Z({},f);return this.getOrderDetailsWithTracking(f?.code??"").pipe(x(U=>(C.returnable=U?.returnable,C.totalItems=U?.totalItems,C.entries=U?.entries,C.consignments=U?.consignments,C.unconsignedEntries=U?.unconsignedEntries,C.returnRequests=[],n.orders?.push(C),n)))});return p.length===0&&p.push(Y(n)),K(p)}),x(i=>i!==void 0?i[0]:{}))}getOrderHistoryList(e){let n=this.getOrderHistoryListWithDetails(e),i=this.orderReturnRequestService.getOrderReturnRequestList();return K([n,i]).pipe($(p=>{let f=p?.[1]?.returnRequests,C=p?.[0];return f&&C?.orders?C.pagination?.totalResults===0?Y(C):C.orders.map(U=>{let te=f?.filter(we=>we.order?.code===U.code);return te&&(U.returnRequests=te),C}):Y(C)}))}getOrderDetailsValue(e){return this.store.select(cc(e))}getOrderDetailsState(e){return this.store.select(Ya(e))}loadOrderDetails(e){this.userIdService.takeUserId(!0).subscribe({next:n=>this.store.dispatch(new Dr({userId:n,code:e}))})}getOrderDetailsV2(e){return this.getOrderDetailsState(e).pipe(li(0),H(i=>{i.loading||i.success||i.error||this.loadOrderDetails(e)})).pipe(W(i=>(i.success||i.error)??!1),x(i=>i.value))}getConsignmentTrackingValue(e,n){return this.store.select(ac(e,n)).pipe(W(i=>!!i))}getConsignmentTrackingState(e,n){return this.store.select(Qa(e,n))}loadConsignmentTracking(e,n){this.userIdService.takeUserId(!0).subscribe({next:i=>this.store.dispatch(new Rr({orderCode:e,consignmentCode:n,userId:i}))})}getConsignmentTracking(e,n){let i=this.getConsignmentTrackingState(e,n).pipe(li(0),H(p=>{p.loading||p.success||p.error||this.loadConsignmentTracking(e,n)}));return Zr(()=>i.subscribe(),()=>this.getConsignmentTrackingValue(e,n))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),ua=(()=>{class t{constructor(){this.orderAttachmentsConnector=R(va),this.userIdService=R(Te)}getOrderAttachments(e){return this.userIdService.takeUserId().pipe(ne(1),$(n=>this.orderAttachmentsConnector.getOrderAttachments(n,e)))}downloadOrderAttachment(e,n){return this.userIdService.takeUserId().pipe(ne(1),$(i=>this.orderAttachmentsConnector.downloadOrderAttachment(i,e,n)))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),bc=[wr,{provide:bt,useExisting:wr},Xn,Lr,{provide:Ue,useExisting:Lr},ca,{provide:Xe,useExisting:ca},da,{provide:Zo,useExisting:da},aa,{provide:_e,useExisting:aa},sa,{provide:Un,useExisting:sa},ua,{provide:Hn,useExisting:ua}],Ac=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=P({providers:[Dc],imports:[uo.forFeature(vc),mo.forFeature(ya,za)]})}}return t})(),Za=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=P({providers:[...bc,ht,zn,_a,fa,ga,va],imports:[Ac]})}}return t})();var Lc="pdfInvoices";function wc(){return Eo({facade:Pr,feature:Lc,methods:["getInvoicesForOrder","getInvoicePDF"]})}var Pr=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=D({token:t,factory:()=>wc(),providedIn:"root"})}}return t})(),cn=function(t){return t.BASIC="BASIC",t.DEFAULT="DEFAULT",t.FULL="FULL",t}(cn||{});var Bc=t=>({id:t});function Pc(t,o){if(t&1){let e=F();s(0,"div",11)(1,"cx-pagination",12),T("viewPageEvent",function(i){b(e);let p=m(3);return A(p.pageChange(i))}),c()()}if(t&2){let e=m(3);r(),l("pagination",e.pagination)}}function Nc(t,o){if(t&1&&(s(0,"thead",13)(1,"th",14),u(2),a(3,"cxTranslate"),c(),s(4,"th",14),u(5),a(6,"cxTranslate"),c(),s(7,"th",14),u(8),a(9,"cxTranslate"),c(),s(10,"th",14),u(11),a(12,"cxTranslate"),c(),s(13,"th",14),h(14,"cx-icon",15),a(15,"cxTranslate"),c()()),t&2){let e=m(3);r(2),_(" ",d(3,6,"pdfInvoices.invoicesTable.invoiceId")," "),r(3),_(" ",d(6,8,"pdfInvoices.invoicesTable.createdAt")," "),r(3),_(" ",d(9,10,"pdfInvoices.invoicesTable.netAmount")," "),r(3),_(" ",d(12,12,"pdfInvoices.invoicesTable.totalAmount")," "),r(3),se("title",d(15,14,"pdfInvoices.invoicesTable.attachment")),l("type",e.ICON_TYPE.DOWNLOAD)}}function $c(t,o){if(t&1&&(s(0,"thead",13)(1,"tr")(2,"th",14),u(3),a(4,"cxTranslate"),c(),s(5,"th",14),u(6),a(7,"cxTranslate"),c(),s(8,"th",14),u(9),a(10,"cxTranslate"),c(),s(11,"th",14),u(12),a(13,"cxTranslate"),c(),s(14,"th",14),h(15,"cx-icon",15),a(16,"cxTranslate"),c()()()),t&2){let e=m(3);r(3),_(" ",d(4,6,"pdfInvoices.invoicesTable.invoiceId")," "),r(3),_(" ",d(7,8,"pdfInvoices.invoicesTable.createdAt")," "),r(3),_(" ",d(10,10,"pdfInvoices.invoicesTable.netAmount")," "),r(3),_(" ",d(13,12,"pdfInvoices.invoicesTable.totalAmount")," "),r(3),se("title",d(16,14,"pdfInvoices.invoicesTable.attachment")),l("type",e.ICON_TYPE.DOWNLOAD)}}function Vc(t,o){if(t&1){let e=F();s(0,"button",24),a(1,"cxTranslate"),T("click",function(){b(e);let i=m().$implicit,p=m(3);return A(p.downloadPDFInvoice(i.invoiceId,i.externalSystemId))}),h(2,"cx-icon",15),a(3,"cxTranslate"),h(4,"span",25),a(5,"cxTranslate"),c()}if(t&2){let e=m().$implicit,n=m(3);k("aria-label",V(1,4,"pdfInvoices.invoicesTable.attachmentDescription",S(11,Bc,e.invoiceId))),r(2),se("title",d(3,7,"pdfInvoices.invoicesTable.download")),l("type",n.ICON_TYPE.FILE),r(2),l("innerText",d(5,9,"pdfInvoices.invoicesTable.download"))}}function Uc(t,o){if(t&1&&(s(0,"tr",16)(1,"td",17)(2,"div",18),u(3),a(4,"cxTranslate"),c(),s(5,"div",19),u(6),c()(),s(7,"td",20)(8,"div",18),u(9),a(10,"cxTranslate"),c(),s(11,"div",19),u(12),a(13,"cxDate"),c()(),s(14,"td",21)(15,"div",18),u(16),a(17,"cxTranslate"),c(),s(18,"div",19),u(19),c()(),s(20,"td",21)(21,"div",18),u(22),a(23,"cxTranslate"),c(),s(24,"div",19),u(25),c()(),s(26,"td",22)(27,"div",18),u(28),a(29,"cxTranslate"),c(),s(30,"div",19),g(31,Vc,6,13,"button",23),c()()()),t&2){let e=o.$implicit;r(3),_(" ",d(4,10,"pdfInvoices.invoicesTable.invoiceId")," "),r(3),_(" ",e.invoiceId," "),r(3),_(" ",d(10,12,"pdfInvoices.invoicesTable.createdAt")," "),r(3),_(" ",V(13,14,e.createdAt,"longDate")," "),r(4),_(" ",d(17,17,"pdfInvoices.invoicesTable.netAmount")," "),r(3),_(" ",e.netAmount!=null&&e.netAmount.formattedValue?e.netAmount==null?null:e.netAmount.formattedValue:(e.netAmount==null?null:e.netAmount.currencyIso)+"\xA0"+(e.netAmount==null?null:e.netAmount.value)," "),r(3),_(" ",d(23,19,"pdfInvoices.invoicesTable.totalAmount")," "),r(3),_(" ",e.totalAmount!=null&&e.totalAmount.formattedValue?e.totalAmount==null?null:e.totalAmount.formattedValue:(e.totalAmount==null?null:e.totalAmount.currencyIso)+"\xA0"+(e.totalAmount==null?null:e.totalAmount.value)," "),r(3),_(" ",d(29,21,"pdfInvoices.invoicesTable.attachment")," "),r(3),l("ngIf",e.invoiceId)}}function Hc(t,o){if(t&1){let e=F();s(0,"div",11)(1,"cx-pagination",26),T("viewPageEvent",function(i){b(e);let p=m(3);return A(p.pageChange(i))}),c()()}if(t&2){let e=m(3);r(),l("pagination",e.pagination)}}function qc(t,o){if(t&1){let e=F();O(0),s(1,"div")(2,"div",1)(3,"h2"),u(4),a(5,"cxTranslate"),c()(),s(6,"div",2)(7,"div",3)(8,"label",4)(9,"span"),u(10),a(11,"cxTranslate"),c(),s(12,"cx-sorting",5),a(13,"cxTranslate"),a(14,"cxTranslate"),T("sortListEvent",function(i){b(e);let p=m(2);return A(p.sortChange(i))}),c()(),g(15,Pc,2,1,"div",6),c(),s(16,"table",7),a(17,"cxTranslate"),g(18,Nc,16,16,"thead",8)(19,$c,17,16,"thead",8),s(20,"tbody"),g(21,Uc,32,23,"tr",9),c()(),s(22,"div",10),g(23,Hc,2,1,"div",6),c()()(),I()}if(t&2){let e=m().ngIf,n=m();r(4),_(" ",d(5,12,"pdfInvoices.invoicesTable.header")," "),r(6),_(" ",d(11,14,"pdfInvoices.sortBy")," "),r(2),se("placeholder",d(13,16,"pdfInvoices.sortBy")),l("sortOptions",n.sortOptions)("selectedOption",n.sort)("ariaLabel",d(14,18,"pdfInvoices.sortInvoices")),r(3),l("ngIf",e.pagination&&e.pagination.totalPages&&e.pagination.totalPages>1),r(),k("aria-label",d(17,20,"pdfInvoices.invoicesTable.label")),r(2),l("cxFeature","!a11yTableHeaderReadout"),r(),l("cxFeature","a11yTableHeaderReadout"),r(2),l("ngForOf",e.invoices),r(2),l("ngIf",e.pagination&&e.pagination.totalPages&&e.pagination.totalPages>1)}}function jc(t,o){if(t&1&&(O(0),g(1,qc,24,22,"ng-container",0),I()),t&2){let e=o.ngIf;r(),l("ngIf",e.pagination&&e.pagination.totalCount&&e.pagination.totalCount>0)}}var dn=(()=>{class t{constructor(e,n,i,p,f){this.pdfInvoicesFacade=e,this.translationService=n,this.downloadService=i,this.languageService=p,this.globalMessageService=f,this.ICON_TYPE=dt,this.PAGE_SIZE=5,this.sort="byInvoiceIdAsc",this.sortMapping={byCreatedAtAsc:"createdAt:asc",byCreatedAtDesc:"createdAt:desc",byInvoiceIdAsc:"invoiceId:asc",byInvoiceIdDesc:"invoiceId:desc",byNetAmountAsc:"netAmount:asc",byNetAmountDesc:"netAmount:desc",byTotalAmountAsc:"totalAmount:asc",byTotalAmountDesc:"totalAmount:desc"},this._initQueryParams={currentPage:0,pageSize:this.PAGE_SIZE,fields:cn.FULL,sort:this.sortMapping[this.sort]},this.queryParams$=new Pe(this._initQueryParams),this.invoicesList$=this.queryParams$.pipe($(C=>this.pdfInvoicesFacade.getInvoicesForOrder(C)),H(C=>this.pagination={currentPage:C.pagination?.page,pageSize:C.pagination?.count,totalPages:C.pagination?.totalPages,totalResults:C.pagination?.totalCount,sort:this.sortMapping[this.sort]}),Q(C=>(C&&this.getNotEnabledError(C)?.length&&this.globalMessageService.add({key:"pdfInvoices.featureNotEnabled"},fe.MSG_TYPE_ERROR),Ct))),this.subscription=new Me}ngOnInit(){this.subscription.add(this.languageService.getActive().pipe(Wr(1)).subscribe(()=>this.updateQueryParams({fields:cn.FULL}))),this.getSortOptions()}updateQueryParams(e){Object.keys(e).forEach(n=>this._initQueryParams[n]=e[n]),e.fields||(this._initQueryParams.fields=cn.DEFAULT),this.queryParams$.next(this._initQueryParams)}pageChange(e){this.updateQueryParams({currentPage:e})}sortChange(e){this.sort=e,this.updateQueryParams({sort:this.sortMapping[e],currentPage:0})}downloadPDFInvoice(e,n){this.pdfInvoicesFacade.getInvoicePDF(e,n).pipe(ne(1)).subscribe({next:i=>{let p=new Blob([i],{type:i.type}),f=URL.createObjectURL(p);this.downloadService.download(f,`${e}.pdf`)}})}getSortOptions(){this.sortOptions=[],Object.keys(this.sortMapping).forEach(n=>this.sortOptions.push({code:n,selected:!1}));let e=this.sortOptions.map(n=>this.translationService.translate(`pdfInvoices.sorts.${n.code}`));K(e).pipe(ne(1)).subscribe(n=>this.sortOptions.forEach((i,p)=>i.name=n[p]))}getNotEnabledError(e){return e?.details?e.details.filter(n=>n?.type==="UnknownResourceError"):[]}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||t)(E(Pr),E(ye),E(jo),E(Io),E(be))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-invoices-list"]],standalone:!1,decls:2,vars:3,consts:[[4,"ngIf"],[1,"cx-invoices-list-header"],[1,"cx-invoices-list-body"],[1,"cx-invoices-list-sort","top"],[1,"cx-invoices-list-form-group","form-group"],["ariaControls","cx-invoices-list-table",3,"sortListEvent","sortOptions","selectedOption","placeholder","ariaLabel"],["class","cx-invoices-list-pagination",4,"ngIf"],["id","cx-invoices-list-table",1,"table","cx-invoices-list-table"],["class","cx-invoices-list-thead-mobile",4,"cxFeature"],["class","cx-invoices-list-row",4,"ngFor","ngForOf"],[1,"cx-invoices-list-sort","bottom"],[1,"cx-invoices-list-pagination"],["paginationID","pagination-top",3,"viewPageEvent","pagination"],[1,"cx-invoices-list-thead-mobile"],["scope","col"],[1,"cx-invoices-list-attachment-icon",3,"type","title"],[1,"cx-invoices-list-row"],[1,"cx-invoices-list-code"],[1,"cx-invoices-list-label"],[1,"cx-invoices-list-value"],[1,"cx-invoices-list-date"],[1,"cx-invoices-list-monetary"],[1,"cx-invoices-list-attachment"],["class","cx-invoices-list-attachment-btn",3,"click",4,"ngIf"],[1,"cx-invoices-list-attachment-btn",3,"click"],[1,"cx-invoices-list-attachment-text",3,"innerText"],["paginationID","pagination-bottom",3,"viewPageEvent","pagination"]],template:function(n,i){n&1&&(g(0,jc,2,1,"ng-container",0),a(1,"async")),n&2&&l("ngIf",d(1,1,i.invoicesList$))},dependencies:[de,M,Dt,ut,lt,ze,j,B,ge],encapsulation:2,changeDetection:0})}}return t})(),Ka=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=P({providers:[ee({cmsComponents:{AccountOrderDetailsPDFInvoicesComponent:{component:dn,guards:[re]}}})],imports:[ie,Po,ce,st,_t,Ae,Rt,mt,We,Ze]})}}return t})();var Qc=t=>({code:t}),Yc=(t,o)=>({cxRoute:t,params:o});function zc(t,o){if(t&1){let e=F();s(0,"button",4),T("click",function(i){b(e);let p=m();return A(p.continue(i))}),u(1),a(2,"cxTranslate"),c()}t&2&&(r(),_(" ",d(2,1,"common.continue")," "))}function Zc(t,o){t&1&&(s(0,"button",5),a(1,"cxTranslate"),u(2),a(3,"cxTranslate"),c()),t&2&&(k("aria-label",d(1,2,"orderDetails.cancellationAndReturn.submitDescription")),r(2),_(" ",d(3,4,"orderDetails.cancellationAndReturn.submit")," "))}function Kc(t,o){if(t&1){let e=F();s(0,"button",11),T("click",function(){b(e);let i=m().ngIf,p=m();return A(p.setAll(i))}),u(1),a(2,"cxTranslate"),c()}t&2&&(r(),_(" ",d(2,1,"orderDetails.cancellationAndReturn.setAll")," "))}function Wc(t,o){t&1&&(s(0,"th",12),u(1),a(2,"cxTranslate"),c()),t&2&&(r(),_(" ",d(2,1,"orderDetails.cancellationAndReturn.quantity")," "))}function Jc(t,o){t&1&&(s(0,"th",13),u(1),a(2,"cxTranslate"),c()),t&2&&(r(),_(" ",d(2,1,"orderDetails.cancellationAndReturn.totalPrice")," "))}function Xc(t,o){if(t&1&&(s(0,"div",28),u(1),a(2,"cxTranslate"),c()),t&2){let e=m().$implicit;r(),yt(" ",d(2,2,"cartItems.id")," ",e.product.code," ")}}function ed(t,o){if(t&1&&(s(0,"div",33),u(1),c()),t&2){let e=m().$implicit;r(),_(" ",e.name,": ")}}function td(t,o){if(t&1&&(s(0,"div",25),u(1),c()),t&2){let e=m().$implicit;r(),_(" ",e.value," ")}}function nd(t,o){if(t&1&&(s(0,"div",30),g(1,ed,2,1,"div",31)(2,td,2,1,"div",32),c()),t&2){let e=o.$implicit;r(),l("ngIf",e.name),r(),l("ngIf",e.value)}}function id(t,o){if(t&1&&(O(0),g(1,nd,3,2,"div",29),I()),t&2){let e=m().$implicit;r(),l("ngForOf",e.product.baseOptions[0]==null||e.product.baseOptions[0].selected==null?null:e.product.baseOptions[0].selected.variantOptionQualifiers)}}function rd(t,o){if(t&1&&(s(0,"td",34)(1,"div",24),u(2),a(3,"cxTranslate"),c(),s(4,"div",25),u(5),c()()),t&2){let e=m().$implicit;r(2),_(" ",d(3,2,"orderDetails.cancellationAndReturn.itemPrice")," "),r(3),_(" ",e.basePrice==null?null:e.basePrice.formattedValue," ")}}function od(t,o){if(t&1&&(s(0,"td",35)(1,"div",36),a(2,"cxTranslate"),u(3),a(4,"cxTranslate"),c(),s(5,"div",25),u(6),c()()),t&2){let e=m().$implicit,n=m(2);r(),se("title",d(2,3,"cartItems.quantityTitle")),r(2),_(" ",d(4,5,"orderDetails.cancellationAndReturn.quantity")," "),r(3),_(" ",n.getMaxAmendQuantity(e)," ")}}function ad(t,o){if(t&1&&(O(0),u(1),I()),t&2){let e=m().$implicit,n=m().ngIf,i=m();r(),_(" ",i.getControl(n,e).value," ")}}function sd(t,o){if(t&1&&h(0,"cx-item-counter",37),t&2){let e=m().$implicit,n=m().ngIf,i=m();l("min",0)("max",i.getMaxAmendQuantity(e))("control",i.getControl(n,e))}}function cd(t,o){if(t&1&&(s(0,"td",38)(1,"div",24),u(2),a(3,"cxTranslate"),c(),s(4,"div",25),u(5),c()()),t&2){let e,n=m().$implicit,i=m(2);r(2),_(" ",d(3,2,"orderDetails.cancellationAndReturn.totalPrice")," "),r(3),J((e=i.getItemPrice(n))==null?null:e.formattedValue)}}function dd(t,o){if(t&1&&(s(0,"tr",14)(1,"td",15)(2,"div",16),h(3,"cx-media",17),s(4,"div",18)(5,"div",19),u(6),c(),g(7,Xc,3,4,"div",20),c(),g(8,id,2,1,"ng-container",0),c()(),g(9,rd,6,4,"td",21)(10,od,7,7,"td",22),s(11,"td",23)(12,"div",24),u(13),a(14,"cxTranslate"),c(),s(15,"div",25),g(16,ad,2,1,"ng-container",0)(17,sd,1,3,"cx-item-counter",26),c()(),g(18,cd,6,4,"td",27),c()),t&2){let e=o.$implicit,n=m(2);r(3),l("container",e.product.images==null?null:e.product.images.PRIMARY),r(3),_(" ",e.product.name," "),r(),l("ngIf",e.product.code),r(),l("ngIf",e.product.baseOptions==null?null:e.product.baseOptions.length),r(),l("ngIf",e.basePrice),r(),l("ngIf",!n.isConfirmation),r(3),_(" ",d(14,10,n.isCancellation()?"orderDetails.cancellationAndReturn.cancelQty":"orderDetails.cancellationAndReturn.returnQty")," "),r(3),l("ngIf",n.isConfirmation),r(),l("ngIf",!n.isConfirmation),r(),l("ngIf",n.isConfirmation)}}function ld(t,o){if(t&1&&(s(0,"div"),g(1,Kc,3,3,"button",1),s(2,"table",2)(3,"caption",3),u(4),a(5,"cxTranslate"),c(),s(6,"thead")(7,"tr")(8,"th",4),u(9),a(10,"cxTranslate"),c(),s(11,"th",5),u(12),a(13,"cxTranslate"),c(),g(14,Wc,3,3,"th",6),s(15,"th",7),u(16),a(17,"cxTranslate"),c(),g(18,Jc,3,3,"th",8),c()(),s(19,"tbody",9),g(20,dd,19,12,"tr",10),c()()()),t&2){let e=m();r(),l("ngIf",!e.isConfirmation),r(3),_(" ",d(5,8,"orderDetails.caption")," "),r(5),_(" ",d(10,10,"orderDetails.cancellationAndReturn.item")," "),r(3),_(" ",d(13,12,"orderDetails.cancellationAndReturn.itemPrice")," "),r(2),l("ngIf",!e.isConfirmation),r(2),_(" ",d(17,14,e.isCancellation()?"orderDetails.cancellationAndReturn.cancelQty":"orderDetails.cancellationAndReturn.returnQty")," "),r(2),l("ngIf",e.isConfirmation),r(2),l("ngForOf",e.entries)}}function pd(t,o){t&1&&ae(0)}function md(t,o){if(t&1&&h(0,"cx-amend-order-items",5),t&2){let e=o.ngIf;l("entries",e)("isConfirmation",!0)}}function ud(t,o){t&1&&ae(0)}function _d(t,o){if(t&1&&h(0,"cx-amend-order-actions",7),t&2){let e=m(2).ngIf,n=m();l("orderCode",n.orderCode)("amendOrderForm",e)}}function gd(t,o){if(t&1&&g(0,_d,1,2,"cx-amend-order-actions",6),t&2){let e=m(2);l("ngIf",e.orderCode)}}function fd(t,o){if(t&1){let e=F();s(0,"form",2),T("ngSubmit",function(){let i=b(e).ngIf,p=m();return A(p.submit(i))}),g(1,pd,1,0,"ng-container",3)(2,md,1,2,"cx-amend-order-items",4),a(3,"async"),g(4,ud,1,0,"ng-container",3)(5,gd,1,1,"ng-template",null,0,q),c()}if(t&2){let e=o.ngIf,n=L(6),i=m();l("formGroup",e),r(),l("ngTemplateOutlet",n),r(),l("ngIf",d(3,4,i.entries$)),r(2),l("ngTemplateOutlet",n)}}function vd(t,o){if(t&1&&(h(0,"cx-message",6),a(1,"cxTranslate")),t&2){let e=m(2);l("text",d(1,3,"formErrors.cxNoSelectedItemToCancel"))("isVisibleCloseButton",!1)("type",e.globalMessageType.MSG_TYPE_ERROR)}}function xd(t,o){t&1&&ae(0)}function hd(t,o){if(t&1&&h(0,"cx-amend-order-items",7),t&2){let e=o.ngIf;l("entries",e)}}function Cd(t,o){if(t&1&&h(0,"cx-form-errors",8),t&2){let e=m().ngIf;l("control",e.get("entries"))}}function yd(t,o){t&1&&ae(0)}function Od(t,o){if(t&1&&h(0,"cx-amend-order-actions",10),t&2){let e=m(2).ngIf,n=m();l("orderCode",n.orderCode)("amendOrderForm",e)}}function Id(t,o){if(t&1&&g(0,Od,1,2,"cx-amend-order-actions",9),t&2){let e=m(2);l("ngIf",e.orderCode)}}function Ed(t,o){if(t&1&&(O(0),g(1,vd,2,5,"cx-message",2)(2,xd,1,0,"ng-container",3)(3,hd,1,1,"cx-amend-order-items",4),a(4,"async"),g(5,Cd,1,1,"cx-form-errors",5)(6,yd,1,0,"ng-container",3)(7,Id,1,1,"ng-template",null,0,q),I()),t&2){let e=o.ngIf,n=L(8),i=m();r(),l("ngIf",!e.get("entries").valid&&e.get("entries").touched),r(),l("ngTemplateOutlet",n),r(),l("ngIf",d(4,5,i.entries$)),r(2),l("cxFeature","!a11yRepeatedCancelOrderError"),r(),l("ngTemplateOutlet",n)}}function Rd(t,o){t&1&&ae(0)}function Sd(t,o){if(t&1&&h(0,"cx-amend-order-items",5),t&2){let e=o.ngIf;l("entries",e)("isConfirmation",!0)}}function Td(t,o){t&1&&ae(0)}function Dd(t,o){if(t&1&&h(0,"cx-amend-order-actions",7),t&2){let e=m(2).ngIf,n=m();l("orderCode",n.orderCode)("amendOrderForm",e)}}function bd(t,o){if(t&1&&g(0,Dd,1,2,"cx-amend-order-actions",6),t&2){let e=m(2);l("ngIf",e.orderCode)}}function Ad(t,o){if(t&1){let e=F();s(0,"form",2),T("ngSubmit",function(){let i=b(e).ngIf,p=m();return A(p.submit(i))}),g(1,Rd,1,0,"ng-container",3)(2,Sd,1,2,"cx-amend-order-items",4),a(3,"async"),g(4,Td,1,0,"ng-container",3)(5,bd,1,1,"ng-template",null,0,q),c()}if(t&2){let e=o.ngIf,n=L(6),i=m();l("formGroup",e),r(),l("ngTemplateOutlet",n),r(),l("ngIf",d(3,4,i.entries$)),r(2),l("ngTemplateOutlet",n)}}function Ld(t,o){t&1&&ae(0)}function wd(t,o){if(t&1&&h(0,"cx-amend-order-items",5),t&2){let e=o.ngIf;l("entries",e)}}function Md(t,o){t&1&&ae(0)}function Fd(t,o){if(t&1&&h(0,"cx-amend-order-actions",7),t&2){let e=m(2).ngIf,n=m();l("orderCode",n.orderCode)("amendOrderForm",e)}}function kd(t,o){if(t&1&&g(0,Fd,1,2,"cx-amend-order-actions",6),t&2){let e=m(2);l("ngIf",e.orderCode)}}function Bd(t,o){if(t&1&&(O(0),g(1,Ld,1,0,"ng-container",2)(2,wd,1,1,"cx-amend-order-items",3),a(3,"async"),h(4,"cx-form-errors",4),g(5,Md,1,0,"ng-container",2)(6,kd,1,1,"ng-template",null,0,q),I()),t&2){let e=o.ngIf,n=L(7),i=m();r(),l("ngTemplateOutlet",n),r(),l("ngIf",d(3,4,i.entries$)),r(2),l("control",e.get("entries")),r(),l("ngTemplateOutlet",n)}}var Vr=()=>({cxRoute:"orders"}),Mt=t=>({value:t}),qe=t=>({cxRoute:"orderDetails",params:t}),Pd=()=>({value:1}),Ur=t=>({cxRoute:"orderReturn",params:t}),ei=()=>({cxRoute:"home"});function Nd(t,o){if(t&1&&(s(0,"div",15),a(1,"cxTranslate"),u(2),a(3,"cxTranslate"),c()),t&2){let e=m().$implicit;k("aria-label",d(1,2,"myAccountV2Orders.orderStatusLabel")),r(2),_(" ",d(3,4,"orderDetails.statusDisplay_"+e.statusDisplay)," ")}}function $d(t,o){if(t&1&&(s(0,"span"),u(1),a(2,"cxTranslate"),c()),t&2){let e=m(2).$implicit;r(),_(" + ",V(2,1,"myAccountV2Orders.items",S(4,Mt,e.totalItems-1))," ")}}function Vd(t,o){t&1&&(s(0,"span"),u(1),a(2,"cxTranslate"),c()),t&2&&(r(),_(" + ",V(2,1,"myAccountV2Orders.item",X(4,Pd))," "))}function Ud(t,o){if(t&1&&(s(0,"span"),u(1),s(2,"a",27),a(3,"cxUrl"),u(4),a(5,"cxTranslate"),c()()),t&2){let e=m(2).$implicit;r(),_(" "," | ",""),r(),l("routerLink",d(3,3,S(7,Ur,e))),r(2),_(" ",d(5,5,"myAccountV2Orders.returnOrder")," ")}}function Hd(t,o){if(t&1&&(O(0),s(1,"div",16)(2,"div",17),h(3,"cx-media",18),c(),s(4,"div",19)(5,"div",20)(6,"div",21),u(7),g(8,$d,3,6,"span",14)(9,Vd,3,5,"span",14),c(),s(10,"div",22),u(11),a(12,"cxDate"),a(13,"cxTranslate"),c(),s(14,"div",23),u(15),a(16,"cxTranslate"),c()(),s(17,"div",24)(18,"div",25),u(19),a(20,"cxTranslate"),c()()()(),s(21,"div",26)(22,"span")(23,"a",27),a(24,"cxUrl"),a(25,"cxTranslate"),u(26),a(27,"cxTranslate"),c()(),g(28,Ud,6,9,"span",14),c(),I()),t&2){let e=o.ngIf,n=m().$implicit;r(3),l("container",e.images==null?null:e.images.PRIMARY),r(4),_(" ",e.name," "),r(),l("ngIf",n.totalItems-1>1),r(),l("ngIf",n.totalItems-1===1),r(2),_(" ",V(13,14,"myAccountV2Orders.purchasedOn",S(30,Mt,V(12,11,n.placed,"d, MMMM, yyyy")))," "),r(4),_(" ",V(16,17,"myAccountV2Orders.orderedItems",S(32,Mt,n.totalItems))," "),r(4),_(" ",V(20,20,"myAccountV2Orders.totalPrice",S(34,Mt,n.total==null?null:n.total.formattedValue))," "),r(4),l("routerLink",d(24,23,S(36,qe,n))),k("aria-label",V(25,25,"myAccountV2Orders.orderDetailsLabel",S(38,Mt,n.code))),r(3),_(" ",d(27,28,"myAccountV2Orders.orderDetails")," "),r(2),l("ngIf",n.returnable)}}function qd(t,o){if(t&1&&(O(0),s(1,"div",9)(2,"div",10),g(3,Nd,4,6,"div",11),s(4,"div",12),a(5,"cxTranslate"),u(6),a(7,"cxTranslate"),c()(),s(8,"div",13),g(9,Hd,29,40,"ng-container",14),c()(),I()),t&2){let e=o.$implicit,n=m(3);r(3),l("ngIf",e.statusDisplay),r(),k("aria-label",d(5,4,"myAccountV2OrderHistory.orderCodeLabel")),r(2),_(" ",V(7,6,"myAccountV2Orders.orderNumber",S(9,Mt,e.code))," "),r(3),l("ngIf",n.getProduct(e))}}function jd(t,o){if(t&1&&(O(0),s(1,"div",7),g(2,qd,10,11,"ng-container",8),c(),I()),t&2){let e=m().ngIf;r(2),l("ngForOf",e.orders)}}function Gd(t,o){if(t&1&&(s(0,"div"),g(1,jd,3,1,"ng-container",6),c()),t&2){let e=o.ngIf;m();let n=L(14);r(),l("ngIf",e.pagination.totalResults>0)("ngIfElse",n)}}function Qd(t,o){t&1&&(s(0,"div",29)(1,"div"),a(2,"cxTranslate"),u(3),a(4,"cxTranslate"),c(),s(5,"a",30),a(6,"cxUrl"),u(7),a(8,"cxTranslate"),c()()),t&2&&(r(),k("aria-label",d(2,4,"orderHistory.notFound")),r(2),_(" ",d(4,6,"orderHistory.noOrders")," "),r(2),l("routerLink",d(6,8,X(12,ei))),r(2),J(d(8,10,"orderHistory.startShopping")))}function Yd(t,o){if(t&1&&(g(0,Qd,9,13,"div",28),a(1,"async")),t&2){let e=m(),n=L(16);l("ngIf",d(1,2,e.isLoaded$))("ngIfElse",n)}}function zd(t,o){t&1&&(s(0,"div",31),h(1,"cx-spinner"),c())}function Zd(t,o){if(t&1&&(s(0,"div",5),h(1,"cx-card",6),a(2,"async"),c()),t&2){let e=m().ngIf,n=m(2);r(),l("content",d(2,1,n.getPaymentMethodCard(e)))}}function Kd(t,o){if(t&1&&(s(0,"div",5),h(1,"cx-card",6),a(2,"async"),c()),t&2){let e=m().ngIf,n=m(2);r(),l("content",d(2,1,n.getBillingAddressCard(e)))}}function Wd(t,o){if(t&1&&(s(0,"div",3),g(1,Zd,3,3,"div",4)(2,Kd,3,3,"div",4),c()),t&2){let e=o.ngIf,n=m(2);r(),l("ngIf",n.isPaymentInfoCardFull(e)),r(),l("ngIf",e==null?null:e.billingAddress)}}function Jd(t,o){if(t&1&&(s(0,"div",1),g(1,Wd,3,2,"div",2),c()),t&2){let e=o.ngIf;r(),l("ngIf",e.paymentInfo)}}var ti=t=>({item:t,readonly:!0}),ns=t=>({sapQuoteCode:t}),Xd=t=>({id:t}),el=t=>({quoteId:t}),tl=t=>({cxRoute:"quoteDetails",params:t});function nl(t,o){}function il(t,o){if(t&1&&(O(0),s(1,"div",8),h(2,"cx-card",10),a(3,"async"),h(4,"cx-card",10),a(5,"async"),c(),s(6,"div",8),h(7,"cx-card",10),a(8,"cxDate"),a(9,"async"),h(10,"cx-card",10),a(11,"async"),h(12,"cx-card",10),a(13,"cxDate"),a(14,"async"),g(15,nl,0,0,"ng-template",9),c(),I()),t&2){let e=m(3).ngIf,n=m();r(2),l("content",d(3,7,n.getReplenishmentCodeCardContent(e==null?null:e.replenishmentOrderCode))),r(2),l("content",d(5,9,n.getReplenishmentActiveCardContent(e==null?null:e.active))),r(3),l("content",d(9,13,n.getReplenishmentStartOnCardContent(d(8,11,e==null?null:e.firstDate)))),r(3),l("content",d(11,15,n.getReplenishmentFrequencyCardContent(e==null||e.trigger==null?null:e.trigger.displayTimeTable))),r(2),l("content",d(14,19,n.getReplenishmentNextDateCardContent(d(13,17,e==null||e.trigger==null?null:e.trigger.activationTime)))),r(3),l("cxOutlet",n.cartOutlets.ORDER_OVERVIEW)("cxOutletContext",S(21,ti,e))}}function rl(t,o){t&1&&ae(0)}function ol(t,o){}function al(t,o){if(t&1&&(s(0,"div",8),h(1,"cx-card",10),a(2,"async"),h(3,"cx-card",10),a(4,"cxDate"),a(5,"async"),h(6,"cx-card",10),a(7,"async"),g(8,rl,1,0,"ng-container",11)(9,ol,0,0,"ng-template",9),c()),t&2){let e=m(3).ngIf,n=m(),i=L(3);r(),l("content",d(2,7,n.getOrderCodeCardContent(e==null?null:e.code))),r(2),l("content",d(5,11,n.getOrderCurrentDateCardContent(d(4,9,e==null?null:e.created)))),r(3),l("content",d(7,13,n.getOrderStatusCardContent(e.statusDisplay))),r(2),l("ngTemplateOutlet",i)("ngTemplateOutletContext",S(15,ns,e.sapQuoteCode)),r(),l("cxOutlet",n.cartOutlets.ORDER_OVERVIEW)("cxOutletContext",S(17,ti,e))}}function sl(t,o){if(t&1&&(O(0),h(1,"cx-card",10),a(2,"async"),I()),t&2){let e=m(4).ngIf,n=m();r(),l("content",d(2,1,n.getCostCenterCardContent(e==null?null:e.costCenter)))}}function cl(t,o){if(t&1&&(O(0),s(1,"div",8),h(2,"cx-card",10),a(3,"async"),h(4,"cx-card",10),a(5,"async"),g(6,sl,3,3,"ng-container",4),c(),I()),t&2){let e=m(3).ngIf,n=m();r(2),l("content",d(3,3,n.getPurchaseOrderNumber(e==null?null:e.purchaseOrderNumber))),r(2),l("content",d(5,5,n.getMethodOfPaymentCardContent(e.paymentInfo))),r(2),l("ngIf",e.costCenter)}}function dl(t,o){if(t&1&&(O(0),h(1,"cx-card",10),a(2,"async"),I()),t&2){let e=m(3).ngIf,n=m();r(),l("content",d(2,1,n.getAddressCardContent(e==null?null:e.deliveryAddress)))}}function ll(t,o){if(t&1&&(O(0),h(1,"cx-card",10),a(2,"async"),I()),t&2){let e=m(3).ngIf,n=m();r(),l("content",d(2,1,n.getDeliveryModeCardContent(e==null?null:e.deliveryMode)))}}function pl(t,o){}function ml(t,o){if(t&1&&(O(0),h(1,"cx-card",10),a(2,"async"),I()),t&2){let e=m(5).ngIf,n=m();r(),l("content",d(2,1,n.getPaymentInfoCardContent(e==null?null:e.paymentInfo)))}}function ul(t,o){if(t&1&&(s(0,"div",8),g(1,ml,3,3,"ng-container",4),h(2,"cx-card",10),a(3,"async"),c()),t&2){let e=m(4).ngIf,n=m();r(),l("ngIf",n.isPaymentInfoCardFull(e==null?null:e.paymentInfo)),r(),l("content",d(3,2,n.getBillingAddressCardContent(e==null||e.paymentInfo==null?null:e.paymentInfo.billingAddress)))}}function _l(t,o){if(t&1&&(O(0),g(1,ul,4,4,"div",12),I()),t&2){let e=m(3).ngIf,n=m();r(),l("ngIf",(e==null||e.paymentInfo==null?null:e.paymentInfo.billingAddress)||n.isPaymentInfoCardFull(e==null?null:e.paymentInfo))}}function gl(t,o){if(t&1&&(s(0,"div",6),g(1,il,16,23,"ng-container",7)(2,al,10,19,"ng-template",null,1,q)(4,cl,7,7,"ng-container",4),s(5,"div",8),g(6,dl,3,3,"ng-container",4)(7,ll,3,3,"ng-container",4)(8,pl,0,0,"ng-template",9),c(),g(9,_l,2,1,"ng-container",4),c()),t&2){let e=L(3),n=m(2).ngIf,i=m();r(),l("ngIf",n.replenishmentOrderCode)("ngIfElse",e),r(3),l("ngIf",n.purchaseOrderNumber||n.purchaseOrderNumber===""),r(2),l("ngIf",n.deliveryAddress),r(),l("ngIf",i.shouldShowDeliveryMode(n.deliveryMode)),r(),l("cxOutlet",i.orderOutlets.SERVICE_DETAILS)("cxOutletContext",S(8,ti,n)),r(),l("ngIf",n.paymentInfo)}}function fl(t,o){t&1&&ae(0)}function vl(t,o){}function xl(t,o){t&1&&h(0,"cx-order-detail-billing")}function hl(t,o){if(t&1&&(s(0,"div",6)(1,"div",13),h(2,"cx-card",10),a(3,"async"),h(4,"cx-card",10),a(5,"cxDate"),a(6,"async"),h(7,"cx-card",10),a(8,"async"),g(9,fl,1,0,"ng-container",11)(10,vl,0,0,"ng-template",9),c(),g(11,xl,1,0,"cx-order-detail-billing",4),c()),t&2){let e=m(2).ngIf,n=m(),i=L(3);r(2),l("content",d(3,8,n.getOrderCodeCardContent(e==null?null:e.code))),r(2),l("content",d(6,12,n.getOrderCurrentDateCardContent(d(5,10,e==null?null:e.created)))),r(3),l("content",d(8,14,n.getOrderStatusCardContent(e.statusDisplay))),r(2),l("ngTemplateOutlet",i)("ngTemplateOutletContext",S(16,ns,e.sapQuoteCode)),r(),l("cxOutlet",n.cartOutlets.ORDER_OVERVIEW)("cxOutletContext",S(18,ti,e)),r(),l("ngIf",n.isPaymentInfoCardFull(e==null?null:e.paymentInfo)||(e==null||e.paymentInfo==null?null:e.paymentInfo.billingAddress))}}function Cl(t,o){if(t&1&&(O(0),g(1,gl,10,10,"div",5),a(2,"async"),g(3,hl,12,20,"div",5),a(4,"async"),I()),t&2){let e=m(2);r(),l("ngIf",!d(2,2,e.simple$)),r(2),l("ngIf",d(4,4,e.simple$))}}function yl(t,o){if(t&1&&(s(0,"div",3),g(1,Cl,5,6,"ng-container",4),a(2,"async"),c()),t&2){let e=m();r(),l("ngIf",!d(2,1,e.isOrderLoading$))}}function Ol(t,o){if(t&1&&(s(0,"div",15)(1,"div",16),u(2),a(3,"cxTranslate"),c(),s(4,"a",17),a(5,"cxUrl"),u(6),a(7,"cxTranslate"),c()()),t&2){let e=m().sapQuoteCode;r(2),_(" ",V(3,3,"orderDetails.quoteCode",S(10,Xd,e))," "),r(2),l("routerLink",d(5,6,S(14,tl,S(12,el,e)))),r(2),_(" ",d(7,8,"orderDetails.quoteDetail")," ")}}function Il(t,o){if(t&1&&g(0,Ol,8,16,"div",14),t&2){let e=o.sapQuoteCode,n=m();l("ngIf",n.orderConfig.showOrderQuoteLink&&e)}}var Ie=()=>[],Ft=(t,o)=>({id:t,type:o}),El=(t,o)=>({items:t,readonly:!0,promotionLocation:o});function Rl(t,o){}function Sl(t,o){if(t&1&&(s(0,"div",1)(1,"h3",2),u(2),a(3,"cxTranslate"),c(),h(4,"cx-promotions",3),g(5,Rl,0,0,"ng-template",4),c()),t&2){let e=o.ngIf,n=m();r(2),_(" ",d(3,5,"checkoutOrderConfirmation.orderItems")," "),r(2),l("promotions",e.appliedOrderPromotions||X(7,Ie)),r(),l("cxAbstractOrderContext",Re(8,Ft,e.code,n.abstractOrderType.ORDER))("cxOutlet",n.cartOutlets.CART_ITEM_LIST)("cxOutletContext",Re(11,El,e.entries,n.promotionLocation))}}var Tl=t=>({items:t,readonly:!0});function Dl(t,o){}function bl(t,o){if(t&1&&(s(0,"div",9),g(1,Dl,0,0,"ng-template",10),c()),t&2){let e=m(2).ngIf,n=m();r(),l("cxAbstractOrderContext",Re(3,Ft,e.code,n.abstractOrderType.ORDER))("cxOutlet",n.cartOutlets.CART_ITEM_LIST)("cxOutletContext",S(6,Tl,n.entries))}}function Al(t,o){if(t&1&&(O(0),s(1,"h2",3),u(2),a(3,"cxTranslate"),c(),s(4,"div",4)(5,"div",5)(6,"div",6),h(7,"cx-card",7),a(8,"async"),c()(),s(9,"div",5)(10,"div",6),h(11,"cx-card",7),a(12,"async"),c()()(),g(13,bl,2,8,"div",8),I()),t&2){let e=m().ngIf,n=m();r(2),_(" ",d(3,4,"checkoutMode.deliveryEntries")," "),r(5),l("content",d(8,6,n.getDeliveryAddressCard(e.deliveryAddress))),r(4),l("content",d(12,8,n.getDeliveryModeCard(e.deliveryMode))),r(2),l("ngIf",n.showItemList)}}function Ll(t,o){if(t&1&&(s(0,"div",1),g(1,Al,14,10,"ng-container",2),c()),t&2){let e=m();r(),l("ngIf",!e.showItemList||(e.entries==null?null:e.entries.length)>0)}}var wl=t=>({email:t}),is=t=>({label:t});function Ml(t,o){if(t&1&&(h(0,"cx-form-errors",11),a(1,"cxTranslate")),t&2){let e=m();l("translationParams",S(4,is,d(1,2,"register.password.label")))("control",e.guestRegisterForm.get("password"))}}function Fl(t,o){if(t&1&&h(0,"cx-form-errors",12),t&2){let e=m();l("control",e.guestRegisterForm.get("password"))}}function kl(t,o){if(t&1&&(h(0,"cx-form-errors",13),a(1,"cxTranslate")),t&2){let e=m();l("translationParams",S(4,is,d(1,2,"register.confirmPassword.label")))("control",e.guestRegisterForm.get("passwordconf"))}}function Bl(t,o){if(t&1&&h(0,"cx-form-errors",12),t&2){let e=m();l("control",e.guestRegisterForm.get("passwordconf"))}}function Pl(t,o){if(t&1&&(s(0,"div"),h(1,"cx-guest-register-form",4),c()),t&2){let e=m().ngIf,n=m();r(),l("guid",n.orderGuid)("email",e.paymentInfo.billingAddress.email)}}function Nl(t,o){if(t&1&&(O(0),s(1,"div",1)(2,"span",2),u(3),a(4,"cxTranslate"),c()(),s(5,"div",3)(6,"h2"),u(7),a(8,"cxTranslate"),c(),s(9,"p"),u(10),a(11,"cxTranslate"),c()(),g(12,Pl,2,2,"div",0),h(13,"cx-add-to-home-screen-banner"),I()),t&2){let e,n=o.ngIf,i=m();r(3),yt(" ",d(4,5,"checkoutOrderConfirmation.confirmationOfOrder")," ",(e=n.replenishmentOrderCode)!==null&&e!==void 0?e:n.code," "),r(4),J(d(8,7,"checkoutOrderConfirmation.thankYou")),r(3),_(" ",d(11,9,"checkoutOrderConfirmation.invoiceHasBeenSentByEmail")," "),r(2),l("ngIf",i.isGuestCustomer&&i.orderGuid&&(n==null||n.paymentInfo==null||n.paymentInfo.billingAddress==null?null:n.paymentInfo.billingAddress.email))}}function $l(t,o){}function Vl(t,o){if(t&1&&(s(0,"div",1)(1,"div",2)(2,"div",3),g(3,$l,0,0,"ng-template",4),c()()()),t&2){let e=o.ngIf,n=m();r(3),l("cxOutlet",n.cartOutlets.ORDER_SUMMARY)("cxOutletContext",e)}}var rs=t=>({cxRoute:"orderCancel",params:t});function Ul(t,o){if(t&1&&(s(0,"a",5),a(1,"cxUrl"),u(2),a(3,"cxTranslate"),c()),t&2){let e=m().ngIf;l("routerLink",d(1,2,S(6,rs,e))),r(2),_(" ",d(3,4,"orderDetails.cancellationAndReturn.cancelAction")," ")}}function Hl(t,o){if(t&1&&(s(0,"a",5),a(1,"cxUrl"),u(2),a(3,"cxTranslate"),c()),t&2){let e=m().ngIf;l("routerLink",d(1,2,S(6,Ur,e))),r(2),_(" ",d(3,4,"orderDetails.cancellationAndReturn.returnAction")," ")}}function ql(t,o){if(t&1&&(O(0),s(1,"div",1)(2,"div",2)(3,"button",3),a(4,"cxUrl"),u(5),a(6,"cxTranslate"),c()(),s(7,"div",2),g(8,Ul,4,8,"a",4)(9,Hl,4,8,"a",4),c()(),I()),t&2){let e=o.ngIf;r(3),l("routerLink",d(4,4,X(8,Vr))),r(2),_(" ",d(6,6,"common.back")," "),r(3),l("ngIf",e.cancellable),r(),l("ngIf",e.returnable)}}function jl(t,o){if(t&1&&(s(0,"span",8)(1,"button",10),a(2,"cxUrl"),u(3),a(4,"cxTranslate"),c()()),t&2){let e=m(2);r(),l("routerLink",d(2,2,S(6,rs,e.order))),r(2),_(" ",d(4,4,"myAccountV2OrderDetails.cancelItems")," ")}}function Gl(t,o){if(t&1&&(s(0,"span",8)(1,"button",11),a(2,"cxUrl"),u(3),a(4,"cxTranslate"),c()()),t&2){let e=m(2);r(),l("routerLink",d(2,2,S(6,Ur,e.order))),r(2),_(" ",d(4,4,"myAccountV2OrderDetails.returnItems")," ")}}function Ql(t,o){if(t&1){let e=F();O(0),s(1,"div",1)(2,"div",2)(3,"span",3)(4,"span",4)(5,"button",5),a(6,"cxUrl"),u(7),a(8,"cxTranslate"),c()()()(),s(9,"div",6)(10,"span",3),g(11,jl,5,8,"span",7)(12,Gl,5,8,"span",7),s(13,"span",8)(14,"button",9),T("click",function(){b(e);let i=m();return A(i.showDialog(i.order))}),u(15),a(16,"cxTranslate"),c()()()()(),I()}if(t&2){let e=m();r(5),l("routerLink",d(6,5,X(11,Vr))),r(2),_(" ",d(8,7,"myAccountV2OrderDetails.viewAllOrders")," "),r(4),l("ngIf",e.order.cancellable),r(),l("ngIf",e.order.returnable),r(3),_(" ",d(16,9,"myAccountV2OrderDetails.downloadInvoices")," ")}}function Yl(t,o){t&1&&(s(0,"div",10),u(1),a(2,"cxTranslate"),c()),t&2&&(r(),_(" ",d(2,1,"myAccountV2OrderDetails.noInvoices")," "))}function zl(t,o){t&1&&(s(0,"div",11),h(1,"cx-spinner"),c())}var pn=["element"];function Zl(t,o){if(t&1){let e=F();s(0,"div")(1,"button",1),T("click",function(){b(e);let i=m(2);return A(i.openTrackingDialog(i.consignment))}),u(2),a(3,"cxTranslate"),c()()}t&2&&(r(2),_(" ",d(3,1,"orderDetails.consignmentTracking.action")," "))}function Kl(t,o){if(t&1&&(O(0),g(1,Zl,4,3,"div",0),I()),t&2){let e=m();r(),l("ngIf",e.consignmentStatus.includes(e.consignment.status))}}var Wl=(t,o)=>({item:t,order:o}),ni=(t,o,e)=>({displayAddToCart:t,addToCartString:o,optionalBtn:e}),ii=(t,o,e)=>({items:t,readonly:!0,promotionLocation:o,options:e});function Jl(t,o){if(t&1&&(s(0,"span"),u(1),a(2,"cxTranslate"),c()),t&2){let e=m(2).$implicit;r(),_(" ",d(2,1,"orderDetails.deliveryStatus_"+(e==null?null:e.status))," ")}}function Xl(t,o){if(t&1&&(s(0,"div",11)(1,"div"),u(2),a(3,"cxDate"),c()()),t&2){let e=m(2).$implicit;r(2),J(d(3,1,e==null?null:e.statusDate))}}function ep(t,o){if(t&1&&h(0,"cx-consignment-tracking",12),t&2){let e=m(2).$implicit,n=m();l("orderCode",n.order.code)("consignment",e)}}function tp(t,o){if(t&1&&(s(0,"div",6)(1,"div",7),g(2,Jl,3,3,"span",8),c(),g(3,Xl,4,3,"div",9)(4,ep,1,2,"cx-consignment-tracking",10),c()),t&2){let e=m().$implicit;r(2),l("ngIf",e),r(),l("ngIf",e==null?null:e.statusDate),r(),l("cxFeature","consignmentTracking")}}function np(t,o){}function ip(t,o){if(t&1&&(s(0,"div",2),g(1,tp,5,3,"ng-template",3),s(2,"div",4),g(3,np,0,0,"ng-template",5),c()()),t&2){let e=o.$implicit,n=m(),i=L(2);r(),l("cxOutlet",n.OrderOutlets.ORDER_CONSIGNMENT)("cxOutletContext",Re(5,Wl,e,n.order)),r(2),l("cxAbstractOrderContext",Re(8,Ft,n.order.code,n.abstractOrderType.ORDER))("cxOutlet",n.CartOutlets.CART_ITEM_LIST)("cxOutletContext",Ne(15,ii,e.entries,n.promotionLocation,Ne(11,ni,n.enableAddToCart,n.buyItAgainTranslation,i)))}}function rp(t,o){if(t&1&&h(0,"cx-add-to-cart",13),t&2){let e=o.$implicit;l("productCode",e.item.product==null?null:e.item.product.code)("product",e.item.product)("showQuantity",!1)("options",e.options)("pickupStore",e.item.deliveryPointOfService==null?null:e.item.deliveryPointOfService.name)}}var op=t=>({showItemList:!1,order:t});function ap(t,o){if(t&1&&(O(0),h(1,"cx-promotions",4),I()),t&2){let e=m(2).ngIf;r(),l("promotions",e.appliedOrderPromotions||X(1,Ie))}}function sp(t,o){t&1&&(s(0,"div",5),u(1),a(2,"cxTranslate"),c()),t&2&&(r(),_(" ",d(2,1,"deliveryPointOfServiceDetails.itemsToBePickUp")," "))}function cp(t,o){if(t&1&&(h(0,"cx-order-consigned-entries",6),a(1,"async"),a(2,"cxTranslate")),t&2){let e=m(2).ngIf,n=m();l("order",e)("consignments",n.pickupConsignments)("enableAddToCart",d(1,4,n.enableAddToCart$))("buyItAgainTranslation",d(2,6,"addToCart.buyItAgain"))}}function dp(t,o){}function lp(t,o){if(t&1&&g(0,dp,0,0,"ng-template",7),t&2){let e=m(2).ngIf,n=m();l("cxOutlet",n.OrderOutlets.CONSIGNMENT_DELIVERY_INFO)("cxOutletContext",S(2,op,e))}}function pp(t,o){if(t&1&&(h(0,"cx-order-consigned-entries",6),a(1,"async"),a(2,"cxTranslate")),t&2){let e=m(2).ngIf,n=m();l("order",e)("consignments",n.deliveryConsignments)("enableAddToCart",d(1,4,n.enableAddToCart$))("buyItAgainTranslation",d(2,6,"addToCart.buyItAgain"))}}function mp(t,o){if(t&1&&(s(0,"div",9)(1,"div",10),u(2),a(3,"cxTranslate"),c()()),t&2){let e=m(3).ngIf;r(2),_(" ",d(3,1,"orderDetails.statusDisplay_"+(e==null?null:e.statusDisplay))," ")}}function up(t,o){t&1&&(s(0,"h2",14),u(1),a(2,"cxTranslate"),c()),t&2&&(r(),_(" ",d(2,1,"checkoutMode.deliveryEntries")," "))}function _p(t,o){}function gp(t,o){if(t&1&&(O(0),g(1,up,3,3,"h2",11),a(2,"async"),s(3,"div",12),g(4,_p,0,0,"ng-template",13),a(5,"async"),a(6,"cxTranslate"),c(),I()),t&2){let e=m(3).ngIf,n=L(4),i=m();r(),l("ngIf",d(2,4,i.groupCartItems$)),r(3),l("cxAbstractOrderContext",Re(10,Ft,e.code,i.abstractOrderType.ORDER))("cxOutlet",i.CartOutlets.CART_ITEM_LIST)("cxOutletContext",Ne(17,ii,i.deliveryUnConsignedEntries,i.promotionLocation,Ne(13,ni,d(5,6,i.enableAddToCart$),d(6,8,"addToCart.buyItAgain"),n)))}}function fp(t,o){}function vp(t,o){if(t&1&&(O(0),s(1,"h2",14),u(2),a(3,"cxTranslate"),c(),s(4,"div",12),g(5,fp,0,0,"ng-template",13),a(6,"async"),a(7,"cxTranslate"),c(),I()),t&2){let e=m(3).ngIf,n=L(4),i=m();r(2),_(" ",d(3,4,"checkoutPickupInStore.heading")," "),r(3),l("cxAbstractOrderContext",Re(10,Ft,e.code,i.abstractOrderType.ORDER))("cxOutlet",i.CartOutlets.CART_ITEM_LIST)("cxOutletContext",Ne(17,ii,i.pickupUnconsignedEntries,i.promotionLocation,Ne(13,ni,d(6,6,i.enableAddToCart$),d(7,8,"addToCart.buyItAgain"),n)))}}function xp(t,o){if(t&1&&(O(0),g(1,mp,4,3,"div",8)(2,gp,7,21,"ng-container",1)(3,vp,8,21,"ng-container",1),I()),t&2){let e=m(2).ngIf,n=m();r(),l("ngIf",e==null?null:e.statusDisplay),r(),l("ngIf",n.deliveryUnConsignedEntries==null?null:n.deliveryUnConsignedEntries.length),r(),l("ngIf",n.pickupUnconsignedEntries==null?null:n.pickupUnconsignedEntries.length)}}function hp(t,o){if(t&1&&(s(0,"div",9)(1,"div",10),u(2),a(3,"cxTranslate"),c()()),t&2){let e=m(3).ngIf;r(2),_(" ",d(3,1,"orderDetails.statusDisplay_"+(e==null?null:e.statusDisplay))," ")}}function Cp(t,o){}function yp(t,o){if(t&1&&(O(0),s(1,"div",15),g(2,hp,4,3,"div",8),s(3,"div",12),g(4,Cp,0,0,"ng-template",13),a(5,"async"),a(6,"cxTranslate"),c()(),I()),t&2){let e=m(2).ngIf,n=L(4),i=m();r(2),l("ngIf",e==null?null:e.statusDisplay),r(2),l("cxAbstractOrderContext",Re(8,Ft,e.code,i.abstractOrderType.ORDER))("cxOutlet",i.CartOutlets.CART_ITEM_LIST)("cxOutletContext",Ne(15,ii,e.entries,i.promotionLocation,Ne(11,ni,d(5,4,i.enableAddToCart$),d(6,6,"addToCart.buyItAgain"),n)))}}function Op(t,o){if(t&1&&(O(0),g(1,ap,2,2,"ng-container",1)(2,sp,3,3,"div",2)(3,cp,3,8,"cx-order-consigned-entries",3)(4,lp,1,4,null,1),a(5,"async"),g(6,pp,3,8,"cx-order-consigned-entries",3)(7,xp,4,3,"ng-container",1)(8,yp,7,19,"ng-container",1),I()),t&2){let e=m().ngIf,n=m();r(),l("ngIf",(e.consignments==null?null:e.consignments.length)||(e.unconsignedEntries==null?null:e.unconsignedEntries.length)||e.replenishmentOrderCode),r(),l("ngIf",n.pickupConsignments==null?null:n.pickupConsignments.length),r(),l("ngIf",n.pickupConsignments),r(),l("ngIf",n.deliveryConsignments&&n.deliveryConsignments.length>0&&d(5,7,n.groupCartItems$)),r(2),l("ngIf",n.deliveryConsignments),r(),l("ngIf",e==null||e.unconsignedEntries==null?null:e.unconsignedEntries.length),r(),l("ngIf",(e==null?null:e.entries)&&(e==null?null:e.replenishmentOrderCode))}}function Ip(t,o){if(t&1&&h(0,"cx-add-to-cart",16),t&2){let e=o.$implicit;l("productCode",e.item.product==null?null:e.item.product.code)("product",e.item.product)("showQuantity",!1)("options",e.options)("pickupStore",e.item.deliveryPointOfService==null?null:e.item.deliveryPointOfService.name)}}function Ep(t,o){if(t&1&&(O(0),g(1,Op,9,9,"ng-container",1),a(2,"async"),g(3,Ip,1,5,"ng-template",null,0,q),I()),t&2){let e=m();r(),l("ngIf",!d(2,1,e.isOrderLoading$))}}function Rp(t,o){if(t&1&&(O(0),s(1,"a",17),u(2),c(),I()),t&2){let e=m(2).ngIf;r(),l("href",e.trackingUrl,ui),r(),J(e==null?null:e.trackingID)}}function Sp(t,o){if(t&1&&(O(0),s(1,"label"),u(2),c(),I()),t&2){let e=m(2).ngIf;r(2),_(" ",e==null?null:e.trackingID," ")}}function Tp(t,o){if(t&1&&(O(0),s(1,"div",11)(2,"div",12)(3,"div",13)(4,"div",14),u(5),a(6,"cxTranslate"),c(),s(7,"div",15),u(8),a(9,"cxDate"),c()(),s(10,"div",13)(11,"div",14),u(12),a(13,"cxTranslate"),c(),s(14,"div",15),u(15),a(16,"cxDate"),c()()(),s(17,"div",12)(18,"div",13)(19,"div",14),u(20),a(21,"cxTranslate"),c(),s(22,"div",15),u(23),c()(),s(24,"div",13)(25,"div",14),u(26),a(27,"cxTranslate"),c(),s(28,"div",15),g(29,Rp,3,2,"ng-container",16)(30,Sp,3,1,"ng-container",16),c()()()(),I()),t&2){let e=m().ngIf,n=m();r(5),_(" ",d(6,9,"orderDetails.consignmentTracking.dialog.shipped")," "),r(3),_(" ",V(9,11,n.shipDate,"medium")," "),r(4),_(" ",d(13,14,"orderDetails.consignmentTracking.dialog.estimate")," "),r(3),_(" ",V(16,16,e==null?null:e.targetArrivalDate,"medium")," "),r(5),_(" ",d(21,19,"orderDetails.consignmentTracking.dialog.carrier")," "),r(3),_(" ",e==null||e.carrierDetails==null?null:e.carrierDetails.name," "),r(3),_(" ",d(27,21,"orderDetails.consignmentTracking.dialog.trackingId")," "),r(3),l("ngIf",e==null?null:e.trackingUrl),r(),l("ngIf",!(e!=null&&e.trackingUrl))}}function Dp(t,o){if(t&1&&(O(0),s(1,"div",18)(2,"div",19),u(3),a(4,"cxDate"),c(),s(5,"div",20),u(6),c(),s(7,"div",19),u(8),c(),s(9,"div",21),u(10),c()(),I()),t&2){let e=o.$implicit;r(3),_(" ",V(4,4,e.eventDate,"medium")," "),r(3),_(" ",e.referenceCode," "),r(2),_(" ",e.detail," "),r(2),_(" location: ",e.location," ")}}function bp(t,o){if(t&1){let e=F();O(0),s(1,"div",5)(2,"div",6),u(3),a(4,"cxTranslate"),c(),s(5,"button",7),a(6,"cxTranslate"),T("click",function(){b(e);let i=m();return A(i.close("Cross click"))}),s(7,"span",8),u(8,"\xD7"),c()()(),g(9,Tp,31,23,"ng-container",4),s(10,"div",9),g(11,Dp,11,7,"ng-container",10),c(),I()}if(t&2){let e=o.ngIf;m();let n=L(5);r(3),_(" ",d(4,5,"orderDetails.consignmentTracking.dialog.header")," "),r(2),k("aria-label",d(6,7,"common.close")),r(4),l("ngIf",(e==null?null:e.carrierDetails)&&(e==null?null:e.trackingID))("ngIfElse",n),r(2),l("ngForOf",e.trackingEvents)}}function Ap(t,o){t&1&&(s(0,"div",22)(1,"div",15),u(2),a(3,"cxTranslate"),c()()),t&2&&(r(2),_(" ",d(3,1,"orderDetails.consignmentTracking.dialog.noTracking")," "))}function Lp(t,o){if(t&1){let e=F();s(0,"div",23)(1,"div",24)(2,"div",25),u(3),a(4,"cxTranslate"),c(),s(5,"button",26),a(6,"cxTranslate"),T("click",function(){b(e);let i=m();return A(i.close("Cross click"))}),s(7,"span",8),u(8,"\xD7"),c()()(),s(9,"div",27)(10,"div",12)(11,"div",28),h(12,"cx-spinner"),c()()()()}t&2&&(r(3),_(" ",d(4,2,"orderDetails.consignmentTracking.dialog.loadingHeader")," "),r(2),k("aria-label",d(6,4,"common.close")))}function wp(t,o){if(t&1&&(s(0,"span"),u(1),a(2,"cxTranslate"),c()),t&2){let e=m(2);r(),_(" ",d(2,1,"orderDetails.deliveryStatus_"+e.consignment.status)," ")}}function Mp(t,o){if(t&1){let e=F();s(0,"span"),u(1),a(2,"cxTranslate"),s(3,"a",8),T("click",function(){b(e);let i=m(3);return A(i.openTrackingDialog(i.consignment))}),u(4),c()()}if(t&2){let e=m(3);r(),_(" ",d(2,2,"orderDetails.consignmentTracking.dialog.trackingId"),": "),r(3),_(" ",e.consignment.trackingID," ")}}function Fp(t,o){if(t&1&&(s(0,"span",6),g(1,Mp,5,4,"span",7),c()),t&2){m();let e=L(6),n=m();r(),l("ngIf",n.consignment.trackingID)("ngIfElse",e)}}function kp(t,o){if(t&1&&(s(0,"span",9),u(1),a(2,"cxDate"),c()),t&2){let e=m(2);r(),_(" ",d(2,1,e.consignment.statusDate)," ")}}function Bp(t,o){if(t&1){let e=F();s(0,"a",8),T("click",function(){b(e);let i=m(2);return A(i.openTrackingDialog(i.consignment))}),u(1),a(2,"cxTranslate"),c()}t&2&&(r(),_(" ",d(2,1,"orderDetails.consignmentTracking.action")," "))}function Pp(t,o){if(t&1&&(s(0,"div",2)(1,"span"),g(2,wp,3,3,"span",3)(3,Fp,2,2,"span",4),c(),g(4,kp,3,3,"span",5)(5,Bp,3,3,"ng-template",null,0,q),c()),t&2){let e,n=m();r(2),l("ngIf",n.consignment.status),r(),l("ngIf",n.consignmentStatus.includes((e=n.consignment.status)!==null&&e!==void 0?e:"")),r(),l("ngIf",n.consignment==null?null:n.consignment.statusDate)}}function Np(t,o){if(t&1){let e=F();O(0),s(1,"div",2)(2,"div",3)(3,"button",4,0),T("click",function(){b(e);let i=m().ngIf,p=m();return A(p.onReorderClick(i))}),u(5),a(6,"cxTranslate"),c()()(),I()}t&2&&(r(5),_(" ",d(6,1,"reorder.button")," "))}function $p(t,o){if(t&1&&(O(0),g(1,Np,7,3,"ng-container",1),I()),t&2){let e=o.ngIf;r(),l("ngIf",e.code)}}var Vp=(t,o,e,n)=>({quantity:t,quantityAdded:o,productCode:e,productName:n});function Up(t,o){if(t&1){let e=F();O(0),s(1,"div",14)(2,"p"),u(3),a(4,"cxTranslate"),c(),s(5,"div",15)(6,"div",16)(7,"div",17)(8,"button",18),T("click",function(){b(e);let i=m(2);return A(i.close("Cancel creating cart from order"))}),u(9),a(10,"cxTranslate"),c(),s(11,"button",19),T("click",function(){b(e);let i=m().ngIf,p=m();return A(p.createCartFromOrder(i.orderCode))}),u(12),a(13,"cxTranslate"),c()()()()(),I()}t&2&&(r(3),_(" ",d(4,3,"reorder.dialog.areYouSureToReplaceCart")," "),r(6),_(" ",d(10,5,"reorder.dialog.cancel")," "),r(3),_(" ",d(13,7,"reorder.dialog.continue")," "))}function Hp(t,o){if(t&1&&(O(0),s(1,"span",21)(2,"span",22),h(3,"cx-icon",23),c(),u(4),a(5,"cxTranslate"),c(),I()),t&2){let e=m(4);r(3),l("type",e.iconTypes.SUCCESS),r(),_(" ",d(5,2,"reorder.dialog.messages.success")," ")}}function qp(t,o){if(t&1&&(O(0),s(1,"span",22),h(2,"cx-icon",25),c(),I()),t&2){let e=m(6);r(2),l("type",e.iconTypes.INFO)}}function jp(t,o){if(t&1&&(s(0,"span",22),h(1,"cx-icon",26),c()),t&2){let e=m(6);r(),l("type",e.iconTypes.ERROR)}}function Gp(t,o){if(t&1&&(s(0,"span",21),g(1,qp,3,1,"ng-container",13)(2,jp,2,1,"ng-template",null,3,q),s(4,"span"),u(5),a(6,"cxTranslate"),c()()),t&2){let e=o.$implicit,n=L(3),i=m(5);r(),l("ngIf",e.statusCode===i.cartValidationStatusCode.LOW_STOCK)("ngIfElse",n),r(4),_(" ",V(6,3,"reorder.dialog.messages."+e.statusCode,ro(6,Vp,e.quantity,e.quantityAdded,e.entry.product.code,e.entry.product.name))," ")}}function Qp(t,o){if(t&1&&g(0,Gp,7,11,"span",24),t&2){let e=m(4);l("ngForOf",e.cartModifications)}}function Yp(t,o){if(t&1&&(O(0),s(1,"p",20),g(2,Hp,6,4,"ng-container",13)(3,Qp,1,1,"ng-template",null,2,q),c(),I()),t&2){let e=L(4),n=m(3);r(2),l("ngIf",!(n.cartModifications!=null&&n.cartModifications.length))("ngIfElse",e)}}function zp(t,o){t&1&&(s(0,"div",27),h(1,"cx-spinner"),c())}function Zp(t,o){if(t&1&&(g(0,Yp,5,2,"ng-container",13),a(1,"async"),g(2,zp,2,0,"ng-template",null,1,q)),t&2){let e=L(3),n=m(2);l("ngIf",!d(1,2,n.loading$))("ngIfElse",e)}}function Kp(t,o){if(t&1&&(O(0),g(1,Up,14,9,"ng-container",13),a(2,"async"),g(3,Zp,4,4,"ng-template",null,0,q),I()),t&2){let e=L(4),n=m();r(),l("ngIf",d(2,2,n.showDecisionPrompt$))("ngIfElse",e)}}function Wp(t,o){}function Jp(t,o){if(t&1&&(O(0),s(1,"div",1)(2,"div",2),g(3,Wp,0,0,"ng-template",3),c()(),I()),t&2){let e=o.ngIf,n=m();r(3),l("cxOutlet",n.CartOutlets.ORDER_SUMMARY)("cxOutletContext",e)}}function Xp(t,o){if(t&1){let e=F();O(0),s(1,"div",2)(2,"div",3)(3,"button",4,0),T("click",function(){b(e);let i=m().ngIf,p=m();return A(p.onOrderAttachmentsClick(i.code))}),u(5),a(6,"cxTranslate"),c()()(),I()}t&2&&(r(5),_(" ",d(6,1,"attachments.button")," "))}function e0(t,o){if(t&1&&(O(0),g(1,Xp,7,3,"ng-container",1),I()),t&2){let e=o.ngIf;r(),l("ngIf",e.code)}}var Wa=t=>({disabled:t}),t0=t=>({hidden:t});function n0(t,o){if(t&1&&(s(0,"span",16),u(1),c()),t&2){let e=o.ngIf;r(),_(" ","("+e+")"," ")}}function i0(t,o){if(t&1){let e=F();s(0,"cx-message",17),a(1,"cxTranslate"),T("closeMessage",function(){let i=b(e).$implicit,p=m();return A(p.closeErrorMessage(i))}),c()}if(t&2){let e=m();l("text",d(1,2,"attachments.dialog.downloadError"))("type",e.globalMessageType.MSG_TYPE_ERROR)}}function r0(t,o){if(t&1){let e=F();s(0,"tr",21)(1,"td")(2,"a",22),a(3,"cxTranslate"),a(4,"cxTranslate"),T("mousedown",function(i){b(e);let p=m().$implicit,f=m(4);return A(f.onMouseDown(i,p.sapAttachmentId,p.sapFileName))})("keydown.enter",function(){b(e);let i=m().$implicit,p=m(4);return A(p.openOrderAttachment(i.sapAttachmentId,i.sapFileName))}),u(5),c()(),s(6,"td")(7,"div",23),h(8,"cx-spinner"),c()(),s(9,"td")(10,"a",24),a(11,"cxTranslate"),a(12,"cxTranslate"),T("click",function(){b(e);let i=m().$implicit,p=m(4);return A(p.openOrderAttachment(i.sapAttachmentId,i.sapFileName))})("keydown.enter",function(){b(e);let i=m().$implicit,p=m(4);return A(p.openOrderAttachment(i.sapAttachmentId,i.sapFileName))}),h(13,"cx-icon",10),c()()()}if(t&2){let e=m().$implicit,n=m(4);r(2),se("title",d(3,9,"attachments.dialog.preview")),l("ngClass",S(17,Wa,n.loadingAttachments.includes(e.sapAttachmentId))),k("aria-label",d(4,11,"attachments.dialog.preview")),r(3),_(" ",e.sapFileName," "),r(2),l("ngClass",S(19,t0,!n.loadingAttachments.includes(e.sapAttachmentId))),r(3),se("title",d(11,13,"attachments.dialog.preview")),l("ngClass",S(21,Wa,n.loadingAttachments.includes(e.sapAttachmentId))),k("aria-label",d(12,15,"attachments.dialog.preview")),r(3),l("type",n.iconTypes.FILE)}}function o0(t,o){if(t&1&&(O(0),g(1,r0,14,23,"tr",20),I()),t&2){let e=o.$implicit;r(),l("ngIf",e.sapAttachmentId)}}function a0(t,o){if(t&1&&(O(0),s(1,"table",18),g(2,o0,2,1,"ng-container",19),c(),I()),t&2){let e=m(2).ngIf;r(2),l("ngForOf",e)}}function s0(t,o){if(t&1&&(O(0),g(1,a0,3,1,"ng-container",13),I()),t&2){let e=m(2),n=L(25);r(),l("ngIf",e.attachmentsCount())("ngIfElse",n)}}function c0(t,o){if(t&1&&(O(0),g(1,s0,2,2,"ng-container",13),I()),t&2){let e=m(),n=L(23);r(),l("ngIf",!e.loadError())("ngIfElse",n)}}function d0(t,o){if(t&1&&(h(0,"cx-message",25),a(1,"cxTranslate")),t&2){let e=m();l("text",d(1,3,"attachments.dialog.error"))("type",e.globalMessageType.MSG_TYPE_ERROR)("isVisibleCloseButton",!1)}}function l0(t,o){if(t&1&&(h(0,"cx-message",26),a(1,"cxTranslate")),t&2){let e=m();l("text",d(1,3,"attachments.dialog.empty"))("type",e.globalMessageType.MSG_TYPE_INFO)("isVisibleCloseButton",!1)}}function p0(t,o){t&1&&(s(0,"div",27),h(1,"cx-spinner"),c())}var m0=(t,o)=>({orderHistory:t,replenishmentOrder:o}),u0=t=>({"cx-order-history-table-po":t});function _0(t,o){t&1&&(s(0,"h4"),u(1),a(2,"cxTranslate"),c()),t&2&&(r(),_(" ",d(2,1,"orderHistory.replenishmentHistory")," "))}function g0(t,o){t&1&&(s(0,"h2"),u(1),a(2,"cxTranslate"),c()),t&2&&(r(),_(" ",d(2,1,"orderHistory.orderHistory")," "))}function f0(t,o){if(t&1){let e=F();s(0,"div",18)(1,"cx-pagination",19),T("viewPageEvent",function(i){b(e);let p=m(4);return A(p.pageChange(i))}),c()()}if(t&2){let e=m(3).ngIf;r(),l("pagination",e.orderHistory.pagination)}}function v0(t,o){t&1&&(O(0),s(1,"th",15),u(2),a(3,"cxTranslate"),c(),s(4,"th",15),u(5),a(6,"cxTranslate"),c(),I()),t&2&&(r(2),_(" ",d(3,2,"orderHistory.PONumber")," "),r(3),_(" ",d(6,4,"orderHistory.costCenter")," "))}function x0(t,o){if(t&1&&(s(0,"a",23),a(1,"cxUrl"),u(2),c()),t&2){let e=m(2).$implicit,n=m(4);l("routerLink",d(1,3,S(5,qe,e)))("queryParams",n.getQueryParams(e)),r(2),_(" ",e.purchaseOrderNumber,"")}}function h0(t,o){if(t&1&&(s(0,"a",23),a(1,"cxUrl"),u(2),c()),t&2){let e=m(2).$implicit,n=m(4);l("routerLink",d(1,3,S(5,qe,e)))("queryParams",n.getQueryParams(e)),r(2),_(" ",e.costCenter==null?null:e.costCenter.name,"")}}function C0(t,o){if(t&1&&(O(0),s(1,"td",27)(2,"div",22),u(3),a(4,"cxTranslate"),c(),g(5,x0,3,7,"a",28),c(),s(6,"td",29)(7,"div",22),u(8),a(9,"cxTranslate"),c(),g(10,h0,3,7,"a",28),c(),I()),t&2){let e=m().$implicit;r(3),_(" ",d(4,4,"orderHistory.PONumber")," "),r(2),l("ngIf",e.purchaseOrderNumber),r(3),_(" ",d(9,6,"orderHistory.costCenter")," "),r(2),l("ngIf",e.costCenter==null?null:e.costCenter.name)}}function y0(t,o){if(t&1){let e=F();s(0,"tr",20),T("click",function(){let i=b(e).$implicit,p=m(4);return A(p.goToOrderDetail(i))}),s(1,"td",21)(2,"div",22),u(3),a(4,"cxTranslate"),c(),s(5,"a",23),a(6,"cxUrl"),u(7),c()(),g(8,C0,11,8,"ng-container",2),s(9,"td",24)(10,"div",22),u(11),a(12,"cxTranslate"),c(),s(13,"a",23),a(14,"cxUrl"),u(15),a(16,"cxDate"),c()(),s(17,"td",25)(18,"div",22),u(19),a(20,"cxTranslate"),c(),s(21,"a",23),a(22,"cxUrl"),u(23),a(24,"cxTranslate"),c()(),s(25,"td",26)(26,"div",22),u(27),a(28,"cxTranslate"),c(),s(29,"a",23),a(30,"cxUrl"),u(31),c()()()}if(t&2){let e=o.$implicit,n=o.index,i=m(4);k("aria-rowindex",n+1),r(3),_(" ",d(4,18,"orderHistory.orderId")," "),r(2),l("routerLink",d(6,20,S(39,qe,e)))("queryParams",i.getQueryParams(e)),r(2),_(" ",e==null?null:e.code,""),r(),l("ngIf",i.hasPONumber),r(3),_(" ",d(12,22,"orderHistory.date")," "),r(2),l("routerLink",d(14,24,S(41,qe,e)))("queryParams",i.getQueryParams(e)),r(2),J(V(16,26,e==null?null:e.placed,"longDate")),r(4),_(" ",d(20,29,"orderHistory.status")," "),r(2),l("routerLink",d(22,31,S(43,qe,e)))("queryParams",i.getQueryParams(e)),r(2),_(" ",d(24,33,"orderDetails.statusDisplay_"+(e==null?null:e.statusDisplay)),""),r(4),_(" ",d(28,35,"orderHistory.total")," "),r(2),l("routerLink",d(30,37,S(45,qe,e)))("queryParams",i.getQueryParams(e)),r(2),_(" ",e==null?null:e.total.formattedValue,"")}}function O0(t,o){if(t&1){let e=F();s(0,"div",18)(1,"cx-pagination",30),T("viewPageEvent",function(i){b(e);let p=m(4);return A(p.pageChange(i))}),c()()}if(t&2){let e=m(3).ngIf;r(),l("pagination",e.orderHistory.pagination)}}function I0(t,o){if(t&1){let e=F();O(0),s(1,"div",7)(2,"label",8)(3,"span"),u(4),a(5,"cxTranslate"),c(),s(6,"cx-sorting",9),a(7,"cxTranslate"),a(8,"async"),a(9,"cxTranslate"),T("sortListEvent",function(i){b(e);let p=m(3);return A(p.changeSortCode(i))}),c()(),g(10,f0,2,1,"div",10),c(),s(11,"table",11)(12,"caption",12),u(13),a(14,"cxTranslate"),c(),s(15,"thead",13)(16,"tr",14)(17,"th",15),u(18),a(19,"cxTranslate"),c(),g(20,v0,7,6,"ng-container",2),s(21,"th",15),u(22),a(23,"cxTranslate"),c(),s(24,"th",15),u(25),a(26,"cxTranslate"),c(),s(27,"th",15),u(28),a(29,"cxTranslate"),c()()(),s(30,"tbody"),g(31,y0,32,47,"tr",16),c()(),s(32,"div",17),g(33,O0,2,1,"div",10),c(),I()}if(t&2){let e=m(2).ngIf,n=m();r(4),_(" ",d(5,16,"orderHistory.sortBy")," "),r(2),se("placeholder",d(7,18,"orderHistory.sortBy")),l("sortOptions",e.orderHistory.sorts)("sortLabels",d(8,20,n.getSortLabels()))("selectedOption",e.orderHistory.pagination.sort)("ariaLabel",d(9,22,"orderHistory.sortOrders")),r(4),l("ngIf",e.orderHistory.pagination.totalPages>1),r(),l("ngClass",S(34,u0,n.hasPONumber)),r(2),_(" ",d(14,24,"orderHistory.orderHistory")," "),r(5),_(" ",d(19,26,"orderHistory.orderId")," "),r(2),l("ngIf",n.hasPONumber),r(2),_(" ",d(23,28,"orderHistory.date")," "),r(3),_(" ",d(26,30,"orderHistory.status")," "),r(3),_(" ",d(29,32,"orderHistory.total")," "),r(3),l("ngForOf",e.orderHistory.orders),r(2),l("ngIf",e.orderHistory.pagination.totalPages>1)}}function E0(t,o){t&1&&(O(0),s(1,"div"),u(2),a(3,"cxTranslate"),c(),I()),t&2&&(r(2),J(d(3,1,"orderHistory.notFound")))}function R0(t,o){t&1&&(s(0,"div"),u(1),a(2,"cxTranslate"),c(),s(3,"a",32),a(4,"cxUrl"),u(5),a(6,"cxTranslate"),c()),t&2&&(r(),J(d(2,3,"orderHistory.noOrders")),r(2),l("routerLink",d(4,5,X(9,ei))),r(2),J(d(6,7,"orderHistory.startShopping")))}function S0(t,o){if(t&1&&(s(0,"div",4)(1,"div"),g(2,E0,4,3,"ng-container",6)(3,R0,7,10,"ng-template",null,1,q),c()()),t&2){let e=L(4),n=m(3).ngIf;l("ngClass",n.replenishmentOrder?"cx-replenishment-details-order-history-no-order":"cx-order-history-no-order"),r(2),l("ngIf",n.replenishmentOrder)("ngIfElse",e)}}function T0(t,o){if(t&1&&(g(0,S0,5,3,"div",31),a(1,"async")),t&2){let e=m(3);l("ngIf",d(1,1,e.isLoaded$))}}function D0(t,o){if(t&1&&(O(0),s(1,"div",3)(2,"div",4),g(3,_0,3,3,"h4",2)(4,g0,3,3,"h2",2),c(),s(5,"div",5),g(6,I0,34,36,"ng-container",6)(7,T0,2,3,"ng-template",null,0,q),c()(),I()),t&2){let e=L(8),n=m().ngIf;r(2),l("ngClass",n.replenishmentOrder?"cx-replenishment-details-order-history-header":"cx-order-history-header"),r(),l("ngIf",n.replenishmentOrder),r(),l("ngIf",!n.replenishmentOrder),r(2),l("ngIf",n.orderHistory.pagination.totalResults>0)("ngIfElse",e)}}function b0(t,o){if(t&1&&(O(0),g(1,D0,9,5,"ng-container",2),I()),t&2){let e=o.ngIf;r(),l("ngIf",e.orderHistory)}}var kt=t=>({param:t});function A0(t,o){if(t&1&&(O(0),s(1,"a",7),u(2),c(),I()),t&2){let e=m().ngIf;r(),l("href",e.trackingUrl,ui),r(),J(e.trackingID)}}function L0(t,o){if(t&1&&u(0),t&2){let e=m().ngIf;_(" ",e.trackingID," ")}}function w0(t,o){if(t&1&&(O(0),s(1,"span"),a(2,"cxTranslate"),u(3),a(4,"cxTranslate"),g(5,A0,3,2,"ng-container",5),u(6," | "),c(),s(7,"span"),a(8,"cxTranslate"),u(9),a(10,"cxTranslate"),a(11,"cxDate"),c(),g(12,L0,1,1,"ng-template",null,1,q),I()),t&2){let e=o.ngIf,n=L(13);r(),k("aria-label",d(2,7,"orderDetails.consignmentTracking.dialog.trackingId")),r(2),_(" ",d(4,9,"orderDetails.consignmentTracking.dialog.trackingId"),": "),r(2),l("ngIf",e.trackingUrl)("ngIfElse",n),r(2),k("aria-label",d(8,11,"myAccountV2OrderHistory.estimateDeliveryLabel")),r(2),yt(" ",d(10,13,"orderDetails.consignmentTracking.dialog.estimate"),": ",V(11,15,e.targetArrivalDate,"d, MMMM, yyyy")," ")}}function M0(t,o){if(t&1&&(O(0),g(1,w0,14,18,"ng-container",6),I()),t&2){let e=m(2).$implicit;r(),l("ngIf",e.consignmentTracking)}}function F0(t,o){if(t&1&&(s(0,"span"),a(1,"cxTranslate"),u(2),a(3,"cxTranslate"),c()),t&2){let e=m(3).$implicit;k("aria-label",d(1,2,"myAccountV2OrderHistory.consignmentStatusLabel")),r(2),_(" ",d(3,4,"orderDetails.deliveryStatus_"+(e==null||e.status==null?null:e.status.toUpperCase()))," ")}}function k0(t,o){if(t&1&&(s(0,"span"),a(1,"cxTranslate"),u(2),a(3,"cxDate"),a(4,"cxTranslate"),c()),t&2){let e=m(3).$implicit;k("aria-label",d(1,2,"myAccountV2OrderHistory.consignmentStatusDateLabel")),r(2),_(" | ",V(4,7,"myAccountV2OrderHistory.statusDate",S(10,kt,V(3,4,e.statusDate,"d, MMMM, yyyy")))," ")}}function B0(t,o){if(t&1&&g(0,F0,4,6,"span",6)(1,k0,5,12,"span",6),t&2){let e=m(2).$implicit;l("ngIf",e.status),r(),l("ngIf",e.statusDate)}}function P0(t,o){if(t&1&&(s(0,"div",4),a(1,"cxTranslate"),s(2,"span"),a(3,"cxTranslate"),u(4),a(5,"cxTranslate"),c(),u(6," | "),g(7,M0,2,1,"ng-container",5)(8,B0,2,2,"ng-template",null,0,q),c()),t&2){let e=L(9),n=m(),i=n.$implicit,p=n.index;k("aria-label",d(1,5,"myAccountV2OrderHistory.consignmentDetailLabel")),r(2),k("aria-label",d(3,7,"myAccountV2OrderHistory.consignmentNumberLabel")),r(2),_(" ",V(5,9,"myAccountV2OrderHistory.consignmentCode",S(12,kt,p+1))," "),r(3),l("ngIf",i.trackingID)("ngIfElse",e)}}function N0(t,o){if(t&1&&(O(0),g(1,P0,10,14,"div",3),I()),t&2){let e=o.$implicit;r(),l("ngIf",e)}}var Bt=t=>({count:t}),os=t=>({cxRoute:"returnRequestDetails",params:t}),$0=()=>({param:1});function V0(t,o){t&1&&ae(0)}function U0(t,o){if(t&1&&(s(0,"div")(1,"div",10),u(2),a(3,"cxTranslate"),g(4,V0,1,0,"ng-container",11),c(),h(5,"cx-my-account-v2-consignment-entries",12),c()),t&2){let e,n,i,p=m(2),f=L(2);r(2),_(" ",d(3,5,"myAccountV2OrderHistory.deliveryPointOfServiceDetails.itemsToBePickUp")," "),r(2),l("ngTemplateOutlet",f)("ngTemplateOutletContext",S(8,Bt,p.getConsignmentsCount(p.getPickupConsignments((e=p.order.consignments)!==null&&e!==void 0?e:X(7,Ie))))),r(),l("orderCode",(n=p.order.code)!==null&&n!==void 0?n:"")("consignments",p.getPickupConsignments((i=p.order.consignments)!==null&&i!==void 0?i:X(10,Ie)))}}function H0(t,o){t&1&&ae(0)}function q0(t,o){if(t&1&&(s(0,"div")(1,"div",10),u(2),a(3,"cxTranslate"),g(4,H0,1,0,"ng-container",11),c(),h(5,"cx-my-account-v2-consignment-entries",12),c()),t&2){let e,n,i,p=m(2),f=L(2);r(2),_(" ",d(3,5,"myAccountV2OrderHistory.checkoutMode.deliveryEntries")," "),r(2),l("ngTemplateOutlet",f)("ngTemplateOutletContext",S(8,Bt,p.getConsignmentsCount(p.getDeliveryConsignments((e=p.order.consignments)!==null&&e!==void 0?e:X(7,Ie))))),r(),l("orderCode",(n=p.order.code)!==null&&n!==void 0?n:"")("consignments",p.getDeliveryConsignments((i=p.order.consignments)!==null&&i!==void 0?i:X(10,Ie)))}}function j0(t,o){t&1&&ae(0)}function G0(t,o){if(t&1&&(s(0,"div",15),u(1),a(2,"cxTranslate"),g(3,j0,1,0,"ng-container",11),c()),t&2){let e=m(4),n=L(2);r(),_(" ",d(2,3,"orderDetails.statusDisplay_"+e.order.statusDisplay)," - "),r(2),l("ngTemplateOutlet",n)("ngTemplateOutletContext",S(5,Bt,e.getOrderEntriesCount(e.order.unconsignedEntries)))}}function Q0(t,o){t&1&&ae(0)}function Y0(t,o){if(t&1&&(s(0,"div",10),u(1),a(2,"cxTranslate"),g(3,Q0,1,0,"ng-container",11),c()),t&2){let e=m(4),n=L(2);r(),_(" ",d(2,3,"orderDetails.statusDisplay_"+e.order.statusDisplay)," - "),r(2),l("ngTemplateOutlet",n)("ngTemplateOutletContext",S(5,Bt,e.getOrderEntriesCount(e.order.unconsignedEntries)))}}function z0(t,o){if(t&1&&(s(0,"div"),g(1,G0,4,7,"div",14)(2,Y0,4,7,"ng-template",null,2,q),c()),t&2){let e=L(3),n=m(3);r(),l("ngIf",n.isStatusCritical(n.order.statusDisplay))("ngIfElse",e)}}function Z0(t,o){t&1&&ae(0)}function K0(t,o){if(t&1&&(s(0,"div",16),u(1),a(2,"cxTranslate"),g(3,Z0,1,0,"ng-container",11),c()),t&2){let e,n=m(3),i=L(2);r(),_(" ",d(2,3,"myAccountV2OrderHistory.checkoutMode.deliveryEntries")," "),r(2),l("ngTemplateOutlet",i)("ngTemplateOutletContext",S(6,Bt,n.getOrderEntriesCount(n.getDeliveryUnconsignedEntries((e=n.order.unconsignedEntries)!==null&&e!==void 0?e:X(5,Ie)))))}}function W0(t,o){t&1&&ae(0)}function J0(t,o){if(t&1&&(s(0,"div",16),u(1),a(2,"cxTranslate"),g(3,W0,1,0,"ng-container",11),c()),t&2){let e,n=m(3),i=L(2);r(),_(" ",d(2,3,"myAccountV2OrderHistory.checkoutPickupInStore.heading")," "),r(2),l("ngTemplateOutlet",i)("ngTemplateOutletContext",S(6,Bt,n.getOrderEntriesCount(n.getPickupUnconsignedEntries((e=n.order.unconsignedEntries)!==null&&e!==void 0?e:X(5,Ie)))))}}function X0(t,o){if(t&1&&(s(0,"div"),g(1,z0,4,2,"div",7)(2,K0,4,8,"div",13)(3,J0,4,8,"div",13),c()),t&2){let e,n,i=m(2);r(),l("ngIf",i.order.statusDisplay),r(),l("ngIf",i.getOrderEntriesCount(i.getDeliveryUnconsignedEntries((e=i.order.unconsignedEntries)!==null&&e!==void 0?e:X(3,Ie)))>0),r(),l("ngIf",i.getOrderEntriesCount(i.getPickupUnconsignedEntries((n=i.order.unconsignedEntries)!==null&&n!==void 0?n:X(4,Ie)))>0)}}function em(t,o){if(t&1&&(s(0,"a",18),a(1,"cxUrl"),u(2),c()),t&2){let e=m().$implicit;l("routerLink",d(1,2,S(4,os,e))),r(2),_(" ",e.rma,"")}}function tm(t,o){if(t&1&&u(0),t&2){let e=m().$implicit;_(" ",e.code," ")}}function nm(t,o){if(t&1&&(s(0,"div",16),u(1),a(2,"cxDate"),a(3,"cxTranslate"),c()),t&2){let e=o.ngIf;r(),_(" ",V(3,4,"myAccountV2OrderHistory.returnProcessed",S(7,kt,V(2,1,e,"d, MMMM, yyyy")))," ")}}function im(t,o){if(t&1&&(s(0,"div")(1,"div",15),u(2),a(3,"cxTranslate"),g(4,em,3,6,"a",17),c(),g(5,tm,1,1,"ng-template",null,3,q)(7,nm,4,9,"div",13),c()),t&2){let e=o.$implicit,n=L(6);r(2),_(" ",d(3,4,"returnRequestList.returnRequestId")," "),r(2),l("ngIf",e.rma)("ngIfElse",n),r(3),l("ngIf",e.creationTime)}}function rm(t,o){if(t&1&&(O(0),h(1,"cx-media",19),I()),t&2){let e=o.$implicit;r(),l("container",e.PRIMARY)}}function om(t,o){if(t&1&&(O(0),g(1,rm,2,1,"ng-container",8),I()),t&2){let e=m(2);r(),l("ngForOf",e.getProductImages(e.order.entries))}}function am(t,o){if(t&1&&(s(0,"div",5)(1,"div",6),g(2,U0,6,11,"div",7)(3,q0,6,11,"div",7)(4,X0,4,5,"div",7)(5,im,8,6,"div",8),c(),s(6,"div",9),g(7,om,2,1,"ng-container",7),c()()),t&2){let e,n,i=m();r(2),l("ngIf",i.getConsignmentsCount(i.getPickupConsignments((e=i.order.consignments)!==null&&e!==void 0?e:X(5,Ie)))>0),r(),l("ngIf",i.getConsignmentsCount(i.getDeliveryConsignments((n=i.order.consignments)!==null&&n!==void 0?n:X(6,Ie)))>0),r(),l("ngIf",i.getOrderEntriesCount(i.order.unconsignedEntries)>0),r(),l("ngForOf",i.order.returnRequests),r(2),l("ngIf",i.order.entries)}}function sm(t,o){if(t&1&&(O(0),u(1),a(2,"cxTranslate"),I()),t&2){let e=m().count;r(),_(" ",V(2,1,"myAccountV2OrderHistory.items",S(4,kt,e))," ")}}function cm(t,o){if(t&1&&g(0,sm,3,6,"ng-container",20),t&2){let e=o.count;m();let n=L(4);l("ngIf",e>1)("ngIfElse",n)}}function dm(t,o){t&1&&(u(0),a(1,"cxTranslate")),t&2&&_(" ",V(1,1,"myAccountV2OrderHistory.item",X(4,$0)),`
`)}function lm(t,o){if(t&1){let e=F();O(0),s(1,"div",7)(2,"div",8),a(3,"cxTranslate"),T("click",function(){let i=b(e).$implicit,p=m(3);return A(p.goToOrderDetail(i))}),s(4,"a",9),a(5,"cxUrl"),u(6),a(7,"cxTranslate"),c()(),s(8,"div",10)(9,"span"),a(10,"cxTranslate"),u(11),a(12,"cxDate"),c(),s(13,"span"),a(14,"cxTranslate"),s(15,"strong"),u(16),a(17,"cxTranslate"),c()()(),h(18,"cx-my-account-v2-order-consolidated-information",11),c(),I()}if(t&2){let e=o.$implicit,n=m(3);r(2),k("aria-label",d(3,10,"myAccountV2OrderHistory.orderCodeLabel")),r(2),l("routerLink",d(5,12,S(26,qe,e)))("queryParams",n.getQueryParams(e)),r(2),yt(" ",d(7,14,"orderHistory.orderId")," ",e==null?null:e.code,""),r(3),k("aria-label",d(10,16,"myAccountV2OrderHistory.orderPlaced")),r(2),_(" ",V(12,18,e.placed,"d, MMMM, yyyy")," | "),r(2),k("aria-label",d(14,21,"myAccountV2OrderHistory.totalPriceLabel")),r(3),_(" ",V(17,23,"myAccountV2OrderHistory.totalPrice",S(28,kt,e.total==null?null:e.total.formattedValue))," "),r(2),l("order",e)}}function pm(t,o){if(t&1){let e=F();s(0,"div",12),a(1,"cxTranslate"),s(2,"cx-pagination",13),T("viewPageEvent",function(i){b(e);let p=m(3);return A(p.pageChange(i))}),c()()}if(t&2){let e=m(2).ngIf;k("aria-label",d(1,2,"myAccountV2OrderHistory.orderListPagination")),r(2),l("pagination",e.pagination)}}function mm(t,o){if(t&1&&(O(0),g(1,lm,19,30,"ng-container",5)(2,pm,3,4,"div",6),I()),t&2){let e=m().ngIf;r(),l("ngForOf",e.orders),r(),l("ngIf",e.pagination.totalPages>1)}}function um(t,o){if(t&1&&(s(0,"div"),a(1,"cxTranslate"),s(2,"div",3)(3,"h2"),u(4),a(5,"async"),a(6,"cxTranslate"),c()(),s(7,"div",4),g(8,mm,3,2,"ng-container",2),c()()),t&2){let e=o.ngIf,n=m(),i=L(3);k("aria-label",d(1,4,"myAccountV2OrderHistory.orderListResults")),r(4),_(" ",V(6,8,"myAccountV2OrderHistory.heading",S(11,kt,d(5,6,n.tabTitleParam$)))," "),r(4),l("ngIf",e.pagination.totalResults>0)("ngIfElse",i)}}function _m(t,o){t&1&&(s(0,"div")(1,"div"),a(2,"cxTranslate"),u(3),a(4,"cxTranslate"),c(),s(5,"a",14),a(6,"cxUrl"),u(7),a(8,"cxTranslate"),c()()),t&2&&(r(),k("aria-label",d(2,4,"orderHistory.notFound")),r(2),_(" ",d(4,6,"orderHistory.noOrders")," "),r(2),l("routerLink",d(6,8,X(12,ei))),r(2),J(d(8,10,"orderHistory.startShopping")))}function gm(t,o){if(t&1&&(g(0,_m,9,13,"div",2),a(1,"async")),t&2){let e=m(),n=L(5);l("ngIf",d(1,2,e.isLoaded$))("ngIfElse",n)}}function fm(t,o){t&1&&(s(0,"div",15),h(1,"cx-spinner"),c())}var vm=()=>({cxRoute:"replenishmentOrders"});function xm(t,o){if(t&1){let e=F();s(0,"div",2)(1,"button",5,0),T("click",function(){b(e);let i=m();return A(i.openDialog())}),u(3),a(4,"cxTranslate"),c()()}t&2&&(r(3),_(" ",d(4,1,"orderDetails.cancelReplenishment.title")," "))}var wt=t=>({cxRoute:"replenishmentDetails",params:t});function hm(t,o){if(t&1){let e=F();s(0,"div",16)(1,"cx-pagination",18),T("viewPageEvent",function(i){b(e);let p=m(3);return A(p.pageChange(i))}),c()()}if(t&2){let e=m(2).ngIf;r(),l("pagination",e.pagination)}}function Cm(t,o){t&1&&(s(0,"thead",19)(1,"th",20)(2,"span",21),u(3),a(4,"cxTranslate"),c()(),s(5,"th",20)(6,"span",21),u(7),a(8,"cxTranslate"),c()(),s(9,"th",20)(10,"span",21),u(11),a(12,"cxTranslate"),c()(),s(13,"th",20)(14,"span",21),u(15),a(16,"cxTranslate"),c()(),s(17,"th",20)(18,"span",21),u(19),a(20,"cxTranslate"),c()(),s(21,"th",22)(22,"span",21),u(23),a(24,"cxTranslate"),c()(),s(25,"th",20)(26,"span",21),u(27),a(28,"cxTranslate"),c()()()),t&2&&(r(3),_(" ",d(4,7,"orderHistory.replenishmentOrderId")," "),r(4),_(" ",d(8,9,"orderHistory.purchaseOrderNumber")," "),r(4),_(" ",d(12,11,"orderHistory.startOn")," "),r(4),_(" ",d(16,13,"orderHistory.frequency")," "),r(4),_(" ",d(20,15,"orderHistory.nextOrderDate")," "),r(4),_(" ",d(24,17,"orderHistory.total")," "),r(4),_(" ",d(28,19,"orderHistory.actions")," "))}function ym(t,o){t&1&&(s(0,"thead",19)(1,"tr")(2,"th",23)(3,"span",21),u(4),a(5,"cxTranslate"),c()(),s(6,"th",23)(7,"span",21),u(8),a(9,"cxTranslate"),c()(),s(10,"th",23)(11,"span",21),u(12),a(13,"cxTranslate"),c()(),s(14,"th",23)(15,"span",21),u(16),a(17,"cxTranslate"),c()(),s(18,"th",23)(19,"span",21),u(20),a(21,"cxTranslate"),c()(),s(22,"th",24)(23,"span",21),u(24),a(25,"cxTranslate"),c()(),s(26,"th",23)(27,"span",21),u(28),a(29,"cxTranslate"),c()()()()),t&2&&(r(4),_(" ",d(5,7,"orderHistory.replenishmentOrderId")," "),r(4),_(" ",d(9,9,"orderHistory.purchaseOrderNumber")," "),r(4),_(" ",d(13,11,"orderHistory.startOn")," "),r(4),_(" ",d(17,13,"orderHistory.frequency")," "),r(4),_(" ",d(21,15,"orderHistory.nextOrderDate")," "),r(4),_(" ",d(25,17,"orderHistory.total")," "),r(4),_(" ",d(29,19,"orderHistory.actions")," "))}function Om(t,o){if(t&1){let e=F();s(0,"button",36,1),T("click",function(i){b(e);let p=m().$implicit,f=m(3);return A(f.openDialog(i,p==null?null:p.replenishmentOrderCode))}),u(2),a(3,"cxTranslate"),c()}t&2&&(r(2),_(" ",d(3,1,"orderHistory.cancel")," "))}function Im(t,o){if(t&1){let e=F();s(0,"tr",25),T("click",function(){let i=b(e).$implicit,p=m(3);return A(p.goToOrderDetail(i))}),s(1,"td",26)(2,"div",27),u(3),a(4,"cxTranslate"),c(),s(5,"a",28),a(6,"cxUrl"),u(7),c()(),s(8,"td",29)(9,"div",27),u(10),a(11,"cxTranslate"),c(),s(12,"a",30),a(13,"cxUrl"),u(14),a(15,"cxTranslate"),c()(),s(16,"td",29)(17,"div",27),u(18),a(19,"cxTranslate"),c(),s(20,"a",28),a(21,"cxUrl"),u(22),a(23,"cxDate"),c()(),s(24,"td",31)(25,"div",27),u(26),a(27,"cxTranslate"),c(),s(28,"a",28),a(29,"cxUrl"),u(30),a(31,"slice"),c()(),s(32,"td",29)(33,"div",27),u(34),a(35,"cxTranslate"),c(),s(36,"a",32),a(37,"cxUrl"),u(38),a(39,"cxDate"),a(40,"cxTranslate"),c()(),s(41,"td",33)(42,"div",27),u(43),a(44,"cxTranslate"),c(),s(45,"a",28),a(46,"cxUrl"),u(47),c()(),s(48,"td",34),h(49,"div",27),g(50,Om,4,3,"button",35),c()()}if(t&2){let e=o.$implicit,n=o.index;k("aria-rowindex",n+1),r(3),_(" ",d(4,20,"orderHistory.replenishmentOrderId")," "),r(2),l("routerLink",d(6,22,S(58,wt,e))),r(2),_(" ",e==null?null:e.replenishmentOrderCode,""),r(3),_(" ",d(11,24,"orderHistory.purchaseOrderNumber")," "),r(2),l("routerLink",d(13,26,S(60,wt,e))),r(2),_(" ",(e==null||e.purchaseOrderNumber==null?null:e.purchaseOrderNumber.length)>0?e==null?null:e.purchaseOrderNumber:d(15,28,"orderHistory.emptyPurchaseOrderId")," "),r(4),_(" ",d(19,30,"orderHistory.startOn")," "),r(2),l("routerLink",d(21,32,S(62,wt,e))),r(2),_(" ",V(23,34,e==null?null:e.firstDate,"M/d/yyyy"),""),r(4),_(" ",d(27,37,"orderHistory.frequency")," "),r(2),l("routerLink",d(29,39,S(64,wt,e))),r(2),_(" ",oo(31,41,e==null?null:e.trigger.displayTimeTable,0,-12)," "),r(4),_(" ",d(35,45,"orderHistory.nextOrderDate")," "),r(2),l("routerLink",d(37,47,S(66,wt,e))),r(2),_(" ",e!=null&&e.active?V(39,49,e==null?null:e.trigger.activationTime,"M/d/yyyy"):d(40,52,"orderHistory.cancelled")," "),r(5),_(" ",d(44,54,"orderHistory.total")," "),r(2),l("routerLink",d(46,56,S(68,wt,e))),r(2),_(" ",e==null?null:e.totalPriceWithTax.formattedValue,""),r(3),l("ngIf",e==null?null:e.active)}}function Em(t,o){if(t&1){let e=F();s(0,"cx-pagination",37),T("viewPageEvent",function(i){b(e);let p=m(3);return A(p.pageChange(i))}),c()}if(t&2){let e=m(2).ngIf;l("pagination",e.pagination)}}function Rm(t,o){if(t&1){let e=F();O(0),s(1,"div",7)(2,"label",8)(3,"span"),u(4),a(5,"cxTranslate"),c(),s(6,"cx-sorting",9),a(7,"cxTranslate"),a(8,"async"),a(9,"cxTranslate"),T("sortListEvent",function(i){b(e);let p=m(2);return A(p.changeSortCode(i))}),c()(),g(10,hm,2,1,"div",10),c(),s(11,"table",11)(12,"caption",12),u(13),a(14,"cxTranslate"),c(),g(15,Cm,29,21,"thead",13)(16,ym,30,21,"thead",13),s(17,"tbody"),g(18,Im,51,70,"tr",14),c()(),s(19,"div",15)(20,"div",16),g(21,Em,1,1,"cx-pagination",17),c()(),I()}if(t&2){let e=m().ngIf,n=m();r(4),J(d(5,12,"orderHistory.sortBy")),r(2),se("placeholder",d(7,14,"orderHistory.sortBy")),l("sortOptions",e.sorts)("sortLabels",d(8,16,n.getSortLabels()))("selectedOption",e.pagination.sort)("ariaLabel",d(9,18,"orderHistory.sortOrders")),r(4),l("ngIf",e.pagination.totalPages>1),r(3),_(" ",d(14,20,"orderHistory.orderHistory")," "),r(2),l("cxFeature","!a11yTableHeaderReadout"),r(),l("cxFeature","a11yTableHeaderReadout"),r(2),l("ngForOf",e.replenishmentOrders),r(3),l("ngIf",e.pagination.totalPages>1)}}function Sm(t,o){t&1&&(s(0,"div",39)(1,"div",40)(2,"div"),u(3),a(4,"cxTranslate"),c(),s(5,"a",41),a(6,"cxUrl"),u(7),a(8,"cxTranslate"),c()()()),t&2&&(r(3),J(d(4,3,"orderHistory.noReplenishmentOrders")),r(2),l("routerLink",d(6,5,X(9,ei))),r(2),J(d(8,7,"orderHistory.startShopping")))}function Tm(t,o){if(t&1&&(g(0,Sm,9,10,"div",38),a(1,"async")),t&2){let e=m(2);l("ngIf",d(1,1,e.isLoaded$))}}function Dm(t,o){if(t&1&&(O(0),s(1,"div",3)(2,"div",4)(3,"h3"),u(4),a(5,"cxTranslate"),c()(),s(6,"div",5),g(7,Rm,22,22,"ng-container",6)(8,Tm,2,3,"ng-template",null,0,q),c()(),I()),t&2){let e=o.ngIf,n=L(9);r(4),_(" ",d(5,3,"orderHistory.replenishmentOrderHistory")," "),r(3),l("ngIf",e.pagination.totalResults>0)("ngIfElse",n)}}function bm(t,o){if(t&1&&(s(0,"div",22),u(1),c()),t&2){let e=m().$implicit;r(),_(" ",e.orderEntry==null?null:e.orderEntry.product.name," ")}}function Am(t,o){if(t&1&&(s(0,"div",23),u(1),a(2,"cxTranslate"),c()),t&2){let e=m().$implicit;r(),yt(" ",d(2,2,"cartItems.id")," ",e.orderEntry==null?null:e.orderEntry.product.code," ")}}function Lm(t,o){if(t&1&&(s(0,"div",27),u(1),c()),t&2){let e=m().$implicit;r(),_(" ",e.name,": ")}}function wm(t,o){if(t&1&&(s(0,"div",20),u(1),c()),t&2){let e=m().$implicit;r(),_(" ",e.value," ")}}function Mm(t,o){if(t&1&&(s(0,"div",24),g(1,Lm,2,1,"div",25)(2,wm,2,1,"div",26),c()),t&2){let e=o.$implicit;r(),l("ngIf",e.name),r(),l("ngIf",e.value)}}function Fm(t,o){if(t&1&&(s(0,"td",28)(1,"div",19),u(2),a(3,"cxTranslate"),c(),s(4,"div",20),u(5),c()()),t&2){let e=m().$implicit;r(2),_(" ",d(3,2,"returnRequest.itemPrice")," "),r(3),_(" ",e.orderEntry==null||e.orderEntry.basePrice==null?null:e.orderEntry.basePrice.formattedValue," ")}}function km(t,o){if(t&1&&(s(0,"tr",9)(1,"td",10)(2,"div",11),h(3,"cx-media",12),s(4,"div",13),g(5,bm,2,1,"div",14)(6,Am,3,4,"div",15)(7,Mm,3,2,"div",16),c()()(),g(8,Fm,6,4,"td",17),s(9,"td",18)(10,"div",19),u(11),a(12,"cxTranslate"),c(),s(13,"div",20),u(14),c()(),s(15,"td",21)(16,"div",19),u(17),a(18,"cxTranslate"),c(),s(19,"div",20),u(20),c()()()),t&2){let e=o.$implicit;r(3),l("container",e.orderEntry==null||e.orderEntry.product.images==null?null:e.orderEntry.product.images.PRIMARY),r(2),l("ngIf",e.orderEntry==null?null:e.orderEntry.product.name),r(),l("ngIf",e.orderEntry==null?null:e.orderEntry.product.code),r(),l("ngForOf",e.orderEntry==null||e.orderEntry.product.baseOptions[0]==null||e.orderEntry.product.baseOptions[0].selected==null?null:e.orderEntry.product.baseOptions[0].selected.variantOptionQualifiers),r(),l("ngIf",e.orderEntry==null?null:e.orderEntry.basePrice),r(3),_(" ",d(12,9,"returnRequest.returnQty")," "),r(3),_(" ",e.expectedQuantity," "),r(3),_(" ",d(18,11,"returnRequest.total")," "),r(3),_(" ",e.refundAmount==null?null:e.refundAmount.formattedValue," ")}}function Bm(t,o){if(t&1&&(s(0,"table",1)(1,"caption",2),u(2),a(3,"cxTranslate"),c(),s(4,"thead")(5,"tr")(6,"th",3),u(7),a(8,"cxTranslate"),c(),s(9,"th",4),u(10),a(11,"cxTranslate"),c(),s(12,"th",5),u(13),a(14,"cxTranslate"),c(),s(15,"th",6),u(16),a(17,"cxTranslate"),c()()(),s(18,"tbody",7),g(19,km,21,13,"tr",8),c()()),t&2){let e=o.ngIf;r(2),_(" ",d(3,6,"returnRequest.caption")," "),r(5),_(" ",d(8,8,"returnRequest.item")," "),r(3),_(" ",d(11,10,"returnRequest.itemPrice")," "),r(3),_(" ",d(14,12,"returnRequest.returnQty")," "),r(3),_(" ",d(17,14,"returnRequest.total")," "),r(3),l("ngForOf",e.returnEntries)}}function Pm(t,o){if(t&1){let e=F();s(0,"button",9),a(1,"async"),T("click",function(){b(e);let i=m().ngIf,p=m();return A(p.cancelReturn(i.rma))}),u(2),a(3,"cxTranslate"),c()}if(t&2){let e=m(2);l("disabled",d(1,2,e.isCancelling$)),r(2),_(" ",d(3,4,"returnRequest.cancel")," ")}}function Nm(t,o){if(t&1){let e=F();O(0),s(1,"div",1)(2,"div",2)(3,"button",3),T("click",function(){b(e);let i=m();return A(i.back())}),u(4),a(5,"cxTranslate"),c()(),s(6,"div",2),g(7,Pm,4,6,"button",4),c()(),s(8,"div",5)(9,"div",6)(10,"div",7),u(11),a(12,"cxTranslate"),c(),s(13,"div",8),u(14),c()(),s(15,"div",6)(16,"div",7),u(17),a(18,"cxTranslate"),c(),s(19,"div",8),u(20),c()(),s(21,"div",6)(22,"div",7),u(23),a(24,"cxTranslate"),c(),s(25,"div",8),u(26),a(27,"cxTranslate"),c()()(),I()}if(t&2){let e=o.ngIf;r(4),_(" ",d(5,8,"common.back")," "),r(3),l("ngIf",e.cancellable),r(4),_(" ",d(12,10,"returnRequest.returnRequestId")," "),r(3),J(e.rma),r(3),_(" ",d(18,12,"returnRequest.orderCode")," "),r(3),J(e.order==null?null:e.order.code),r(3),_(" ",d(24,14,"returnRequest.status")," "),r(3),_(" ",d(27,16,"returnRequestList.statusDisplay_"+(e==null?null:e.status))," ")}}function $m(t,o){if(t&1&&(O(0),s(1,"div",1)(2,"div",2)(3,"h4"),u(4),a(5,"cxTranslate"),c(),s(6,"div",3)(7,"div",4),u(8),a(9,"cxTranslate"),c(),s(10,"div",5),u(11),c()(),s(12,"div",3)(13,"div",4),u(14),a(15,"cxTranslate"),c(),s(16,"div",5),u(17),c()(),s(18,"div",6)(19,"div",4),u(20),a(21,"cxTranslate"),c(),s(22,"div",5),u(23),c()(),s(24,"div",7),u(25),a(26,"cxTranslate"),c()()(),I()),t&2){let e=o.ngIf;r(4),J(d(5,8,"returnRequest.summary")),r(4),_(" ",d(9,10,"returnRequest.subtotal")," "),r(3),_(" ",e.subTotal==null?null:e.subTotal.formattedValue," "),r(3),_(" ",d(15,12,"returnRequest.deliveryCode")," "),r(3),_(" ",e.deliveryCost==null?null:e.deliveryCost.formattedValue," "),r(3),_(" ",d(21,14,"returnRequest.estimatedRefund")," "),r(3),_(" ",e.totalPrice==null?null:e.totalPrice.formattedValue," "),r(2),_(" ",d(26,16,"returnRequest.note")," ")}}function Vm(t,o){t&1&&(s(0,"thead",13)(1,"th",14),u(2),a(3,"cxTranslate"),c(),s(4,"th",14),u(5),a(6,"cxTranslate"),c(),s(7,"th",14),u(8),a(9,"cxTranslate"),c(),s(10,"th",14),u(11),a(12,"cxTranslate"),c()()),t&2&&(r(2),_(" ",d(3,4,"returnRequestList.returnRequestId")," "),r(3),J(d(6,6,"returnRequestList.orderId")),r(3),_(" ",d(9,8,"returnRequestList.date")," "),r(3),J(d(12,10,"returnRequestList.status")))}function Um(t,o){t&1&&(s(0,"thead",13)(1,"tr")(2,"th",14),u(3),a(4,"cxTranslate"),c(),s(5,"th",14),u(6),a(7,"cxTranslate"),c(),s(8,"th",14),u(9),a(10,"cxTranslate"),c(),s(11,"th",14),u(12),a(13,"cxTranslate"),c()()()),t&2&&(r(3),_(" ",d(4,4,"returnRequestList.returnRequestId")," "),r(3),_(" ",d(7,6,"returnRequestList.orderId")," "),r(3),_(" ",d(10,8,"returnRequestList.date")," "),r(3),_(" ",d(13,10,"returnRequestList.status")," "))}function Hm(t,o){if(t&1&&(s(0,"tr")(1,"td",15)(2,"div",16),u(3),a(4,"cxTranslate"),c(),s(5,"a",17),a(6,"cxUrl"),u(7),c()(),s(8,"td",15)(9,"div",16),u(10),a(11,"cxTranslate"),c(),s(12,"a",17),a(13,"cxUrl"),u(14),c()(),s(15,"td",18)(16,"div",16),u(17),a(18,"cxTranslate"),c(),u(19),a(20,"cxDate"),c(),s(21,"td",19)(22,"div",16),u(23),a(24,"cxTranslate"),c(),u(25),a(26,"cxTranslate"),c()()),t&2){let e=o.$implicit;r(3),_(" ",d(4,10,"returnRequestList.returnRequestId")," "),r(2),l("routerLink",d(6,12,S(27,os,e))),r(2),_(" ",e==null?null:e.rma,""),r(3),_(" ",d(11,14,"returnRequestList.orderId")," "),r(2),l("routerLink",d(13,16,S(29,qe,e==null?null:e.order))),r(2),_(" ",e==null||e.order==null?null:e.order.code,""),r(3),_(" ",d(18,18,"returnRequestList.date")," "),r(2),_(" ",V(20,20,e==null?null:e.creationTime,"longDate")," "),r(4),_(" ",d(24,23,"returnRequestList.status")," "),r(2),_(" ",d(26,25,"returnRequestList.statusDisplay_"+(e==null?null:e.status))," ")}}function qm(t,o){if(t&1){let e=F();O(0),s(1,"div",3)(2,"label",4)(3,"span"),u(4),a(5,"cxTranslate"),c(),s(6,"cx-sorting",5),a(7,"async"),a(8,"cxTranslate"),T("sortListEvent",function(i){b(e);let p=m(2);return A(p.changeSortCode(i))}),c()(),s(9,"div",6)(10,"cx-pagination",7),T("viewPageEvent",function(i){b(e);let p=m(2);return A(p.pageChange(i))}),c()()(),s(11,"table",8),g(12,Vm,13,12,"thead",9)(13,Um,14,12,"thead",9),s(14,"tbody"),g(15,Hm,27,31,"tr",10),c()(),s(16,"div",11)(17,"label",4)(18,"span"),u(19),a(20,"cxTranslate"),c(),s(21,"cx-sorting",5),a(22,"async"),a(23,"cxTranslate"),T("sortListEvent",function(i){b(e);let p=m(2);return A(p.changeSortCode(i))}),c()(),s(24,"div",6)(25,"cx-pagination",12),T("viewPageEvent",function(i){b(e);let p=m(2);return A(p.pageChange(i))}),c()()(),I()}if(t&2){let e=m().ngIf,n=m();r(4),J(d(5,15,"returnRequestList.sortBy")),r(2),l("sortOptions",e.sorts)("sortLabels",d(7,17,n.getSortLabels()))("selectedOption",e.pagination.sort)("ariaLabel",d(8,19,"returnRequestList.sortReturns")),r(4),l("pagination",e.pagination),r(2),l("cxFeature","!a11yTableHeaderReadout"),r(),l("cxFeature","a11yTableHeaderReadout"),r(2),l("ngForOf",e.returnRequests),r(4),J(d(20,21,"returnRequestList.sortBy")),r(2),l("sortOptions",e.sorts)("sortLabels",d(22,23,n.getSortLabels()))("selectedOption",e.pagination.sort)("ariaLabel",d(23,25,"returnRequestList.sortReturns")),r(4),l("pagination",e.pagination)}}function jm(t,o){if(t&1&&(O(0),s(1,"div",1)(2,"div",2),g(3,qm,26,27,"ng-container",0),c()(),I()),t&2){let e=o.ngIf;r(3),l("ngIf",e.pagination.totalResults>0)}}var ri=(()=>{class t{constructor(e){this.routingService=e,this.styles="row"}continue(e){this.amendOrderForm.valid?this.routingService.go({cxRoute:this.forwardRoute,params:{code:this.orderCode}}):(this.amendOrderForm.markAllAsTouched(),e.stopPropagation())}static{this.\u0275fac=function(n){return new(n||t)(E(Ce))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-amend-order-actions"]],hostVars:2,hostBindings:function(n,i){n&2&&no(i.styles)},inputs:{orderCode:"orderCode",amendOrderForm:"amendOrderForm",backRoute:"backRoute",forwardRoute:"forwardRoute"},standalone:!1,decls:8,vars:13,consts:[[1,"col-xs-12","col-md-4","col-lg-3"],["cxBtnLikeLink","",1,"btn","btn-block","btn-secondary",3,"routerLink"],["class","btn btn-block btn-primary",3,"click",4,"ngIf"],["class","btn btn-block btn-primary","type","submit",4,"ngIf"],[1,"btn","btn-block","btn-primary",3,"click"],["type","submit",1,"btn","btn-block","btn-primary"]],template:function(n,i){n&1&&(s(0,"div",0)(1,"a",1),a(2,"cxUrl"),u(3),a(4,"cxTranslate"),c()(),s(5,"div",0),g(6,zc,3,3,"button",2)(7,Zc,4,6,"button",3),c()),n&2&&(r(),l("routerLink",d(2,4,Re(10,Yc,i.backRoute,S(8,Qc,i.orderCode)))),r(2),_(" ",d(4,6,"common.back")," "),r(3),l("ngIf",i.forwardRoute),r(),l("ngIf",!i.forwardRoute))},dependencies:[M,he,St,Oe,B],encapsulation:2,changeDetection:0})}}return t})(),oi=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=P({imports:[ie,$e,Ae,ce,Tt]})}}return t})(),ai=function(t){return t[t.CANCEL=0]="CANCEL",t[t.RETURN=1]="RETURN",t}(ai||{}),me=(()=>{class t{constructor(e,n){this.orderHistoryFacade=e,this.routingService=n,this.orderCode$=this.routingService.getRouterState().pipe(x(i=>i.state.params.orderCode),mn()),this.orderLoad$=this.orderCode$.pipe(H(i=>{i?this.orderHistoryFacade.loadOrderDetails(i):this.orderHistoryFacade.clearOrderDetails()}),pi({bufferSize:1,refCount:!0}))}isOrderDetailsLoading(){return this.orderHistoryFacade.getOrderDetailsLoading()}getOrderDetails(){return this.orderLoad$.pipe($(()=>this.orderHistoryFacade.getOrderDetails()))}static{this.\u0275fac=function(n){return new(n||t)(v(Ue),v(Ce))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Gm(t){return t.value?Object.values(t.value).reduce((e,n)=>e+n,0)>0?null:{cxNoSelectedItemToCancel:!0}:null}var Le=(()=>{class t{constructor(e){this.orderDetailsService=e}getAmendedEntries(){return this.getForm().pipe($(e=>this.getEntries().pipe(x(n=>n.filter(i=>this.getFormControl(e,i).value>0)))))}getOrder(){return this.orderDetailsService.getOrderDetails()}getForm(){return this.getOrder().pipe(H(e=>{(!this.form||this.form.get("orderCode")?.value!==e.code)&&this.buildForm(e)}),x(()=>this.form))}buildForm(e){this.form=new vi({}),this.form.addControl("orderCode",new xi(e.code));let n=new vi({},{validators:[Gm]});this.form.addControl("entries",n),(e.entries||[]).forEach(i=>{let p=i?.entryNumber?.toString()??"";n.addControl(p,new xi(0,{validators:[Ht.min(0),Ht.max(this.getMaxAmendQuantity(i))]}))})}getFormControl(e,n){return e.get("entries")?.get(n.entryNumber?.toString()??"")}getAmendedPrice(e){let n=this.getFormControl(this.form,e).value,i=Object.assign({},e.basePrice);return i.value=Math.round((e.basePrice?.value??0)*n*100)/100,i.formattedValue=so(i.value,"en",ao(i.currencyIso??"","narrow"),i.currencyIso),i}getMaxAmendQuantity(e){return(this.isCancellation()?e.cancellableQuantity:e.returnableQuantity)||e.quantity||0}isCancellation(){return this.amendType===ai.CANCEL}static{this.\u0275fac=function(n){return new(n||t)(v(me))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),si=(()=>{class t{constructor(e){this.orderAmendService=e,this.isConfirmation=!1,this.form$=this.orderAmendService.getForm()}getControl(e,n){return e.get("entries")?.get(n.entryNumber?.toString()??"")}setAll(e){this.entries.forEach(n=>this.getControl(e,n).setValue(this.getMaxAmendQuantity(n)))}getItemPrice(e){return this.orderAmendService.getAmendedPrice(e)}getMaxAmendQuantity(e){return this.orderAmendService.getMaxAmendQuantity(e)}isCancellation(){return this.orderAmendService.isCancellation()}static{this.\u0275fac=function(n){return new(n||t)(E(Le))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-amend-order-items"]],inputs:{entries:"entries",isConfirmation:"isConfirmation"},standalone:!1,decls:2,vars:3,consts:[[4,"ngIf"],["class","btn btn-link cx-action-link",3,"click",4,"ngIf"],[1,"cx-amend-order-items"],[1,"cx-visually-hidden"],["role","columnheader",1,"cx-item-list-desc"],["role","columnheader",1,"cx-item-list-price"],["role","columnheader","class","cx-item-list-amend-qty",4,"ngIf"],["role","columnheader",1,"cx-item-list-qty"],["role","columnheader","class","cx-item-list-total",4,"ngIf"],[1,"cx-item-list-items"],["class","cx-item-list-row cx-amend-order-item-row",4,"ngFor","ngForOf"],[1,"btn","btn-link","cx-action-link",3,"click"],["role","columnheader",1,"cx-item-list-amend-qty"],["role","columnheader",1,"cx-item-list-total"],[1,"cx-item-list-row","cx-amend-order-item-row"],["role","cell"],[1,"cx-table-item-container"],["format","thumbnail",3,"container"],[1,"cx-info"],[1,"cx-name"],["class","cx-code",4,"ngIf"],["role","cell","class","cx-price",4,"ngIf"],["role","cell","class","cx-request-qty",4,"ngIf"],["role","cell",1,"cx-quantity"],[1,"cx-mobile-header"],[1,"cx-value"],[3,"min","max","control",4,"ngIf"],["role","cell","class","cx-total",4,"ngIf"],[1,"cx-code"],["class","cx-property",4,"ngFor","ngForOf"],[1,"cx-property"],["class","cx-label",4,"ngIf"],["class","cx-value",4,"ngIf"],[1,"cx-label"],["role","cell",1,"cx-price"],["role","cell",1,"cx-request-qty"],[1,"cx-mobile-header",3,"title"],[3,"min","max","control"],["role","cell",1,"cx-total"]],template:function(n,i){n&1&&(g(0,ld,21,16,"div",0),a(1,"async")),n&2&&l("ngIf",d(1,1,i.form$))},dependencies:[de,M,qt,Vo,j,B],encapsulation:2,changeDetection:0})}}return t})(),ci=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=P({imports:[ie,st,ce,mt,Uo,jt]})}}return t})(),Qm=(()=>{class t{constructor(e){this.orderAmendService=e,this.form$=this.orderAmendService.getForm().pipe(H(n=>this.orderCode=n.value.orderCode)),this.entries$=this.orderAmendService.getAmendedEntries()}submit(e){e.valid?this.orderAmendService.save():e.markAllAsTouched()}static{this.\u0275fac=function(n){return new(n||t)(E(Le))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-cancel-order-confirmation"]],standalone:!1,decls:2,vars:3,consts:[["actions",""],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"ngSubmit","formGroup"],[4,"ngTemplateOutlet"],[3,"entries","isConfirmation",4,"ngIf"],[3,"entries","isConfirmation"],["backRoute","orderCancel",3,"orderCode","amendOrderForm",4,"ngIf"],["backRoute","orderCancel",3,"orderCode","amendOrderForm"]],template:function(n,i){n&1&&(g(0,fd,7,6,"form",1),a(1,"async")),n&2&&l("ngIf",d(1,1,i.form$))},dependencies:[M,ot,Dn,Tn,bn,si,ri,j],encapsulation:2,changeDetection:0})}}return t})(),Hr=(()=>{class t extends Le{constructor(e,n,i,p){super(e),this.orderDetailsService=e,this.orderHistoryFacade=n,this.routing=i,this.globalMessageService=p,this.amendType=ai.CANCEL}getEntries(){return this.getOrder().pipe(W(e=>!!e?.entries),x(e=>e.entries?.filter(n=>n.entryNumber!==-1&&n.cancellableQuantity&&n.cancellableQuantity>0)??[]))}save(){let e=this.form.value.orderCode,n=this.form.value.entries,i=Object.keys(n).filter(p=>n[p]>0).map(p=>({orderEntryNumber:Number(p),quantity:n[p]}));this.form.reset(),this.orderHistoryFacade.cancelOrder(e,{cancellationRequestEntryInputs:i}),this.orderHistoryFacade.getCancelOrderSuccess().pipe(un(Boolean)).subscribe(()=>this.afterSave(e))}afterSave(e){this.orderHistoryFacade.resetCancelOrderProcessState(),this.globalMessageService.add({key:"orderDetails.cancellationAndReturn.cancelSuccess",params:{orderCode:e}},fe.MSG_TYPE_CONFIRMATION),this.routing.go({cxRoute:"orders"})}static{this.\u0275fac=function(n){return new(n||t)(v(me),v(Ue),v(Ce),v(be))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Ym=(()=>{class t{constructor(e,n,i){this.orderAmendService=e,this.semanticPathService=n,this.router=i}canActivate(){return this.orderAmendService.getForm().pipe(x(e=>e.valid?!0:this.router.parseUrl(this.semanticPathService.get("orders")??"")))}static{this.\u0275fac=function(n){return new(n||t)(v(Hr),v(hn),v(vn))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),zm=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=P({providers:[ee({cmsComponents:{CancelOrderConfirmationComponent:{component:Qm,guards:[re,Ym],providers:[{provide:Le,useExisting:Hr}]}}})],imports:[ie,st,ci,oi]})}}return t})(),Zm=(()=>{class t{constructor(e){this.orderAmendService=e,this.globalMessageType=fe,this.form$=this.orderAmendService.getForm().pipe(H(n=>this.orderCode=n.value.orderCode)),this.entries$=this.orderAmendService.getEntries()}static{this.\u0275fac=function(n){return new(n||t)(E(Le))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-cancel-order"]],standalone:!1,decls:2,vars:3,consts:[["actions",""],[4,"ngIf"],["role","alert",3,"text","isVisibleCloseButton","type",4,"ngIf"],[4,"ngTemplateOutlet"],[3,"entries",4,"ngIf"],[3,"control",4,"cxFeature"],["role","alert",3,"text","isVisibleCloseButton","type"],[3,"entries"],[3,"control"],["backRoute","orderDetails","forwardRoute","orderCancelConfirmation",3,"orderCode","amendOrderForm",4,"ngIf"],["backRoute","orderDetails","forwardRoute","orderCancelConfirmation",3,"orderCode","amendOrderForm"]],template:function(n,i){n&1&&(g(0,Ed,9,7,"ng-container",1),a(1,"async")),n&2&&l("ngIf",d(1,1,i.form$))},dependencies:[M,ot,si,ri,Fn,yi,ze,j,B],encapsulation:2,changeDetection:0})}}return t})(),Km=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=P({providers:[ee({cmsComponents:{CancelOrderComponent:{component:Zm,guards:[re],providers:[{provide:Le,useExisting:Hr}]}}})],imports:[ie,ce,ci,oi,jt,Ii,Ze]})}}return t})(),Wm=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=P({imports:[Km,zm]})}}return t})(),qr=(()=>{class t extends Le{constructor(e,n,i,p){super(e),this.orderDetailsService=e,this.returnRequestService=n,this.routing=i,this.globalMessageService=p,this.amendType=ai.RETURN}getEntries(){return this.getOrder().pipe(W(e=>!!e.entries),x(e=>e.entries?.filter(n=>n.entryNumber!==-1&&n.returnableQuantity&&n.returnableQuantity>0)??[]))}save(){let e=this.form.value.orderCode,n=this.form.value.entries,i=Object.keys(n).filter(p=>n[p]>0).map(p=>({orderEntryNumber:Number(p),quantity:n[p]}));this.form.reset(),this.returnRequestService.createOrderReturnRequest({orderCode:e,returnRequestEntryInputs:i}),this.returnRequestService.getReturnRequestSuccess().pipe(un(Boolean)).subscribe(()=>this.afterSave())}afterSave(){this.returnRequestService.getOrderReturnRequest().pipe(un(e=>!!e)).subscribe(e=>{let n=e.rma;this.globalMessageService.add({key:"orderDetails.cancellationAndReturn.returnSuccess",params:{rma:n}},fe.MSG_TYPE_CONFIRMATION),this.routing.go({cxRoute:"returnRequestDetails",params:{rma:n}})})}static{this.\u0275fac=function(n){return new(n||t)(v(me),v(bt),v(Ce),v(be))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Jm=(()=>{class t{constructor(e,n,i){this.orderAmendService=e,this.semanticPathService=n,this.router=i}canActivate(){return this.orderAmendService.getForm().pipe(x(e=>e.valid?!0:this.router.parseUrl(this.semanticPathService.get("orders")??"")))}static{this.\u0275fac=function(n){return new(n||t)(v(qr),v(hn),v(vn))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Xm=(()=>{class t{constructor(e){this.orderAmendService=e,this.form$=this.orderAmendService.getForm().pipe(H(n=>this.orderCode=n.value.orderCode)),this.entries$=this.orderAmendService.getAmendedEntries()}submit(e){e.disable(),this.orderAmendService.save()}static{this.\u0275fac=function(n){return new(n||t)(E(Le))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-return-order-confirmation"]],standalone:!1,decls:2,vars:3,consts:[["actions",""],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"ngSubmit","formGroup"],[4,"ngTemplateOutlet"],[3,"entries","isConfirmation",4,"ngIf"],[3,"entries","isConfirmation"],["backRoute","orderReturn",3,"orderCode","amendOrderForm",4,"ngIf"],["backRoute","orderReturn",3,"orderCode","amendOrderForm"]],template:function(n,i){n&1&&(g(0,Ad,7,6,"form",1),a(1,"async")),n&2&&l("ngIf",d(1,1,i.form$))},dependencies:[M,ot,si,Dn,Tn,bn,ri,j],encapsulation:2,changeDetection:0})}}return t})(),eu=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=P({providers:[ee({cmsComponents:{ReturnOrderConfirmationComponent:{component:Xm,guards:[re,Jm],providers:[{provide:Le,useExisting:qr}]}}})],imports:[ie,ci,ce,st,oi]})}}return t})(),tu=(()=>{class t{constructor(e){this.orderAmendService=e,this.form$=this.orderAmendService.getForm().pipe(H(n=>this.orderCode=n.value.orderCode)),this.entries$=this.orderAmendService.getEntries()}static{this.\u0275fac=function(n){return new(n||t)(E(Le))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-return-order"]],standalone:!1,decls:2,vars:3,consts:[["actions",""],[4,"ngIf"],[4,"ngTemplateOutlet"],[3,"entries",4,"ngIf"],[3,"control"],[3,"entries"],["backRoute","orderDetails","forwardRoute","orderReturnConfirmation",3,"orderCode","amendOrderForm",4,"ngIf"],["backRoute","orderDetails","forwardRoute","orderReturnConfirmation",3,"orderCode","amendOrderForm"]],template:function(n,i){n&1&&(g(0,Bd,8,6,"ng-container",1),a(1,"async")),n&2&&l("ngIf",d(1,1,i.form$))},dependencies:[M,ot,si,ri,Fn,j],encapsulation:2,changeDetection:0})}}return t})(),nu=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=P({providers:[ee({cmsComponents:{ReturnOrderComponent:{component:tu,guards:[re],providers:[{provide:Le,useExisting:qr}]}}})],imports:[ie,ci,oi,jt]})}}return t})(),iu=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=P({imports:[nu,eu]})}}return t})(),Be=(()=>{class t{constructor(e,n,i){this.orderFacade=e,this.router=n,this.semanticPathService=i}canActivate(){return this.orderFacade.getOrderDetails().pipe(x(e=>e&&Object.keys(e).length!==0?!0:this.router.parseUrl(this.semanticPathService.get("orders")??"")))}static{this.\u0275fac=function(n){return new(n||t)(v(_e),v(vn),v(hn))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),ru=(()=>{class t{constructor(){this.service=R(Xn),this.PAGE_SIZE=3,this.orders$=this.service.getOrderHistoryList(this.PAGE_SIZE).pipe(H(()=>this.isLoaded$.next(!0))),this.isLoaded$=new Pe(!1)}getProduct(e){if(e.entries){for(let n of e.entries)if(n.product&&n.product.name&&n.product.images)return n.product;return e.entries[0].product}}ngOnDestroy(){this.isLoaded$.next(!1),this.service.clearOrderList()}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=w({type:t,selectors:[["cx-my-account-v2-orders"]],standalone:!1,decls:17,vars:20,consts:[["noOrder",""],["loading",""],[1,"cx-my-account-view-header"],["role","heading","aria-level","4",1,"cx-my-account-view-heading"],[1,"cx-my-account-view-show-more"],["id","show-more-orders",1,"btn-link","cx-action-link",3,"routerLink"],[4,"ngIf","ngIfElse"],[1,"cx-my-account-view-body"],[4,"ngFor","ngForOf"],[1,"cx-my-account-view-order"],[1,"cx-my-account-view-order-header"],["class","cx-my-account-view-status",4,"ngIf"],[1,"cx-my-account-view-code"],[1,"cx-my-account-view-order-body"],[4,"ngIf"],[1,"cx-my-account-view-status"],[1,"cx-my-account-view-order-column-1"],[1,"cx-my-account-view-order-column-1-image"],["format","thumbnail","role","presentation",1,"cx-my-account-view-order-img",3,"container"],[1,"cx-my-account-view-order-column-1-details"],[1,"cx-my-account-view-order-column-1-details-top"],[1,"cx-my-account-view-product-name"],[1,"cx-my-account-view-purchased-on"],[1,"cx-my-account-view-item-count"],[1,"cx-my-account-view-order-column-1-details-bottom"],[1,"cx-my-account-view-total-price"],[1,"cx-my-account-view-order-column-2"],[1,"btn-link","cx-action-link",3,"routerLink"],["class","cx-my-account-no-order",4,"ngIf","ngIfElse"],[1,"cx-my-account-no-order"],["routerLinkActive","active",1,"cx-no-order",3,"routerLink"],[1,"cx-spinner"]],template:function(n,i){if(n&1&&(s(0,"div",2)(1,"div",3),a(2,"cxTranslate"),u(3),a(4,"cxTranslate"),c(),s(5,"div",4)(6,"a",5),a(7,"cxUrl"),a(8,"cxTranslate"),u(9),a(10,"cxTranslate"),c()()(),g(11,Gd,2,2,"div",6),a(12,"async"),g(13,Yd,2,4,"ng-template",null,0,q)(15,zd,2,0,"ng-template",null,1,q)),n&2){let p=L(14);r(),k("aria-label",d(2,7,"myAccountV2OrderHistory.orderListResults")),r(2),_(" ",d(4,9,"myAccountV2Orders.heading")," "),r(3),l("routerLink",d(7,11,X(19,Vr))),k("aria-label",d(8,13,"myAccountV2Orders.showMoreLabel")),r(3),_(" ",d(10,15,"myAccountV2Orders.showMore")," "),r(2),l("ngIf",d(12,17,i.orders$))("ngIfElse",p)}},dependencies:[de,M,he,$t,pt,qt,j,Oe,B,ge],encapsulation:2})}}return t})(),ou=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=P({providers:[ee({cmsComponents:{MyAccountViewOrderComponent:{component:ru,guards:[re]}}})],imports:[ie,$e,hi,We,Ae,ce,mt]})}}return t})(),as=(()=>{class t{constructor(e,n){this.orderDetailsService=e,this.translationService=n,this.order$=this.orderDetailsService.getOrderDetails()}getPaymentMethodCard(e){return K([this.translationService.translate("paymentForm.payment"),this.translationService.translate("paymentCard.expires",{month:e.expiryMonth,year:e.expiryYear})]).pipe(x(([n,i])=>Fi(n,i,e)))}getBillingAddressCard(e){return K([this.translationService.translate("paymentForm.billingAddress"),this.translationService.translate("addressCard.billTo")]).pipe(x(([n,i])=>ra(n,i,e)))}isPaymentInfoCardFull(e){return!!e?.cardNumber&&!!e?.expiryMonth&&!!e?.expiryYear}static{this.\u0275fac=function(n){return new(n||t)(E(me),E(ye))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-order-detail-billing"]],standalone:!1,decls:2,vars:3,consts:[["class","cx-order-items",4,"ngIf"],[1,"cx-order-items"],["class","cx-review-summary",4,"ngIf"],[1,"cx-review-summary"],["class","cx-review-summary-card cx-review-summary-payment-card",4,"ngIf"],[1,"cx-review-summary-card","cx-review-summary-payment-card"],[3,"content"]],template:function(n,i){n&1&&(g(0,Jd,2,1,"div",0),a(1,"async")),n&2&&l("ngIf",d(1,1,i.order$))},dependencies:[wn,M,j],encapsulation:2,changeDetection:0})}}return t})(),ss=(()=>{class t{shouldShowDeliveryMode(e){return e!==void 0}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),ln=(()=>{class t{constructor(e,n,i){this.translation=e,this.orderDetailsService=n,this.component=i,this.orderOverviewComponentService=R(ss),this.orderConfig=R(zt),this.cartOutlets=Je,this.orderOutlets=gt,this.order$=this.orderDetailsService.getOrderDetails(),this.isOrderLoading$=typeof this.orderDetailsService.isOrderDetailsLoading=="function"?this.orderDetailsService.isOrderDetailsLoading():Y(!1),this.simple$=this.component.data$.pipe(x(p=>p.simple))}getReplenishmentCodeCardContent(e){return this.translation.translate("orderDetails.replenishmentId").pipe(W(()=>!!e),x(n=>({title:n,text:[e]})))}getReplenishmentActiveCardContent(e){return K([this.translation.translate("orderDetails.status"),this.translation.translate("orderDetails.active"),this.translation.translate("orderDetails.cancelled")]).pipe(x(([n,i,p])=>({title:n,text:[e?i:p]})))}getReplenishmentStartOnCardContent(e){return this.translation.translate("orderDetails.startOn").pipe(W(()=>!!e),x(n=>({title:n,text:[e]})))}getReplenishmentFrequencyCardContent(e){return this.translation.translate("orderDetails.frequency").pipe(W(()=>!!e),x(n=>({title:n,text:[e]})))}getReplenishmentNextDateCardContent(e){return this.translation.translate("orderDetails.nextOrderDate").pipe(W(()=>!!e),x(n=>({title:n,text:[e]})))}getOrderCodeCardContent(e){return this.translation.translate("orderDetails.orderNumber").pipe(W(()=>!!e),x(n=>({title:n,text:[e]})))}getOrderCurrentDateCardContent(e){return this.translation.translate("orderDetails.placedOn").pipe(W(()=>!!e),x(n=>({title:n,text:[e]})))}getOrderStatusCardContent(e){return K([this.translation.translate("orderDetails.status"),this.translation.translate("orderDetails.statusDisplay_"+e)]).pipe(x(([n,i])=>({title:n,text:[i]})))}getPurchaseOrderNumber(e){return K([this.translation.translate("orderDetails.purchaseOrderNumber"),this.translation.translate("orderDetails.emptyPurchaseOrderId")]).pipe(x(([n,i])=>({title:n,text:[e||i]})))}getMethodOfPaymentCardContent(e){return K([this.translation.translate("orderDetails.methodOfPayment"),this.translation.translate("paymentTypes.paymentType_ACCOUNT"),this.translation.translate("paymentTypes.paymentType_CARD")]).pipe(x(([n,i,p])=>({title:n,text:[e?p:i]})))}getCostCenterCardContent(e){return this.translation.translate("orderDetails.costCenter").pipe(W(()=>!!e),x(n=>({title:n,textBold:e?.name,text:["("+e?.unit?.name+")"]})))}getAddressCardContent(e){return this.translation.translate("addressCard.shipTo").pipe(W(()=>!!e),x(n=>{let i=this.normalizeFormattedAddress(e.formattedAddress??"");return{title:n,textBold:`${e.firstName} ${e.lastName}`,text:[i,e.country?.name]}}))}shouldShowDeliveryMode(e){return this.orderOverviewComponentService.shouldShowDeliveryMode(e)}getDeliveryModeCardContent(e){return this.translation.translate("orderDetails.shippingMethod").pipe(W(()=>!!e),x(n=>({title:n,textBold:e.name,text:[e.description,e.deliveryCost?.formattedValue?e.deliveryCost?.formattedValue:""]})))}getPaymentInfoCardContent(e){return K([this.translation.translate("paymentForm.payment"),this.translation.translate("paymentCard.expires",{month:e?e.expiryMonth:"",year:e?e.expiryYear:""})]).pipe(W(()=>!!e),x(([n,i])=>Fi(n,i,e)))}isPaymentInfoCardFull(e){return!!e?.cardNumber&&!!e?.expiryMonth&&!!e?.expiryYear}getBillingAddressCardContent(e){return this.translation.translate("paymentForm.billingAddress").pipe(W(()=>!!e),x(n=>({title:n,textBold:`${e.firstName} ${e.lastName}`,text:[e.formattedAddress,e.country?.name]})))}normalizeFormattedAddress(e){return e.split(",").map(i=>i.trim()).filter(Boolean).join(", ")}static{this.\u0275fac=function(n){return new(n||t)(E(ye),E(me),E(Oi))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-order-overview"]],standalone:!1,decls:4,vars:3,consts:[["showQuoteCode",""],["otherOrder",""],["class","cx-order-summary",4,"ngIf"],[1,"cx-order-summary"],[4,"ngIf"],["class","container",4,"ngIf"],[1,"container"],[4,"ngIf","ngIfElse"],[1,"cx-summary-card"],[3,"cxOutlet","cxOutletContext"],[3,"content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","cx-summary-card",4,"ngIf"],[1,"cx-order-details-cards"],["id","quote-container","class","card-body cx-card-body",4,"ngIf"],["id","quote-container",1,"card-body","cx-card-body"],[1,"cx-card-title"],[1,"cx-card-actions",3,"routerLink"]],template:function(n,i){n&1&&(g(0,yl,3,3,"div",2),a(1,"async"),g(2,Il,1,1,"ng-template",null,0,q)),n&2&&l("ngIf",d(1,1,i.order$))},dependencies:[wn,M,ot,he,Ke,as,j,B,ge,Oe],encapsulation:2,changeDetection:0})}}return t})(),au=(()=>{class t{constructor(e){this.orderFacade=e,this.type=Ri.ORDER_CONFIRMATION}getEntries(){return this.orderFacade.getOrderDetails().pipe(x(e=>e?.entries??[]))}static{this.\u0275fac=function(n){return new(n||t)(v(_e))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Ja=(()=>{class t{constructor(e){this.orderFacade=e,this.cartOutlets=Je,this.abstractOrderType=Gt,this.promotionLocation=Vn.Checkout,this.order$=this.orderFacade.getOrderDetails()}ngOnDestroy(){this.orderFacade.clearPlacedOrder()}static{this.\u0275fac=function(n){return new(n||t)(E(_e))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-order-confirmation-items"]],standalone:!1,decls:2,vars:3,consts:[["class","cx-order-items container",4,"ngIf"],[1,"cx-order-items","container"],[1,"cx-order-items-header"],[3,"promotions"],[3,"cxAbstractOrderContext","cxOutlet","cxOutletContext"]],template:function(n,i){n&1&&(g(0,Sl,6,14,"div",0),a(1,"async")),n&2&&l("ngIf",d(1,1,i.order$))},dependencies:[M,Ei,Ke,Qt,j,B],encapsulation:2,changeDetection:0})}}return t})(),Xa=(()=>{class t{constructor(e,n,i,p){this.orderFacade=e,this.translationService=n,this.cd=i,this.outlet=p,this.showItemList=!0,this.cartOutlets=Je,this.abstractOrderType=Gt,this.order$=this.orderFacade.getOrderDetails().pipe(H(f=>{this.entries=f?.entries?.filter(C=>!C.deliveryPointOfService)})),this.subscription=new Me}ngOnInit(){this.subscription.add(this.outlet?.context$.subscribe(e=>{e.showItemList!==void 0&&(this.showItemList=e.showItemList),e.order&&(this.order$=Y(e.order)),this.cd.markForCheck()}))}getDeliveryAddressCard(e,n){return K([this.translationService.translate("addressCard.shipTo"),this.translationService.translate("addressCard.phoneNumber"),this.translationService.translate("addressCard.mobileNumber")]).pipe(x(([i,p,f])=>na(i,p,f,e,n)))}getDeliveryModeCard(e){return K([this.translationService.translate("checkoutMode.deliveryMethod")]).pipe(x(([n])=>ia(n,e)))}ngOnDestroy(){this.subscription?.unsubscribe()}static{this.\u0275fac=function(n){return new(n||t)(E(_e),E(ye),E(Nt),E(Ln,8))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-order-confirmation-shipping"]],inputs:{showItemList:"showItemList"},standalone:!1,decls:2,vars:3,consts:[["class","cx-order-items",4,"ngIf"],[1,"cx-order-items"],[4,"ngIf"],[1,"cx-review-header"],[1,"cx-review-summary","cx-review-shipping-summary"],[1,"cx-review-summary-card-container"],[1,"cx-review-summary-card","cx-review-card-address"],[3,"content"],["class","cx-review-cart-item",4,"ngIf"],[1,"cx-review-cart-item"],[3,"cxAbstractOrderContext","cxOutlet","cxOutletContext"]],template:function(n,i){n&1&&(g(0,Ll,2,1,"div",0),a(1,"async")),n&2&&l("ngIf",d(1,1,i.order$))},dependencies:[M,wn,Ke,Qt,j,B],encapsulation:2,changeDetection:0})}}return t})(),su=(()=>{class t{constructor(e,n,i,p){this.userRegisterFacade=e,this.routingService=n,this.authService=i,this.fb=p,this.featureConfigService=R(yo),this.passwordValidators=this.featureConfigService?.isEnabled("formErrorsDescriptiveMessages")?this.featureConfigService.isEnabled("enableSecurePasswordValidation")?Ve.securePasswordValidators:this.featureConfigService.isEnabled("enableConsecutiveCharactersPasswordRequirement")?[...Ve.passwordValidators,Ve.noConsecutiveCharacters]:Ve.passwordValidators:[this.featureConfigService.isEnabled("enableSecurePasswordValidation")?Ve.securePasswordValidator:this.featureConfigService.isEnabled("enableConsecutiveCharactersPasswordRequirement")?Ve.strongPasswordValidator:Ve.passwordValidator],this.guestRegisterForm=this.fb.group({password:["",[Ht.required,...this.passwordValidators]],passwordconf:["",Ht.required]},{validators:Ve.passwordsMustMatch("password","passwordconf")}),Rn("a11yPasswordVisibliltyBtnValueOverflow")}submit(){this.guestRegisterForm.valid?(this.userRegisterFacade.registerGuest(this.guid,this.guestRegisterForm.value.password),this.subscription||(this.subscription=this.authService.isUserLoggedIn().subscribe(e=>{e&&this.routingService.go({cxRoute:"home"})}))):this.guestRegisterForm.markAllAsTouched()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||t)(E(Go),E(Ce),E(fo),E(bo))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-guest-register-form"]],inputs:{guid:"guid",email:"email"},standalone:!1,decls:35,vars:39,consts:[[1,"register-guest"],[1,"col-md-6","col-lg-4"],[3,"ngSubmit","formGroup"],[1,"form-group"],[1,"label-content"],["required","true","type","password","name","password","formControlName","password","cxPasswordVisibilitySwitch","",1,"form-control",3,"placeholder"],["id","passwordError",3,"translationParams","control",4,"cxFeature"],[3,"control",4,"cxFeature"],["required","true","type","password","name","passwordconf","formControlName","passwordconf","cxPasswordVisibilitySwitch","",1,"form-control",3,"placeholder"],["id","passwordconfError",3,"translationParams","control",4,"cxFeature"],["type","submit",1,"btn","btn-block","btn-primary"],["id","passwordError",3,"translationParams","control"],[3,"control"],["id","passwordconfError",3,"translationParams","control"]],template:function(n,i){if(n&1&&(s(0,"div",0)(1,"div",1)(2,"h3"),u(3),a(4,"cxTranslate"),c(),s(5,"p"),u(6),a(7,"cxTranslate"),c(),s(8,"form",2),T("ngSubmit",function(){return i.submit()}),h(9,"cx-form-required-legend"),s(10,"div",3)(11,"label")(12,"span",4),u(13),a(14,"cxTranslate"),h(15,"cx-form-required-asterisks"),c(),h(16,"input",5),a(17,"cxTranslate"),a(18,"cxTranslate"),g(19,Ml,2,6,"cx-form-errors",6)(20,Fl,1,1,"cx-form-errors",7),c()(),s(21,"div",3)(22,"label")(23,"span",4),u(24),a(25,"cxTranslate"),h(26,"cx-form-required-asterisks"),c(),h(27,"input",8),a(28,"cxTranslate"),a(29,"cxTranslate"),g(30,kl,2,6,"cx-form-errors",9)(31,Bl,1,1,"cx-form-errors",7),c()(),s(32,"button",10),u(33),a(34,"cxTranslate"),c()()()()),n&2){let p,f;r(3),J(d(4,18,"checkoutOrderConfirmation.createAccount")),r(3),_(" ",V(7,20,"checkoutOrderConfirmation.createAccountForNext",S(37,wl,i.email))," "),r(2),l("formGroup",i.guestRegisterForm),r(5),_(" ",d(14,23,"register.password.label")," "),r(3),se("placeholder",d(17,25,"register.password.placeholder")),k("aria-label",d(18,27,"register.password.placeholder"))("aria-invalid",((p=i.guestRegisterForm.get("password"))==null?null:p.touched)&&((p=i.guestRegisterForm.get("password"))==null?null:p.invalid))("aria-errormessage","passwordError"),r(3),l("cxFeature","formErrorsDescriptiveMessages"),r(),l("cxFeature","!formErrorsDescriptiveMessages"),r(4),_(" ",d(25,29,"register.confirmPassword.label")," "),r(3),se("placeholder",d(28,31,"register.confirmPassword.placeholder")),k("aria-label",d(29,33,"register.confirmPassword.placeholder"))("aria-invalid",((f=i.guestRegisterForm.get("passwordconf"))==null?null:f.touched)&&((f=i.guestRegisterForm.get("passwordconf"))==null?null:f.invalid))("aria-errormessage","passwordconfError"),r(3),l("cxFeature","formErrorsDescriptiveMessages"),r(),l("cxFeature","!formErrorsDescriptiveMessages"),r(2),_(" ",d(34,35,"common.submit")," ")}},dependencies:[Dn,Ro,So,Tn,Do,bn,To,Fn,No,ze,kn,Bn,B],encapsulation:2})}}return t})(),es=(()=>{class t{constructor(e,n,i){this.orderFacade=e,this.globalMessageService=n,this.translationService=i,this.isGuestCustomer=!1}ngOnInit(){this.order$=this.orderFacade.getOrderDetails().pipe(H(e=>{this.isGuestCustomer=e&&"guestCustomer"in e?e.guestCustomer??!1:!1,this.orderGuid=e?.guid}))}ngAfterViewInit(){this.addThankYouMessage()}ngOnDestroy(){this.orderFacade.clearPlacedOrder()}addThankYouMessage(){this.getThankYouAssistiveMessage().pipe(ne(1)).subscribe(([e,n,i,p])=>{let f=e.replenishmentOrderCode??e.code,C=`${n} ${f}. ${i} ${p}`;this.globalMessageService.add(C,fe.MSG_TYPE_ASSISTIVE)})}getThankYouAssistiveMessage(){let e=this.translationService.translate("checkoutOrderConfirmation.confirmationOfOrder"),n=this.translationService.translate("checkoutOrderConfirmation.thankYou"),i=this.translationService.translate("checkoutOrderConfirmation.invoiceHasBeenSentByEmail");return this.order$.pipe(W(p=>!!p),_n(e,n,i))}static{this.\u0275fac=function(n){return new(n||t)(E(_e),E(be),E(ye))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-order-confirmation-thank-you-message"]],standalone:!1,decls:2,vars:3,consts:[[4,"ngIf"],[1,"cx-page-header"],[1,"cx-page-title"],[1,"cx-order-confirmation-message"],[3,"guid","email"]],template:function(n,i){n&1&&(g(0,Nl,14,11,"ng-container",0),a(1,"async")),n&2&&l("ngIf",d(1,1,i.order$))},dependencies:[M,ko,su,j,B],encapsulation:2,changeDetection:0})}}return t})(),ts=(()=>{class t{constructor(e){this.orderFacade=e,this.cartOutlets=Je,this.order$=this.orderFacade.getOrderDetails(),Rn("a11yWideScreenImprovements")}ngOnDestroy(){this.orderFacade.clearPlacedOrder()}static{this.\u0275fac=function(n){return new(n||t)(E(_e))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-order-confirmation-totals"]],standalone:!1,decls:2,vars:3,consts:[["class","cx-order-summary container",4,"ngIf"],[1,"cx-order-summary","container"],[1,"row","justify-content-end"],[1,"col-sm-12","col-md-6","col-lg-5","col-xl-4"],[3,"cxOutlet","cxOutletContext"]],template:function(n,i){n&1&&(g(0,Vl,4,2,"div",0),a(1,"async")),n&2&&l("ngIf",d(1,1,i.order$))},dependencies:[M,Ke,j],encapsulation:2,changeDetection:0})}}return t})();var cu=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=P({providers:[ee({cmsComponents:{OrderConfirmationThankMessageComponent:{component:es,guards:[Be]},ReplenishmentConfirmationMessageComponent:{component:es,guards:[Be]},OrderConfirmationItemsComponent:{component:Ja,guards:[Be]},ReplenishmentConfirmationItemsComponent:{component:Ja,guards:[Be]},OrderConfirmationTotalsComponent:{component:ts,guards:[Be]},ReplenishmentConfirmationTotalsComponent:{component:ts,guards:[Be]},OrderConfirmationOverviewComponent:{component:ln,providers:[{provide:me,useExisting:_e}],guards:[Be]},ReplenishmentConfirmationOverviewComponent:{component:ln,providers:[{provide:me,useExisting:_e}],guards:[Be]},OrderConfirmationShippingComponent:{component:Xa,guards:[Be]},OrderConfirmationBillingComponent:{component:as,providers:[{provide:me,useExisting:_e}],guards:[Be]}}}),{provide:Wo,useExisting:au},Fo({id:gt.CONSIGNMENT_DELIVERY_INFO,component:Xa})],imports:[ie,Mn,Bo,Pn,ce,st,jt,Ci.forChild(),$o,Ti,Ze,kn,Bn]})}}return t})(),cs=(()=>{class t{constructor(e){this.orderDetailsService=e,this.order$=this.orderDetailsService.getOrderDetails()}static{this.\u0275fac=function(n){return new(n||t)(E(me))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-order-details-actions"]],standalone:!1,decls:2,vars:3,consts:[[4,"ngIf"],[1,"cx-nav","row"],[1,"col-xs-12","col-md-4","col-lg-3"],[1,"btn","btn-block","btn-secondary",3,"routerLink"],["cxBtnLikeLink","","class","btn btn-block btn-secondary",3,"routerLink",4,"ngIf"],["cxBtnLikeLink","",1,"btn","btn-block","btn-secondary",3,"routerLink"]],template:function(n,i){n&1&&(g(0,ql,10,9,"ng-container",0),a(1,"async")),n&2&&l("ngIf",d(1,1,i.order$))},dependencies:[M,he,St,j,B,Oe],encapsulation:2})}}return t})(),du=(()=>{class t extends cs{constructor(){super(...arguments),this.eventService=R(Ot)}ngOnInit(){this.order$.subscribe(e=>{this.order=e})}showDialog(e){let n=new Ai;n.order=e,this.eventService.dispatch(n)}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=gn(t)))(i||t)}})()}static{this.\u0275cmp=w({type:t,selectors:[["cx-my-account-v2-order-details-actions"]],standalone:!1,features:[fn],decls:1,vars:1,consts:[[4,"ngIf"],[1,"cx-order-details-actions","row"],[1,"cx-view-all-orders"],[1,"col-xs-12","col-md-4","col-lg-3"],[1,"cx-action-button-left"],["id","view-all-orders-btn",1,"btn","btn-block","btn-secondary",3,"routerLink"],[1,"cx-other-actions"],["class","cx-action-button",4,"ngIf"],[1,"cx-action-button"],["id","download-invoices-btn",1,"btn","btn-block","btn-secondary",3,"click"],["id","cancel-items-btn",1,"btn","btn-block","btn-secondary",3,"routerLink"],["id","return-items-btn",1,"btn","btn-block","btn-secondary",3,"routerLink"]],template:function(n,i){n&1&&g(0,Ql,17,12,"ng-container",0),n&2&&l("ngIf",i.order)},dependencies:[M,he,B,Oe],encapsulation:2})}}return t})(),lu=(()=>{class t{constructor(){this.OrderOutlets=gt,this.invoiceCount=void 0,this.iconTypes=dt,this.focusConfig={trap:!0,block:!0,autofocus:!0,focusOnEscape:!0},this.launchDialogService=R(xe),this.cdr=R(Nt)}ngAfterViewChecked(){this.cdr.detectChanges(),this.invoiceComponent&&this.invoiceComponent.pagination!==void 0&&(this.invoiceCount=this.invoiceComponent.pagination.totalResults)}close(e,n){this.launchDialogService.closeDialog(e)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=w({type:t,selectors:[["cx-my-account-v2-download-invoices"]],viewQuery:function(n,i){if(n&1&&nt(dn,5),n&2){let p;it(p=rt())&&(i.invoiceComponent=p.first)}},standalone:!1,decls:15,vars:13,consts:[["role","dialog","aria-describedby","downloadInvoicesContent",1,"cx-modal-container",3,"esc","cxFocus"],["id","downloadInvoicesContent",1,"cx-modal-content"],[1,"cx-dialog-header","modal-header"],["id","downloadInvoicesTitle","aria-labelledby","downloadInvoicesTitle","tabindex","-1",1,"cx-dialog-title","modal-title"],["type","button","aria-controls","downloadInvoicesContent",1,"close",3,"click","title"],["aria-hidden","true"],[3,"type"],[1,"cx-dialog-body","modal-body"],["id","noInvoice","role","alert",4,"ngIf"],["class","cx-spinner","aria-live","polite","role","alert",4,"ngIf"],["id","noInvoice","role","alert"],["aria-live","polite","role","alert",1,"cx-spinner"]],template:function(n,i){n&1&&(s(0,"div",0),T("esc",function(){return i.close("Escape clicked")}),s(1,"div",1)(2,"div",2)(3,"div",3),u(4),a(5,"cxTranslate"),c(),s(6,"button",4),a(7,"cxTranslate"),a(8,"cxTranslate"),T("click",function(){return i.close("Close download invoices dialog")}),s(9,"span",5),h(10,"cx-icon",6),c()()(),s(11,"div",7),h(12,"cx-invoices-list"),g(13,Yl,3,3,"div",8)(14,zl,2,0,"div",9),c()()()),n&2&&(l("cxFocus",i.focusConfig),r(4),_(" ",d(5,7,"myAccountV2OrderDetails.downloadInvoices")," "),r(2),se("title",d(7,9,"addToCart.closeModal")),k("aria-label",d(8,11,"addToCart.closeModal")),r(4),l("type",i.iconTypes.CLOSE),r(3),l("ngIf",i.invoiceCount===0),r(),l("ngIf",i.invoiceCount===void 0))},dependencies:[M,It,lt,pt,dn,B],encapsulation:2,changeDetection:0})}}return t})(),pu={launch:{DOWNLOAD_ORDER_INVOICES:{inlineRoot:!0,component:lu,dialogType:Et.DIALOG}}},mu=(()=>{class t{constructor(){this.subscription=new Me,this.eventService=R(Ot),this.launchDialogService=R(xe),this.onDownloadInvoices()}onDownloadInvoices(){this.subscription.add(this.eventService.get(Ai).subscribe(e=>{this.openDialog(e)}))}openDialog(e){let n=this.launchDialogService.openDialog(ct.DOWNLOAD_ORDER_INVOICES,void 0,void 0,e.order);n&&n.pipe(ne(1)).subscribe()}ngOnDestroy(){this.subscription?.unsubscribe()}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),uu=(()=>{class t{constructor(){this.downloadInvoicesDialogEventListener=R(mu)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=P({providers:[ee(pu)],imports:[ie,An,Rt,ce,qo,Ho,We,Ka]})}}return t})(),_u=["DELIVERY_COMPLETED","PICKUP_COMPLETE"],gu=["CANCELLED"],ds=(()=>{class t{getGroupedConsignments(e,n){let i=n?e.consignments?.filter(p=>p.deliveryPointOfService!==void 0):e.consignments?.filter(p=>p.deliveryPointOfService===void 0);return this.groupConsignments(i)}getUnconsignedEntries(e,n){return e.replenishmentOrderCode?[]:n?e.unconsignedEntries?.filter(i=>i.deliveryPointOfService!==void 0):e.unconsignedEntries?.filter(i=>i.deliveryPointOfService===void 0)}groupConsignments(e){let n=e?.reduce((i,p)=>{let f=this.getStatusGroupKey(p.status||"");return i[f]=i[f]||[],i[f].push(p),i},{});return n?[...n[1]||[],...n[0]||[],...n[-1]||[]]:void 0}getStatusGroupKey(e){return _u.includes(e)?0:gu.includes(e)?-1:1}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),ls=(()=>{class t{constructor(e,n,i){this.orderHistoryFacade=e,this.launchDialogService=n,this.vcr=i,this.consignmentStatus=["SHIPPED","IN_TRANSIT","DELIVERY_COMPLETED","DELIVERY_REJECTED","DELIVERING"]}ngOnInit(){this.consignmentTracking$=this.orderHistoryFacade.getConsignmentTracking()}openTrackingDialog(e){e.code&&this.orderHistoryFacade.loadConsignmentTracking(this.orderCode,e.code);let n={tracking$:this.consignmentTracking$,shipDate:e.statusDate},i=this.launchDialogService.openDialog(ct.CONSIGNMENT_TRACKING,this.element,this.vcr,n);i&&i.pipe(ne(1)).subscribe()}ngOnDestroy(){this.orderHistoryFacade.clearConsignmentTracking()}static{this.\u0275fac=function(n){return new(n||t)(E(Ue),E(xe),E(tt))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-consignment-tracking"]],viewQuery:function(n,i){if(n&1&&nt(pn,5),n&2){let p;it(p=rt())&&(i.element=p.first)}},inputs:{consignment:"consignment",orderCode:"orderCode"},standalone:!1,decls:1,vars:1,consts:[[4,"ngIf"],["type","button",1,"btn","btn-secondary","btn-track",3,"click"]],template:function(n,i){n&1&&g(0,Kl,2,1,"ng-container",0),n&2&&l("ngIf",i.consignment&&i.consignment.status)},dependencies:[M,B],encapsulation:2,changeDetection:0})}}return t})(),fu=(()=>{class t{constructor(){this.promotionLocation=Vn.Order,this.OrderOutlets=gt,this.CartOutlets=Je,this.abstractOrderType=Gt}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=w({type:t,selectors:[["cx-order-consigned-entries"]],inputs:{consignments:"consignments",order:"order",enableAddToCart:"enableAddToCart",buyItAgainTranslation:"buyItAgainTranslation"},standalone:!1,decls:3,vars:1,consts:[["addToCartBtn",""],["class","cx-list row",4,"ngFor","ngForOf"],[1,"cx-list","row"],[3,"cxOutlet","cxOutletContext"],[1,"cx-list-item","col-12"],[3,"cxAbstractOrderContext","cxOutlet","cxOutletContext"],[1,"cx-list-header","col-12"],[1,"cx-list-status"],[4,"ngIf"],["class","cx-list-date",4,"ngIf"],[3,"orderCode","consignment",4,"cxFeature"],[1,"cx-list-date"],[3,"orderCode","consignment"],[1,"add-to-cart",3,"productCode","product","showQuantity","options","pickupStore"]],template:function(n,i){n&1&&g(0,ip,4,19,"div",1)(1,rp,1,5,"ng-template",null,0,q),n&2&&l("ngForOf",i.consignments)},dependencies:[de,M,ze,Ke,Di,Qt,ls,B,ge],encapsulation:2})}}return t})(),$r=(()=>{class t{constructor(e,n){this.orderDetailsService=e,this.component=n,this.orderConsignmentsService=R(ds),this.OrderOutlets=gt,this.CartOutlets=Je,this.abstractOrderType=Gt,this.promotionLocation=Vn.Order,this.order$=this.orderDetailsService.getOrderDetails().pipe(H(i=>{this.pickupConsignments=this.getGroupedConsignments(i,!0),this.deliveryConsignments=this.getGroupedConsignments(i,!1),this.pickupUnconsignedEntries=this.getUnconsignedEntries(i,!0),this.deliveryUnConsignedEntries=this.getUnconsignedEntries(i,!1)})),this.enableAddToCart$=this.component.data$.pipe(x(i=>i.enableAddToCart)),this.isOrderLoading$=typeof this.orderDetailsService.isOrderDetailsLoading=="function"?this.orderDetailsService.isOrderDetailsLoading():Y(!1),this.groupCartItems$=this.component.data$.pipe(x(i=>i.groupCartItems))}getGroupedConsignments(e,n){return this.orderConsignmentsService.getGroupedConsignments(e,n)}getUnconsignedEntries(e,n){return this.orderConsignmentsService.getUnconsignedEntries(e,n)}static{this.\u0275fac=function(n){return new(n||t)(E(me),E(Oi))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-order-details-items"]],standalone:!1,decls:2,vars:3,consts:[["addToCartBtn",""],[4,"ngIf"],["class","cx-pickup-order-consigned-entries-header",4,"ngIf"],[3,"order","consignments","enableAddToCart","buyItAgainTranslation",4,"ngIf"],[3,"promotions"],[1,"cx-pickup-order-consigned-entries-header"],[3,"order","consignments","enableAddToCart","buyItAgainTranslation"],[3,"cxOutlet","cxOutletContext"],["class","cx-list-header",4,"ngIf"],[1,"cx-list-header"],[1,"cx-list-status"],["class","cx-review-header",4,"ngIf"],[1,"cx-list-item"],[3,"cxAbstractOrderContext","cxOutlet","cxOutletContext"],[1,"cx-review-header"],[1,"cx-list"],[1,"add-to-cart",3,"productCode","product","showQuantity","options","pickupStore"]],template:function(n,i){n&1&&(g(0,Ep,5,3,"ng-container",1),a(1,"async")),n&2&&l("ngIf",d(1,1,i.order$))},dependencies:[M,Ei,Ke,Di,Qt,fu,j,B],encapsulation:2})}}return t})(),vu=(()=>{class t{handleClick(e){e.target.tagName===this.el.nativeElement.tagName&&this.close("Cross click")}constructor(e,n,i){this.orderHistoryFacade=e,this.launchDialogService=n,this.el=i,this.subscription=new Me,this.focusConfig={trap:!0,block:!0,autofocus:"button",focusOnEscape:!0}}ngOnInit(){this.subscription.add(this.launchDialogService.data$.subscribe(e=>{e&&this.init(e.tracking$,e.shipDate)}))}ngOnDestroy(){this.orderHistoryFacade.clearConsignmentTracking(),this.subscription?.unsubscribe()}init(e,n){this.tracking$=e,this.shipDate=n}close(e){this.launchDialogService.closeDialog(e)}static{this.\u0275fac=function(n){return new(n||t)(E(Ue),E(xe),E(Pt))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-tracking-events"]],hostBindings:function(n,i){n&1&&T("click",function(f){return i.handleClick(f)})},standalone:!1,decls:8,vars:5,consts:[["noTracking",""],["loading",""],[1,"modal-dialog","modal-dialog-centered","modal-lg","cx-consignment-tracking-dialog",3,"esc","cxFocus"],[1,"modal-content","cx-consignment-tracking-container"],[4,"ngIf","ngIfElse"],[1,"modal-header","cx-modal-header"],[1,"modal-title","cx-consignment-tracking-title"],["type","button",1,"close",3,"click"],["aria-hidden","true"],[1,"cx-tracking-events","modal-body"],[4,"ngFor","ngForOf"],[1,"cx-shipment-heading"],[1,"row"],[1,"col-sm-12","col-md-6"],[1,"cx-shipment-title"],[1,"cx-shipment-content"],[4,"ngIf"],["target","_blank","rel","noopener noreferrer",3,"href"],[1,"cx-tracking-event-body"],[1,"cx-tracking-event-content"],[1,"cx-tracking-event-title"],[1,"cx-tracking-event-city"],[1,"cx-no-tracking-heading"],[1,"cx-tracking-loading"],[1,"header","modal-header"],[1,"title","modal-title"],["type","button",1,"close","btn-dismiss",3,"click"],[1,"body","modal-body"],[1,"col-sm-12"]],template:function(n,i){if(n&1){let p=F();s(0,"div",2),T("esc",function(){return b(p),A(i.close("Escape clicked"))}),s(1,"div",3),g(2,bp,12,9,"ng-container",4),a(3,"async"),g(4,Ap,4,3,"ng-template",null,0,q)(6,Lp,13,6,"ng-template",null,1,q),c()()}if(n&2){let p=L(7);l("cxFocus",i.focusConfig),r(2),l("ngIf",d(3,3,i.tracking$))("ngIfElse",p)}},dependencies:[de,M,pt,It,j,B,ge],encapsulation:2,changeDetection:0})}}return t})(),xu=(()=>{class t extends ls{constructor(){super(...arguments),this.componentClass="cx-list-header col-12",this.outlet=R(Ln)}ngOnInit(){this.outlet?.context$.subscribe(e=>{this.consignment=e.item}),this.outlet?.context$.subscribe(e=>{this.orderCode=e?.order?.code??""}),super.ngOnInit()}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=gn(t)))(i||t)}})()}static{this.\u0275cmp=w({type:t,selectors:[["cx-my-account-v2-consignment-tracking"]],hostVars:1,hostBindings:function(n,i){n&2&&io("className",i.componentClass)},standalone:!1,features:[fn],decls:1,vars:1,consts:[["showNoTrackingMessage",""],["class","cx-list-status",4,"ngIf"],[1,"cx-list-status"],[4,"ngIf"],["class","cx-item-list-tracking-id",4,"ngIf"],["class","cx-consignment-status-date",4,"ngIf"],[1,"cx-item-list-tracking-id"],[4,"ngIf","ngIfElse"],[1,"cx-tracking-id-link",3,"click"],[1,"cx-consignment-status-date"]],template:function(n,i){n&1&&g(0,Pp,7,3,"div",1),n&2&&l("ngIf",i.consignment)},dependencies:[M,B,ge],encapsulation:2})}}return t})(),hu={launch:{CONSIGNMENT_TRACKING:{inlineRoot:!0,component:vu,dialogType:Et.DIALOG}}},Cu=(()=>{class t{constructor(e,n,i){this.orderDetailsService=e,this.launchDialogService=n,this.vcr=i,this.subscription=new Me}ngOnInit(){this.order$=this.orderDetailsService.getOrderDetails()}onReorderClick(e){this.launchDialog(e.code)}launchDialog(e){let n=this.launchDialogService.openDialog(ct.REORDER,this.element,this.vcr,{orderCode:e});n&&this.subscription.add(n.pipe(ne(1)).subscribe())}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||t)(E(me),E(xe),E(tt))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-order-details-reorder"]],viewQuery:function(n,i){if(n&1&&nt(pn,5),n&2){let p;it(p=rt())&&(i.element=p.first)}},standalone:!1,decls:2,vars:3,consts:[["element",""],[4,"ngIf"],[1,"cx-nav","row"],[1,"col-xs-12","col-md-10","col-lg-8"],[1,"btn","btn-primary",3,"click"]],template:function(n,i){n&1&&(g(0,$p,2,1,"ng-container",1),a(1,"async")),n&2&&l("ngIf",d(1,1,i.order$))},dependencies:[M,j,B],encapsulation:2,changeDetection:0})}}return t})(),yu=(()=>{class t{constructor(e,n,i){this.launchDialogService=e,this.reorderOrderFacade=n,this.multiCartFacade=i,this.iconTypes=dt,this.focusConfig={trap:!0,block:!0,autofocus:!0,focusOnEscape:!0},this.loading$=new Pe(!1),this.showDecisionPrompt$=new Pe(!0),this.data$=this.launchDialogService.data$,this.selectFocusUtility=R(Lo),this.elementRef=R(Pt,{optional:!0})}createCartFromOrder(e){this.showDecisionPrompt$.next(!1),this.loading$.next(!0),this.reorderOrderFacade.reorder(e).subscribe(n=>{this.multiCartFacade.reloadCart(go),this.cartModifications=n.cartModifications,this.loading$.next(!1),this.recaptureFocus()})}recaptureFocus(){this.selectFocusUtility?.findFirstFocusable(this.elementRef?.nativeElement)?.focus()}close(e){this.launchDialogService.closeDialog(e)}get cartValidationStatusCode(){return Qo}static{this.\u0275fac=function(n){return new(n||t)(E(xe),E(Un),E(Nn))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-reorder-dialog"]],standalone:!1,decls:15,vars:14,consts:[["result",""],["loading",""],["cartResponse",""],["errorIcon",""],["role","dialog","aria-labelledby","dialogTitle","aria-modal","true",1,"cx-modal-container",3,"esc","cxFocus"],[1,"cx-modal-content"],[1,"cx-dialog-header","modal-header"],["id","dialogTitle",1,"cx-dialog-title","modal-title"],["type","button",1,"close",3,"click","title"],["aria-hidden","true"],[3,"type"],[1,"cx-dialog-body","modal-body"],[4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"cx-reorder-dialog-areyousure-section"],[1,"cx-reorder-dialog-footer"],[1,"row"],[1,"col-12"],[1,"btn","btn-action",3,"click"],[1,"btn","btn-primary",3,"click"],["aria-live","polite"],[1,"cx-cart-mod-entry-container"],[1,"alert-icon"],[1,"success",3,"type"],["class","cx-cart-mod-entry-container",4,"ngFor","ngForOf"],[1,"warning",3,"type"],[1,"error",3,"type"],[1,"cx-spinner"]],template:function(n,i){n&1&&(s(0,"div",4),T("esc",function(){return i.close("Escape clicked")}),s(1,"div",5),O(2),s(3,"div",6)(4,"div",7),u(5),a(6,"cxTranslate"),c(),s(7,"button",8),a(8,"cxTranslate"),a(9,"cxTranslate"),T("click",function(){return i.close("Close reorder result dialog")}),s(10,"span",9),h(11,"cx-icon",10),c()()(),I(),s(12,"div",11),g(13,Kp,5,4,"ng-container",12),a(14,"async"),c()()()),n&2&&(l("cxFocus",i.focusConfig),r(5),_(" ",d(6,6,"reorder.dialog.reorderProducts")," "),r(2),se("title",d(8,8,"addToCart.closeModal")),k("aria-label",d(9,10,"addToCart.closeModal")),r(4),l("type",i.iconTypes.CLOSE),r(2),l("ngIf",d(14,12,i.data$)))},dependencies:[de,M,pt,It,lt,j,B],encapsulation:2,changeDetection:0})}}return t})(),ps=(()=>{class t{constructor(e){this.orderDetailsService=e,this.CartOutlets=Je}ngOnInit(){this.order$=this.orderDetailsService.getOrderDetails()}static{this.\u0275fac=function(n){return new(n||t)(E(me))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-order-details-totals"]],standalone:!1,decls:2,vars:3,consts:[[4,"ngIf"],[1,"row","justify-content-end"],[1,"cx-summary","col-sm-12","col-md-6","col-lg-5","col-xl-4"],[3,"cxOutlet","cxOutletContext"]],template:function(n,i){n&1&&(g(0,Jp,4,2,"ng-container",0),a(1,"async")),n&2&&l("ngIf",d(1,1,i.order$))},dependencies:[M,Ke,j],encapsulation:2})}}return t})(),Ou={launch:{REORDER:{inline:!0,component:yu,dialogType:Et.DIALOG}}},Iu=(()=>{class t{constructor(){this.orderDetailsService=R(me),this.launchDialogService=R(xe),this.vcr=R(tt),this.destroyRef=R(mi),this.order$=this.orderDetailsService.getOrderDetails()}onOrderAttachmentsClick(e){let n=this.launchDialogService.openDialog(ct.ORDER_ATTACHMENTS,this.element,this.vcr,{orderCode:e});n&&n.pipe(ne(1),gi(this.destroyRef)).subscribe()}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=w({type:t,selectors:[["cx-order-attachments"]],viewQuery:function(n,i){if(n&1&&nt(pn,5),n&2){let p;it(p=rt())&&(i.element=p.first)}},standalone:!1,decls:2,vars:3,consts:[["element",""],[4,"ngIf"],[1,"row","justify-content-end"],[1,"col-sm-12","col-md-6","col-lg-5","col-xl-4"],[1,"btn","btn-secondary","w-100","order-attachments-dialog-btn",3,"click"]],template:function(n,i){n&1&&(g(0,e0,2,1,"ng-container",1),a(1,"async")),n&2&&l("ngIf",d(1,1,i.order$))},dependencies:[M,j,B],encapsulation:2,changeDetection:0})}}return t})(),Eu=(()=>{class t{constructor(){this.config=R(zt),this.launchDialogService=R(xe),this.orderAttachmentsFacade=R(Hn),this.translation=R(ye),this.cd=R(Nt),this.destroyRef=R(mi),this.globalMessageType=fe,this.iconTypes=dt,this.focusConfig={trap:!0,block:!0,autofocus:!0,focusOnEscape:!0},this.orderCode$=this.launchDialogService.data$.pipe(x(e=>e.orderCode)),this.attachments$=this.orderCode$.pipe($(e=>this.orderAttachmentsFacade.getOrderAttachments(e)),x(e=>e.sapAttachments??[]),Q(()=>(this.loadError.set(!0),Y([]))),Kr()),this.loadError=eo(!1),this.attachmentsCount=lo(this.attachments$.pipe(x(e=>e.length)),{initialValue:0}),this.loadingAttachments=[],this.erroredAttachments=[],this.errorCounter=0}openOrderAttachment(e,n){this.orderCode$.pipe(W(()=>!this.loadingAttachments.includes(e)),H(()=>this.setAttachmentLoadingState(e,!0)),$(i=>this.orderAttachmentsFacade.downloadOrderAttachment(i,e)),H(i=>{if(i.type&&this.config.orderAttachments?.previewMimeTypes.includes(i.type.split(";")[0])){this.previewFile(i);return}this.downloadFile(i,n)}),H(()=>this.setAttachmentLoadingState(e,!1)),Q(()=>(this.setAttachmentLoadingState(e,!1),this.addErrorMessage(e),Ct)),gi(this.destroyRef)).subscribe()}previewFile(e){let n=URL.createObjectURL(e);window.open(n,"_blank","noopener,noreferrer")}downloadFile(e,n){let i=URL.createObjectURL(e),p=document.createElement("a");p.href=i,p.target="_blank",p.rel="noopener noreferrer",p.download=n,document.body.appendChild(p),p.click(),document.body.removeChild(p)}onMouseDown(e,n,i){(e.button===0||e.button===1)&&this.openOrderAttachment(n,i)}setAttachmentLoadingState(e,n){n?this.loadingAttachments.push(e):this.loadingAttachments=this.loadingAttachments.filter(i=>i!==e),this.cd.detectChanges()}addErrorMessage(e){this.erroredAttachments.push(`${e}_${this.errorCounter}`),this.errorCounter++,this.cd.detectChanges()}closeErrorMessage(e){this.erroredAttachments=this.erroredAttachments.filter(n=>n!==e)}close(e){this.launchDialogService.closeDialog(e)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=w({type:t,selectors:[["cx-order-attachments-dialog"]],standalone:!1,decls:28,vars:23,consts:[["error",""],["empty",""],["loading",""],["role","dialog","aria-labelledby","dialogTitle","aria-modal","true",1,"cx-modal-container",3,"esc","cxFocus"],[1,"cx-modal-content"],[1,"cx-dialog-header","modal-header"],["id","dialogTitle",1,"cx-dialog-title","modal-title"],["class","attachments-counter",4,"ngIf"],["type","button",1,"close",3,"click","title"],["aria-hidden","true"],[3,"type"],[1,"cx-dialog-body","modal-body"],["class","cx-dialog-message attachment-error",3,"text","type","closeMessage",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],[1,"cx-dialog-footer","modal-footer"],["type","button",1,"btn","btn-secondary","cancel-button",3,"click"],[1,"attachments-counter"],[1,"cx-dialog-message","attachment-error",3,"closeMessage","text","type"],[1,"table"],[4,"ngFor","ngForOf"],["class","order-attachment-row",4,"ngIf"],[1,"order-attachment-row"],[3,"mousedown","keydown.enter","title","ngClass"],[1,"inline-spinner",3,"ngClass"],["tabindex","0","role","button",1,"file-icon",3,"click","keydown.enter","title","ngClass"],[1,"cx-dialog-message","error-message",3,"text","type","isVisibleCloseButton"],[1,"cx-dialog-message","info-message",3,"text","type","isVisibleCloseButton"],[1,"cx-spinner"]],template:function(n,i){if(n&1){let p=F();s(0,"div",3),T("esc",function(){return b(p),A(i.close("Escape clicked"))}),s(1,"div",4)(2,"div",5)(3,"div",6)(4,"span"),u(5),a(6,"cxTranslate"),c(),g(7,n0,2,1,"span",7),c(),s(8,"button",8),a(9,"cxTranslate"),a(10,"cxTranslate"),T("click",function(){return b(p),A(i.close("Close dialog"))}),s(11,"span",9),h(12,"cx-icon",10),c()()(),s(13,"div",11),g(14,i0,2,4,"cx-message",12)(15,c0,2,2,"ng-container",13),a(16,"async"),c(),s(17,"div",14)(18,"button",15),a(19,"cxTranslate"),T("click",function(){return b(p),A(i.close("Cancel dialog"))}),u(20),a(21,"cxTranslate"),c()()()(),g(22,d0,2,5,"ng-template",null,0,q)(24,l0,2,5,"ng-template",null,1,q)(26,p0,2,0,"ng-template",null,2,q)}if(n&2){let p=L(27);l("cxFocus",i.focusConfig),r(5),_(" ",d(6,11,"attachments.dialog.title")," "),r(2),l("ngIf",i.attachmentsCount()),r(),se("title",d(9,13,"attachments.dialog.closeModal")),k("aria-label",d(10,15,"attachments.dialog.closeModal")),r(4),l("type",i.iconTypes.CLOSE),r(2),l("ngForOf",i.erroredAttachments),r(),l("ngIf",d(16,17,i.attachments$))("ngIfElse",p),r(3),k("aria-label",d(19,19,"common.cancel")),r(2),_(" ",d(21,21,"common.cancel")," ")}},dependencies:[_i,de,M,pt,It,lt,yi,j,B],encapsulation:2,changeDetection:0})}}return t})(),Ru={launch:{ORDER_ATTACHMENTS:{inline:!0,component:Eu,dialogType:Et.DIALOG}}};function Su(){let t=R(qn),o=R(Mo),e=R(to);return()=>{let n={component:xu,id:gt.ORDER_CONSIGNMENT,position:wo.REPLACE};if(t){let i=e.resolveComponentFactory(n.component);o.add(n.id,i,n.position)}}}var Tu={cmsComponents:{AccountOrderDetailsActionsComponent:{component:du}}};var Du=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=P({providers:[ss,ee({cmsComponents:{AccountOrderDetailsActionsComponent:{component:cs,guards:[re]},AccountOrderDetailsItemsComponent:{component:$r,guards:[re],data:{enableAddToCart:!0}},AccountOrderDetailsGroupedItemsComponent:{component:$r,guards:[re],data:{enableAddToCart:!0,groupCartItems:!0}},AccountOrderDetailsTotalsComponent:{component:ps,guards:[re]},AccountOrderDetailsOverviewComponent:{component:ln,guards:[re]},AccountOrderDetailsSimpleOverviewComponent:{component:ln,guards:[re],data:{simple:!0}},AccountOrderDetailsReorderComponent:{component:Cu,guards:[re]},AccountOrderAttachmentsComponent:{component:Iu,guards:[re]}},features:{consignmentTracking:"1.2"}}),ee(hu),ee(Ou),ee(Ru),xn(()=>R(qn)?Tu:{}),{provide:vo,useFactory:Su,multi:!0}],imports:[Mn,ie,ce,Ze,Pn,Ae,We,$e,Ci,Yo,An,Rt,uu,Ti,Tt,Ii]})}}return t})(),jr=(()=>{class t{constructor(e,n,i,p){this.routing=e,this.orderHistoryFacade=n,this.translation=i,this.replenishmentOrderHistoryFacade=p,this.PAGE_SIZE=5,this.orders$=this.orderHistoryFacade.getOrderHistoryList(this.PAGE_SIZE).pipe(H(f=>{this.setOrderHistoryParams(f)})),this.hasReplenishmentOrder$=this.replenishmentOrderHistoryFacade.getReplenishmentOrderDetails().pipe(x(f=>f&&Object.keys(f).length!==0)),this.isLoaded$=this.orderHistoryFacade.getOrderHistoryListLoaded(),this.tabTitleParam$=this.orders$.pipe(x(f=>f?.pagination?.totalResults),W(fi),ne(1)),Rn("a11yTabComponent")}setOrderHistoryParams(e){e?.pagination?.sort&&(this.sortType=e.pagination.sort),this.hasPONumber=e?.orders?.[0]?.purchaseOrderNumber!==void 0}ngOnDestroy(){this.orderHistoryFacade.clearOrderList()}changeSortCode(e){let n={sortCode:e,currentPage:0};this.sortType=e,this.fetchOrders(n)}pageChange(e){let n={sortCode:this.sortType,currentPage:e};this.fetchOrders(n)}goToOrderDetail(e){this.routing.go({cxRoute:"orderDetails",params:e},{queryParams:this.getQueryParams(e)})}getQueryParams(e){return this.orderHistoryFacade.getQueryParams(e)}getSortLabels(){return K([this.translation.translate("sorting.date"),this.translation.translate("sorting.orderNumber")]).pipe(x(([e,n])=>({byDate:e,byOrderNumber:n})))}fetchOrders(e){this.orderHistoryFacade.loadOrderList(this.PAGE_SIZE,e.currentPage,e.sortCode)}static{this.\u0275fac=function(n){return new(n||t)(E(Ce),E(Ue),E(ye),E(Xe))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-order-history"]],standalone:!1,decls:3,vars:8,consts:[["noOrder",""],["otherOrder",""],[4,"ngIf"],[1,"cx-order-history-container"],[3,"ngClass"],[1,"cx-order-history-body"],[4,"ngIf","ngIfElse"],[1,"cx-order-history-sort","top"],[1,"cx-order-history-form-group","form-group"],["ariaControls","order-history-table",3,"sortListEvent","sortOptions","sortLabels","selectedOption","placeholder","ariaLabel"],["class","cx-order-history-pagination",4,"ngIf"],["role","table","id","order-history-table",1,"table","cx-order-history-table",3,"ngClass"],[1,"cx-visually-hidden"],[1,"cx-order-history-thead-mobile"],["role","row"],["role","columnheader","scope","col"],["role","row",3,"click",4,"ngFor","ngForOf"],[1,"cx-order-history-sort","bottom"],[1,"cx-order-history-pagination"],["paginationID","pagination-top",3,"viewPageEvent","pagination"],["role","row",3,"click"],["role","cell",1,"cx-order-history-code"],[1,"cx-order-history-label"],[1,"cx-order-history-value",3,"routerLink","queryParams"],["role","cell",1,"cx-order-history-placed"],["role","cell",1,"cx-order-history-status"],["role","cell",1,"cx-order-history-total"],["role","cell",1,"cx-order-history-po"],["class","cx-order-history-value",3,"routerLink","queryParams",4,"ngIf"],["role","cell",1,"cx-order-history-cost-center"],["paginationID","pagination-bottom",3,"viewPageEvent","pagination"],[3,"ngClass",4,"ngIf"],["routerLinkActive","active","cxBtnLikeLink","",1,"btn","btn-primary","btn-block",3,"routerLink"]],template:function(n,i){n&1&&(g(0,b0,2,1,"ng-container",2),a(1,"async"),a(2,"async")),n&2&&l("ngIf",Re(5,m0,d(1,1,i.orders$),d(2,3,i.hasReplenishmentOrder$)))},dependencies:[_i,de,M,he,$t,Dt,ut,St,j,Oe,B,ge],encapsulation:2,changeDetection:0})}}return t})(),ms=function(t){return t.CANCELLED="CANCELLED",t.ERROR="ERROR",t.REJECTED="REJECTED",t}(ms||{}),bu=(()=>{class t{getConsignmentNumber(e){if(e){let n=Number(e.split("_")[1]);if(!isNaN(n))return(n+1).toString()}return e}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=w({type:t,selectors:[["cx-my-account-v2-consignment-entries"]],inputs:{consignments:"consignments",orderCode:"orderCode"},standalone:!1,decls:1,vars:1,consts:[["showLastUpdated",""],["showNumber",""],[4,"ngFor","ngForOf"],["class","cx-consignment-info",4,"ngIf"],[1,"cx-consignment-info"],[4,"ngIf","ngIfElse"],[4,"ngIf"],["target","_blank","rel","noopener noreferrer",1,"cx-tracking-id",3,"href"]],template:function(n,i){n&1&&g(0,N0,2,1,"ng-container",2),n&2&&l("ngForOf",i.consignments)},dependencies:[de,M,B,ge],encapsulation:2,changeDetection:0})}}return t})(),Au=(()=>{class t{constructor(){this.orderConsignmentsService=R(ds),this.criticalStatuses=Object.values(ms),this.IMAGE_COUNT=4}getConsignmentsCount(e){let n=0;if(e)for(let i of e)i.entries&&(n=n+i.entries.length);return n}getOrderEntriesCount(e){return e?.length??0}isStatusCritical(e){return this.criticalStatuses.includes(e.toUpperCase())}getPickupConsignments(e){let n={};return n.consignments=e,this.orderConsignmentsService.getGroupedConsignments(n,!0)??[]}getDeliveryConsignments(e){let n={};return n.consignments=e,this.orderConsignmentsService.getGroupedConsignments(n,!1)??[]}getDeliveryUnconsignedEntries(e){let n={};return n.unconsignedEntries=e,this.orderConsignmentsService.getUnconsignedEntries(n,!1)??[]}getPickupUnconsignedEntries(e){let n={};return n.unconsignedEntries=e,this.orderConsignmentsService.getUnconsignedEntries(n,!0)??[]}getProductImages(e){let n=[],i=0;for(let p of e)if(p.product?.images){if(i>=this.IMAGE_COUNT)break;i++,n.push(p.product?.images)}return n}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=w({type:t,selectors:[["cx-my-account-v2-order-consolidated-information"]],inputs:{order:"order"},standalone:!1,decls:5,vars:1,consts:[["showManyItems",""],["showOneItem",""],["nonCritical",""],["showReturnCode",""],["class","cx-consolidated-order-info",4,"ngIf"],[1,"cx-consolidated-order-info"],[1,"cx-order-info"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"cx-order-images-container"],[1,"cx-order-status"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"orderCode","consignments"],["class","cx-consignment-info",4,"ngIf"],["class","cx-order-status-critical",4,"ngIf","ngIfElse"],[1,"cx-order-status-critical"],[1,"cx-consignment-info"],["class","cx-order-status-critical-link",3,"routerLink",4,"ngIf","ngIfElse"],[1,"cx-order-status-critical-link",3,"routerLink"],["format","thumbnail","role","presentation",1,"cx-order-img",3,"container"],[4,"ngIf","ngIfElse"]],template:function(n,i){n&1&&g(0,am,8,7,"div",4)(1,cm,1,2,"ng-template",null,0,q)(3,dm,2,5,"ng-template",null,1,q),n&2&&l("ngIf",i.order)},dependencies:[de,M,ot,he,qt,bu,Oe,B,ge],encapsulation:2,changeDetection:0})}}return t})(),Lu=(()=>{class t extends jr{constructor(){super(...arguments),this.service=R(Xn),this.ITEMS_PER_PAGE=5,this.isLoaded$=new Pe(!1),this.orders$=this.service.getOrderHistoryList(this.ITEMS_PER_PAGE).pipe(H(e=>{this.isLoaded$.next(!0),super.setOrderHistoryParams(e)}))}pageChange(e){this.isLoaded$.next(!1),this.service.clearOrderList(),super.pageChange(e)}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=gn(t)))(i||t)}})()}static{this.\u0275cmp=w({type:t,selectors:[["cx-my-account-v2-order-history"]],standalone:!1,features:[fn],decls:6,vars:4,consts:[["noOrder",""],["loading",""],[4,"ngIf","ngIfElse"],[1,"cx-my-account-v2-order-history-header"],[1,"cx-my-account-v2-order-history-body"],[4,"ngFor","ngForOf"],["class","cx-order-history-pagination",4,"ngIf"],[1,"cx-each-order"],[1,"cx-my-account-v2-order-history-code",3,"click"],[3,"routerLink","queryParams"],[1,"cx-my-account-v2-order-summary"],[3,"order"],[1,"cx-order-history-pagination"],[3,"viewPageEvent","pagination"],["routerLinkActive","active",1,"cx-no-order",3,"routerLink"],[1,"cx-spinner"]],template:function(n,i){if(n&1&&(g(0,um,9,13,"div",2),a(1,"async"),g(2,gm,2,4,"ng-template",null,0,q)(4,fm,2,0,"ng-template",null,1,q)),n&2){let p=L(3);l("ngIf",d(1,2,i.orders$))("ngIfElse",p)}},dependencies:[de,M,he,$t,ut,pt,Au,j,Oe,B,ge],encapsulation:2})}}return t})(),wu={cmsComponents:{AccountOrderHistoryComponent:{component:Lu}}};var Mu=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=P({providers:[ee({cmsComponents:{AccountOrderHistoryComponent:{component:jr,guards:[re]}}}),xn(()=>R(qn)?wu:{})],imports:[ie,$e,hi,Ao,_t,Ae,ce,We,mt,Tt]})}}return t})(),Fu=(()=>{class t{constructor(e){this.orderHistoryFacade=e,this.type=Ri.ORDER_DETAILS}getEntries(){return this.orderHistoryFacade.getOrderDetails().pipe(x(e=>e?.entries??[]))}static{this.\u0275fac=function(n){return new(n||t)(v(Ue))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),ku=(()=>{class t{handleClick(e){e.target.tagName===this.el.nativeElement.tagName&&this.close("Cross click")}constructor(e,n,i,p){this.replenishmentOrderHistoryFacade=e,this.globalMessageService=n,this.launchDialogService=i,this.el=p,this.subscription=new Me,this.iconTypes=dt,this.focusConfig={trap:!0,block:!0,autofocus:"button",focusOnEscape:!0}}ngOnInit(){this.subscription.add(K([this.replenishmentOrderHistoryFacade.getReplenishmentOrderDetails().pipe(Jr(null)),this.launchDialogService.data$]).subscribe(([e,n])=>{this.replenishmentOrderCode=n||e?.replenishmentOrderCode})),this.subscription.add(this.replenishmentOrderHistoryFacade.getCancelReplenishmentOrderSuccess().subscribe(e=>this.onSuccess(e)))}onSuccess(e){e&&(this.launchDialogService.closeDialog("Successffully cancelled replenishment"),this.globalMessageService.add({key:"orderDetails.cancelReplenishment.cancelSuccess",params:{replenishmentOrderCode:this.replenishmentOrderCode}},fe.MSG_TYPE_CONFIRMATION)),this.replenishmentOrderHistoryFacade.clearCancelReplenishmentOrderProcessState()}close(e){this.launchDialogService.closeDialog(e)}cancelReplenishment(){this.replenishmentOrderHistoryFacade.cancelReplenishmentOrder(this.replenishmentOrderCode)}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||t)(E(Xe),E(be),E(xe),E(Pt))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-replenishment-order-cancellation-dialog"]],hostBindings:function(n,i){n&1&&T("click",function(f){return i.handleClick(f)})},standalone:!1,decls:24,vars:20,consts:[["role","dialog","aria-labelledby","dialogTitle",1,"modal-dialog","modal-dialog-centered","modal-sm",3,"esc","cxFocus"],[1,"modal-content"],[1,"modal-header"],["id","dialogTitle"],["type","button",1,"close",3,"click","title"],["aria-hidden","true"],[3,"type"],[1,"cx-cancel-replenishment-dialog-description"],[1,"modal-body"],[1,"cx-cancel-replenishment-btns","row"],[1,"col-md-6"],[1,"btn","btn-block","btn-secondary",3,"click"],[1,"btn","btn-block","btn-primary",3,"click"]],template:function(n,i){n&1&&(s(0,"div",0),T("esc",function(){return i.close("Escape clicked")}),s(1,"div",1)(2,"div",2)(3,"h3",3),u(4),a(5,"cxTranslate"),c(),s(6,"button",4),a(7,"cxTranslate"),a(8,"cxTranslate"),T("click",function(){return i.close("Cross click")}),s(9,"span",5),h(10,"cx-icon",6),c()()(),s(11,"div",7),u(12),a(13,"cxTranslate"),c(),s(14,"div",8)(15,"div",9)(16,"div",10)(17,"button",11),T("click",function(){return i.close("Close Replenishment Dialog")}),u(18),a(19,"cxTranslate"),c()(),s(20,"div",10)(21,"button",12),T("click",function(){return i.cancelReplenishment()}),u(22),a(23,"cxTranslate"),c()()()()()()),n&2&&(l("cxFocus",i.focusConfig),r(4),_(" ",d(5,8,"orderDetails.cancelReplenishment.title")," "),r(2),se("title",d(7,10,"common.close")),k("aria-label",d(8,12,"common.close")),r(4),l("type",i.iconTypes.CLOSE),r(2),_(" ",d(13,14,"orderDetails.cancelReplenishment.description")," "),r(6),_(" ",d(19,16,"orderDetails.cancelReplenishment.reject")," "),r(4),_(" ",d(23,18,"orderDetails.cancelReplenishment.accept")," "))},dependencies:[lt,It,B],encapsulation:2,changeDetection:0})}}return t})(),Bu=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=P({imports:[ie,ce,Rt,An]})}}return t})(),us={launch:{REPLENISHMENT_ORDER:{inline:!0,component:ku,dialogType:Et.DIALOG}}},Pu=(()=>{class t{constructor(e,n,i){this.replenishmentOrderHistoryFacade=e,this.vcr=n,this.launchDialogService=i,this.subscription=new Me,this.replenishmentOrder$=this.replenishmentOrderHistoryFacade.getReplenishmentOrderDetails()}openDialog(){let e=this.launchDialogService.openDialog(ct.REPLENISHMENT_ORDER,this.element,this.vcr);e&&this.subscription.add(e.pipe(ne(1)).subscribe())}ngOnDestroy(){this.subscription.unsubscribe(),this.replenishmentOrderHistoryFacade.clearReplenishmentOrderDetails()}static{this.\u0275fac=function(n){return new(n||t)(E(Xe),E(tt),E(xe))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-replenishment-order-cancellation"]],viewQuery:function(n,i){if(n&1&&nt(pn,5),n&2){let p;it(p=rt())&&(i.element=p.first)}},standalone:!1,decls:8,vars:10,consts:[["element",""],[1,"cx-cancel-replenishment-btns","row"],[1,"col-xs-12","col-md-5","col-lg-4"],["cxBtnLikeLink","",1,"btn","btn-block","btn-secondary",3,"routerLink"],["class","col-xs-12 col-md-5 col-lg-4",4,"ngIf"],[1,"btn","btn-block","btn-secondary",3,"click"]],template:function(n,i){if(n&1&&(s(0,"div",1)(1,"div",2)(2,"a",3),a(3,"cxUrl"),u(4),a(5,"cxTranslate"),c()(),g(6,xm,5,3,"div",4),a(7,"async"),c()),n&2){let p;r(2),l("routerLink",d(3,3,X(9,vm))),r(2),_(" ",d(5,5,"common.back")," "),r(2),l("ngIf",(p=d(7,7,i.replenishmentOrder$))==null?null:p.active)}},dependencies:[M,he,St,j,B,Oe],encapsulation:2})}}return t})(),Nr=(()=>{class t{constructor(e,n){this.routingService=e,this.replenishmentOrderHistoryFacade=n,this.replenishmentOrderCode$=this.routingService.getRouterState().pipe(x(i=>i.state.params.replenishmentOrderCode),mn()),this.replenishmentOrderLoad$=this.replenishmentOrderCode$.pipe(H(i=>{i?this.replenishmentOrderHistoryFacade.loadReplenishmentOrderDetails(i):this.replenishmentOrderHistoryFacade.clearReplenishmentOrderDetails()}),pi({bufferSize:1,refCount:!0}))}getOrderDetails(){return this.replenishmentOrderLoad$.pipe($(e=>this.replenishmentOrderHistoryFacade.getReplenishmentOrderDetails()))}static{this.\u0275fac=function(n){return new(n||t)(v(Ce),v(Xe))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Nu=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=P({providers:[ee(us),ee({cmsComponents:{ReplenishmentDetailItemsComponent:{component:$r,providers:[{provide:me,useExisting:Nr}]},ReplenishmentDetailTotalsComponent:{component:ps,providers:[{provide:me,useExisting:Nr}]},ReplenishmentDetailShippingComponent:{component:ln,providers:[{provide:me,useExisting:Nr}]},ReplenishmentDetailActionsComponent:{component:Pu},ReplenishmentDetailOrderHistoryComponent:{component:jr}}})],imports:[Mn,ie,ce,Pn,Ae,Bu,We,_t,$e,Tt]})}}return t})(),$u=(()=>{class t{constructor(e,n,i,p,f){this.routing=e,this.replenishmentOrderHistoryFacade=n,this.translation=i,this.vcr=p,this.launchDialogService=f,this.subscription=new Me,this.PAGE_SIZE=5,this.replenishmentOrders$=this.replenishmentOrderHistoryFacade.getReplenishmentOrderHistoryList(this.PAGE_SIZE).pipe(H(C=>{C?.pagination?.sort&&(this.sortType=C.pagination.sort)})),this.isLoaded$=this.replenishmentOrderHistoryFacade.getReplenishmentOrderHistoryListSuccess()}changeSortCode(e){let n={sortCode:e,currentPage:0};this.sortType=e,this.fetchReplenishmentOrders(n)}pageChange(e){let n={sortCode:this.sortType,currentPage:e};this.fetchReplenishmentOrders(n)}goToOrderDetail(e){this.routing.go({cxRoute:"replenishmentDetails",params:e})}getSortLabels(){return K([this.translation.translate("sorting.date"),this.translation.translate("sorting.replenishmentNumber"),this.translation.translate("sorting.nextOrderDate")]).pipe(x(([e,n,i])=>({byDate:e,byReplenishmentNumber:n,byNextOrderDate:i})))}openDialog(e,n){let i=this.launchDialogService.openDialog(ct.REPLENISHMENT_ORDER,this.element,this.vcr,n);i&&this.subscription.add(i.pipe(ne(1)).subscribe()),e.stopPropagation()}fetchReplenishmentOrders(e){this.replenishmentOrderHistoryFacade.loadReplenishmentOrderList(this.PAGE_SIZE,e.currentPage,e.sortCode)}ngOnDestroy(){this.subscription.unsubscribe(),this.replenishmentOrderHistoryFacade.clearReplenishmentOrderList()}static{this.\u0275fac=function(n){return new(n||t)(E(Ce),E(Xe),E(ye),E(tt),E(xe))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-replenishment-order-history"]],viewQuery:function(n,i){if(n&1&&nt(pn,5),n&2){let p;it(p=rt())&&(i.element=p.first)}},standalone:!1,decls:2,vars:3,consts:[["noOrder",""],["element",""],[4,"ngIf"],[1,"container"],[1,"cx-replenishment-order-history-header"],[1,"cx-replenishment-order-history-body"],[4,"ngIf","ngIfElse"],[1,"cx-replenishment-order-history-sort","top","row"],[1,"cx-replenishment-order-history-form-group","form-group","col-sm-12","col-md-4","col-lg-4"],["ariaControls","replenishment-order-history-table",3,"sortListEvent","sortOptions","sortLabels","selectedOption","placeholder","ariaLabel"],["class","cx-replenishment-order-history-pagination",4,"ngIf"],["id","replenishment-order-history-table","role","table",1,"table","cx-replenishment-order-history-table"],[1,"cx-visually-hidden"],["class","cx-replenishment-order-history-thead-mobile",4,"cxFeature"],["role","row",3,"click",4,"ngFor","ngForOf"],[1,"cx-replenishment-order-history-sort","bottom","row"],[1,"cx-replenishment-order-history-pagination"],["paginationID","pagination-bottom",3,"pagination","viewPageEvent",4,"ngIf"],["paginationID","pagination-top",3,"viewPageEvent","pagination"],[1,"cx-replenishment-order-history-thead-mobile"],["scope","col"],[1,"cx-replenishment-order-history-ellipses"],["scope","col",1,"cx-replenishment-order-history-total"],["role","columnheader","scope","col","aria-sort","none"],["role","columnheader","scope","col","aria-sort","none",1,"cx-replenishment-order-history-total"],["role","row",3,"click"],["role","cell",1,"cx-replenishment-order-history-code"],[1,"d-md-none","cx-replenishment-order-history-label"],[1,"cx-replenishment-order-history-value",3,"routerLink"],["role","cell"],[1,"cx-replenishment-order-history-value","cx-purchase-order-number",3,"routerLink"],["role","cell",1,"cx-replenishment-order-history-frequency"],[1,"cx-replenishment-order-history-value","cx-next-order-date",3,"routerLink"],[1,"cx-replenishment-order-history-total"],["role","cell",1,"cx-replenishment-order-history-cancel"],["class","cx-order-cancel btn btn-secondary",3,"click",4,"ngIf"],[1,"cx-order-cancel","btn","btn-secondary",3,"click"],["paginationID","pagination-bottom",3,"viewPageEvent","pagination"],["class","cx-replenishment-order-history-no-order row",4,"ngIf"],[1,"cx-replenishment-order-history-no-order","row"],[1,"col-sm-12","col-md-6","col-lg-4"],["routerLinkActive","active","cxBtnLikeLink","",1,"btn","btn-primary","btn-block",3,"routerLink"]],template:function(n,i){n&1&&(g(0,Dm,10,5,"ng-container",2),a(1,"async")),n&2&&l("ngIf",d(1,1,i.replenishmentOrders$))},dependencies:[de,M,he,$t,Dt,ut,St,ze,j,co,Oe,B,ge],encapsulation:2,changeDetection:0})}}return t})(),Vu=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=P({providers:[ee(us),ee({cmsComponents:{AccountReplenishmentHistoryComponent:{component:$u,guards:[re]}}})],imports:[ie,$e,_t,Ae,ce,Tt,Ze]})}}return t})(),Gr=(()=>{class t{constructor(e,n,i){this.routingService=e,this.returnRequestService=n,this.globalMessageService=i}get isCancelling$(){return this.returnRequestService.getCancelReturnRequestLoading()}get isCancelSuccess$(){return this.returnRequestService.getCancelReturnRequestSuccess()}getReturnRequest(){return K([this.routingService.getRouterState(),this.returnRequestService.getOrderReturnRequest(),this.returnRequestService.getReturnRequestLoading()]).pipe(x(([e,n,i])=>[e.state.params.returnCode,n,i]),W(([e])=>!!e),H(([e,n,i])=>{(n===void 0||n.rma!==e)&&!i&&this.returnRequestService.loadOrderReturnRequestDetail(e)}),x(([e,n])=>n),W(e=>!!e),mn())}clearReturnRequest(){this.returnRequestService.clearOrderReturnRequestDetail()}cancelReturnRequest(e){this.returnRequestService.cancelOrderReturnRequest(e,{status:"CANCELLING"})}cancelSuccess(e){this.returnRequestService.resetCancelReturnRequestProcessState(),this.globalMessageService.add({key:"returnRequest.cancelSuccess",params:{rma:e}},fe.MSG_TYPE_CONFIRMATION),this.routingService.go({cxRoute:"orders"})}backToList(){this.routingService.go({cxRoute:"orders"},{state:{activeTab:1}})}static{this.\u0275fac=function(n){return new(n||t)(v(Ce),v(bt),v(be))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Uu=(()=>{class t{constructor(e){this.returnRequestService=e,this.returnRequest$=this.returnRequestService.getReturnRequest()}static{this.\u0275fac=function(n){return new(n||t)(E(Gr))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-return-request-items"]],standalone:!1,decls:2,vars:3,consts:[["class","cx-return-request-items",4,"ngIf"],[1,"cx-return-request-items"],[1,"cx-visually-hidden"],["role","columnheader",1,"cx-item-list-desc"],["role","columnheader",1,"cx-item-list-price"],["role","columnheader",1,"cx-item-list-qty"],["role","columnheader",1,"cx-item-list-total"],[1,"cx-item-list-items"],["class","cx-item-list-row cx-return-request-item-row",4,"ngFor","ngForOf"],[1,"cx-item-list-row","cx-return-request-item-row"],["role","cell"],[1,"cx-table-item-container"],["format","thumbnail",3,"container"],[1,"cx-info"],["class","cx-name",4,"ngIf"],["class","cx-code",4,"ngIf"],["class","cx-property",4,"ngFor","ngForOf"],["role","cell","class","cx-price",4,"ngIf"],["role","cell",1,"cx-quantity"],[1,"cx-mobile-header"],[1,"cx-value"],["role","cell",1,"cx-total"],[1,"cx-name"],[1,"cx-code"],[1,"cx-property"],["class","cx-label",4,"ngIf"],["class","cx-value",4,"ngIf"],[1,"cx-label"],["role","cell",1,"cx-price"]],template:function(n,i){n&1&&(g(0,Bm,20,16,"table",0),a(1,"async")),n&2&&l("ngIf",d(1,1,i.returnRequest$))},dependencies:[de,M,qt,j,B],encapsulation:2,changeDetection:0})}}return t})(),Hu=(()=>{class t{constructor(e){this.returnRequestService=e,this.returnRequest$=this.returnRequestService.getReturnRequest().pipe(H(n=>this.rma=n.rma??"")),this.isCancelling$=this.returnRequestService.isCancelling$}ngOnInit(){this.subscription=this.returnRequestService.isCancelSuccess$.subscribe(e=>{e&&this.returnRequestService.cancelSuccess(this.rma)})}cancelReturn(e){this.returnRequestService.cancelReturnRequest(e)}back(){this.returnRequestService.backToList()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||t)(E(Gr))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-return-request-overview"]],standalone:!1,decls:2,vars:3,consts:[[4,"ngIf"],[1,"cx-nav","row"],[1,"col-xs-12","col-md-4","col-lg-3"],[1,"btn","btn-block","btn-secondary",3,"click"],["class","btn btn-block btn-primary",3,"disabled","click",4,"ngIf"],[1,"cx-header","row"],[1,"cx-detail","col-sm-12","col-md-4"],[1,"cx-detail-label"],[1,"cx-detail-value"],[1,"btn","btn-block","btn-primary",3,"click","disabled"]],template:function(n,i){n&1&&(g(0,Nm,28,18,"ng-container",0),a(1,"async")),n&2&&l("ngIf",d(1,1,i.returnRequest$))},dependencies:[M,j,B],encapsulation:2,changeDetection:0})}}return t})(),qu=(()=>{class t{constructor(e){this.returnRequestService=e,this.returnRequest$=this.returnRequestService.getReturnRequest()}ngOnDestroy(){this.returnRequestService.clearReturnRequest()}static{this.\u0275fac=function(n){return new(n||t)(E(Gr))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-return-request-totals"]],standalone:!1,decls:2,vars:3,consts:[[4,"ngIf"],[1,"row","justify-content-end"],[1,"cx-summary","col-sm-12","col-md-6","col-lg-5","col-xl-4"],[1,"cx-summary-row"],[1,"col-6","cx-summary-label"],[1,"col-6","cx-summary-amount"],[1,"cx-summary-row","cx-summary-total"],[1,"cx-summary-row","cx-footnote"]],template:function(n,i){n&1&&(g(0,$m,27,18,"ng-container",0),a(1,"async")),n&2&&l("ngIf",d(1,1,i.returnRequest$))},dependencies:[M,j,B],encapsulation:2,changeDetection:0})}}return t})();var ju=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=P({providers:[ee({cmsComponents:{ReturnRequestOverviewComponent:{component:Hu},ReturnRequestItemsComponent:{component:Uu},ReturnRequestTotalsComponent:{component:qu}}})],imports:[ie,$e,Ae,ce,mt]})}}return t})(),Gu=(()=>{class t{constructor(e,n){this.returnRequestService=e,this.translation=n,this.PAGE_SIZE=5,this.returnRequests$=this.returnRequestService.getOrderReturnRequestList(this.PAGE_SIZE).pipe(H(i=>{i?.pagination?.sort&&(this.sortType=i.pagination.sort)})),this.tabTitleParam$=this.returnRequests$.pipe(x(i=>i?.pagination?.totalResults),W(fi),ne(1))}ngOnDestroy(){this.returnRequestService.clearOrderReturnRequestList()}changeSortCode(e){let n={sortCode:e,currentPage:0};this.sortType=e,this.fetchReturnRequests(n)}pageChange(e){let n={sortCode:this.sortType,currentPage:e};this.fetchReturnRequests(n)}getSortLabels(){return K([this.translation.translate("sorting.date"),this.translation.translate("sorting.rma")]).pipe(x(([e,n])=>({byDate:e,byRMA:n})))}fetchReturnRequests(e){this.returnRequestService.loadOrderReturnRequestList(this.PAGE_SIZE,e.currentPage,e.sortCode)}static{this.\u0275fac=function(n){return new(n||t)(E(bt),E(ye))}}static{this.\u0275cmp=w({type:t,selectors:[["cx-order-return-request-list"]],standalone:!1,decls:2,vars:3,consts:[[4,"ngIf"],[1,"container"],[1,"cx-order-history-body"],[1,"cx-order-history-sort","top"],[1,"cx-order-history-form-group","form-group"],["ariaControls","order-return-table",3,"sortListEvent","sortOptions","sortLabels","selectedOption","ariaLabel"],[1,"cx-order-history-pagination"],["paginationID","pagination-top",3,"viewPageEvent","pagination"],["id","order-return-table",1,"table","cx-order-history-table"],["class","cx-order-history-thead-mobile",4,"cxFeature"],[4,"ngFor","ngForOf"],[1,"cx-order-history-sort","bottom"],["paginationID","pagination-bottom",3,"viewPageEvent","pagination"],[1,"cx-order-history-thead-mobile"],["scope","col"],[1,"cx-order-history-code"],[1,"cx-order-history-label"],[1,"cx-order-history-value",3,"routerLink"],[1,"cx-order-history-placed"],[1,"cx-order-history-status"]],template:function(n,i){n&1&&(g(0,jm,4,1,"ng-container",0),a(1,"async")),n&2&&l("ngIf",d(1,1,i.returnRequests$))},dependencies:[de,M,he,Dt,ut,ze,j,Oe,B,ge],encapsulation:2,changeDetection:0})}}return t})(),Qu=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=P({providers:[ee({cmsComponents:{OrderReturnRequestListComponent:{component:Gu,guards:[re]}}})],imports:[ie,$e,_t,Ae,ce,Ze]})}}return t})(),_s=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=P({providers:[{provide:Ko,useExisting:Fu}],imports:[Mu,Du,Nu,Wm,iu,Vu,Qu,ju,cu,ou]})}}return t})();var Yu=(()=>{class t{constructor(e){this.converter=e}convert(e,n){return n===void 0&&(n=Z({},e)),e.entries&&(n.entries=e.entries.map(i=>this.convertOrderEntry(i,e.code,e.appliedProductPromotions))),e.consignments&&(n.consignments=e.consignments.map(i=>Ee(Z({},i),{entries:i.entries?.map(p=>Ee(Z({},p),{orderEntry:this.convertOrderEntry(p.orderEntry,e.code,e.appliedProductPromotions)}))}))),e.unconsignedEntries&&(n.unconsignedEntries=e.unconsignedEntries.map(i=>this.convertOrderEntry(i,e.code,e.appliedProductPromotions))),n}convertOrderEntry(e,n,i){return Ee(Z({},e),{product:this.converter.convert(e?.product,Sn),orderCode:n,promotions:this.converter.convert({item:e,promotions:i},Si)})}static{this.\u0275fac=function(n){return new(n||t)(v(De))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),zu=(()=>{class t{constructor(e){this.converter=e}convert(e,n){return n===void 0&&(n=Z({},e)),e.entries&&(n.entries=e.entries.map(i=>Ee(Z({},i),{product:this.converter.convert(i.product,Sn),promotions:this.converter.convert({item:i,promotions:e.appliedProductPromotions},Si)}))),n}static{this.\u0275fac=function(n){return new(n||t)(v(De))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Zu=(()=>{class t{constructor(e){this.converter=e}convert(e,n){return n===void 0&&(n=Z({},e)),e.returnEntries&&(n.returnEntries=e.returnEntries.map(i=>Ee(Z({},i),{orderEntry:this.convertOrderEntry(i.orderEntry)}))),n}convertOrderEntry(e){return Ee(Z({},e),{product:this.converter.convert(e?.product,Sn)})}static{this.\u0275fac=function(n){return new(n||t)(v(De))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Ku=(()=>{class t{convert(e,n){return n===void 0&&(n=Z({},e)),e.replenishmentStartDate&&(n.replenishmentStartDate=this.convertDate(e.replenishmentStartDate)),n}convertDate(e){let n=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hourCycle:"h23"});return`${e}T${n}:00${Co.getLocalTimezoneOffset()}`}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Qr={"Content-Type":"application/json"},Wu=(()=>{class t{constructor(e,n,i){this.http=e,this.occEndpoints=n,this.converter=i,this.logger=R(ue),this.occFieldsService=R(Oo),this.orderConfig=R(zt)}load(e,n){let i=this.orderConfig.showOrderQuoteLink?(()=>{let C=["orderDetail","quoteCode"].map(te=>({scopedData:{scope:te,userId:e,orderCode:n},url:this.occEndpoints.buildUrl(te,{urlParams:{userId:e,orderId:n}})})),U=this.occFieldsService.getOptimalUrlGroups(C);return Object.keys(U)[0]})():this.occEndpoints.buildUrl("orderDetail",{urlParams:{userId:e,orderId:n}}),p=new Se;return e===at&&(p=On.createHeader(yn,!0,p)),this.http.get(i,{headers:p}).pipe(this.converter.pipeable(ft))}loadHistory(e,n,i,p){let f={};n&&(f.pageSize=n.toString()),i&&(f.currentPage=i.toString()),p&&(f.sort=p.toString());let C=this.occEndpoints.buildUrl("orderHistory",{urlParams:{userId:e},queryParams:f});return this.http.get(C).pipe(this.converter.pipeable(wi))}getConsignmentTracking(e,n,i=_o){let p=this.occEndpoints.buildUrl("consignmentTracking",{urlParams:{userId:i,orderCode:e,consignmentCode:n}});return this.http.get(p).pipe(this.converter.pipeable(Jo))}cancel(e,n,i){let p=this.occEndpoints.buildUrl("cancelOrder",{urlParams:{userId:e,orderId:n}}),f=new Se(Z({},Qr));return this.http.post(p,i,{headers:f}).pipe(Q(C=>{throw Qe(C,this.logger)}))}createReturnRequest(e,n){let i=this.occEndpoints.buildUrl("returnOrder",{urlParams:{userId:e}}),p=new Se(Z({},Qr));return n=this.converter.convert(n,Xo),this.http.post(i,n,{headers:p}).pipe(Q(f=>{throw Qe(f,this.logger)}),this.converter.pipeable(jn))}loadReturnRequestList(e,n,i,p){let f={};n&&(f.pageSize=n.toString()),i&&(f.currentPage=i.toString()),p&&(f.sort=p.toString());let C=this.occEndpoints.buildUrl("orderReturns",{urlParams:{userId:e},queryParams:f});return this.http.get(C).pipe(this.converter.pipeable(ea))}loadReturnRequestDetail(e,n){let i=this.occEndpoints.buildUrl("orderReturnDetail",{urlParams:{userId:e,returnRequestCode:n}});return this.http.get(i).pipe(this.converter.pipeable(jn))}cancelReturnRequest(e,n,i){let p=this.occEndpoints.buildUrl("cancelReturn",{urlParams:{userId:e,returnRequestCode:n}}),f=new Se(Z({},Qr));return this.http.patch(p,i,{headers:f}).pipe(Q(C=>{throw Qe(C,this.logger)}))}static{this.\u0275fac=function(n){return new(n||t)(v(je),v(Ge),v(De))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),Ju=(()=>{class t{constructor(e,n,i){this.http=e,this.occEndpoints=n,this.converter=i,this.logger=R(ue)}placeOrder(e,n,i){let p=new Se({"Content-Type":"application/x-www-form-urlencoded"});return e===at&&(p=On.createHeader(yn,!0,p)),this.http.post(this.getPlaceOrderEndpoint(e,n,i.toString()),{},{headers:p}).pipe(Q(f=>{throw Qe(f,this.logger)}),Ut({shouldRetry:En}),this.converter.pipeable(ft))}placePaymentAuthorizedOrder(e,n,i){let p=new Se({"Content-Type":"application/x-www-form-urlencoded"});return e===at&&(p=On.createHeader(yn,!0,p)),this.http.post(this.getPlacePaymentAuthorizedOrderEndpoint(e,n,i.toString()),{},{headers:p}).pipe(Q(f=>{throw Qe(f,this.logger)}),Ut({shouldRetry:En}),Ut({shouldRetry:xo,maxTries:ho}),this.converter.pipeable(ft))}getPlaceOrderEndpoint(e,n,i){return this.occEndpoints.buildUrl("placeOrder",{urlParams:{userId:e},queryParams:{cartId:n,termsChecked:i}})}getPlacePaymentAuthorizedOrderEndpoint(e,n,i){return this.occEndpoints.buildUrl("placePaymentAuthorizedOrder",{urlParams:{userId:e},queryParams:{cartId:n,termsChecked:i}})}static{this.\u0275fac=function(n){return new(n||t)(v(je),v(Ge),v(De))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),Xu=(()=>{class t{constructor(e,n,i){this.http=e,this.occEndpoints=n,this.converter=i}load(e,n){return this.http.get(this.occEndpoints.buildUrl("replenishmentOrderDetails",{urlParams:{userId:e,replenishmentOrderCode:n}})).pipe(this.converter.pipeable(Yt))}loadReplenishmentDetailsHistory(e,n,i,p,f){let C={};return i&&(C.pageSize=i.toString()),p&&(C.currentPage=p.toString()),f&&(C.sort=f.toString()),this.http.get(this.occEndpoints.buildUrl("replenishmentOrderDetailsHistory",{urlParams:{userId:e,replenishmentOrderCode:n},queryParams:C})).pipe(this.converter.pipeable(wi))}cancelReplenishmentOrder(e,n){let i=new Se().set("Content-Type","application/json");return this.http.patch(this.occEndpoints.buildUrl("cancelReplenishmentOrder",{urlParams:{userId:e,replenishmentOrderCode:n}}),{},{headers:i}).pipe(this.converter.pipeable(Yt))}loadHistory(e,n,i,p){let f={};n&&(f.pageSize=n.toString()),i&&(f.currentPage=i.toString()),p&&(f.sort=p.toString());let C=this.occEndpoints.buildUrl("replenishmentOrderHistory",{urlParams:{userId:e},queryParams:f});return this.http.get(C).pipe(this.converter.pipeable(ta))}static{this.\u0275fac=function(n){return new(n||t)(v(je),v(Ge),v(De))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),e_=(()=>{class t{constructor(e,n,i){this.http=e,this.occEndpoints=n,this.converter=i,this.logger=R(ue)}scheduleReplenishmentOrder(e,n,i,p){n=this.converter.convert(n,Mi);let f=new Se().set("Content-Type","application/json");return this.http.post(this.getScheduleReplenishmentOrderEndpoint(p,e,i.toString()),n,{headers:f}).pipe(Q(C=>{throw Qe(C,this.logger)}),Ut({shouldRetry:En}),this.converter.pipeable(Yt))}getScheduleReplenishmentOrderEndpoint(e,n,i){return this.occEndpoints.buildUrl("scheduleReplenishmentOrder",{urlParams:{userId:e},queryParams:{cartId:n,termsChecked:i}})}static{this.\u0275fac=function(n){return new(n||t)(v(je),v(Ge),v(De))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),t_=(()=>{class t{constructor(){this.logger=R(ue),this.http=R(je),this.occEndpoints=R(Ge),this.converter=R(De)}getOrderAttachments(e,n){let i=new Se().set("Content-Type","application/json");return this.http.get(this.getOrderAttachmentsUrl(n,e),{headers:i}).pipe(Q(p=>{throw oe(p,this.logger)}))}downloadOrderAttachment(e,n,i){let p={responseType:"blob"};return this.http.get(this.getDownloadOrderAttachmentUrl(e,n,i),p).pipe(Q(f=>{throw oe(f,this.logger)}))}getOrderAttachmentsUrl(e,n){return this.occEndpoints.buildUrl("orderAttachments",{urlParams:{userId:n,orderId:e}})}getDownloadOrderAttachmentUrl(e,n,i){return this.occEndpoints.buildUrl("downloadOrderAttachment",{urlParams:{userId:e,orderId:n,attachmentId:i}})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),n_=(()=>{class t{convert(e,n){return n===void 0&&(n=Z({},e)),n}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),i_=(()=>{class t{constructor(e,n,i){this.http=e,this.occEndpoints=n,this.converter=i,this.logger=R(ue)}reorder(e,n){let i=new Se().set("Content-Type","application/json");return this.http.post(this.getReorderOrderEndpoint(e,n),{},{headers:i}).pipe(Q(p=>{throw Qe(p,this.logger)}),this.converter.pipeable(Li))}getReorderOrderEndpoint(e,n){return this.occEndpoints.buildUrl("reorder",{urlParams:{userId:n},queryParams:{orderCode:e}})}static{this.\u0275fac=function(n){return new(n||t)(v(je),v(Ge),v(De))}}static{this.\u0275prov=D({token:t,factory:t.\u0275fac})}}return t})(),r_={backend:{occ:{endpoints:{orderHistory:"users/${userId}/orders",orderDetail:"users/${userId}/orders/${orderId}?fields=FULL",quoteCode:"users/${userId}/orders/${orderId}?fields=sapQuoteCode",consignmentTracking:"users/${userId}/orders/${orderCode}/consignments/${consignmentCode}/tracking",cancelOrder:"users/${userId}/orders/${orderId}/cancellation",returnOrder:"users/${userId}/orderReturns?fields=BASIC,returnEntries(BASIC,refundAmount(formattedValue),orderEntry(basePrice(formattedValue),product(name,code,baseOptions,images(DEFAULT,galleryIndex)))),deliveryCost(formattedValue),totalPrice(formattedValue),subTotal(formattedValue)",orderReturns:"users/${userId}/orderReturns?fields=BASIC",orderReturnDetail:"users/${userId}/orderReturns/${returnRequestCode}?fields=BASIC,returnEntries(BASIC,refundAmount(formattedValue),orderEntry(basePrice(formattedValue),product(name,code,baseOptions,images(DEFAULT,galleryIndex)))),deliveryCost(formattedValue),totalPrice(formattedValue),subTotal(formattedValue)",cancelReturn:"users/${userId}/orderReturns/${returnRequestCode}",replenishmentOrderDetails:"users/${userId}/replenishmentOrders/${replenishmentOrderCode}?fields=FULL,costCenter(FULL),purchaseOrderNumber,paymentType,user",replenishmentOrderDetailsHistory:"users/${userId}/replenishmentOrders/${replenishmentOrderCode}/orders",cancelReplenishmentOrder:"users/${userId}/replenishmentOrders/${replenishmentOrderCode}?fields=FULL,costCenter(FULL),purchaseOrderNumber,paymentType,user",replenishmentOrderHistory:"users/${userId}/replenishmentOrders?fields=FULL,replenishmentOrders(FULL, purchaseOrderNumber)",placeOrder:"users/${userId}/orders?fields=FULL",placePaymentAuthorizedOrder:"users/${userId}/orders/paymentAuthorizedOrderPlacement?fields=FULL",orderAttachments:"users/${userId}/orders/${orderId}/attachments",downloadOrderAttachment:"users/${userId}/orders/${orderId}/attachments/${attachmentId}/download"}}}},gs=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=P({providers:[ee(r_),{provide:Zt,useClass:Wu},{provide:Jt,useClass:Xu},{provide:Kt,useClass:Ju},{provide:Xt,useClass:e_},{provide:Wt,useClass:i_},{provide:en,useClass:t_},{provide:jn,useExisting:Zu,multi:!0},{provide:ft,useExisting:Yu,multi:!0},{provide:Yt,useExisting:zu,multi:!0},{provide:Mi,useExisting:Ku,multi:!0},{provide:Li,useExisting:n_,multi:!0}],imports:[ie]})}}return t})();var fs=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=N({type:t})}static{this.\u0275inj=P({imports:[Za,gs,_s]})}}return t})();var vs=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=N({type:t});static \u0275inj=P({imports:[fs,oa]})};export{vs as OrderWrapperModule};
