import './polyfills.server.mjs';
import{D as b,La as q,Oe as Q,Re as h,Zf as S,a as g,cb as u,da as y,eb as f,fb as c,ga as I,hd as C,i as a,jd as D,ma as d,me as j,n as v,na as r,pa as s,q as M,qa as l,qe as m,wc as p,x as w}from"./chunk-JI3YDV22.mjs";import"./chunk-H4UZCO6D.mjs";var F=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=f({type:t,selectors:[["cx-qualtrics-embedded-feedback"]],standalone:!1,decls:0,vars:0,template:function(e,o){},encapsulation:2})}}return t})(),E={qualtrics:{}},P="qsi_js_loaded",k=(()=>{class t{get window(){return this.winRef.nativeWindow}constructor(i,e,o){this.winRef=i,this.platformId=e,this.scriptLoader=o,this.subscription=new g,this.logger=l(h),this.qsiLoaded$=D(this.platformId)&&this.window?w(this.window,P):a,this.qsi$=this.qsiLoaded$.pipe(y(()=>this.isDataLoaded()),M(n=>n?this.window?.QSI:a),b(n=>!!n),I(n=>this.qsiApi=n)),this.initialize()}addScript(i){this.hasScript(i)?this.run(!0):this.scriptLoader.embedScript({src:i})}hasScript(i){return!!this.winRef.document.querySelector(`script[src="${i}"]`)}initialize(){this.subscription.add(this.qsi$.subscribe(()=>this.run()))}run(i=!1){if(!this.qsiApi?.API){p()&&this.logger.log("The QSI api is not available");return}i&&this.qsiApi.API.unload(),this.qsiApi.API.load().done(this.qsiApi.API.run())}isDataLoaded(){return v(!0)}ngOnDestroy(){this.subscription?.unsubscribe()}static{this.\u0275fac=function(e){return new(e||t)(s(Q),s(q),s(S))}}static{this.\u0275prov=d({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),x=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275prov=d({token:t,factory:function(e){let o=null;return e?o=new(e||t):o=s(j),o},providedIn:"root"})}}return t})(),N=(()=>{class t{constructor(i,e){this.qualtricsLoader=i,this.config=e,this.logger=l(h),this.config.qualtrics?.scriptSource?this.qualtricsLoader.addScript(this.config.qualtrics.scriptSource):p()&&this.logger.warn("We're unable to add the Qualtrics deployment code as there is no script source defined in config.qualtrics.scriptSource.")}static{this.\u0275fac=function(e){return new(e||t)(u(k),u(x))}}static{this.\u0275cmp=f({type:t,selectors:[["cx-qualtrics"]],standalone:!1,decls:0,vars:0,template:function(e,o){},encapsulation:2})}}return t})(),A=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275mod=c({type:t})}static{this.\u0275inj=r({providers:[m({cmsComponents:{QualtricsEmbeddedFeedbackComponent:{component:F},QualtricsComponent:{component:N}}}),m(E)],imports:[C]})}}return t})();var J=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275mod=c({type:t})}static{this.\u0275inj=r({imports:[A]})}}return t})();export{J as QualtricsModule};
