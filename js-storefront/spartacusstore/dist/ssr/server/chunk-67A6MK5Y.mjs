import './polyfills.server.mjs';
import{c as ce}from"./chunk-M6GR7OUU.mjs";import"./chunk-HCL456IH.mjs";import{X as Z,Z as ee,_ as te,aa as ie,oa as ne,pa as oe,qa as re,wa as ae}from"./chunk-M3PBDWUL.mjs";import{$g as G,D as L,Db as p,Eb as u,Fb as x,Gb as m,Hb as g,Jb as v,Lb as y,M,Mb as o,Rd as N,Sb as E,Tb as b,Td as Q,Ub as S,Vb as I,Wb as f,Xa as r,Xb as h,Yc as $,Ze as U,ah as J,bd as D,cb as W,cc as V,eb as P,fb as R,ga as A,gf as Y,hd as j,jb as l,kc as s,lc as _,na as w,nh as K,oh as X,pc as k,q as B,qa as F,qe as H,tb as a,tg as q,ug as O,wa as T,xa as C,yg as z}from"./chunk-JI3YDV22.mjs";import"./chunk-H4UZCO6D.mjs";var se=["addToWishlistButton"],_e=["removeFromWishlistButton"],de=()=>({cxRoute:"login"});function pe(t,d){if(t&1){let e=v();p(0,"div")(1,"button",7,2),s(3,"async"),s(4,"cxTranslate"),y("click",function(){let c=T(e).ngIf,n=o(6);return C(n.remove(c))}),x(5,"cx-icon",8),p(6,"span",9),f(7),s(8,"cxTranslate"),u()()()}if(t&2){let e=o(6);r(),a("disabled",_(3,4,e.loading$))("cxAtMessage",_(4,6,"addToWishList.removedFromWishList")),r(4),a("type",e.iconTypes.HEART),r(2),h(_(8,8,"addToWishList.remove"))}}function le(t,d){if(t&1){let e=v();p(0,"button",10,3),s(2,"async"),s(3,"cxTranslate"),y("click",function(){T(e);let c=o(5).ngIf,n=o();return C(n.add(c))}),x(4,"cx-icon",8),p(5,"span",9),f(6),s(7,"cxTranslate"),u()()}if(t&2){let e=o(6);a("disabled",_(2,4,e.loading$))("cxAtMessage",_(3,6,"addToWishList.addedToWishList")),r(4),a("type",e.iconTypes.EMPTY_HEART),r(2),h(_(7,8,"addToWishList.add"))}}function me(t,d){if(t&1&&(m(0),l(1,pe,9,10,"div",5)(2,le,8,10,"ng-template",null,1,k),g()),t&2){let e=I(3),i=o(2).ngIf,c=o(2).ngIf,n=o();r(),a("ngIf",n.getProductInWishList(c,i))("ngIfElse",e)}}function ge(t,d){if(t&1){let e=v();p(0,"div")(1,"button",11),s(2,"async"),s(3,"cxTranslate"),y("click",function(){let c=T(e).ngIf,n=o(6);return C(n.remove(c))}),x(4,"cx-icon",8),p(5,"span",9),f(6),s(7,"cxTranslate"),u()()()}if(t&2){let e=o(6);r(),a("disabled",_(2,4,e.loading$))("cxAtMessage",_(3,6,"addToWishList.removedFromWishList")),r(3),a("type",e.iconTypes.HEART),r(2),h(_(7,8,"addToWishList.remove"))}}function ue(t,d){if(t&1){let e=v();p(0,"button",12),s(1,"async"),s(2,"cxTranslate"),y("click",function(){T(e);let c=o(5).ngIf,n=o();return C(n.add(c))}),x(3,"cx-icon",8),p(4,"span",9),f(5),s(6,"cxTranslate"),u()()}if(t&2){let e=o(6);a("disabled",_(1,4,e.loading$))("cxAtMessage",_(2,6,"addToWishList.addedToWishList")),r(3),a("type",e.iconTypes.EMPTY_HEART),r(2),h(_(6,8,"addToWishList.add"))}}function xe(t,d){if(t&1&&(m(0),l(1,ge,8,10,"div",5)(2,ue,7,10,"ng-template",null,1,k),g()),t&2){let e=I(3),i=o(2).ngIf,c=o(2).ngIf,n=o();r(),a("ngIf",n.getProductInWishList(c,i))("ngIfElse",e)}}function fe(t,d){t&1&&(m(0),l(1,me,4,2,"ng-container",6)(2,xe,4,2,"ng-container",6),g()),t&2&&(r(),a("cxFeature","a11yLinkBtnsToTertiaryBtns"),r(),a("cxFeature","!a11yLinkBtnsToTertiaryBtns"))}function he(t,d){if(t&1&&(m(0),l(1,fe,3,2,"ng-container",4),g()),t&2){let e=o(3);r(),a("ngIf",e.hasStock)}}function Te(t,d){if(t&1&&(m(0),l(1,he,2,1,"ng-container",4),s(2,"async"),g()),t&2){let e=o(2);r(),a("ngIf",_(2,1,e.wishListEntries$))}}function Ce(t,d){if(t&1&&(m(0),l(1,Te,3,3,"ng-container",5),s(2,"async"),g()),t&2){let e=o(),i=I(3);r(),a("ngIf",_(2,2,e.userLoggedIn$))("ngIfElse",i)}}function ve(t,d){if(t&1&&(m(0),p(1,"a",13),s(2,"cxUrl"),x(3,"cx-icon",8),p(4,"span",9),f(5),s(6,"cxTranslate"),u()(),g()),t&2){let e=o(2);r(),a("routerLink",_(2,3,V(7,de))),r(2),a("type",e.iconTypes.EMPTY_HEART),r(2),h(_(6,5,"addToWishList.anonymous"))}}function ye(t,d){if(t&1&&l(0,ve,7,8,"ng-container",4),t&2){let e=o();a("ngIf",e.hasStock)}}var Le=(()=>{class t{constructor(e,i,c){this.wishListFacade=e,this.currentProductService=i,this.authService=c,this.product$=this.currentProductService.getProduct().pipe(L(U),A(n=>this.setStockInfo(n))),this.featureConfigService=F(q),this.userLoggedIn$=this.authService.isUserLoggedIn().pipe(A(n=>{n&&(this.wishListEntries$=this.getWishListEntries(),this.loading$=this.wishListFacade.getWishListLoading())})),this.hasStock=!1,this.iconTypes=Z}add(e){e.code&&(this.wishListFacade.addEntry(e.code),this.featureConfigService.isEnabled("a11yAddToWishlistFocus")&&this.restoreFocus())}remove(e){this.wishListFacade.removeEntry(e),this.featureConfigService.isEnabled("a11yAddToWishlistFocus")&&this.restoreFocus()}getProductInWishList(e,i){return i.find(n=>n.product?.code===e.code)}setStockInfo(e){this.hasStock=!!(e.stock&&e.stock.stockLevelStatus!=="outOfStock")}getWishListEntries(){return this.wishListFacade.getWishList().pipe(L(e=>!!e),B(e=>e.entries??[]))}restoreFocus(){this.loading$.pipe(L(e=>!e),M(1)).subscribe(()=>{this.removeFromWishlistButton?.nativeElement.focus()||this.addToWishlistButton?.nativeElement.focus()})}static{this.\u0275fac=function(i){return new(i||t)(W(ce),W(ne),W(Y))}}static{this.\u0275cmp=P({type:t,selectors:[["cx-add-to-wishlist"]],viewQuery:function(i,c){if(i&1&&(E(se,5),E(_e,5)),i&2){let n;b(n=S())&&(c.addToWishlistButton=n.first),b(n=S())&&(c.removeFromWishlistButton=n.first)}},standalone:!1,decls:4,vars:3,consts:[["loginPrompt",""],["addItem",""],["removeFromWishlistButton",""],["addToWishlistButton",""],[4,"ngIf"],[4,"ngIf","ngIfElse"],[4,"cxFeature"],[1,"btn","btn-tertiary","button-remove",3,"click","disabled","cxAtMessage"],["aria-hidden","true",3,"type"],[1,"button-text"],[1,"btn","btn-tertiary","button-add",3,"click","disabled","cxAtMessage"],[1,"btn","btn-link","button-remove","cx-action-link",3,"click","disabled","cxAtMessage"],[1,"btn","btn-link","button-add","cx-action-link",3,"click","disabled","cxAtMessage"],["cxBtnLikeLink","",1,"btn","btn-link","button-add-link","cx-action-link",3,"routerLink"]],template:function(i,c){i&1&&(l(0,Ce,3,4,"ng-container",4),s(1,"async"),l(2,ye,1,1,"ng-template",null,0,k)),i&2&&a("ngIf",_(1,1,c.product$))},dependencies:[$,ee,N,ie,O,oe,D,K,G],encapsulation:2,changeDetection:0})}}return t})(),je=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=R({type:t})}static{this.\u0275inj=w({providers:[H({cmsComponents:{AddToWishListComponent:{component:Le}}})],imports:[j,X,te,Q,J,ae,z,re]})}}return t})();export{Le as AddToWishListComponent,je as AddToWishListModule};
