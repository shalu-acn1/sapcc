import './polyfills.server.mjs';
import{a as ta,b as ia}from"./chunk-TOOH3J7N.mjs";import{a as gt,b as aa,c as ht,d as na,e as ra,f as oa,g as ft,h as sa,i as xt,j as ca,k as da,l as la,n as W,o as G,p as pa,q as va}from"./chunk-3MVLZVKE.mjs";import{c as Wi}from"./chunk-4BKK7BLP.mjs";import{a as Xe,b as ue,f as Xi,i as ea,t as St}from"./chunk-PEKFRSF3.mjs";import"./chunk-QILLSGGT.mjs";import{C as xe,H as Je,O as Ki,P as Zi,R as Ji,T as mt,U as _t,V as Be,q as Ze,r as ut,s as zi}from"./chunk-HCL456IH.mjs";import{$ as vt,Aa as ji,B as wi,C as Mi,Ca as Pi,Ea as Ni,Ha as Ui,Ia as Qi,J as Oi,K as Vi,L as $i,M as $e,Oa as ze,P as fe,Pa as Ke,U as Bi,W as ki,X as dt,Z as lt,_ as pt,b as Ti,bb as qi,c as We,d as Di,e as Ii,g as bi,gb as Gi,hb as Yi,j as Ve,l as Ai,p as Fi,s as Li,tc as Hi,ua as Ct,w as Ri}from"./chunk-M3PBDWUL.mjs";import{$ as Qe,$d as k,$f as pe,$g as st,Ae as D,B as Kt,Bf as hi,D as O,Db as c,Eb as p,Fb as y,Ga as ti,Gb as E,Ge as Le,Hb as T,I as J,Jb as Q,K as Zt,Lb as F,M as B,Mb as m,Pb as nt,Q as Ee,Rd as rt,Re as _i,Sb as De,T as Jt,Tb as Ie,Td as Fe,Ub as be,Vb as ie,Wb as v,We as de,Xa as n,Xb as ae,Xc as oi,Xg as ot,Yb as C,Yc as re,Yd as pi,Zc as si,_c as ci,_d as vi,a as Z,aa as Xt,ah as He,bd as oe,ca as ei,cb as f,cc as ai,da as I,db as Te,dc as L,eb as ee,fb as $,fc as ni,fe as ce,g as Ne,ga as N,ge as Ci,gf as Si,gg as fi,hc as ri,hd as se,he as z,hg as ve,i as Ht,ia as ge,ie as ui,ig as Re,jb as g,kc as o,kh as ct,l as Ue,lc as s,lg as we,m as Wt,ma as U,mc as Ae,n as H,na as V,nh as Ce,of as gi,og as b,oh as Oe,pa as h,pc as ne,pg as j,q as S,qa as X,qe,r as Se,re as mi,s as zt,sb as te,tb as d,tg as xi,ud as di,uf as le,ug as Ge,vb as ii,vg as yi,wa as R,wf as he,xa as w,xg as Ei,yd as li,yg as Me,zg as Ye}from"./chunk-JI3YDV22.mjs";import{a as q,b as K}from"./chunk-H4UZCO6D.mjs";var et=["element"],Ma=()=>({cxRoute:"savedCarts"});function Oa(t,r){if(t&1){let e=Q();E(0),c(1,"div",2)(2,"a",3),o(3,"cxUrl"),c(4,"span"),v(5),o(6,"cxTranslate"),p()(),c(7,"button",4,0),o(9,"async"),F("click",function(){let a=R(e).ngIf,l=m();return w(l.saveCart(a))}),c(10,"span"),v(11),o(12,"cxTranslate"),p()()(),T()}if(t&2){let e=m();n(2),d("routerLink",s(3,5,ai(13,Ma))),n(3),ae(s(6,7,"addToSavedCart.savedCarts")),n(2),ii("disabled",s(9,9,e.disableSaveCartForLater$)),n(4),ae(s(12,11,"addToSavedCart.saveCartForLater"))}}function Va(t,r){if(t&1){let e=Q();E(0),c(1,"div",2)(2,"div",3)(3,"button",4,0),F("click",function(){let a=R(e).ngIf,l=m();return w(l.openDialog(a,l.savedCartFormType.DELETE))}),v(5),o(6,"cxTranslate"),p()(),c(7,"div",3)(8,"button",5,0),F("click",function(){let a=R(e).ngIf,l=m();return w(l.openDialog(a,l.savedCartFormType.RESTORE))}),v(10),o(11,"cxTranslate"),p()()(),T()}t&2&&(n(5),C(" ",s(6,2,"savedCartDetails.deleteSavedCart")," "),n(5),C(" ",s(11,4,"savedCartList.makeCartActive")," "))}var $a=(t,r,e)=>({displayAddToCart:!0,addToCartString:t,optionalBtn:r,cartType:e}),Ba=(t,r,e,i,a)=>({cartId:t,cartIsLoading:r,items:e,promotionLocation:i,options:a});function ka(t,r){t&1&&(y(0,"div",7),o(1,"cxTranslate")),t&2&&te("aria-label",s(1,1,"common.loaded"))}function ja(t,r){}function Pa(t,r){if(t&1&&(E(0),g(1,ka,2,3,"div",4),c(2,"div",5),g(3,ja,0,0,"ng-template",6),o(4,"async"),o(5,"async"),p(),T()),t&2){let e=m().ngIf,i=ie(3),a=m();n(),d("cxFeature","!a11yRemoveStatusLoadedRole"),n(2),d("cxOutlet",a.CartOutlets.CART_ITEM_LIST)("cxOutletContext",ri(11,Ba,e.code,!s(4,3,a.cartLoaded$),e.entries,a.CartLocation.SavedCart,ni(7,$a,s(5,5,a.buyItAgainTranslation$),i,a.CartType.SELECTIVE)))}}function Na(t,r){if(t&1&&y(0,"cx-add-to-cart",8),t&2){let e=r.$implicit,i=m().ngIf;d("productCode",e.item.product==null?null:e.item.product.code)("product",e.item.product)("showQuantity",!1)("options",e.options)("pickupStore",e.item.deliveryPointOfService==null?null:e.item.deliveryPointOfService.name)("savedCart",i)}}function Ua(t,r){if(t&1&&(E(0),g(1,Pa,6,17,"ng-container",3)(2,Na,1,6,"ng-template",null,1,ne),T()),t&2){let e=r.ngIf;m();let i=ie(3);n(),d("ngIf",(e==null||e.entries==null?null:e.entries.length)>0)("ngIfElse",i)}}function Qa(t,r){t&1&&(c(0,"div",9),y(1,"cx-spinner"),p())}function qa(t,r){if(t&1){let e=Q();E(0),c(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5),y(5,"cx-card",6),o(6,"async"),c(7,"button",7,0),o(9,"cxTranslate"),o(10,"cxTranslate"),F("click",function(){let a=R(e).ngIf,l=m();return w(l.openDialog(a))}),y(11,"cx-icon",8),p()(),c(12,"div",9),y(13,"cx-card",10),o(14,"async"),p()(),c(15,"div",4),y(16,"cx-card",6),o(17,"async"),p(),c(18,"div",4),y(19,"cx-card",6),o(20,"cxDate"),o(21,"async"),y(22,"cx-card",6),o(23,"async"),p(),c(24,"div",4),y(25,"cx-card",6),o(26,"async"),y(27,"cx-card",6),o(28,"async"),p()()(),T()}if(t&2){let e=r.ngIf,i=m();n(5),d("content",s(6,12,i.getCartName(e==null?null:e.name))),n(2),te("aria-label",s(9,14,"savedCartDetails.editSavedCart"))("title",s(10,16,"savedCartDetails.editSavedCart")),n(4),d("type",i.iconTypes.PENCIL),n(2),d("content",s(14,18,i.getCartDescription(e==null?null:e.description)))("truncateText",!0)("charactersLimit",30),n(3),d("content",s(17,20,i.getCartId(e==null?null:e.code))),n(3),d("content",s(21,24,i.getDateSaved(s(20,22,e==null?null:e.saveTime)))),n(3),d("content",s(23,26,i.getCartItems(e==null?null:e.totalItems))),n(3),d("content",s(26,28,i.getCartQuantity(e==null?null:e.totalUnitCount))),n(2),d("content",s(28,30,i.getCartTotal(e==null||e.totalPriceWithTax==null?null:e.totalPriceWithTax.formattedValue)))}}var ua=t=>({count:t}),ke=t=>({savedCartId:t}),je=t=>({cxRoute:"savedCartsDetails",params:t});function Ga(t,r){t&1&&(y(0,"div",7),o(1,"cxTranslate")),t&2&&te("aria-label",s(1,1,"common.loaded"))}function Ya(t,r){t&1&&(c(0,"th",16),v(1),o(2,"cxTranslate"),p()),t&2&&(n(),C(" ",s(2,1,"savedCartList.quantityFull")," "))}function Ha(t,r){t&1&&(c(0,"th",16),v(1),o(2,"cxTranslate"),p()),t&2&&(n(),C(" ",s(2,1,"savedCartList.quantity")," "))}function Wa(t,r){t&1&&(c(0,"th",21),v(1),o(2,"cxTranslate"),p()),t&2&&(n(),C(" ",s(2,1,"savedCartList.quantityFull")," "))}function za(t,r){t&1&&(c(0,"th",21),v(1),o(2,"cxTranslate"),p()),t&2&&(n(),C(" ",s(2,1,"savedCartList.quantity")," "))}function Ka(t,r){t&1&&(c(0,"thead",17)(1,"tr")(2,"th",18),v(3),o(4,"cxTranslate"),p(),c(5,"th",18),v(6),o(7,"cxTranslate"),p(),c(8,"th",18),v(9),o(10,"cxTranslate"),p(),g(11,Wa,3,3,"th",19)(12,za,3,3,"th",19),c(13,"th",20),v(14),o(15,"cxTranslate"),p(),c(16,"th",18),v(17),o(18,"cxTranslate"),p()()()),t&2&&(n(3),C(" ",s(4,7,"savedCartList.cartName")," "),n(3),C(" ",s(7,9,"savedCartList.cartId")," "),n(3),C(" ",s(10,11,"savedCartList.dateSaved")," "),n(2),d("cxFeature","a11yQTY2Quantity"),n(),d("cxFeature","!a11yQTY2Quantity"),n(2),C(" ",s(15,13,"savedCartList.total")," "),n(3),C(" ",s(18,15,"savedCartList.actions")," "))}function Za(t,r){t&1&&(c(0,"thead",11)(1,"thead",11)(2,"th",12),v(3),o(4,"cxTranslate"),p(),c(5,"th",12),v(6),o(7,"cxTranslate"),p(),c(8,"th",12),v(9),o(10,"cxTranslate"),p(),g(11,Ya,3,3,"th",13)(12,Ha,3,3,"th",13),c(13,"th",14),v(14),o(15,"cxTranslate"),p(),c(16,"th",12),v(17),o(18,"cxTranslate"),p()(),g(19,Ka,19,17,"thead",15),p()),t&2&&(n(3),C(" ",s(4,8,"savedCartList.cartName")," "),n(3),C(" ",s(7,10,"savedCartList.cartId")," "),n(3),C(" ",s(10,12,"savedCartList.dateSaved")," "),n(2),d("cxFeature","a11yQTY2Quantity"),n(),d("cxFeature","!a11yQTY2Quantity"),n(2),C(" ",s(15,14,"savedCartList.total")," "),n(3),C(" ",s(18,16,"savedCartList.actions")," "),n(2),d("cxFeature","a11yTableHeaderReadout"))}function Ja(t,r){t&1&&(c(0,"div",24),v(1),o(2,"cxTranslate"),p()),t&2&&(n(),C(" ",s(2,1,"savedCartList.quantityFull")," "))}function Xa(t,r){t&1&&(c(0,"div",24),v(1),o(2,"cxTranslate"),p()),t&2&&(n(),C(" ",s(2,1,"savedCartList.quantity")," "))}function en(t,r){if(t&1){let e=Q();c(0,"tr",22),F("click",function(){let a=R(e).$implicit,l=m(4);return w(l.goToSavedCartDetails(a))}),c(1,"td",23)(2,"div",24),v(3),o(4,"cxTranslate"),p(),c(5,"a",25),o(6,"cxUrl"),v(7),p()(),c(8,"td",26)(9,"div",24),v(10),o(11,"cxTranslate"),p(),c(12,"a",25),o(13,"cxUrl"),v(14),p()(),c(15,"td",27)(16,"div",24),v(17),o(18,"cxTranslate"),p(),c(19,"a",25),o(20,"cxUrl"),v(21),o(22,"cxDate"),p()(),c(23,"td",28),g(24,Ja,3,3,"div",29)(25,Xa,3,3,"div",29),c(26,"a",25),o(27,"cxUrl"),v(28),p()(),c(29,"td",30)(30,"div",24),v(31),o(32,"cxTranslate"),p(),c(33,"a",25),o(34,"cxUrl"),v(35),p()(),c(36,"td",31)(37,"div",24),v(38),o(39,"cxTranslate"),p(),c(40,"button",32,2),F("click",function(a){let l=R(e).$implicit,A=m(4);return w(A.openDialog(a,l))}),v(42),o(43,"cxTranslate"),p()()()}if(t&2){let e=r.$implicit;n(3),C(" ",s(4,18,"savedCartList.cartName")," "),n(2),d("routerLink",s(6,20,L(45,je,L(43,ke,e==null?null:e.code)))),n(2),C(" ",e==null?null:e.name,""),n(3),C(" ",s(11,22,"savedCartList.cartId")," "),n(2),d("routerLink",s(13,24,L(49,je,L(47,ke,e==null?null:e.code)))),n(2),ae(e==null?null:e.code),n(3),C(" ",s(18,26,"savedCartList.dateSaved")," "),n(2),d("routerLink",s(20,28,L(53,je,L(51,ke,e==null?null:e.code)))),n(2),ae(Ae(22,30,e==null?null:e.saveTime,"longDate")),n(3),d("cxFeature","a11yQTY2Quantity"),n(),d("cxFeature","!a11yQTY2Quantity"),n(),d("routerLink",s(27,33,L(57,je,L(55,ke,e==null?null:e.code)))),n(2),C(" ",e==null?null:e.totalUnitCount,""),n(3),C(" ",s(32,35,"savedCartList.total")," "),n(2),d("routerLink",s(34,37,L(61,je,L(59,ke,e==null?null:e.code)))),n(2),C(" ",e==null||e.totalPrice==null?null:e.totalPrice.formattedValue,""),n(3),C(" ",s(39,39,"savedCartList.actions")," "),n(4),C(" ",s(43,41,"savedCartList.makeCartActive")," ")}}function tn(t,r){if(t&1&&(E(0),c(1,"table",8),g(2,Za,20,18,"thead",9),c(3,"tbody"),g(4,en,44,63,"tr",10),p()(),T()),t&2){let e=m(2).ngIf;n(2),d("cxFeature","!a11yTableHeaderReadout"),n(2),d("ngForOf",e)}}function an(t,r){t&1&&(c(0,"div",33)(1,"div",34)(2,"div"),v(3),o(4,"cxTranslate"),p()()()),t&2&&(n(3),ae(s(4,1,"savedCartList.notFound")))}function nn(t,r){if(t&1&&(E(0),g(1,Ga,2,3,"div",5),c(2,"div",6)(3,"h2"),v(4),o(5,"cxTranslate"),p()(),g(6,tn,5,2,"ng-container",4)(7,an,5,3,"ng-template",null,1,ne),T()),t&2){let e=ie(8),i=m().ngIf;n(),d("cxFeature","!a11yRemoveStatusLoadedRole"),n(3),C(" ",Ae(5,4,"savedCartList.savedCarts",L(7,ua,i.length))," "),n(2),d("ngIf",(i==null?null:i.length)>0)("ngIfElse",e)}}function rn(t,r){t&1&&(c(0,"div",35),y(1,"cx-spinner"),p())}function on(t,r){if(t&1&&(E(0),g(1,nn,9,9,"ng-container",4),o(2,"async"),g(3,rn,2,0,"ng-template",null,0,ne),T()),t&2){let e=ie(4),i=m();n(),d("ngIf",!s(2,2,i.isLoading$))("ngIfElse",e)}}var sn=t=>({name:t}),ma=t=>({label:t});function cn(t,r){t&1&&(E(0),v(1),o(2,"cxTranslate"),T()),t&2&&(n(),C(" ",s(2,1,"savedCartDialog.editSavedCart")," "))}function dn(t,r){t&1&&(E(0),v(1),o(2,"cxTranslate"),T()),t&2&&(n(),C(" ",s(2,1,"savedCartDialog.deleteSavedCart")," "))}function ln(t,r){t&1&&(E(0),v(1),o(2,"cxTranslate"),T()),t&2&&(n(),C(" ",s(2,1,"savedCartDialog.saveForLater")," "))}function pn(t,r){t&1&&(E(0),v(1),o(2,"cxTranslate"),T()),t&2&&(n(),C(" ",s(2,1,"savedCartDialog.restoreSavedCart")," "))}function vn(t,r){if(t&1&&(c(0,"h3",13),g(1,cn,3,3,"ng-container",14)(2,dn,3,3,"ng-container",14)(3,ln,3,3,"ng-container",14)(4,pn,3,3,"ng-container",14),p()),t&2){let e=m(2);n(),d("ngSwitchCase",e.savedCartFormType.EDIT),n(),d("ngSwitchCase",e.savedCartFormType.DELETE),n(),d("ngSwitchCase",e.savedCartFormType.SAVE),n(),d("ngSwitchCase",e.savedCartFormType.RESTORE)}}function Cn(t,r){t&1&&(E(0),v(1),o(2,"cxTranslate"),T()),t&2&&(n(),C(" ",s(2,1,"savedCartDialog.editSavedCart")," "))}function un(t,r){t&1&&(E(0),v(1),o(2,"cxTranslate"),T()),t&2&&(n(),C(" ",s(2,1,"savedCartDialog.deleteSavedCart")," "))}function mn(t,r){t&1&&(E(0),v(1),o(2,"cxTranslate"),T()),t&2&&(n(),C(" ",s(2,1,"savedCartDialog.saveForLater")," "))}function _n(t,r){t&1&&(E(0),v(1),o(2,"cxTranslate"),T()),t&2&&(n(),C(" ",s(2,1,"savedCartDialog.restoreSavedCart")," "))}function Sn(t,r){if(t&1&&(c(0,"div",13),g(1,Cn,3,3,"ng-container",14)(2,un,3,3,"ng-container",14)(3,mn,3,3,"ng-container",14)(4,_n,3,3,"ng-container",14),p()),t&2){let e=m(2);n(),d("ngSwitchCase",e.savedCartFormType.EDIT),n(),d("ngSwitchCase",e.savedCartFormType.DELETE),n(),d("ngSwitchCase",e.savedCartFormType.SAVE),n(),d("ngSwitchCase",e.savedCartFormType.RESTORE)}}function gn(t,r){t&1&&(c(0,"div",18),v(1),o(2,"cxTranslate"),p()),t&2&&(n(),C(" ",s(2,1,"savedCartDialog.quantityFull")," "))}function hn(t,r){t&1&&(c(0,"div",18),v(1),o(2,"cxTranslate"),p()),t&2&&(n(),C(" ",s(2,1,"savedCartDialog.quantity")," "))}function fn(t,r){if(t&1&&(c(0,"div",27)(1,"label")(2,"span",28),v(3),o(4,"cxTranslate"),p(),y(5,"input",29),o(6,"cxTranslate"),p()()),t&2){let e,i=m(4);n(3),C(" ",s(4,3,"savedCartDialog.nameOfCloneCart")," "),n(2),nt("placeholder",Ae(6,5,"savedCartDialog.defaultCloneCartName",L(8,sn,(e=i.form.get("name"))==null?null:e.value))),d("maxLength",i.nameMaxLength)}}function xn(t,r){if(t&1){let e=Q();E(0),c(1,"div",23)(2,"input",24),F("change",function(){R(e);let a=m(3);return w(a.toggleIsCloneSavedCart())}),p(),c(3,"label",25),v(4),o(5,"cxTranslate"),p()(),g(6,fn,7,10,"div",26),T()}if(t&2){let e=m(3);n(2),d("checked",e.isCloneSavedCart),n(2),ae(s(5,3,"savedCartDialog.keepCopySavedCart")),n(2),d("ngIf",e.isCloneSavedCart)}}function yn(t,r){if(t&1){let e=Q();c(0,"button",31),o(1,"async"),F("click",function(){R(e);let a=m(4);return w(a.deleteCart(a.cart.code))}),v(2),o(3,"cxTranslate"),p()}if(t&2){let e=m(4);d("disabled",s(1,2,e.isDisableDeleteButton$)),n(2),C(" ",s(3,4,"savedCartDialog.delete")," ")}}function En(t,r){if(t&1&&(E(0),g(1,yn,4,6,"button",30),T()),t&2){let e=m(3);n(),d("ngIf",e.cart.code)}}function Tn(t,r){if(t&1){let e=Q();c(0,"button",31),o(1,"async"),F("click",function(){R(e);let a=m(4);return w(a.restoreSavedCart(a.cart.code))}),v(2),o(3,"cxTranslate"),p()}if(t&2){let e=m(4);d("disabled",s(1,2,e.isDisableRestoreButton$)),n(2),C(" ",s(3,4,"savedCartDialog.restore")," ")}}function Dn(t,r){if(t&1&&g(0,Tn,4,6,"button",30),t&2){let e=m(3);d("ngIf",e.cart.code)}}function In(t,r){if(t&1){let e=Q();E(0),c(1,"p",15),v(2),o(3,"cxTranslate"),p(),c(4,"div",16)(5,"div",17)(6,"div",18),v(7),o(8,"cxTranslate"),p(),c(9,"div",19),v(10),p()(),c(11,"div",17)(12,"div",18),v(13),o(14,"cxTranslate"),p(),c(15,"div",19),v(16),p()(),c(17,"div",17)(18,"div",18),v(19),o(20,"cxTranslate"),p(),c(21,"div",19),v(22),p()(),c(23,"div",17),g(24,gn,3,3,"div",20)(25,hn,3,3,"div",20),c(26,"div",19),v(27),p()(),c(28,"div",17)(29,"div",18),v(30),o(31,"cxTranslate"),p(),c(32,"div",19),v(33),p()()(),g(34,xn,7,5,"ng-container",2),c(35,"div",21)(36,"button",22),F("click",function(){R(e);let a=m(2);return w(a.close("Close Save Cart Dialog"))}),v(37),o(38,"cxTranslate"),p(),g(39,En,2,1,"ng-container",12)(40,Dn,1,1,"ng-template",null,1,ne),p(),T()}if(t&2){let e=ie(41),i=m(2);n(2),C(" ",s(3,16,i.layoutOption===i.savedCartFormType.DELETE?"savedCartDialog.followingCartDelete":"savedCartDialog.followingCartRestore")," "),n(5),C(" ",s(8,18,"savedCartDialog.name")," "),n(3),C(" ",i.cart==null?null:i.cart.name," "),n(3),C(" ",s(14,20,"savedCartDialog.id")," "),n(3),C(" ",i.cart==null?null:i.cart.code," "),n(3),C(" ",s(20,22,"savedCartDialog.description")," "),n(3),C(" ",i.cart==null?null:i.cart.description," "),n(2),d("cxFeature","a11yQTY2Quantity"),n(),d("cxFeature","!a11yQTY2Quantity"),n(2),C(" ",i.cart==null?null:i.cart.totalUnitCount," "),n(3),C(" ",s(31,24,"savedCartDialog.total")," "),n(3),C(" ",i.cart==null||i.cart.totalPriceWithTax==null?null:i.cart.totalPriceWithTax.formattedValue," "),n(),d("ngIf",i.layoutOption===i.savedCartFormType.RESTORE),n(3),C(" ",s(38,26,"savedCartDialog.cancel")," "),n(2),d("ngIf",i.layoutOption===i.savedCartFormType.DELETE)("ngIfElse",e)}}function bn(t,r){t&1&&(E(0),c(1,"p",15),v(2),o(3,"cxTranslate"),p(),y(4,"cx-form-required-legend"),T()),t&2&&(n(2),C(" ",s(3,1,"savedCartDialog.itemsSavedForLater")," "))}function An(t,r){if(t&1&&(y(0,"cx-form-errors",42),o(1,"cxTranslate")),t&2){let e=m(3);d("translationParams",L(4,ma,s(1,2,"savedCartDialog.savedCartName")))("control",e.form.get("name"))}}function Fn(t,r){if(t&1&&y(0,"cx-form-errors",43),t&2){let e=m(3);d("control",e.form.get("name"))}}function Ln(t,r){if(t&1&&(y(0,"cx-form-errors",44),o(1,"cxTranslate")),t&2){let e=m(3);d("translationParams",L(4,ma,s(1,2,"savedCartDialog.savedCartDescription")))("control",e.form.get("description"))}}function Rn(t,r){if(t&1&&y(0,"cx-form-errors",43),t&2){let e=m(3);d("control",e.form.get("description"))}}function wn(t,r){if(t&1){let e=Q();g(0,bn,5,3,"ng-container",2),c(1,"div",16),E(2),c(3,"label")(4,"span",32),v(5),o(6,"cxTranslate"),y(7,"cx-form-required-asterisks"),p(),y(8,"input",33),g(9,An,2,6,"cx-form-errors",34)(10,Fn,1,1,"cx-form-errors",35),p(),T(),p(),c(11,"div",16)(12,"label")(13,"span",32),v(14),o(15,"cxTranslate"),c(16,"span",36),v(17),o(18,"cxTranslate"),p()(),y(19,"textarea",37),g(20,Ln,2,6,"cx-form-errors",38)(21,Rn,1,1,"cx-form-errors",35),c(22,"p",39),v(23),o(24,"cxTranslate"),p()()(),c(25,"div",21)(26,"button",40),o(27,"async"),F("click",function(){R(e);let a=m(2);return w(a.close("Close Save Cart Dialog"))}),v(28),o(29,"cxTranslate"),p(),c(30,"button",41),o(31,"async"),F("click",function(){R(e);let a=m(2);return w(a.saveOrEditCart(a.cart==null?null:a.cart.code))}),v(32),o(33,"cxTranslate"),p()()}if(t&2){let e,i,a=m(2);d("ngIf",a.layoutOption===a.savedCartFormType.SAVE),n(5),C("",s(6,19,"savedCartDialog.savedCartName")," "),n(3),d("maxLength",a.nameMaxLength),te("aria-invalid",((e=a.form.get("name"))==null?null:e.touched)&&((e=a.form.get("name"))==null?null:e.invalid))("aria-errormessage","nameError"),n(),d("cxFeature","formErrorsDescriptiveMessages"),n(),d("cxFeature","!formErrorsDescriptiveMessages"),n(4),C("",s(15,21,"savedCartDialog.savedCartDescription")," "),n(3),C(" (",s(18,23,"savedCartDialog.optional"),") "),n(2),d("maxLength",a.descriptionMaxLength),te("aria-invalid",((i=a.form.get("description"))==null?null:i.touched)&&((i=a.form.get("description"))==null?null:i.invalid))("aria-errormessage","descriptionError"),n(),d("cxFeature","formErrorsDescriptiveMessages"),n(),d("cxFeature","!formErrorsDescriptiveMessages"),n(2),C(" ",Ae(24,25,"savedCartDialog.charactersLeft",L(36,ua,a.descriptionsCharacterLeft))," "),n(3),d("disabled",s(27,28,a.isLoading$)),n(2),C(" ",s(29,30,"savedCartDialog.cancel")," "),n(2),d("disabled",s(31,32,a.isLoading$)),n(2),C(" ",s(33,34,"savedCartDialog.save")," ")}}function Mn(t,r){if(t&1){let e=Q();E(0),c(1,"div",3),F("esc",function(){R(e);let a=m();return w(a.close("Escape clicked"))}),c(2,"form",4)(3,"div",5),E(4,6),g(5,vn,5,4,"h3",7)(6,Sn,5,4,"div",7),T(),c(7,"button",8),o(8,"cxTranslate"),o(9,"async"),o(10,"cxTranslate"),F("click",function(){R(e);let a=m();return w(a.close("Close Save Cart Dialog"))}),c(11,"span",9),y(12,"cx-icon",10),p()()(),c(13,"div",11),g(14,In,42,28,"ng-container",12)(15,wn,34,38,"ng-template",null,0,ne),p()()(),T()}if(t&2){let e=ie(16),i=m();n(),d("cxFocus",i.focusConfig),n(),d("formGroup",i.form),n(2),d("ngSwitch",i.layoutOption),n(),d("cxFeature","a11yDialogsHeading"),n(),d("cxFeature","!a11yDialogsHeading"),n(),nt("title",s(8,11,"common.close")),d("disabled",s(9,13,i.isLoading$)),te("aria-label",s(10,15,"common.close")),n(5),d("type",i.iconTypes.CLOSE),n(2),d("ngIf",i.layoutOption===i.savedCartFormType.DELETE||i.layoutOption===i.savedCartFormType.RESTORE)("ngIfElse",e)}}var On=(()=>{class t{constructor(e,i,a,l,A){this.activeCartFacade=e,this.authService=i,this.routingService=a,this.vcr=l,this.launchDialogService=A,this.subscription=new Z,this.loggedIn=!1}ngOnInit(){this.cart$=Se([this.activeCartFacade.getActive(),this.authService.isUserLoggedIn()]).pipe(N(([e,i])=>this.loggedIn=i),S(([e])=>e)),this.disableSaveCartForLater$=this.cart$.pipe(S(e=>!e.entries?.length))}saveCart(e){this.subscription.add(this.disableSaveCartForLater$.subscribe(i=>{i||(this.loggedIn?this.openDialog(e):this.routingService.go({cxRoute:"login"}))}))}openDialog(e){let i=this.launchDialogService.openDialog($e.SAVED_CART,this.element,this.vcr,{cart:e,layoutOption:"save"});i&&this.subscription.add(i.pipe(B(1)).subscribe())}ngOnDestroy(){this.subscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||t)(f(Je),f(Si),f(de),f(Te),f(fe))}}static{this.\u0275cmp=ee({type:t,selectors:[["cx-add-to-saved-cart"]],viewQuery:function(i,a){if(i&1&&De(et,5),i&2){let l;Ie(l=be())&&(a.element=l.first)}},standalone:!1,decls:2,vars:3,consts:[["element",""],[4,"ngIf"],[1,"cx-add-to-saved-cart-container"],["cxAutoFocus","",1,"link","cx-action-link",3,"routerLink"],["cxAutoFocus","",1,"link","cx-action-link",3,"click"]],template:function(i,a){i&1&&(g(0,Oa,13,14,"ng-container",1),o(1,"async")),i&2&&d("ngIf",s(1,1,a.cart$))},dependencies:[re,rt,oe,Ce,st],encapsulation:2,changeDetection:0})}}return t})(),Vn=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=$({type:t})}static{this.\u0275inj=V({providers:[qe({cmsComponents:{AddToSavedCartsComponent:{component:On}}})],imports:[se,Fe,Oe,He,Me]})}}return t})(),Et=(()=>{class t{constructor(e,i){this.routingService=e,this.savedCartService=i,this.savedCartId$=this.routingService.getRouterState().pipe(S(a=>a.state.params.savedCartId),Ee()),this.savedCart$=this.savedCartId$.pipe(O(a=>!!a),N(a=>this.savedCartService.loadSavedCart(a)),I(a=>this.savedCartService.get(a)),Qe({bufferSize:1,refCount:!0}))}getSavedCartId(){return this.savedCartId$}getCartDetails(){return this.savedCart$}static{this.\u0275fac=function(i){return new(i||t)(h(de),h(W))}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),$n=(()=>{class t{constructor(e,i,a){this.savedCartDetailsService=e,this.vcr=i,this.launchDialogService=a,this.subscription=new Z,this.savedCartFormType=G,this.savedCart$=this.savedCartDetailsService.getCartDetails()}openDialog(e,i){let a=this.launchDialogService.openDialog($e.SAVED_CART,this.element,this.vcr,{cart:e,layoutOption:i});a&&this.subscription.add(a.pipe(B(1)).subscribe())}ngOnDestroy(){this.subscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||t)(f(Et),f(Te),f(fe))}}static{this.\u0275cmp=ee({type:t,selectors:[["cx-saved-cart-details-action"]],viewQuery:function(i,a){if(i&1&&De(et,5),i&2){let l;Ie(l=be())&&(a.element=l.first)}},standalone:!1,decls:2,vars:3,consts:[["element",""],[4,"ngIf"],[1,"cx-saved-cart-restore-btns","row"],[1,"col-xs-12","col-md-5","col-lg-4"],[1,"btn","btn-block","btn-secondary",3,"click"],[1,"btn","btn-block","btn-primary",3,"click"]],template:function(i,a){i&1&&(g(0,Va,12,6,"ng-container",1),o(1,"async")),i&2&&d("ngIf",s(1,1,a.savedCart$))},dependencies:[re,oe,Ce],encapsulation:2})}}return t})(),Bn=(()=>{class t{constructor(e,i,a,l,A,u){this.savedCartDetailsService=e,this.savedCartService=i,this.eventSercvice=a,this.globalMessageService=l,this.routingService=A,this.translation=u,this.subscription=new Z,this.CartOutlets=Ki,this.CartType=Ji,this.CartLocation=Zi,this.cartLoaded$=this.savedCartDetailsService.getSavedCartId().pipe(I(_=>this.savedCartService.isStable(_))),this.savedCart$=this.savedCartDetailsService.getCartDetails().pipe(N(_=>{(_?.entries??[]).length<=0&&_?.code&&this.savedCartService.deleteSavedCart(_.code)}))}ngOnInit(){this.subscription.add(this.eventSercvice.get(ut).pipe(B(1),S(()=>!0)).subscribe(e=>this.onDeleteComplete(e))),this.buyItAgainTranslation$=this.translation.translate("addToCart.addToActiveCart")}onDeleteComplete(e){e&&(this.routingService.go({cxRoute:"savedCarts"}),this.globalMessageService.add({key:"savedCartDialog.deleteCartSuccess"},ve.MSG_TYPE_CONFIRMATION))}ngOnDestroy(){this.subscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||t)(f(Et),f(W),f(he),f(Re),f(de),f(ot))}}static{this.\u0275cmp=ee({type:t,selectors:[["cx-saved-cart-details-items"]],standalone:!1,decls:4,vars:3,consts:[["emptyCartItems",""],["addToCartBtn",""],[4,"ngIf"],[4,"ngIf","ngIfElse"],["role","status",4,"cxFeature"],[1,"cart-details-wrapper"],[3,"cxOutlet","cxOutletContext"],["role","status"],[3,"productCode","product","showQuantity","options","pickupStore","savedCart"],[1,"cx-spinner"]],template:function(i,a){i&1&&(g(0,Ua,4,2,"ng-container",2),o(1,"async"),g(2,Qa,2,0,"ng-template",null,0,ne)),i&2&&d("ngIf",s(1,1,a.savedCart$))},dependencies:[re,vt,Bi,ta,Ge,oe,Ce],encapsulation:2,changeDetection:0})}}return t})(),kn=(()=>{class t{constructor(e,i,a,l){this.savedCartDetailsService=e,this.translation=i,this.vcr=a,this.launchDialogService=l,this.subscription=new Z,this.iconTypes=dt,this.savedCart$=this.savedCartDetailsService.getCartDetails()}getCartName(e){return this.translation.translate("savedCartDetails.cartName").pipe(O(()=>!!e),S(i=>({title:i,text:[e]})))}getCartDescription(e){return this.translation.translate("savedCartDetails.cartDescription").pipe(O(()=>!!e),S(i=>({title:i,text:[e]})))}getCartId(e){return this.translation.translate("savedCartDetails.cartId").pipe(O(()=>!!e),S(i=>({title:i,text:[e]})))}getDateSaved(e){return this.translation.translate("savedCartDetails.dateSaved").pipe(O(()=>!!e),S(i=>({title:i,text:[e??""]})))}getCartItems(e){return this.translation.translate("savedCartDetails.items").pipe(O(()=>!!e),S(i=>({title:i,text:[e.toString()]})))}getCartQuantity(e){return this.translation.translate("savedCartDetails.quantity").pipe(O(()=>!!e),S(i=>({title:i,text:[e.toString()]})))}getCartTotal(e){return this.translation.translate("savedCartDetails.total").pipe(O(()=>!!e),S(i=>({title:i,text:[e]})))}openDialog(e){let i=this.launchDialogService.openDialog($e.SAVED_CART,this.element,this.vcr,{cart:e,layoutOption:"edit"});i&&this.subscription.add(i.pipe(B(1)).subscribe())}ngOnDestroy(){this.subscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||t)(f(Et),f(ot),f(Te),f(fe))}}static{this.\u0275cmp=ee({type:t,selectors:[["cx-saved-cart-details-overview"]],viewQuery:function(i,a){if(i&1&&De(et,5),i&2){let l;Ie(l=be())&&(a.element=l.first)}},standalone:!1,decls:2,vars:3,consts:[["element",""],[4,"ngIf"],[1,"cx-cart-summary"],[1,"container"],[1,"cx-summary-card"],[1,"cx-edit-container"],[3,"content"],[1,"cx-edit-cart",3,"click"],[3,"type"],[1,"cx-card-description"],[3,"content","truncateText","charactersLimit"]],template:function(i,a){i&1&&(g(0,qa,29,32,"ng-container",1),o(1,"async")),i&2&&d("ngIf",s(1,1,a.savedCart$))},dependencies:[re,ji,lt,oe,Ce,ct],encapsulation:2})}}return t})(),jn=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=$({type:t})}static{this.\u0275inj=V({imports:[se,Oe,He,Fe,Pi,Ni,pt,Ct,ki,ia,Ei.withConfig({cmsComponents:{SavedCartDetailsOverviewComponent:{component:kn,guards:[we]},SavedCartDetailsItemsComponent:{component:Bn,guards:[we]},SavedCartDetailsActionComponent:{component:$n,guards:[we]}}}),Me]})}}return t})(),Pn=(()=>{class t{constructor(e,i,a,l){this.routing=e,this.savedCartService=i,this.vcr=a,this.launchDialogService=l,this.subscription=new Z,this.siteContextService=X(Yi,{optional:!0}),this.savedCarts$=this.savedCartService.getList().pipe(S(A=>A.sort((u,_)=>{let x=u.saveTime?new Date(u.saveTime).getTime():new Date().getTime();return(_.saveTime?new Date(_.saveTime).getTime():new Date().getTime())-x}))),Ye("a11yQTY2Quantity"),Ye("a11yHighContrastBorders")}ngOnInit(){this.isLoading$=this.savedCartService.getSavedCartListProcessLoading(),this.savedCartService.loadSavedCarts(),this.observeAndReloadSavedCartOnContextChange()}goToSavedCartDetails(e){this.routing.go({cxRoute:"savedCartsDetails",params:{savedCartId:e?.code}})}openDialog(e,i){let a=this.launchDialogService.openDialog($e.SAVED_CART,this.restoreButton,this.vcr,{cart:i,layoutOption:G.RESTORE});a&&this.subscription.add(a.pipe(B(1)).subscribe()),e.stopPropagation()}observeAndReloadSavedCartOnContextChange(){if(this.siteContextService){let e=Object.values(Gi),i=this.siteContextService;if(!e.length)return;this.subscription.add(Wt(e).pipe(zt(a=>i.getActiveItem(a).pipe(Xt(1)))).subscribe(()=>{this.savedCartService.loadSavedCarts()}))}}ngOnDestroy(){this.savedCartService.clearSavedCarts(),this.savedCartService.clearSaveCart(),this.savedCartService.clearRestoreSavedCart(),this.subscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||t)(f(de),f(W),f(Te),f(fe))}}static{this.\u0275cmp=ee({type:t,selectors:[["cx-saved-cart-list"]],viewQuery:function(i,a){if(i&1&&De(et,5),i&2){let l;Ie(l=be())&&(a.restoreButton=l.first)}},standalone:!1,decls:2,vars:3,consts:[["loading",""],["noSavedCarts",""],["element",""],[4,"ngIf"],[4,"ngIf","ngIfElse"],["role","status",4,"cxFeature"],[1,"cx-saved-cart-list-header"],["role","status"],["role","table",1,"table","cx-saved-cart-list-table"],["role","row","class","cx-saved-cart-list-thead-mobile",4,"cxFeature"],["role","row",3,"click",4,"ngFor","ngForOf"],["role","row",1,"cx-saved-cart-list-thead-mobile"],["role","columnheader","scope","col"],["role","columnheader","scope","col","class","cx-saved-cart-list-th-qty",4,"cxFeature"],["role","columnheader","scope","col",1,"cx-saved-cart-list-th-total"],["class","cx-saved-cart-list-thead-mobile",4,"cxFeature"],["role","columnheader","scope","col",1,"cx-saved-cart-list-th-qty"],[1,"cx-saved-cart-list-thead-mobile"],["scope","col"],["scope","col","class","cx-saved-cart-list-th-qty",4,"cxFeature"],["scope","col",1,"cx-saved-cart-list-th-total"],["scope","col",1,"cx-saved-cart-list-th-qty"],["role","row",3,"click"],[1,"cx-saved-cart-list-cart-name"],[1,"cx-table-label-mobile","cx-saved-cart-list-label"],[1,"cx-saved-cart-list-value",3,"routerLink"],[1,"cx-saved-cart-list-cart-id"],[1,"cx-saved-cart-list-date-saved"],[1,"cx-saved-cart-list-quantity"],["class","cx-table-label-mobile cx-saved-cart-list-label",4,"cxFeature"],[1,"cx-saved-cart-list-total"],[1,"cx-saved-cart-list-make-cart-active"],[1,"btn","btn-tertiary","cx-saved-cart-make-active",3,"click"],[1,"cx-saved-cart-list-no-saved-carts","row"],[1,"col-sm-12","col-md-6","col-lg-4"],[1,"cx-spinner"]],template:function(i,a){i&1&&(g(0,on,5,4,"ng-container",3),o(1,"async")),i&2&&d("ngIf",s(1,1,a.savedCarts$))},dependencies:[oi,re,rt,vt,Ge,oe,st,Ce,ct],encapsulation:2,changeDetection:0})}}return t})(),Nn=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=$({type:t})}static{this.\u0275inj=V({providers:[qe({cmsComponents:{AccountSavedCartHistoryComponent:{component:Pn,guards:[we]}}})],imports:[se,He,Fe,qi,Oe,Ct,Me]})}}return t})(),Un=(()=>{class t{constructor(e,i,a,l,A){this.importInfoService=e,this.userIdService=i,this.multiCartService=a,this.savedCartService=l,this.routingService=A,this.type=mt.SAVED_CART,this.savedCartId$=this.routingService.getRouterState().pipe(S(u=>u.state.params.savedCartId),Ee())}addEntries(e){return this.add(e).pipe(I(i=>this.importInfoService.getResults(i)),B(e.length))}getEntries(){return this.savedCartId$.pipe(I(e=>this.savedCartService.get(e)),S(e=>e?.entries??[]))}add(e){return Se([this.userIdService.takeUserId(),this.savedCartId$]).pipe(N(([i,a])=>this.multiCartService.addEntries(i,a,e)),S(([i,a])=>a))}static{this.\u0275fac=function(i){return new(i||t)(h(St),h(Le),h(xe),h(W),h(de))}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Qn=(()=>{class t{constructor(e,i,a,l){this.importInfoService=e,this.userIdService=i,this.multiCartService=a,this.savedCartService=l,this.type=mt.NEW_SAVED_CART}addEntries(e,i){return this.add(e,i).pipe(N(a=>{this.importInfoService.getResults(a).pipe(B(e.length),Jt(l=>l.statusCode===_t.UNKNOWN_IDENTIFIER||l.statusCode===_t.UNKNOWN_ERROR)).subscribe(l=>{l&&this.savedCartService.deleteSavedCart(a)})}),I(a=>this.importInfoService.getResults(a)),B(e.length))}add(e,i){return this.userIdService.takeUserId().pipe(I(a=>this.multiCartService.createCart({userId:a,extraData:{active:!1}}).pipe(S(l=>l.code),N(l=>{this.savedCartService.saveCart({cartId:l,saveCartName:i?.name,saveCartDescription:i?.description}),this.savedCartService.loadSavedCarts()}),Ue(Ne),Zt(()=>this.savedCartService.getSaveCartProcessLoading().pipe(O(l=>!l))),N(l=>this.multiCartService.addEntries(a,l,e)))))}static{this.\u0275fac=function(i){return new(i||t)(h(St),h(Le),h(xe),h(W))}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),qn=(()=>{class t{get descriptionsCharacterLeft(){return this.descriptionMaxLength-(this.form.get("description")?.value?.length||0)}handleClick(e){e.target.tagName===this.el.nativeElement.tagName&&this.close("Cross click")}constructor(e,i,a,l,A,u){this.launchDialogService=e,this.el=i,this.savedCartService=a,this.eventService=l,this.routingService=A,this.globalMessageService=u,this.subscription=new Z,this.savedCartFormType=G,this.iconTypes=dt,this.descriptionMaxLength=250,this.nameMaxLength=50,this.isCloneSavedCart=!1,this.focusConfig={trap:!0,block:!0,autofocus:"button",focusOnEscape:!0},Ye("a11yQTY2Quantity")}ngOnInit(){this.resetSavedCartStates(),this.isLoading$=this.savedCartService.getSaveCartProcessLoading(),this.isDisableDeleteButton$=Kt(this.eventService.get(Ze).pipe(B(1),S(()=>!0)),this.eventService.get(zi).pipe(B(1),S(()=>!1))),this.isDisableRestoreButton$=Se([this.savedCartService.getCloneSavedCartProcessLoading(),this.savedCartService.getRestoreSavedCartProcessLoading()]).pipe(S(([e,i])=>e||i)),this.subscription.add(this.launchDialogService.data$.subscribe(e=>{this.cart=e.cart,this.layoutOption=e.layoutOption,this.build(this.cart)})),this.subscription.add(this.savedCartService.getSaveCartProcessSuccess().subscribe(e=>this.onComplete(e))),this.subscription.add(this.eventService.get(ut).pipe(B(1),S(()=>!0)).subscribe(e=>this.onComplete(e))),this.subscription.add(this.savedCartService.getRestoreSavedCartProcessSuccess().subscribe(e=>this.onComplete(e)))}saveOrEditCart(e){if(this.form.invalid)this.form.markAllAsTouched(),Hi.deepUpdateValueAndValidity(this.form);else{let i=this.form.get("name")?.value,a=this.form.get("description")?.value||"-";switch(this.layoutOption){case G.SAVE:{this.savedCartService.saveCart({cartId:e,saveCartName:i,saveCartDescription:a});break}case G.EDIT:{this.savedCartService.editSavedCart({cartId:e,saveCartName:i,saveCartDescription:a});break}}}}deleteCart(e){this.savedCartService.deleteSavedCart(e)}restoreSavedCart(e){this.isCloneSavedCart?this.savedCartService.cloneSavedCart(e,this.form.get("cloneName")?.value):this.savedCartService.restoreSavedCart(e)}close(e){this.launchDialogService.closeDialog(e)}onComplete(e){if(e)switch(this.layoutOption){case G.DELETE:{this.routingService.go({cxRoute:"savedCarts"}),this.globalMessageService.add({key:"savedCartDialog.deleteCartSuccess"},ve.MSG_TYPE_CONFIRMATION),this.close("Successfully deleted a saved cart");break}case G.SAVE:{this.close("Successfully saved cart"),this.savedCartService.clearSaveCart(),this.globalMessageService.add({key:"savedCartCartPage.messages.cartSaved",params:{cartName:this.form.get("name")?.value||this.cart?.code}},ve.MSG_TYPE_CONFIRMATION);break}case G.EDIT:{this.close("Successfully edited saved cart"),this.savedCartService.clearSaveCart(),this.globalMessageService.add({key:"savedCartDialog.editCartSuccess",params:{cartName:this.form.get("name")?.value||this.cart?.code}},ve.MSG_TYPE_CONFIRMATION);break}case G.RESTORE:{this.close("Successfully restored saved cart"),this.routingService.go({cxRoute:"savedCarts"}),this.resetSavedCartStates();break}}}toggleIsCloneSavedCart(){return this.isCloneSavedCart=!this.isCloneSavedCart}build(e){let i=new bi({});i.setControl("name",new Ve("",[We.required,We.maxLength(this.nameMaxLength)])),i.setControl("description",new Ve("",[We.maxLength(this.descriptionMaxLength)])),i.setControl("isCloneSavedCart",new Ve("")),i.setControl("cloneName",new Ve("")),this.form=i,this.patchData(e)}patchData(e){this.form.patchValue(q({},e))}resetSavedCartStates(){this.savedCartService.clearCloneSavedCart(),this.savedCartService.clearSaveCart(),this.savedCartService.clearRestoreSavedCart()}ngOnDestroy(){this.subscription?.unsubscribe(),this.close("close dialog")}static{this.\u0275fac=function(i){return new(i||t)(f(fe),f(ti),f(W),f(he),f(de),f(Re))}}static{this.\u0275cmp=ee({type:t,selectors:[["cx-saved-cart-form-dialog"]],hostBindings:function(i,a){i&1&&F("click",function(A){return a.handleClick(A)})},standalone:!1,decls:1,vars:1,consts:[["saveAndEditCart",""],["isRestoreSavedCart",""],[4,"ngIf"],["role","dialog","aria-labelledby","dialogTitle",1,"modal-dialog","modal-dialog-centered","cx-saved-cart-form-dialog",3,"esc","cxFocus"],[1,"modal-content","cx-saved-cart-form-container",3,"formGroup"],[1,"modal-header","cx-saved-cart-form-header"],[3,"ngSwitch"],["id","dialogTitle","class","cx-saved-cart-form-title modal-title",4,"cxFeature"],["type","button",1,"cx-saved-cart-form-close","close",3,"click","disabled","title"],["aria-hidden","true"],[3,"type"],[1,"modal-body","cx-saved-cart-form-body"],[4,"ngIf","ngIfElse"],["id","dialogTitle",1,"cx-saved-cart-form-title","modal-title"],[4,"ngSwitchCase"],[1,"cx-saved-cart-form-subtitle"],[1,"cx-saved-cart-form-row"],[1,"cx-saved-cart-values-container"],[1,"cx-saved-cart-label"],[1,"cx-saved-cart-value"],["class","cx-saved-cart-label",4,"cxFeature"],[1,"cx-saved-cart-form-footer"],["type","button",1,"mr-2","btn","btn-secondary",3,"click"],[1,"cx-copy-saved-cart-row","form-check"],["id","cx-copy-saved-cart","type","checkbox",1,"cx-copy-saved-cart-input",3,"change","checked"],["for","cx-copy-saved-cart",1,"cx-copy-saved-cart-label"],["class","cx-copy-saved-cart-row",4,"ngIf"],[1,"cx-copy-saved-cart-row"],[1,"label-content"],["formControlName","cloneName","type","text",1,"form-control",3,"maxLength","placeholder"],["class","ml-2 btn btn-primary","type","button",3,"disabled","click",4,"ngIf"],["type","button",1,"ml-2","btn","btn-primary",3,"click","disabled"],[1,"cx-saved-carts-label","label-content"],["required","true","formControlName","name","required","","type","text",1,"form-control",3,"maxLength"],["id","nameError",3,"translationParams","control",4,"cxFeature"],[3,"control",4,"cxFeature"],[1,"cx-saved-carts-label-optional"],["formControlName","description","rows","5",1,"form-control",3,"maxLength"],["id","descriptionError",3,"translationParams","control",4,"cxFeature"],[1,"cx-saved-carts-input-hint"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["id","nameError",3,"translationParams","control"],[3,"control"],["id","descriptionError",3,"translationParams","control"]],template:function(i,a){i&1&&g(0,Mn,17,17,"ng-container",2),i&2&&d("ngIf",a.cart)},dependencies:[re,si,ci,Ai,Ti,Di,Ii,Ri,Fi,Li,Ui,lt,Oi,Ge,ze,Ke,oe,Ce],encapsulation:2,changeDetection:0})}}return t})(),Gn={launch:{SAVED_CART:{inline:!0,component:qn,dialogType:$i.DIALOG}}},Yn=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=$({type:t})}static{this.\u0275inj=V({imports:[se,wi,Mi,Qi,Oe,pt,Vi,Me,ze,Ke]})}}return t})(),_a=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=$({type:t})}static{this.\u0275inj=V({providers:[{provide:pa,useExisting:Un},{provide:va,useExisting:Qn},qe(Gn)],imports:[Fe,Vn,Yn,Nn,jn]})}}return t})();var Pe=class{},ga=(()=>{class t{constructor(e){this.adapter=e}get(e,i){return this.adapter.load(e,i)}getList(e){return this.adapter.loadList(e)}restoreSavedCart(e,i){return this.adapter.restoreSavedCart(e,i)}cloneSavedCart(e,i,a){return this.adapter.cloneSavedCart(e,i,a)}static{this.\u0275fac=function(i){return new(i||t)(h(Pe))}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac})}}return t})(),ye="saved-cart-list",me="saved-cart-restore-cart",Y="saved-cart-save-cart",_e="saved-cart-clone-cart",ha="[Saved Cart] Load Saved Cart",Hn="[Saved Cart] Load Saved Cart Success",Wn="[Saved Cart] Load Saved Cart Fail",fa="[Saved Cart] Load Saved Carts",zn="[Saved Cart] Load Saved Carts Success",Kn="[Saved Cart] Load Saved Carts Fail",Zn="[Saved Cart] Clear Saved Carts",Qt="[Saved Cart] Restore Saved Cart",xa="[Saved Cart] Restore Saved Cart Success",ya="[Saved Cart] Restore Saved Cart Fail",Jn="[Saved Cart] Clear Restore Saved Cart",qt="[Saved Cart] Save Cart",Ea="[Saved Cart] Save Cart Success",Ta="[Saved Cart] Save Cart Fail",Xn="[Saved Cart] Clear Save Cart",Gt="[Saved Cart] Edit Saved Cart",Da="[Saved Cart] Edit Saved Cart Success",Ia="[Saved Cart] Edit Saved Cart Fail",Yt="[Saved Cart] Clone Saved Cart",ba="[Saved Cart] Clone Saved Cart Success",Aa="[Saved Cart] Clone Saved Cart Fail",er="[Saved Cart] Clear Clone Saved Cart",Tt=class extends D.EntityLoadAction{constructor(r){super(Xe,r.cartId),this.payload=r,this.type=ha}},Dt=class extends D.EntitySuccessAction{constructor(r){super(Xe,r.cartId),this.payload=r,this.type=Hn}},It=class extends D.EntityFailAction{constructor(r){super(Xe,r.cartId,r?.error),this.payload=r,this.type=Wn}},tt=class extends D.EntityLoadAction{constructor(r){super(b,ye),this.payload=r,this.type=fa}},bt=class extends D.EntitySuccessAction{constructor(r){super(b,ye),this.payload=r,this.type=zn}},At=class extends D.EntityFailAction{constructor(r){super(b,ye,r.error),this.payload=r,this.type=Kn}},Ft=class extends D.EntityLoaderResetAction{constructor(){super(b,ye),this.type=Zn}},it=class extends D.EntityLoadAction{constructor(r){super(b,me),this.payload=r,this.type=Qt}},Lt=class extends D.EntitySuccessAction{constructor(r){super(b,me),this.payload=r,this.type=xa}},Rt=class extends D.EntityFailAction{constructor(r){super(b,me,r.error),this.payload=r,this.type=ya}},wt=class extends D.EntityLoaderResetAction{constructor(){super(b,me),this.type=Jn}},Mt=class extends D.EntityLoadAction{constructor(r){super(b,Y),this.payload=r,this.type=qt}},Ot=class extends D.EntitySuccessAction{constructor(r){super(b,Y),this.payload=r,this.type=Ea}},Vt=class extends D.EntityFailAction{constructor(r){super(b,Y,r.error),this.payload=r,this.type=Ta}},$t=class extends D.EntityLoaderResetAction{constructor(){super(b,Y),this.type=Xn}},at=class extends D.EntityLoadAction{constructor(r){super(b,Y),this.payload=r,this.type=Gt}},Bt=class extends D.EntitySuccessAction{constructor(r){super(b,Y),this.payload=r,this.type=Da}},kt=class extends D.EntityFailAction{constructor(r){super(b,Y,r.error),this.payload=r,this.type=Ia}},jt=class extends D.EntityLoadAction{constructor(r){super(b,_e),this.payload=r,this.type=Yt}},Pt=class extends D.EntitySuccessAction{constructor(r){super(b,_e),this.payload=r,this.type=ba}},Nt=class extends D.EntityFailAction{constructor(r){super(b,_e,r.error),this.payload=r,this.type=Aa}},Ut=class extends D.EntityLoaderResetAction{constructor(){super(b,_e),this.type=er}};var tr=(()=>{class t{constructor(e,i,a,l){this.actionsSubject=e,this.eventService=i,this.stateEventService=a,this.multiCartService=l,this.register()}register(){this.registerRestoreSavedCartEvents(),this.registerSaveCartEvents(),this.registerEditSavedCartEvents(),this.registerCloneSavedCartEvents()}registerRestoreSavedCartEvents(){this.buildRestoreSavedCartEvents({action:Qt,event:na}),this.buildRestoreSavedCartEvents({action:xa,event:ra}),this.buildRestoreSavedCartEvents({action:ya,event:oa})}registerSaveCartEvents(){this.buildSaveCartSuccessEvent({action:Ea,event:aa}),this.stateEventService.register({action:Ta,event:ht,factory:e=>le(ht,K(q({},e.payload),{cartCode:e.payload.cartId}))}),this.stateEventService.register({action:qt,event:gt,factory:e=>le(gt,K(q({},e.payload),{cartCode:e.payload.cartId}))})}registerEditSavedCartEvents(){this.buildSaveCartSuccessEvent({action:Da,event:sa}),this.stateEventService.register({action:Ia,event:xt,factory:e=>le(xt,K(q({},e.payload),{cartCode:e.payload.cartId}))}),this.stateEventService.register({action:Gt,event:ft,factory:e=>le(ft,K(q({},e.payload),{cartCode:e.payload.cartId}))})}registerCloneSavedCartEvents(){this.buildRestoreSavedCartEvents({action:Yt,event:ca}),this.buildRestoreSavedCartEvents({action:ba,event:da}),this.buildRestoreSavedCartEvents({action:Aa,event:la})}buildRestoreSavedCartEvents(e){let i=this.getAction(e.action).pipe(I(a=>H(a).pipe(ge(this.multiCartService.getCart(a.payload.cartId)))),S(([a,l])=>le(e.event,q(K(q({},a.payload),{cartCode:l.code,saveCartName:l.name,saveCartDescription:l.description}),l.saveTime&&{saveTime:l.saveTime}))));return this.eventService.register(e.event,i)}buildSaveCartSuccessEvent(e){let i=this.getAction(e.action).pipe(I(a=>H(a).pipe(ge(this.multiCartService.getCart(a.payload.cartId)))),O(([,a])=>!!a),S(([a,l])=>le(e.event,K(q({},a.payload),{cartCode:l.code,saveTime:l.saveTime}))));return this.eventService.register(e.event,i)}getAction(e){return this.actionsSubject.pipe(z(...[].concat(e)))}static{this.\u0275fac=function(i){return new(i||t)(h(pi),h(he),h(fi),h(xe))}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),ir=(()=>{class t{constructor(e){}static{this.\u0275fac=function(i){return new(i||t)(h(tr))}}static{this.\u0275mod=$({type:t})}static{this.\u0275inj=V({})}}return t})(),ar=(()=>{class t{constructor(e,i,a,l,A){this.actions$=e,this.savedCartConnector=i,this.activeCartService=a,this.globalMessageService=l,this.cartConnector=A,this.logger=X(_i),this.loadSavedCart$=ce(()=>this.actions$.pipe(z(ha),S(u=>u.payload),I(({userId:u,cartId:_})=>this.savedCartConnector.get(u,_).pipe(I(x=>[new ue.LoadCartSuccess({userId:u,cartId:_,cart:x}),new Dt({userId:u,cartId:_})]),J(x=>H(new It({userId:u,cartId:_,error:pe(x,this.logger)}))))))),this.loadSavedCarts$=ce(()=>this.actions$.pipe(z(fa),S(u=>u.payload),I(({userId:u})=>this.savedCartConnector.getList(u).pipe(I(_=>[new ue.LoadCartsSuccess(_),new bt({userId:u})]),J(_=>H(new At({userId:u,error:pe(_,this.logger)}))))))),this.restoreSavedCart$=ce(()=>this.actions$.pipe(z(Qt),S(u=>u.payload),ge(this.activeCartService.getActive()),I(([{userId:u,cartId:_},x])=>{let M=[];return(x?.entries??[]).length>0&&!x.quoteCode&&x.code&&M.push(new at({userId:u,cartId:x.code,saveCartName:"",saveCartDescription:""})),this.savedCartConnector.restoreSavedCart(u,_).pipe(I(P=>(this.globalMessageService.add({key:(x?.entries??[]).length>0&&!x.quoteCode?"savedCartList.swapCartWithActiveCart":"savedCartList.swapCartNoActiveCart",params:{cartName:_,previousCartName:x.code}},ve.MSG_TYPE_CONFIRMATION),[...M,new ue.LoadCartSuccess({userId:u,cartId:_,cart:P,extraData:{active:!0}}),new Lt({userId:u,cartId:_})])),J(P=>H(new Rt({userId:u,cartId:_,error:pe(P,this.logger)}))))}))),this.saveCart$=ce(()=>this.actions$.pipe(z(qt),S(u=>u.payload),I(({userId:u,cartId:_,saveCartName:x,saveCartDescription:M})=>this.cartConnector.save(u,_,x,M).pipe(I(P=>[new ue.ClearCartState,new ue.LoadCartSuccess({userId:u,cartId:_,cart:P}),new Ot({userId:u,cartId:_,saveCartName:x,saveCartDescription:M})]),J(P=>H(new Vt({userId:u,cartId:_,saveCartName:x,saveCartDescription:M,error:pe(P,this.logger)}))))))),this.editSavedCart$=ce(()=>this.actions$.pipe(z(Gt),S(u=>u.payload),I(({userId:u,cartId:_,saveCartName:x,saveCartDescription:M})=>this.cartConnector.save(u,_,x,M).pipe(I(P=>[new ue.LoadCartSuccess({userId:u,cartId:_,cart:P}),new Bt({userId:u,cartId:_,saveCartName:x,saveCartDescription:M})]),J(P=>H(new kt({userId:u,cartId:_,saveCartName:x,saveCartDescription:M,error:pe(P,this.logger)}))))))),this.cloneSavedCart$=ce(()=>this.actions$.pipe(z(Yt),S(u=>u.payload),I(({userId:u,cartId:_,saveCartName:x})=>this.savedCartConnector.cloneSavedCart(u,_,x).pipe(I(M=>[new Pt({userId:u,cartId:_,saveCartName:x}),new it({userId:u,cartId:_}),new tt({userId:u})]),J(M=>H(new Nt({userId:u,cartId:_,saveCartName:x,error:pe(M,this.logger)})))))))}static{this.\u0275fac=function(i){return new(i||t)(h(Ci),h(ga),h(Je),h(Re),h(ea))}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac})}}return t})(),nr=[ar],rr=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=$({type:t})}static{this.\u0275inj=V({imports:[ui.forFeature(nr)]})}}return t})(),Sa=(()=>{class t{constructor(e,i,a,l,A){this.store=e,this.userIdService=i,this.userAccountFacade=a,this.multiCartService=l,this.eventService=A}loadSavedCart(e){this.userIdService.takeUserId(!0).subscribe({next:i=>this.store.dispatch(new Tt({userId:i,cartId:e})),error:()=>{}})}get(e){return this.getSavedCart(e).pipe(Ue(Ne),ge(this.eventService.get(Ze).pipe(ei({}))),O(([i,a])=>!!i),N(([i,a])=>{if(Object.keys(a).length>0)return Ht;i.loading||i.success||i.error||this.loadSavedCart(e)}),O(([i])=>i.success||!!i.error),S(([i])=>i.value))}getSavedCart(e){return this.multiCartService.getCartEntity(e)}isStable(e){return this.multiCartService.isStable(e)}loadSavedCarts(){this.userIdService.takeUserId(!0).subscribe({next:e=>this.store.dispatch(new tt({userId:e})),error:()=>{}})}getList(){return this.getSavedCartList().pipe(ge(this.getSavedCartListProcess()),N(([e,i])=>{i.loading||i.success||i.error||this.loadSavedCarts()}),S(([e,i])=>e),Qe({bufferSize:1,refCount:!0}))}getSavedCartList(){return Se([this.multiCartService.getCarts(),this.userAccountFacade.get()]).pipe(Ee(),S(([e,i])=>e.filter(a=>(i?.customerId!==void 0?a?.name!==`wishlist${i?.customerId}`:!0)&&!Xi(a?.code)&&a?.saveTime)))}getSavedCartListProcessLoading(){return this.store.pipe(k(j.getProcessLoadingFactory(ye)))}getSavedCartListProcess(){return this.store.pipe(k(j.getProcessStateFactory(ye)))}clearSavedCarts(){this.store.dispatch(new Ft)}restoreSavedCart(e){this.userIdService.takeUserId(!0).subscribe({next:i=>this.store.dispatch(new it({userId:i,cartId:e})),error:()=>{}})}getRestoreSavedCartProcessLoading(){return this.store.pipe(k(j.getProcessLoadingFactory(me)))}getRestoreSavedCartProcessSuccess(){return this.store.pipe(k(j.getProcessSuccessFactory(me)))}getRestoreSavedCartProcessError(){return this.store.pipe(k(j.getProcessErrorFactory(me)))}clearRestoreSavedCart(){this.store.dispatch(new wt)}deleteSavedCart(e){this.userIdService.takeUserId(!0).subscribe({next:i=>this.multiCartService.deleteCart(e,i),error:()=>{}})}saveCart({cartId:e,saveCartName:i,saveCartDescription:a}){this.userIdService.takeUserId(!0).subscribe({next:l=>this.store.dispatch(new Mt({userId:l,cartId:e,saveCartName:i,saveCartDescription:a})),error:()=>{}})}getSaveCartProcessLoading(){return this.store.pipe(k(j.getProcessLoadingFactory(Y)))}getSaveCartProcessSuccess(){return this.store.pipe(k(j.getProcessSuccessFactory(Y)))}getSaveCartProcessError(){return this.store.pipe(k(j.getProcessErrorFactory(Y)))}clearSaveCart(){this.store.dispatch(new $t)}editSavedCart({cartId:e,saveCartName:i,saveCartDescription:a}){this.userIdService.takeUserId(!0).subscribe({next:l=>this.store.dispatch(new at({userId:l,cartId:e,saveCartName:i,saveCartDescription:a})),error:()=>{}})}cloneSavedCart(e,i){this.userIdService.takeUserId(!0).subscribe({next:a=>this.store.dispatch(new jt({userId:a,cartId:e,saveCartName:i})),error:()=>{}})}getCloneSavedCartProcessLoading(){return this.store.pipe(k(j.getProcessLoadingFactory(_e)))}getCloneSavedCartProcessSuccess(){return this.store.pipe(k(j.getProcessSuccessFactory(_e)))}getCloneSavedCartProcessError(){return this.store.pipe(k(j.getProcessErrorFactory(_e)))}clearCloneSavedCart(){this.store.dispatch(new Ut)}static{this.\u0275fac=function(i){return new(i||t)(h(vi),h(Le),h(Wi),h(xe),h(he))}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac})}}return t})(),or=[Sa,{provide:W,useExisting:Sa}],Fa=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=$({type:t})}static{this.\u0275inj=V({providers:[ga,...or],imports:[rr,ir]})}}return t})();var sr=(()=>{class t{constructor(e,i,a){this.http=e,this.occEndpoints=i,this.converter=a,this.featureConfigService=X(xi)}load(e,i){return this.http.get(this.getSavedCartEndpoint(e,i)).pipe(S(a=>a.savedCartData),this.converter.pipeable(Be))}loadList(e){return this.http.get(this.getSavedCartListEndpoint(e)).pipe(S(i=>i.carts??[]),this.converter.pipeableMany(Be))}restoreSavedCart(e,i){return this.http.patch(this.getRestoreSavedCartEndpoint(e,i),i).pipe(S(a=>a.savedCartData),this.converter.pipeable(Be))}cloneSavedCart(e,i,a){let l=new di;this.featureConfigService?.isEnabled("occCartNameAndDescriptionInHttpRequestBody")&&(l=l.set("name",a));let A=this.getCloneSavedCartEndpoint(e,i,a);return this.http.post(A,l).pipe(S(u=>u.savedCartData),this.converter.pipeable(Be))}getSavedCartEndpoint(e,i){return this.occEndpoints.buildUrl("savedCart",{urlParams:{userId:e,cartId:i}})}getSavedCartListEndpoint(e){return this.occEndpoints.buildUrl("savedCarts",{urlParams:{userId:e}})}getRestoreSavedCartEndpoint(e,i){return this.occEndpoints.buildUrl("restoreSavedCart",{urlParams:{userId:e,cartId:i}})}getCloneSavedCartEndpoint(e,i,a){return this.occEndpoints.buildUrl("cloneSavedCart",{urlParams:{userId:e,cartId:i,saveCartName:a}})}static{this.\u0275fac=function(i){return new(i||t)(h(li),h(gi),h(hi))}}static{this.\u0275prov=U({token:t,factory:t.\u0275fac})}}return t})();function cr(){return{backend:{occ:{endpoints:{savedCarts:"/users/${userId}/carts?savedCartsOnly=true&fields=carts(DEFAULT,potentialProductPromotions,appliedProductPromotions,potentialOrderPromotions,appliedOrderPromotions,entries(totalPrice(formattedValue),product(images(FULL),stock(FULL)),basePrice(formattedValue,value),updateable),totalPrice(formattedValue),totalItems,totalPriceWithTax(formattedValue),totalDiscounts(value,formattedValue),subTotal(formattedValue),totalUnitCount,deliveryItemsQuantity,deliveryCost(formattedValue),totalTax(formattedValue, value),pickupItemsQuantity,net,appliedVouchers,productDiscounts(formattedValue),saveTime,user,name,description)",savedCart:"/users/${userId}/carts/${cartId}/savedcart",restoreSavedCart:"/users/${userId}/carts/${cartId}/restoresavedcart",cloneSavedCart:X(yi).occCartNameAndDescriptionInHttpRequestBody?"/users/${userId}/carts/${cartId}/clonesavedcart":"/users/${userId}/carts/${cartId}/clonesavedcart?name=${saveCartName}"}}}}}var La=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=$({type:t})}static{this.\u0275inj=V({providers:[mi(cr),{provide:Pe,useClass:sr}],imports:[se]})}}return t})();var po=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=$({type:t})}static{this.\u0275inj=V({imports:[Fa,La,_a]})}}return t})();export{po as SavedCartModule};
