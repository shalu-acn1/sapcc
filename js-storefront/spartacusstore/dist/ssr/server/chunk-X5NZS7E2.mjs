import './polyfills.server.mjs';
import{a as xi,b as vi,c as Si,d as bi,e as Re}from"./chunk-FDWQ36LU.mjs";import{a as ue,b as ui,c as di,d as te,f as nt,i as _i,j as gi,k as Ci,l as fi,s as hi}from"./chunk-A3MQW6SG.mjs";import{n as it}from"./chunk-3MVLZVKE.mjs";import{c as tt}from"./chunk-4BKK7BLP.mjs";import{C as mi,H as pi}from"./chunk-HCL456IH.mjs";import{$ as et,$a as ai,A as Ze,B as Gt,C as Qt,F as Ht,G as qt,Ha as Ve,Ia as Xt,J as le,K as Kt,L as me,M as R,Ma as ei,Mb as li,N as ve,Na as ti,P as G,Sa as ii,X as De,Xa as ni,Y as Xe,Ya as ri,Z as pe,Za as oi,_ as Wt,_a as si,ab as ci,b as ae,ba as Me,c as Y,d as ce,e as he,ea as Yt,h as Pt,i as $t,j as Ut,k as jt,l as xe,o as Je,p as Be,s as ke,ua as Jt,w as Fe,xa as Zt,z as zt}from"./chunk-M3PBDWUL.mjs";import{$ as gt,$b as yt,Bf as Vt,C as ut,Cf as Ce,D as k,Da as je,Db as a,Eb as u,Ee as At,Fb as S,Gb as w,Ge as Lt,Hb as E,I as _e,Ib as ze,J as ye,Jb as b,Ke as Bt,L as Ue,Lb as h,M,Mb as c,Oe as kt,Pb as B,Q as Te,Re as Ft,Sb as P,Ta as ft,Tb as $,U as dt,Ub as U,V as _t,Vb as A,Vc as Ge,Wa as ht,Wb as C,We as oe,Xa as r,Xb as T,Xc as Ee,Xg as Ye,Yb as x,Yc as j,Zb as St,_b as bt,a as J,ac as Tt,ad as wt,bd as X,cb as v,d as H,da as Ct,dc as q,eb as F,ec as K,ef as Dt,fb as re,ga as O,gf as He,hb as xt,hd as Ae,hg as W,i as lt,ig as We,jb as d,jf as qe,kc as s,lc as l,lf as Ke,ma as Ie,mc as we,n as mt,na as ne,nh as V,of as Mt,oh as Ot,pa as N,pc as D,q as Z,qa as ee,qe as z,r as be,sb as y,sd as Qe,tb as p,tg as Le,ud as ge,ug as fe,v as $e,vb as L,wa as _,xa as g,xb as vt,xc as It,xh as Nt,y as pt,yd as Et,yg as Rt,zg as se}from"./chunk-JI3YDV22.mjs";import{a as Pe,b as ct}from"./chunk-H4UZCO6D.mjs";function ki(t,m){if(t&1){let e=b();a(0,"cx-message",17),s(1,"cxTranslate"),h("closeMessage",function(){_(e);let n=c(2);return g(n.closeDialogAlert())}),u()}if(t&2){let e=c(2);p("text",l(1,2,"asm.saveCart.dialog.saveInfo"))("type",e.globalMessageType.MSG_TYPE_INFO)}}function Fi(t,m){if(t&1&&(w(0),a(1,"div",15),d(2,ki,2,4,"cx-message",16),s(3,"async"),u(),E()),t&2){let e=c();r(2),p("ngIf",l(3,1,e.showDialogAlert$))}}function Di(t,m){if(t&1){let e=b();a(0,"cx-message",17),s(1,"cxTranslate"),h("closeMessage",function(){_(e);let n=c(2);return g(n.closeDialogAlert())}),u()}if(t&2){let e=c(2);p("text",l(1,2,"asm.saveCart.dialog.disableInfo"))("type",e.globalMessageType.MSG_TYPE_WARNING)}}function Mi(t,m){if(t&1&&(a(0,"div",15),d(1,Di,2,4,"cx-message",16),s(2,"async"),u()),t&2){let e=c();r(),p("ngIf",l(2,1,e.showDialogAlert$))}}function Vi(t,m){t&1&&(a(0,"div",9),C(1),s(2,"cxTranslate"),u()),t&2&&(r(),x(" ",l(2,1,"asm.saveCart.dialog.row.qtyFull")," "))}function Ri(t,m){t&1&&(a(0,"div",9),C(1),s(2,"cxTranslate"),u()),t&2&&(r(),x(" ",l(2,1,"asm.saveCart.dialog.row.qty")," "))}var Oi=["bindToCart"],Ni=["saveInactiveCart"],Pi=(t,m)=>({"cx-asm-assignCart":t,"cx-asm-assignCart-input-show-no-button":m});function $i(t,m){if(t&1){let e=b();a(0,"button",9),s(1,"cxTranslate"),s(2,"cxTranslate"),h("click",function(){_(e);let n=c();return g(n.clearText())}),S(3,"cx-icon",10),u()}if(t&2){let e=c();L("visible",(e.cartId.value==null?null:e.cartId.value.length)>0),y("title",l(1,4,"asm.bindCart.resetCartId"))("aria-label",l(2,6,"asm.bindCart.resetCartId"))}}function Ui(t,m){if(t&1){let e=b();a(0,"button",11,1),s(2,"async"),s(3,"async"),s(4,"async"),h("click",function(){_(e);let n=c();return g(n.bindCartToCustomer())}),a(5,"span"),s(6,"async"),C(7),s(8,"cxTranslate"),u(),S(9,"cx-dot-spinner"),s(10,"async"),s(11,"cxTranslate"),u()}if(t&2){let e=c();L("cx-asm-active",l(2,9,e.valid$))("cx-bind-loading",l(3,11,e.loading$)),p("disabled",!l(4,13,e.valid$)),r(5),y("aria-hidden",l(6,15,e.loading$)),r(2),x(" ",l(8,17,"asm.bindCart.bindCartToCustomer")," "),r(2),y("aria-hidden",!l(10,19,e.loading$))("aria-label",l(11,21,"common.loading"))}}function ji(t,m){if(t&1){let e=b();a(0,"button",12,2),s(2,"async"),h("click",function(){_(e);let n=c();return g(n.onSaveInactiveCart())}),a(3,"span"),s(4,"async"),C(5),s(6,"cxTranslate"),u(),S(7,"cx-dot-spinner"),s(8,"async"),s(9,"cxTranslate"),u()}if(t&2){let e=c();L("cx-bind-loading",l(2,6,e.loading$)),r(3),y("aria-hidden",l(4,8,e.loading$)),r(2),x(" ",l(6,10,"asm.saveCart.saveCartBtn")," "),r(2),y("aria-hidden",!l(8,12,e.loading$))("aria-label",l(9,14,"common.loading"))}}function zi(t,m){if(t&1){let e=b();a(0,"cx-message",14),s(1,"cxTranslate"),h("closeMessage",function(){_(e);let n=c();return g(n.closeDialogInfoAlert())}),u()}if(t&2){let e=c();p("text",l(1,2,"asm.createCustomerForm.createAccountAlert"))("type",e.globalMessageType.MSG_TYPE_INFO)}}function Gi(t,m){if(t&1){let e=b();a(0,"cx-message",14),h("closeMessage",function(){_(e);let n=c().index,o=c();return g(o.closeDialogBackendErroAlert(n))}),u()}if(t&2){let e=c().$implicit,i=c();p("text",e)("type",i.globalMessageType.MSG_TYPE_ERROR)}}function Qi(t,m){if(t&1&&(w(0),d(1,Gi,1,2,"cx-message",8),E()),t&2){let e=m.index,i=c();r(),p("ngIf",i.showDialogBackendErrorAlerts[e])}}function Hi(t,m){if(t&1&&(a(0,"div")(1,"div",15)(2,"label")(3,"span",16),C(4),s(5,"cxTranslate"),u(),S(6,"input",17),s(7,"cxTranslate"),S(8,"cx-form-errors",18),u()(),a(9,"div",15)(10,"label")(11,"span",16),C(12),s(13,"cxTranslate"),u(),S(14,"input",19),s(15,"cxTranslate"),S(16,"cx-form-errors",20),u()(),a(17,"div",15)(18,"label")(19,"span",16),C(20),s(21,"cxTranslate"),u(),S(22,"input",21),s(23,"cxTranslate"),S(24,"cx-form-errors",22),u()()()),t&2){let e,i,n,o=c();r(4),T(l(5,15,"asm.createCustomerForm.firstName.label")),r(2),B("placeholder",l(7,17,"asm.createCustomerForm.firstName.placeholder")),y("aria-invalid",((e=o.registerForm.get("firstName"))==null?null:e.touched)&&((e=o.registerForm.get("firstName"))==null?null:e.invalid))("aria-errormessage","firstNameError"),r(2),p("control",o.registerForm.get("firstName")),r(4),T(l(13,19,"asm.createCustomerForm.lastName.label")),r(2),B("placeholder",l(15,21,"asm.createCustomerForm.lastName.placeholder")),y("aria-invalid",((i=o.registerForm.get("lastName"))==null?null:i.touched)&&((i=o.registerForm.get("lastName"))==null?null:i.invalid))("aria-errormessage","lastNameError"),r(2),p("control",o.registerForm.get("lastName")),r(4),T(l(21,23,"asm.createCustomerForm.emailAddress.label")),r(2),B("placeholder",l(23,25,"asm.createCustomerForm.emailAddress.placeholder")),y("aria-invalid",((n=o.registerForm.get("email"))==null?null:n.touched)&&((n=o.registerForm.get("email"))==null?null:n.invalid))("aria-errormessage","emailError"),r(2),p("control",o.registerForm.get("email"))}}function qi(t,m){t&1&&(a(0,"div",23),S(1,"cx-spinner"),u())}var ot=t=>({label:t});function Ki(t,m){if(t&1&&(S(0,"cx-form-errors",10),s(1,"cxTranslate")),t&2){let e=c(2);p("translationParams",q(4,ot,l(1,2,"asm.loginForm.userId.label")))("control",e.csAgentLoginForm.get("userId"))}}function Wi(t,m){if(t&1&&S(0,"cx-form-errors",11),t&2){let e=c(2);p("control",e.csAgentLoginForm.get("userId"))}}function Yi(t,m){if(t&1&&(S(0,"cx-form-errors",12),s(1,"cxTranslate")),t&2){let e=c(2);p("translationParams",q(4,ot,l(1,2,"asm.loginForm.password.label")))("control",e.csAgentLoginForm.get("password"))}}function Ji(t,m){if(t&1&&S(0,"cx-form-errors",11),t&2){let e=c(2);p("control",e.csAgentLoginForm.get("password"))}}function Zi(t,m){if(t&1){let e=b();a(0,"form",2),h("ngSubmit",function(){_(e);let n=c();return g(n.onSubmit())}),a(1,"span",3),C(2),s(3,"cxTranslate"),u(),a(4,"label"),S(5,"input",4),s(6,"cxTranslate"),d(7,Ki,2,6,"cx-form-errors",5)(8,Wi,1,1,"cx-form-errors",6),u(),a(9,"span",3),C(10),s(11,"cxTranslate"),u(),a(12,"label"),S(13,"input",7),s(14,"cxTranslate"),d(15,Yi,2,6,"cx-form-errors",8)(16,Ji,1,1,"cx-form-errors",6),u(),a(17,"button",9),C(18),s(19,"cxTranslate"),u()()}if(t&2){let e,i,n=c();p("formGroup",n.csAgentLoginForm),r(2),x(" ",l(3,14,"asm.loginForm.userId.label")," "),r(3),y("aria-label",l(6,16,"asm.loginForm.userId.label"))("aria-invalid",((e=n.csAgentLoginForm.get("userId"))==null?null:e.touched)&&((e=n.csAgentLoginForm.get("userId"))==null?null:e.invalid))("aria-errormessage","userIdError"),r(2),p("cxFeature","formErrorsDescriptiveMessages"),r(),p("cxFeature","!formErrorsDescriptiveMessages"),r(2),x(" ",l(11,18,"asm.loginForm.password.label")," "),r(3),y("aria-label",l(14,20,"asm.loginForm.password.label"))("aria-invalid",((i=n.csAgentLoginForm.get("password"))==null?null:i.touched)&&((i=n.csAgentLoginForm.get("password"))==null?null:i.invalid))("aria-errormessage","passwordError"),r(2),p("cxFeature","formErrorsDescriptiveMessages"),r(),p("cxFeature","!formErrorsDescriptiveMessages"),r(2),x(" ",l(19,22,"asm.loginForm.submit")," ")}}function Xi(t,m){t&1&&(S(0,"cx-dot-spinner",13),s(1,"cxTranslate")),t&2&&y("aria-label",l(1,1,"common.loading"))}var en=["resultList"],tn=["searchTerm"],nn=["searchOrder"],rn=["createCustomerLink"],on=["searchResultItem"];function sn(t,m){if(t&1){let e=b();a(0,"div",15)(1,"div",16)(2,"div",17)(3,"span",18),S(4,"cx-icon",19),u(),a(5,"span",20),C(6),s(7,"cxTranslate"),u(),a(8,"span",21,3),h("click",function(){_(e);let n=c(3);return g(n.createCustomer())}),C(10),s(11,"cxTranslate"),u()()()()}t&2&&(r(6),x("",l(7,2,"asm.customerSearch.noCustomerMatchResult")," "),r(4),x(" ",l(11,4,"asm.customerSearch.createCustomer")," "))}function an(t,m){if(t&1){let e=b();a(0,"button",24,4),h("keydown.arrowup",function(n){_(e);let o=c(4);return g(o.focusPreviousChild(n))})("keydown.arrowdown",function(n){_(e);let o=c(4);return g(o.focusNextChild(n))})("keydown.arrowright",function(n){_(e);let o=c(4);return g(o.focusInputText(n))})("keydown.arrowleft",function(n){_(e);let o=c(4);return g(o.focusInputText(n))})("keydown.enter",function(n){let o=_(e).$implicit,f=c(4);return g(f.selectCustomerFromList(n,o))})("keydown.escape",function(n){_(e);let o=c(4);return g(o.closeResults(n))})("keydown.home",function(n){_(e);let o=c(4);return g(o.focusInputText(n))})("keydown.end",function(n){_(e);let o=c(4);return g(o.focusInputText(n))})("click",function(n){let o=_(e).$implicit,f=c(4);return g(f.selectCustomerFromList(n,o))}),a(2,"div",25),C(3),u(),a(4,"div",26)(5,"span"),C(6),u()()()}if(t&2){let e=m.$implicit,i=m.index,n=c(4);L("active",n.activeFocusedButtonIndex===i),p("tabindex",n.activeFocusedButtonIndex===i?0:-1),y("aria-selected",n.activeFocusedButtonIndex===i),r(3),T(e.name),r(3),T(e.uid)}}function cn(t,m){if(t&1&&(a(0,"div",22),d(1,an,7,6,"button",23),u()),t&2){let e=c().ngIf;r(),p("ngForOf",e.entries)}}function ln(t,m){if(t&1&&(a(0,"div",null,2),d(2,sn,12,6,"div",14)(3,cn,2,1,"div",11),u()),t&2){let e=m.ngIf;c();let i=A(6),n=c();r(2),p("ngIf",n.isNoResultMessageInfoVisible(e,n.searchByCustomer,i)),r(),p("ngIf",n.isSearchResultsVisible(e,n.searchByCustomer))}}function mn(t,m){t&1&&(a(0,"div",22),S(1,"cx-dot-spinner",27),s(2,"cxTranslate"),u()),t&2&&(r(),y("aria-label",l(2,1,"common.loading")))}function pn(t,m){t&1&&(a(0,"div",15)(1,"div",16)(2,"div",17)(3,"span",18),S(4,"cx-icon",19),u(),a(5,"span",20),C(6),s(7,"cxTranslate"),u()()()()),t&2&&(r(6),x(" ",l(7,1,"asm.customerSearch.noOrderMatchResult")," "))}function un(t,m){if(t&1){let e=b();a(0,"button",24,4),h("keydown.arrowup",function(n){_(e);let o=c(4);return g(o.focusPreviousChild(n))})("keydown.arrowdown",function(n){_(e);let o=c(4);return g(o.focusNextChild(n))})("keydown.arrowright",function(n){_(e);let o=c(4);return g(o.focusOrderSearchInputText(n))})("keydown.arrowleft",function(n){_(e);let o=c(4);return g(o.focusOrderSearchInputText(n))})("keydown.enter",function(n){let o=_(e).$implicit,f=c(4);return g(f.selectCustomerFromList(n,o))})("keydown.escape",function(n){_(e);let o=c(4);return g(o.closeOrderSearchResults(n))})("keydown.home",function(n){_(e);let o=c(4);return g(o.focusOrderSearchInputText(n))})("keydown.end",function(n){_(e);let o=c(4);return g(o.focusOrderSearchInputText(n))})("click",function(n){let o=_(e).$implicit,f=c(4);return g(f.selectCustomerFromList(n,o))}),a(2,"div",25),C(3),u(),a(4,"div",26)(5,"span"),C(6),u()()()}if(t&2){let e=m.$implicit,i=m.index;c(3);let n=A(17),o=c();L("active",o.activeFocusedButtonIndex===i),p("tabindex",o.activeFocusedButtonIndex===i?0:-1),y("aria-selected",o.activeFocusedButtonIndex===i),r(3),T(n.value),r(3),T(e.name)}}function dn(t,m){if(t&1&&(a(0,"div",22),d(1,un,7,6,"button",23),u()),t&2){let e=c().ngIf;r(),p("ngForOf",e.entries)}}function _n(t,m){if(t&1&&(a(0,"div",null,2),d(2,pn,8,3,"div",14)(3,dn,2,1,"div",11),u()),t&2){let e=m.ngIf;c();let i=A(17),n=c();r(2),p("ngIf",n.isNoResultMessageInfoVisible(e,n.searchByOrder,i)),r(),p("ngIf",n.isSearchResultsVisible(e,n.searchByOrder))}}function gn(t,m){t&1&&(a(0,"div",22),S(1,"cx-dot-spinner",27),s(2,"cxTranslate"),u()),t&2&&(r(),y("aria-label",l(2,1,"common.loading")))}function Cn(t,m){if(t&1){let e=b();a(0,"form",7),h("ngSubmit",function(){_(e);let n=c();return g(n.onSubmit())}),a(1,"span",8),C(2),s(3,"cxTranslate"),u(),a(4,"label")(5,"input",9,0),s(7,"cxTranslate"),s(8,"cxTranslate"),h("keydown.arrowdown",function(n){_(e);let o=c();return g(o.focusFirstItem(n))})("keydown.end",function(n){_(e);let o=c();return g(o.setSelectionEnd(n))}),u(),d(9,ln,4,2,"div",10),s(10,"async"),d(11,mn,3,3,"div",11),u(),a(12,"span",8),C(13),s(14,"cxTranslate"),u(),a(15,"label")(16,"input",12,1),s(18,"cxTranslate"),s(19,"cxTranslate"),h("keydown.arrowdown",function(n){_(e);let o=c();return g(o.focusFirstItem(n))})("keydown.end",function(n){_(e);let o=c();return g(o.setOrderSearchSelectionEnd(n))}),u(),d(20,_n,4,2,"div",10),s(21,"async"),d(22,gn,3,3,"div",11),u(),a(23,"button",13),C(24),s(25,"cxTranslate"),u()()}if(t&2){let e=c();p("formGroup",e.customerSelectionForm),r(2),T(l(3,15,"asm.customerSearch.customer")),r(3),B("placeholder",l(7,17,"asm.customerSearch.searchCustomer.label")),y("aria-label",l(8,19,"asm.customerSearch.searchCustomer.label")),r(4),p("ngIf",l(10,21,e.searchResults)),r(2),p("ngIf",e.isLoading&&e.searchByCustomer),r(2),T(l(14,23,"asm.customerSearch.orderID")),r(3),B("placeholder",l(18,25,"asm.customerSearch.searchOrder.label")),y("aria-label",l(19,27,"asm.customerSearch.searchOrder.label")),r(4),p("ngIf",l(21,29,e.searchResults)),r(2),p("ngIf",e.isLoading&&e.searchByOrder),r(),L("active",e.selectedCustomer),p("disabled",!e.selectedCustomer),r(),x(" ",l(25,31,"asm.customerSearch.submit")," ")}}function fn(t,m){if(t&1&&(S(0,"cx-form-errors",31),s(1,"cxTranslate")),t&2){let e=c(2);p("translationParams",q(4,ot,l(1,2,"asm.customerSearch.searchTerm.label")))("control",e.customerSelectionForm.get("searchTerm"))}}function hn(t,m){if(t&1&&S(0,"cx-form-errors",32),t&2){let e=c(2);p("control",e.customerSelectionForm.get("searchTerm"))}}function xn(t,m){if(t&1){let e=b();a(0,"button",24,4),h("keydown.arrowup",function(n){_(e);let o=c(3);return g(o.focusPreviousChild(n))})("keydown.arrowdown",function(n){_(e);let o=c(3);return g(o.focusNextChild(n))})("keydown.arrowright",function(n){_(e);let o=c(3);return g(o.focusInputText(n))})("keydown.arrowleft",function(n){_(e);let o=c(3);return g(o.focusInputText(n))})("keydown.enter",function(n){let o=_(e).$implicit,f=c(3);return g(f.selectCustomerFromList(n,o))})("keydown.escape",function(n){_(e);let o=c(3);return g(o.closeResults(n))})("keydown.home",function(n){_(e);let o=c(3);return g(o.focusInputText(n))})("keydown.end",function(n){_(e);let o=c(3);return g(o.focusInputText(n))})("click",function(n){let o=_(e).$implicit,f=c(3);return g(f.selectCustomerFromList(n,o))}),a(2,"span",25),C(3),u(),a(4,"span",26),C(5),u()()}if(t&2){let e=m.$implicit,i=m.index,n=c(3);L("active",n.activeFocusedButtonIndex===i),p("tabindex",n.activeFocusedButtonIndex===i?0:-1),y("aria-selected",n.activeFocusedButtonIndex===i),r(3),T(e.name),r(2),T(e.uid)}}function vn(t,m){if(t&1){let e=b();a(0,"button",34,4),h("click",function(){_(e);let n=c(3);return g(n.createCustomer())})("keydown.escape",function(n){_(e);let o=c(3);return g(o.closeResults(n))})("keydown.arrowright",function(n){_(e);let o=c(3);return g(o.focusInputText(n))})("keydown.arrowleft",function(n){_(e);let o=c(3);return g(o.focusInputText(n))})("keydown.home",function(n){_(e);let o=c(3);return g(o.focusInputText(n))})("keydown.end",function(n){_(e);let o=c(3);return g(o.focusInputText(n))}),a(2,"span"),C(3),s(4,"cxTranslate"),u(),a(5,"span",35,3),C(7),s(8,"cxTranslate"),u()()}if(t&2){let e=c(3);L("active",e.activeFocusedButtonIndex===0),y("aria-selected",e.activeFocusedButtonIndex===0),r(3),T(l(4,5,"asm.customerSearch.noMatchResult")),r(4),T(l(8,7,"asm.customerSearch.createCustomer"))}}function Sn(t,m){if(t&1&&(a(0,"div",22,2),d(2,xn,6,6,"button",23)(3,vn,9,9,"button",33),s(4,"async"),u()),t&2){let e=m.ngIf;c();let i=A(4),n=c();r(2),p("ngForOf",e.entries),r(),p("ngIf",!l(4,2,n.searchResultsLoading$)&&i.value.length>=3&&!!e.entries&&e.entries.length<=0)}}function bn(t,m){t&1&&(a(0,"div",22),S(1,"cx-dot-spinner",27),s(2,"cxTranslate"),u()),t&2&&(r(),y("aria-label",l(2,1,"common.loading")))}function yn(t,m){if(t&1){let e=b();a(0,"div")(1,"form",7),h("ngSubmit",function(){_(e);let n=c();return g(n.onSubmit())}),a(2,"label")(3,"input",9,0),s(5,"cxTranslate"),s(6,"cxTranslate"),h("keydown.arrowdown",function(n){_(e);let o=c();return g(o.focusFirstItem(n))})("keydown.end",function(n){_(e);let o=c();return g(o.setSelectionEnd(n))}),u(),d(7,fn,2,6,"cx-form-errors",28)(8,hn,1,1,"cx-form-errors",29),u(),a(9,"button",30),C(10),s(11,"cxTranslate"),u()(),d(12,Sn,5,4,"div",11),s(13,"async"),d(14,bn,3,3,"div",11),s(15,"async"),u()}if(t&2){let e,i=c();r(),p("formGroup",i.customerSelectionForm),r(2),B("placeholder",l(5,12,"asm.customerSearch.searchTerm.label")),y("aria-label",l(6,14,"asm.customerSearch.searchTerm.label"))("aria-invalid",((e=i.customerSelectionForm.get("searchTerm"))==null?null:e.touched)&&((e=i.customerSelectionForm.get("searchTerm"))==null?null:e.invalid))("aria-errormessage","searchTermError"),r(4),p("cxFeature","formErrorsDescriptiveMessages"),r(),p("cxFeature","!formErrorsDescriptiveMessages"),r(),L("active",i.selectedCustomer),r(),x(" ",l(11,16,"asm.customerSearch.submit")," "),r(2),p("ngIf",l(13,18,i.searchResults)),r(2),p("ngIf",l(15,20,i.searchResultsLoading$))}}var Tn=["asmCustomer360Launcher"];function In(t,m){if(t&1){let e=b();a(0,"button",7,0),h("click",function(){_(e);let n=c(2);return g(n.openAsmCustomer360())}),C(2),s(3,"cxTranslate"),u()}t&2&&(r(2),x(" ",l(3,1,"asm.asmCustomer360ViewButton")," "))}function wn(t,m){if(t&1){let e=b();a(0,"button",7,0),h("click",function(){_(e);let n=c(2);return g(n.openAsmCustomer360())}),C(2),s(3,"cxTranslate"),u()}t&2&&(r(2),x(" ",l(3,1,"asm.asmCustomer360Button")," "))}function En(t,m){if(t&1){let e=b();w(0),a(1,"div",2)(2,"label",3),C(3),u(),a(4,"label",4),C(5),u()(),S(6,"cx-asm-bind-cart"),d(7,In,4,3,"button",5)(8,wn,4,3,"button",5),a(9,"button",6),h("click",function(){_(e);let n=c();return g(n.logoutCustomer())}),C(10),s(11,"cxTranslate"),u(),E()}if(t&2){let e=c();r(3),T(e.customer==null?null:e.customer.name),r(2),T(e.customer==null?null:e.customer.uid),r(2),p("ngIf",e.isAsmCustomer360Configured&&e.customer&&e.isShowStyleChangesInASM),r(),p("ngIf",e.isAsmCustomer360Configured&&e.customer&&!e.isShowStyleChangesInASM),r(2),x(" ",l(11,5,"asm.endSession")," ")}}function An(t,m){t&1&&(a(0,"span",3),C(1),s(2,"cxTranslate"),u()),t&2&&(r(),x(" ",l(2,1,"asm.toggleUi.collapse")," "))}function Ln(t,m){t&1&&(a(0,"span",3),C(1),s(2,"cxTranslate"),u()),t&2&&(r(),x(" ",l(2,1,"asm.toggleUi.expand")," "))}var Bn=["customerListLink"],Ti=["addNewCustomerLink"];function kn(t,m){if(t&1){let e=b();a(0,"div",15)(1,"a",16,0),h("click",function(){_(e);let n=c();return g(n.showCustomList())}),S(3,"cx-icon",10),a(4,"span"),C(5),s(6,"cxTranslate"),u()()()}if(t&2){let e=c();r(3),p("type",e.iconTypes.USER_FRIENDS),r(2),T(l(6,2,"asm.customers"))}}function Fn(t,m){t&1&&S(0,"cx-asm-session-timer")}function Dn(t,m){if(t&1){let e=b();a(0,"button",17),s(1,"cxTranslate"),h("click",function(){_(e);let n=c();return g(n.hideUi())}),u()}t&2&&B("title",l(1,1,"asm.hideUi"))}function Mn(t,m){if(t&1){let e=b();a(0,"button",18),s(1,"cxTranslate"),h("click",function(){_(e);let n=c();return g(n.logout())}),u()}t&2&&B("title",l(1,1,"asm.logout"))}function Vn(t,m){t&1&&S(0,"cx-customer-emulation")}function Rn(t,m){if(t&1){let e=b();a(0,"cx-message",21),s(1,"cxTranslate"),h("closeMessage",function(){_(e);let n=c(4);return g(n.closeDialogConfirmationAlert())}),u()}if(t&2){let e=c(4);p("text",l(1,2,"asm.createCustomerSuccessfullyAlert"))("type",e.globalMessageType.MSG_TYPE_CONFIRMATION)}}function On(t,m){if(t&1){let e=b();a(0,"cx-message",21),s(1,"cxTranslate"),h("closeMessage",function(){_(e);let n=c(4);return g(n.closeDeeplinkCartInfoAlert())}),u()}if(t&2){let e=c(4);p("text",l(1,2,e.deeplinkCartAlertKey))("type",e.globalMessageType.MSG_TYPE_INFO)}}function Nn(t,m){if(t&1){let e=b();a(0,"cx-message",21),s(1,"cxTranslate"),h("closeMessage",function(){_(e);let n=c(4);return g(n.closeCustomerEmulationInfoAlert())}),u()}if(t&2){let e=c(4);p("text",l(1,2,"asm.startCustomerEmulationAlertInfo"))("type",e.globalMessageType.MSG_TYPE_INFO)}}function Pn(t,m){if(t&1&&(w(0),d(1,Vn,1,0,"cx-customer-emulation",12)(2,Rn,2,4,"cx-message",20)(3,On,2,4,"cx-message",20),s(4,"async"),d(5,Nn,2,4,"cx-message",20),E()),t&2){let e=c(2).ngIf,i=c();r(),p("ngIf",e),r(),p("ngIf",e&&i.showCreateCustomerSuccessfullyAlert),r(),p("ngIf",l(4,4,i.showDeeplinkCartInfoAlert$)),r(2),p("ngIf",e&&i.showCustomerEmulationInfoAlert)}}function $n(t,m){if(t&1){let e=b();a(0,"cx-customer-selection",23),h("submitEvent",function(n){_(e);let o=c(4);return g(o.startCustomerEmulationSession(n,n.parameters))}),u()}}function Un(t,m){if(t&1&&d(0,$n,1,0,"cx-customer-selection",22),t&2){let e=c(2).ngIf;p("ngIf",e)}}function jn(t,m){if(t&1&&(w(0),d(1,Pn,6,6,"ng-container",19),s(2,"async"),d(3,Un,1,1,"ng-template",null,2,D),E()),t&2){let e=A(4),i=c(2);r(),p("ngIf",l(2,2,i.customer$))("ngIfElse",e)}}function zn(t,m){if(t&1){let e=b();a(0,"cx-csagent-login-form",25),s(1,"async"),h("submitEvent",function(n){_(e);let o=c(3);return g(o.loginCustomerSupportAgent(n))}),u()}if(t&2){let e=c(3);p("csAgentTokenLoading",l(1,1,e.csAgentTokenLoading$))}}function Gn(t,m){if(t&1&&d(0,zn,2,3,"cx-csagent-login-form",24),t&2){let e=c().ngIf;p("ngIf",e)}}function Qn(t,m){if(t&1&&(w(0),d(1,jn,5,4,"ng-container",19),s(2,"async"),d(3,Gn,1,1,"ng-template",null,1,D),E()),t&2){let e=A(4),i=c();r(),p("ngIf",l(2,2,i.customerSupportAgentLoggedIn$))("ngIfElse",e)}}var Hn=(t,m)=>({customerA:t,customerB:m}),qn=t=>({customerListsPage:t}),Kn=t=>({customerSearchPage:t}),Wn=(t,m)=>({customerEntry:t,column:m,showHeader:!1}),st=(t,m)=>({customerEntry:t,column:m,showHeader:!0}),Ii=(t,m)=>({column:t,customerEntry:m}),wi=t=>({count:t}),Yn=t=>({ariaLabel:t,ariaControls:"asm-cusomer-list-table"});function Jn(t,m){}function Zn(t,m){t&1&&d(0,Jn,0,0,"ng-template")}function Xn(t,m){}function er(t,m){t&1&&d(0,Xn,0,0,"ng-template")}function tr(t,m){}function ir(t,m){t&1&&d(0,tr,0,0,"ng-template")}function nr(t,m){}function rr(t,m){t&1&&d(0,nr,0,0,"ng-template")}function or(t,m){}function sr(t,m){t&1&&d(0,or,0,0,"ng-template")}function ar(t,m){if(t&1&&(a(0,"div",24),s(1,"async"),a(2,"div",25),s(3,"async"),d(4,er,1,0,null,26)(5,ir,1,0,null,26),s(6,"async"),u(),a(7,"div",27),s(8,"async"),d(9,rr,1,0,null,14)(10,sr,1,0,null,14),u()()),t&2){let e=m.ngIf,i=c(),n=A(35),o=A(37),f=A(39),I=A(43);L("tablet-mobile",l(1,12,i.breakpoint$)!==i.BREAKPOINT.md),r(2),L("mobile",l(3,14,i.breakpoint$)===i.BREAKPOINT.xs),r(2),p("ngTemplateOutlet",I)("ngTemplateOutletContext",q(20,qn,e)),r(),p("ngTemplateOutlet",o)("ngTemplateOutletContext",q(22,Kn,l(6,16,i.customerSearchPage$))),r(2),L("mobile",l(8,18,i.breakpoint$)===i.BREAKPOINT.xs),r(2),p("ngTemplateOutlet",f),r(),p("ngTemplateOutlet",n)}}function cr(t,m){t&1&&(a(0,"div",28),C(1),s(2,"cxTranslate"),u()),t&2&&(r(),x(" ",l(2,1,"asm.customerList.noLists")," "))}function lr(t,m){t&1&&(a(0,"div",28),C(1),s(2,"cxTranslate"),u()),t&2&&(r(),x(" ",l(2,1,"asm.customerList.listsError")," "))}function mr(t,m){t&1&&(a(0,"div",28),C(1),s(2,"cxTranslate"),u()),t&2&&(r(),x(" ",l(2,1,"generalErrors.pageFailure")," "))}function pr(t,m){t&1&&S(0,"cx-spinner")}function ur(t,m){t&1&&(w(0),C(1),s(2,"cxTranslate"),E()),t&2&&(r(),x(" ",l(2,1,"asm.customerList.tableHeader.customerName")," "))}function dr(t,m){t&1&&(w(0),C(1),s(2,"cxTranslate"),E()),t&2&&(r(),x(" ",l(2,1,"asm.customerList.tableHeader.emailId")," "))}function _r(t,m){if(t&1&&(w(0),C(1),s(2,"cxTranslate"),E()),t&2){let e=c(2).$implicit;r(),x(" ",l(2,1,e.headerLocalizationKey)," ")}}function gr(t,m){if(t&1&&(a(0,"span"),d(1,ur,3,3,"ng-container",20)(2,dr,3,3,"ng-container",20)(3,_r,3,3,"ng-container",20),u()),t&2){let e=c().$implicit;r(),p("ngIf",e.headerLocalizationKey==="asm.customerList.tableHeader.customer"),r(),p("ngIf",e.headerLocalizationKey==="asm.customerList.tableHeader.email"),r(),p("ngIf",e.headerLocalizationKey!=="asm.customerList.tableHeader.customer"&&e.headerLocalizationKey!=="asm.customerList.tableHeader.email")}}function Cr(t,m){if(t&1&&(a(0,"th",36),d(1,gr,4,3,"span",20),u()),t&2){let e=m.$implicit;r(),p("ngIf",e.headerLocalizationKey&&e.headerLocalizationKey!=="hideHeaders")}}function fr(t,m){if(t&1&&(a(0,"thead")(1,"tr",34),d(2,Cr,2,1,"th",35),u()()),t&2){let e=c(3);r(2),p("ngForOf",e.customerListConfig==null?null:e.customerListConfig.columns)}}function hr(t,m){}function xr(t,m){t&1&&d(0,hr,0,0,"ng-template")}function vr(t,m){if(t&1&&(a(0,"td",39),d(1,xr,1,0,null,26),u()),t&2){let e=m.$implicit,i=c(2).$implicit;c(3);let n=A(31);r(),p("ngTemplateOutlet",n)("ngTemplateOutletContext",K(2,Wn,i,e))}}function Sr(t,m){if(t&1&&(w(0),d(1,vr,2,5,"td",38),E()),t&2){let e=c(4);r(),p("ngForOf",e.customerListConfig==null?null:e.customerListConfig.columns)}}function br(t,m){}function yr(t,m){t&1&&d(0,br,0,0,"ng-template")}function Tr(t,m){if(t&1&&(w(0),d(1,yr,1,0,null,26),E()),t&2){let e=c().$implicit,i=c(2).$implicit;c(3);let n=A(31);r(),p("ngTemplateOutlet",n)("ngTemplateOutletContext",K(2,st,i,e))}}function Ir(t,m){if(t&1&&(w(0),d(1,Tr,2,5,"ng-container",20),E()),t&2){let e=m.even;r(),p("ngIf",e)}}function wr(t,m){}function Er(t,m){t&1&&d(0,wr,0,0,"ng-template")}function Ar(t,m){if(t&1&&(w(0),d(1,Er,1,0,null,26),E()),t&2){let e=c().$implicit,i=c(2).$implicit;c(3);let n=A(31);r(),p("ngTemplateOutlet",n)("ngTemplateOutletContext",K(2,st,i,e))}}function Lr(t,m){if(t&1&&(w(0),d(1,Ar,2,5,"ng-container",20),E()),t&2){let e=m.odd;r(),p("ngIf",e)}}function Br(t,m){if(t&1&&(w(0),a(1,"td",40),d(2,Ir,2,1,"ng-container",41),u(),a(3,"td",40),d(4,Lr,2,1,"ng-container",41),u(),E()),t&2){let e=c(4);r(2),p("ngForOf",e.customerListConfig==null?null:e.customerListConfig.columns),r(2),p("ngForOf",e.customerListConfig==null?null:e.customerListConfig.columns)}}function kr(t,m){}function Fr(t,m){t&1&&d(0,kr,0,0,"ng-template")}function Dr(t,m){if(t&1&&(w(0),d(1,Fr,1,0,null,26),E()),t&2){let e=m.$implicit,i=c(2).$implicit;c(3);let n=A(31);r(),p("ngTemplateOutlet",n)("ngTemplateOutletContext",K(2,st,i,e))}}function Mr(t,m){if(t&1&&(a(0,"td",40),d(1,Dr,2,5,"ng-container",41),u()),t&2){let e=c(4);r(),p("ngForOf",e.customerListConfig==null?null:e.customerListConfig.columns)}}function Vr(t,m){if(t&1&&(a(0,"tr",34),d(1,Sr,2,1,"ng-container",20),s(2,"async"),d(3,Br,5,2,"ng-container",20),s(4,"async"),d(5,Mr,2,1,"td",37),s(6,"async"),u()),t&2){let e=c(3);r(),p("ngIf",l(2,3,e.breakpoint$)===e.BREAKPOINT.md),r(2),p("ngIf",l(4,5,e.breakpoint$)===e.BREAKPOINT.sm),r(2),p("ngIf",l(6,7,e.breakpoint$)===e.BREAKPOINT.xs)}}function Rr(t,m){if(t&1&&(a(0,"table",31)(1,"caption",32),C(2),s(3,"cxTranslate"),u(),d(4,fr,3,1,"thead",20),s(5,"async"),a(6,"tbody"),d(7,Vr,7,9,"tr",33),u()()),t&2){let e=c().ngIf,i=c();r(2),x(" ",l(3,3,"asm.customerList.title")," "),r(2),p("ngIf",l(5,5,i.breakpoint$)===i.BREAKPOINT.md),r(3),p("ngForOf",e==null?null:e.entries)}}function Or(t,m){t&1&&(a(0,"div",42),C(1),s(2,"cxTranslate"),u()),t&2&&(r(),x(" ",l(2,1,"asm.customerList.noCustomers")," "))}function Nr(t,m){if(t&1&&(a(0,"div"),d(1,Rr,8,7,"table",29)(2,Or,3,3,"div",30),u()),t&2){let e=m.ngIf,i=c();r(),p("ngIf",i.loaded),r(),p("ngIf",!(e!=null&&e.entries.length))}}function Pr(t,m){if(t&1){let e=b();a(0,"div")(1,"cx-pagination",44),h("viewPageEvent",function(n){_(e);let o=c(2);return g(o.changePage(n))}),u()()}if(t&2){let e=m.ngIf;r(),p("pagination",e.pagination)}}function $r(t,m){if(t&1&&(a(0,"div",43),s(1,"async"),a(2,"div",27),s(3,"async"),d(4,Pr,2,1,"div",20),s(5,"async"),u()()),t&2){let e=c();L("asm-mobile-pagination",l(1,5,e.breakpoint$)!==e.BREAKPOINT.md),r(2),L("mobile",l(3,7,e.breakpoint$)===e.BREAKPOINT.xs),r(2),p("ngIf",l(5,9,e.customerSearchPage$))}}function Ur(t,m){if(t&1&&(a(0,"span",50),C(1),s(2,"cxTranslate"),u()),t&2){let e=c(2).column;r(),x(" ",l(2,1,e.headerLocalizationKey)," ")}}function jr(t,m){t&1&&ze(0)}function zr(t,m){if(t&1&&(w(0),d(1,jr,1,0,"ng-container",26),E()),t&2){let e=c(2),i=e.customerEntry,n=e.column;c();let o=A(33);r(),p("ngTemplateOutlet",o)("ngTemplateOutletContext",K(2,Ii,n,i))}}function Gr(t,m){if(t&1&&(S(0,"img",54),s(1,"cxTranslate"),s(2,"cxTranslate")),t&2){let e=c(3).customerEntry,i=c();B("alt",l(1,3,"asm.mainLogoLabel")),B("title",l(2,5,"asm.mainLogoLabel")),y("src",(i.occConfig==null||i.occConfig.backend==null||i.occConfig.backend.occ==null?null:i.occConfig.backend.occ.baseUrl)+(e==null||e.userAvatar==null?null:e.userAvatar.url),ft)}}function Qr(t,m){if(t&1&&(a(0,"div",55),C(1),u()),t&2){let e=c(3).customerEntry,i=c();r(),x(" ",i.getBadgeText(e)," ")}}function Hr(t,m){if(t&1&&(a(0,"div",51),d(1,Gr,3,7,"img",52)(2,Qr,2,1,"div",53),u()),t&2){let e=c(2).customerEntry;r(),p("ngIf",e==null||e.userAvatar==null?null:e.userAvatar.url),r(),p("ngIf",!(!(e==null||e.userAvatar==null)&&e.userAvatar.url))}}function qr(t,m){t&1&&ze(0)}function Kr(t,m){if(t&1){let e=b();a(0,"button",56),s(1,"cxTranslate"),s(2,"cxTranslate"),h("click",function(){_(e);let n=c(2),o=n.customerEntry,f=n.column,I=c();return g(I.startColumnAction(o,f.actionType))}),d(3,qr,1,0,"ng-container",26),u()}if(t&2){let e,i,n=c(2),o=n.customerEntry,f=n.column,I=c(),Q=A(33);vt((f.actionType==="ACTIVE_CART"?"cx-cart ":"")+(f.actionType!=="START_SESSION"?"cx-action-disable":"")),p("disabled",I.isRequired(o,f.actionType)),y("title",f.icon?l(1,7,(e=f.icon.captionLocalizationKey)!==null&&e!==void 0?e:f.headerLocalizationKey):void 0)("aria-label",f.icon?l(2,9,(i=f.icon.captionLocalizationKey)!==null&&i!==void 0?i:f.headerLocalizationKey):void 0),r(3),p("ngTemplateOutlet",Q)("ngTemplateOutletContext",K(11,Ii,f,o))}}function Wr(t,m){if(t&1&&(a(0,"div",46),d(1,Ur,3,3,"span",47)(2,zr,2,5,"ng-container",20)(3,Hr,3,2,"div",48)(4,Kr,4,14,"button",49),u()),t&2){let e=c(),i=e.column,n=e.showHeader,o=c();r(),p("ngIf",n),r(),p("ngIf",!i.actionType),r(),p("ngIf",(o.customerListConfig==null?null:o.customerListConfig.showAvatar)&&(i==null?null:i.actionType)===(o.customerListColumnActionType==null?null:o.customerListColumnActionType.START_SESSION)),r(),p("ngIf",i.actionType)}}function Yr(t,m){if(t&1&&d(0,Wr,5,4,"div",45),t&2){let e=m.column;p("ngIf",e.headerLocalizationKey!=="hideHeaders")}}function Jr(t,m){if(t&1&&(a(0,"span"),C(1),u()),t&2){let e=c(),i=e.customerEntry,n=e.column;r(),T((n.renderer==null?null:n.renderer(i))||"")}}function Zr(t,m){if(t&1&&(S(0,"cx-icon",58),s(1,"cxTranslate"),s(2,"cxTranslate")),t&2){let e,i,n=c(),o=n.customerEntry,f=n.column,I=c();L("cx-action-color",f.actionType&&!I.isRequired(o,f.actionType)),p("type",f.icon.symbol),y("title",f.actionType?void 0:l(1,5,(e=f.icon.captionLocalizationKey)!==null&&e!==void 0?e:f.headerLocalizationKey))("aria-label",f.actionType?void 0:l(2,7,(i=f.icon.captionLocalizationKey)!==null&&i!==void 0?i:f.headerLocalizationKey))}}function Xr(t,m){if(t&1&&(a(0,"div"),d(1,Jr,2,1,"span",20)(2,Zr,3,9,"cx-icon",57),u()),t&2){let e=m.column;r(),p("ngIf",!e.icon),r(),p("ngIf",e.icon)}}function eo(t,m){if(t&1){let e=b();a(0,"div",59)(1,"input",60),s(2,"cxTranslate"),s(3,"cxTranslate"),h("keyup",function(n){_(e);let o=c();return g(o.onKey(n))}),u(),a(4,"cx-icon",61),s(5,"cxTranslate"),s(6,"cxTranslate"),h("click",function(){_(e);let n=c();return g(n.searchCustomers())}),u()()}if(t&2){let e=c();r(),B("placeholder",l(2,6,"asm.customerList.searchBox")),p("formControl",e.searchBox),y("aria-label",l(3,8,"asm.customerList.enterSearchBox")),r(3),p("type",e.iconTypes.SEARCH)("title",l(5,10,"storeFinder.searchNearestStores")),y("aria-label",l(6,12,"storeFinder.searchNearestStores"))}}function to(t,m){if(t&1&&(w(0),C(1),s(2,"cxTranslate"),E()),t&2){let e=c(2).customerSearchPage;r(),x(" ",we(2,1,"asm.customerList.noOfCustomers",q(4,wi,e==null||e.pagination==null?null:e.pagination.totalResults))," ")}}function io(t,m){t&1&&(w(0),C(1),s(2,"cxTranslate"),E()),t&2&&(r(),x(" ",l(2,1,"asm.customerList.oneCustomer")," "))}function no(t,m){if(t&1&&(a(0,"span",63),d(1,to,3,6,"ng-container",20)(2,io,3,3,"ng-container",20),u()),t&2){let e=c().customerSearchPage;r(),p("ngIf",(e==null||e.pagination==null?null:e.pagination.totalResults)>1),r(),p("ngIf",(e==null||e.pagination==null?null:e.pagination.totalResults)===1)}}function ro(t,m){if(t&1&&d(0,no,3,2,"span",62),t&2){let e=m.customerSearchPage;p("ngIf",e==null||e.pagination==null?null:e.pagination.totalResults)}}function oo(t,m){t&1&&(a(0,"span",67),C(1),s(2,"cxTranslate"),u()),t&2&&(r(),T(l(2,1,"asm.customerList.tableSort.sortBy")))}function so(t,m){t&1&&(a(0,"span",32),C(1),s(2,"cxTranslate"),u()),t&2&&(r(),T(l(2,1,"asm.customerList.tableSort.sortBy")))}function ao(t,m){if(t&1){let e=b();a(0,"label"),d(1,oo,3,3,"span",64)(2,so,3,3,"span",65),a(3,"cx-sorting",66),s(4,"cxTranslate"),s(5,"async"),h("sortListEvent",function(n){_(e);let o=c();return g(o.changeSortCode(n))}),u()()}if(t&2){let e=c();r(),p("cxFeature","a11yShowLabelOfSelect"),r(),p("cxFeature","!a11yShowLabelOfSelect"),r(),B("placeholder",l(4,7,"asm.customerList.tableSort.sortBy")),p("sortOptions",e.sorts)("sortLabels",l(5,9,e.getSortLabels()))("selectedOption",e.sortCode)("ariaLabel",e.sortCode)}}function co(t,m){if(t&1){let e=b();a(0,"button",71),h("click",function(){_(e);let n=c(2);return g(n.goToPreviousPage())}),S(1,"cx-icon",72),a(2,"span"),C(3),s(4,"cxTranslate"),u()()}if(t&2){let e=c(2);p("disabled",e.currentPage===0||!e.loaded),r(),p("type",e.iconTypes.CARET_LEFT),r(2),T(l(4,3,"asm.customerList.page.previous"))}}function lo(t,m){if(t&1){let e=b();a(0,"button",73),h("click",function(){_(e);let n=c(2);return g(n.goToNextPage())}),a(1,"span"),C(2),s(3,"cxTranslate"),u(),S(4,"cx-icon",74),u()}if(t&2){let e=c(2);p("disabled",e.currentPage===e.maxPage||!e.loaded),r(2),T(l(3,3,"asm.customerList.page.next")),r(2),p("type",e.iconTypes.CARET_RIGHT)}}function mo(t,m){if(t&1&&(a(0,"div",68)(1,"div"),C(2),s(3,"cxTranslate"),u(),d(4,co,5,5,"button",69)(5,lo,5,5,"button",70),u()),t&2){let e=c();r(2),x(" ",we(3,3,"asm.customerList.page.page",q(6,wi,e.currentPage+1))," "),r(2),p("ngIf",e.maxPage>0),r(),p("ngIf",e.maxPage>0)}}function po(t,m){t&1&&(a(0,"span",67),C(1),s(2,"cxTranslate"),u()),t&2&&(r(),T(l(2,1,"asm.customerList.title")))}function uo(t,m){t&1&&(a(0,"span",32),C(1),s(2,"cxTranslate"),u()),t&2&&(r(),T(l(2,1,"asm.customerList.title")))}function _o(t,m){if(t&1){let e=b();a(0,"label"),d(1,po,3,3,"span",64)(2,uo,3,3,"span",65),a(3,"ng-select",75),h("change",function(){_(e);let n=c();return g(n.onChangeCustomerGroup())}),Tt("ngModelChange",function(n){_(e);let o=c();return yt(o.selectedUserGroupId,n)||(o.selectedUserGroupId=n),g(n)}),u()()}if(t&2){let e=m.customerListsPage,i=c();r(),p("cxFeature","a11yShowLabelOfSelect"),r(),p("cxFeature","!a11yShowLabelOfSelect"),r(),p("searchable",!1)("clearable",!1)("tabIndex",0),bt("ngModel",i.selectedUserGroupId),p("items",e==null?null:e.userGroups)("cxNgSelectA11y",q(8,Yn,i.getGroupName(e,i.selectedUserGroupId)))}}function go(t,m){if(t&1){let e=b();a(0,"button",76),s(1,"cxTranslate"),s(2,"cxTranslate"),h("click",function(){_(e);let n=c();return g(n.closeModal("Cross click"))}),a(3,"span",77),S(4,"cx-icon",58),u()()}if(t&2){let e=c();B("title",l(1,3,"common.close")),y("aria-label",l(2,5,"common.close")),r(4),p("type",e.iconTypes.CLOSE)}}function Co(t,m){if(t&1){let e=b();a(0,"button",78),h("click",function(){_(e);let n=c();return g(n.createCustomer())}),S(1,"cx-icon",58),a(2,"span"),C(3),s(4,"cxTranslate"),u()()}if(t&2){let e=c();r(),p("type",e.iconTypes.USER_PLUS),r(2),T(l(4,2,"asm.customerList.createCustomer"))}}var Oe=function(t){return t.CANCEL="CANCEL",t.REPLACE="REPLACE",t}(Oe||{}),fo=(()=>{class t{constructor(e){this.launchDialogService=e,this.BIND_CART_ACTION=Oe,this.focusConfig={trap:!0,block:!0,autofocus:!0,focusOnEscape:!0}}closeModal(e){this.launchDialogService.closeDialog(e)}static{this.\u0275fac=function(i){return new(i||t)(v(G))}}static{this.\u0275cmp=F({type:t,selectors:[["cx-asm-bind-cart-dialog"]],standalone:!1,decls:20,vars:19,consts:[["role","dialog","aria-labelledby","asm-bind-cart-dialog-title",1,"cx-asm-bind-cart-dialog","cx-modal-container","cx-asm-dialog",3,"esc","cxFocus"],[1,"cx-modal-content"],[1,"cx-dialog-header","modal-header"],["id","asm-bind-cart-dialog-title",1,"title","modal-title"],[1,"cx-dialog-body","modal-body"],[1,"cx-dialog-row"],[1,"cx-dialog-item"],[1,"cx-dialog-footer","modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(i,n){i&1&&(a(0,"div",0),h("esc",function(){return n.closeModal(n.BIND_CART_ACTION.CANCEL)}),a(1,"div",1)(2,"div",2)(3,"h2",3),C(4),s(5,"cxTranslate"),u()(),a(6,"div",4)(7,"div",5)(8,"div",6),C(9),s(10,"cxTranslate"),u()()(),a(11,"div",7)(12,"button",8),s(13,"cxTranslate"),h("click",function(){return n.closeModal(n.BIND_CART_ACTION.REPLACE)}),C(14),s(15,"cxTranslate"),u(),a(16,"button",9),s(17,"cxTranslate"),h("click",function(){return n.closeModal(n.BIND_CART_ACTION.CANCEL)}),C(18),s(19,"cxTranslate"),u()()()()),i&2&&(p("cxFocus",n.focusConfig),r(4),x(" ",l(5,7,"asm.bindCart.dialog.title")," "),r(5),x(" ",l(10,9,"asm.bindCart.dialog.body")," "),r(3),y("aria-label",l(13,11,"asm.bindCart.dialog.actions.replace")),r(2),x(" ",l(15,13,"asm.bindCart.dialog.actions.replace")," "),r(2),y("aria-label",l(17,15,"common.cancel")),r(2),x(" ",l(19,17,"common.cancel")," "))},dependencies:[le,V],encapsulation:2})}}return t})(),Ne=function(t){return t.CANCEL="CANCEL",t.SAVE="SAVE",t}(Ne||{}),ho=(()=>{class t{constructor(e,i){this.launchDialogService=e,this.savedCartFacade=i,this.BIND_CART_ACTION=Ne,this.showDialogAlert$=new H(!0),this.globalMessageType=W,this.focusConfig={trap:!0,block:!0,autofocus:!0,focusOnEscape:!0},se("a11yQTY2Quantity")}ngOnInit(){this.launchDialogService.data$.pipe(M(1)).subscribe(e=>{this.cart=e,this.setCartTotalQty()})}setCartTotalQty(){let e=0;if(this.cart.entries)for(let i of this.cart.entries)e+=i.quantity?i.quantity:0;this.cartQty=e}closeDialogAlert(){this.showDialogAlert$.next(!1)}closeModal(e){e===Ne.SAVE&&this.saveCart(),this.launchDialogService.closeDialog(e)}saveCart(){this.savedCartFacade.saveCart({cartId:this.cart.code,saveCartName:this.cart.code,saveCartDescription:"-"})}static{this.\u0275fac=function(i){return new(i||t)(v(G),v(it))}}static{this.\u0275cmp=F({type:t,selectors:[["cx-asm-save-cart-dialog"]],standalone:!1,decls:37,vars:30,consts:[["showSaveCartWarning",""],["role","dialog","aria-labelledby","asm-save-cart-dialog-title",1,"cx-asm-save-cart-dialog","cx-modal-container","cx-asm-dialog",3,"esc","cxFocus"],[1,"cx-modal-content"],[1,"cx-dialog-header","modal-header"],["id","asm-save-cart-dialog-title",1,"title","modal-title"],[1,"cx-dialog-body","modal-body"],[4,"ngIf","ngIfElse"],[1,"cx-dialog-content"],[1,"cx-dialog-row","row"],[1,"cx-dialog-item","col-sm-6","col-md-6","text-right","item-left-text"],[1,"cx-dialog-item","col-sm-6","col-md-6","text-left","item-right-text"],["class","cx-dialog-item col-sm-6 col-md-6 text-right item-left-text",4,"cxFeature"],[1,"cx-dialog-footer","modal-footer"],["id","asm-save-cart-dialog-btn","type","button",1,"btn","btn-primary",3,"click","disabled"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"message-container"],[3,"text","type","closeMessage",4,"ngIf"],[3,"closeMessage","text","type"]],template:function(i,n){if(i&1){let o=b();a(0,"div",1),h("esc",function(){return _(o),g(n.closeModal(n.BIND_CART_ACTION.CANCEL))}),a(1,"div",2)(2,"div",3)(3,"h2",4),C(4),s(5,"cxTranslate"),u()(),a(6,"div",5),d(7,Fi,4,3,"ng-container",6)(8,Mi,3,3,"ng-template",null,0,D),a(10,"div",7)(11,"div",8)(12,"div",9),C(13),s(14,"cxTranslate"),u(),a(15,"div",10),C(16),u()(),a(17,"div",8),d(18,Vi,3,3,"div",11)(19,Ri,3,3,"div",11),a(20,"div",10),C(21),u()(),a(22,"div",8)(23,"div",9),C(24),s(25,"cxTranslate"),u(),a(26,"div",10),C(27),u()()()(),a(28,"div",12)(29,"button",13),s(30,"cxTranslate"),h("click",function(){return _(o),g(n.closeModal(n.BIND_CART_ACTION.SAVE))}),C(31),s(32,"cxTranslate"),u(),a(33,"button",14),s(34,"cxTranslate"),h("click",function(){return _(o),g(n.closeModal(n.BIND_CART_ACTION.CANCEL))}),C(35),s(36,"cxTranslate"),u()()()()}if(i&2){let o=A(9);p("cxFocus",n.focusConfig),r(4),x(" ",l(5,16,"asm.saveCart.dialog.title")," "),r(3),p("ngIf",n.cartQty>0)("ngIfElse",o),r(6),x(" ",l(14,18,"asm.saveCart.dialog.row.id")," "),r(3),x(" ",n.cart.code," "),r(2),p("cxFeature","a11yQTY2Quantity"),r(),p("cxFeature","!a11yQTY2Quantity"),r(2),x(" ",n.cartQty," "),r(3),x(" ",l(25,20,"asm.saveCart.dialog.row.total")," "),r(3),x(" ",n.cart.totalPriceWithTax==null?null:n.cart.totalPriceWithTax.formattedValue," "),r(2),p("disabled",n.cartQty===0),y("aria-label",l(30,22,"asm.saveCart.dialog.actions.save")),r(2),x(" ",l(32,24,"asm.saveCart.dialog.actions.save")," "),r(2),y("aria-label",l(34,26,"common.cancel")),r(2),x(" ",l(36,28,"common.cancel")," ")}},dependencies:[j,le,Me,fe,X,V],encapsulation:2})}}return t})(),Se=(()=>{class t{constructor(e,i,n,o,f){this.authService=e,this.csAgentAuthService=i,this.winRef=n,this.asmEnablerService=o,this.asmDeepLinkService=f,this.isEmulatedByDeepLink$=new H(!1),this.showDeeplinkCartInfoAlert$=new H(!1),this.routingService=ee(oe)}getSearchParameter(e){return this.asmDeepLinkService?.getSearchParameter(e)}isEmulatedByDeepLink(){return this.isEmulatedByDeepLink$}setEmulatedByDeepLink(e){this.isEmulatedByDeepLink$.next(e)}setShowDeeplinkCartInfoAlert(e){this.showDeeplinkCartInfoAlert$.next(e)}shouldShowDeeplinkCartInfoAlert(){return this.showDeeplinkCartInfoAlert$}logoutCustomerSupportAgentAndCustomer(){this.csAgentAuthService.logoutCustomerSupportAgent()}logoutCustomer(){this.authService.logout()}isCustomerEmulationSessionInProgress(){return this.csAgentAuthService.isCustomerEmulated()}unload(){this.winRef.localStorage&&this.winRef.localStorage.removeItem(ui)}isEmulateInURL(){return this.asmDeepLinkService?.isEmulateInURL()||!1}getDeepLinkUrlParams(){return this.asmDeepLinkService?.getParamsInUrl()}handleDeepLinkNavigation(e=this.getDeepLinkUrlParams()){this.asmDeepLinkService?.handleNavigation(e)}handleAsmDialogAction(e){typeof e=="object"&&e.actionType===hi.NAVIGATE&&this.routingService.go(e.route)}static{this.\u0275fac=function(i){return new(i||t)(N(He),N(nt),N(kt),N(di),N(fi))}}static{this.\u0275prov=Ie({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),at=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=F({type:t,selectors:[["cx-dot-spinner"]],standalone:!1,decls:3,vars:0,template:function(i,n){i&1&&S(0,"div")(1,"div")(2,"div")},encapsulation:2,changeDetection:0})}}return t})(),xo=(()=>{class t{constructor(e,i,n,o,f,I,Q,de){this.globalMessageService=e,this.activeCartFacade=i,this.multiCartFacade=n,this.asmBindCartFacade=o,this.launchDialogService=f,this.savedCartFacade=I,this.asmComponentService=Q,this.routing=de,this.activeCartValidator=ie=>ie.value===this.activeCartId?{activeCartError:!0}:(this.deepLinkCartId&&ie.value!==this.deepLinkCartId&&this.resetDeeplinkCart(),null),this.cartId=new $t("",[Y.required,Y.minLength(1),this.activeCartValidator]),this.loading$=new H(!1),this.valid$=this.cartId.statusChanges.pipe(Z(ie=>ie==="VALID"),gt(1)),this.activeCartId="",this.deepLinkCartId="",this.displayBindCartBtn$=new H(!0),this.displaySaveCartBtn$=new H(!1),this.subscription=new J,this.featureConfig=ee(Le),this.isShowStyleChangesInASM=this.featureConfig.isEnabled("showStyleChangesInASM")}ngOnInit(){this.subscribeForDeeplinkCart(),this.subscription.add(this.activeCartFacade.getActiveCartId().subscribe(e=>{this.activeCartId=e??""}))}bindCartToCustomer(){let e=this.cartId.value,i=be([this.loading$.asObservable(),this.valid$]).pipe(M(1),k(([n,o])=>!n&&o),O(()=>this.loading$.next(!0)),ye(()=>this.activeCartFacade.getActive().pipe(Z(n=>n.deliveryItemsQuantity??0),M(1))),ye(n=>pt(()=>!!(this.activeCartId&&n),this.openDialog(this.activeCartId,e),this.simpleBindCart(e))),dt(()=>this.loading$.next(!1))).subscribe({next:()=>{this.globalMessageService.add({key:"asm.bindCart.success"},W.MSG_TYPE_CONFIRMATION)},error:n=>{this.globalMessageService.add(n.details?.[0].message??"",W.MSG_TYPE_ERROR)}});this.subscription.add(i)}onSaveInactiveCart(){this.asmComponentService?.setShowDeeplinkCartInfoAlert(!1);let e=this.asmComponentService?.getSearchParameter("customerId");this.multiCartFacade.loadCart({cartId:this.deepLinkCartId,userId:e}),this.multiCartFacade.getCartEntity(this.deepLinkCartId).pipe(k(i=>i.loading===!1&&i.success===!0),M(1),Z(i=>i.value),k(i=>!!i)).subscribe(i=>{this.openASMSaveCartDialog(i)}),this.afterCloseASMSaveCartDialog()}clearText(){this.cartId.setValue(""),this.resetDeeplinkCart()}resetDeeplinkCart(){this.deepLinkCartId="",this.displayBindCartBtn$.next(!0),this.displaySaveCartBtn$.next(!1),this.asmComponentService?.setShowDeeplinkCartInfoAlert(!1)}ngOnDestroy(){this.subscription.unsubscribe()}simpleBindCart(e){return $e(()=>this.asmBindCartFacade.bindCart(e)).pipe(O(()=>this.multiCartFacade.reloadCart(At)))}openDialog(e,i){return $e(()=>(this.launchDialogService.openDialogAndSubscribe(R.ASM_BIND_CART,this.bindToCartElemRef),this.launchDialogService.dialogClose.pipe(k(n=>!!n),M(1)))).pipe(k(n=>!!n),ye(n=>this.selectBindAction(e,i,n)))}selectBindAction(e,i,n){switch(n){case Oe.REPLACE:return this.replaceCart(e,i);case Oe.CANCEL:default:return lt}}replaceCart(e,i){return this.simpleBindCart(i).pipe(O(()=>{this.savedCartFacade.saveCart({cartId:e,saveCartName:e,saveCartDescription:"-"})}))}subscribeForDeeplinkCart(){this.subscription.add(this.asmComponentService?.isEmulatedByDeepLink().pipe(k(e=>e&&!!this.asmComponentService?.getSearchParameter("cartId"))).subscribe(()=>{let e=this.asmComponentService?.getSearchParameter("cartType");(e==="inactive"||e==="active")&&(this.displayBindCartBtn$.next(!1),this.displaySaveCartBtn$.next(e==="inactive"),this.deepLinkCartId=this.asmComponentService?.getSearchParameter("cartId"),e==="inactive"&&this.cartId.setValue(this.deepLinkCartId),this.asmComponentService?.setShowDeeplinkCartInfoAlert(!0),this.asmComponentService?.handleDeepLinkNavigation())}))}openASMSaveCartDialog(e){this.launchDialogService.openDialogAndSubscribe(R.ASM_SAVE_CART,this.saveInactiveCartElemRef,e)}afterCloseASMSaveCartDialog(){this.launchDialogService.dialogClose.pipe(k(e=>e===Ne.SAVE),M(1),O(()=>this.loading$.next(!0))).subscribe(),this.savedCartFacade.getSaveCartProcessSuccess().pipe(k(e=>e),M(1),O(()=>this.loading$.next(!1))).subscribe(()=>{this.goToSavedCartDetails(this.deepLinkCartId),this.displaySaveCartBtn$.next(!1)}),this.savedCartFacade.getSaveCartProcessError().pipe(k(e=>e),M(1),O(()=>this.loading$.next(!1))).subscribe()}goToSavedCartDetails(e){this.routing?.go({cxRoute:"savedCartsDetails",params:{savedCartId:e}})}static{this.\u0275fac=function(i){return new(i||t)(v(We),v(pi),v(mi),v(_i),v(G),v(it),v(Se),v(oe))}}static{this.\u0275cmp=F({type:t,selectors:[["cx-asm-bind-cart"]],viewQuery:function(i,n){if(i&1&&(P(Oi,5),P(Ni,5)),i&2){let o;$(o=U())&&(n.bindToCartElemRef=o.first),$(o=U())&&(n.saveInactiveCartElemRef=o.first)}},standalone:!1,decls:15,vars:25,consts:[["cartIdElement",""],["bindToCart",""],["saveInactiveCart",""],["for","cartNumber"],["role","search",3,"click","ngClass"],["autocomplete","off","formcontrolname","cartNumber",3,"keydown.enter","formControl"],["class","cx-asm-reset",3,"visible","click",4,"ngIf"],["class","cx-asm-bindCartToCustomer","type","submit",3,"disabled","cx-asm-active","cx-bind-loading","click",4,"ngIf"],["id","asm-save-inactive-cart-btn","class","cx-asm-bindCartToCustomer cx-asm-active","type","submit",3,"cx-bind-loading","click",4,"ngIf"],[1,"cx-asm-reset",3,"click"],[1,"cx-icon","fas","fa-times-circle"],["type","submit",1,"cx-asm-bindCartToCustomer",3,"click","disabled"],["id","asm-save-inactive-cart-btn","type","submit",1,"cx-asm-bindCartToCustomer","cx-asm-active",3,"click"]],template:function(i,n){if(i&1){let o=b();a(0,"form")(1,"label",3),C(2),s(3,"cxTranslate"),u(),a(4,"div",4),s(5,"async"),s(6,"cxTranslate"),h("click",function(){_(o);let I=A(8);return g(I.focus())}),a(7,"input",5,0),s(9,"cxTranslate"),h("keydown.enter",function(){return _(o),g(n.bindCartToCustomer())}),u(),d(10,$i,4,8,"button",6),u(),d(11,Ui,12,23,"button",7),s(12,"async"),d(13,ji,10,16,"button",8),s(14,"async"),u()}i&2&&(r(2),x("",l(3,10,"asm.bindCart.cartNumber")," "),r(2),L("active",l(5,12,n.valid$)),p("ngClass",K(22,Pi,!n.isShowStyleChangesInASM,n.isShowStyleChangesInASM)),y("aria-label",l(6,14,"asm.bindCart.assignCartId")),r(3),p("formControl",n.cartId),y("aria-label",l(9,16,"asm.bindCart.enterCartId")),r(3),p("ngIf",!n.isShowStyleChangesInASM),r(),p("ngIf",l(12,18,n.displayBindCartBtn$)),r(2),p("ngIf",l(14,20,n.displaySaveCartBtn$)))},dependencies:[Ge,j,xe,ae,ce,he,Je,pe,Pt,at,X,V],encapsulation:2,changeDetection:0})}}return t})(),vo=(()=>{class t{constructor(e,i,n,o){this.launchDialogService=e,this.fb=i,this.asmCreateCustomerFacade=n,this.translationService=o,this.iconTypes=De,this.isLoading$=new H(!1),this.showDialogInfoAlert=!0,this.globalMessageType=W,this.focusConfig={trap:!0,block:!0,autofocus:!0,focusOnEscape:!0},this.registerForm=this.fb.group({firstName:["",Y.required],lastName:["",Y.required],email:["",[Y.required,li.emailValidator]]})}submitForm(){this.registerForm.valid?this.registerUser():this.registerForm.markAllAsTouched()}registerUser(){this.isLoading$.next(!0);let{firstName:e,lastName:i,email:n}=this.registerForm.value;this.createdCustomer={firstName:e??"",lastName:i??"",email:n??""};let o=this.asmCreateCustomerFacade.createCustomer(this.collectDataFromRegisterForm());o.subscribe({next:f=>this.onRegisterUserSuccess(f),error:f=>this.onRegisterUserFail(f)}),o.subscribe({complete:()=>this.isLoading$.next(!1)})}collectDataFromRegisterForm(){return{firstName:this.createdCustomer.firstName,lastName:this.createdCustomer.lastName,emailAddress:this.createdCustomer.email}}closeModal(e){this.launchDialogService.closeDialog(e)}closeDialogInfoAlert(){this.showDialogInfoAlert=!1}closeDialogBackendErroAlert(e){this.showDialogBackendErrorAlerts[e]=!1}onRegisterUserSuccess(e){this.launchDialogService.closeDialog(e)}onRegisterUserFail(e){this.isLoading$.next(!1),this.backendErrorMessages=[],this.showDialogBackendErrorAlerts=[];let i="httpHandlers.unknownError",n=e.details??[];n.length===0&&this.addErrorMessage(i),n.forEach(o=>{switch(o.type||""){case"ValidationError":this.addErrorMessage(`asm.createCustomerForm.validationErrors.${o.subject}`);break;case"AssistedServiceDuplicatedUidError":this.addErrorMessage("asm.createCustomerForm.badRequestDuplicatedEmail",{emailAddress:this.createdCustomer.email});break;default:this.addErrorMessage(i)}})}addErrorMessage(e,i){this.translationService.translate(e,i).pipe(_t()).subscribe(n=>{this.backendErrorMessages.push(n),this.showDialogBackendErrorAlerts.push(!0)})}static{this.\u0275fac=function(i){return new(i||t)(v(G),v(zt),v(gi),v(Ye))}}static{this.\u0275cmp=F({type:t,selectors:[["cx-asm-create-customer-form"]],standalone:!1,decls:23,vars:17,consts:[["loading",""],["role","dialog","aria-labelledby","asm-create-customer-form-title",1,"cx-modal-container","cx-asm-dialog",3,"esc","cxFocus"],[1,"cx-modal-content"],[3,"ngSubmit","formGroup"],[1,"cx-dialog-header","modal-header"],["id","asm-create-customer-form-title",1,"title","modal-title"],[1,"cx-dialog-body","modal-body"],[1,"message-container"],[3,"text","type","closeMessage",4,"ngIf"],[4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],[1,"modal-footer"],["type","submit",1,"btn","cx-asm-create-customer-btn","cx-asm-create-customer-btn-create"],["type","button",1,"btn","cx-asm-create-customer-btn","cx-asm-create-customer-btn-cancel",3,"click"],[3,"closeMessage","text","type"],[1,"form-group"],[1,"label-content"],["required","true","formControlName","firstName","name","text",1,"form-control",3,"placeholder"],["id","firstNameError",3,"control"],["required","true","name","text","formControlName","lastName",1,"form-control",3,"placeholder"],["id","lastNameError",3,"control"],["required","true","name","email","formControlName","email",1,"form-control",3,"placeholder"],["id","emailError",3,"control"],[1,"cx-spinner"]],template:function(i,n){if(i&1){let o=b();a(0,"div",1),h("esc",function(){return _(o),g(n.closeModal("Escape clicked"))}),a(1,"div",2),w(2),a(3,"form",3),h("ngSubmit",function(){return _(o),g(n.submitForm())}),a(4,"div",4)(5,"h2",5),C(6),s(7,"cxTranslate"),u()(),a(8,"div",6)(9,"div",7),d(10,zi,2,4,"cx-message",8)(11,Qi,2,1,"ng-container",9),u(),d(12,Hi,25,27,"div",10),s(13,"async"),u(),a(14,"div",11)(15,"button",12),C(16),s(17,"cxTranslate"),u(),a(18,"button",13),h("click",function(){return _(o),g(n.closeModal("Cancel click"))}),C(19),s(20,"cxTranslate"),u()()(),E(),u()(),d(21,qi,2,0,"ng-template",null,0,D)}if(i&2){let o=A(22);p("cxFocus",n.focusConfig),r(3),p("formGroup",n.registerForm),r(3),x(" ",l(7,9,"asm.createCustomerForm.title")," "),r(4),p("ngIf",n.showDialogInfoAlert),r(),p("ngForOf",n.backendErrorMessages),r(),p("ngIf",!l(13,11,n.isLoading$))("ngIfElse",o),r(4),x(" ",l(17,13,"asm.createCustomerForm.createAccount")," "),r(3),x(" ",l(20,15,"asm.createCustomerForm.cancel")," ")}},dependencies:[Ee,j,xe,ae,ce,he,Fe,Be,ke,Ve,et,le,Me,X,V],encapsulation:2})}}return t})(),So={launch:{ASM_CREATE_CUSTOMER_FORM:{inlineRoot:!0,component:vo,dialogType:me.DIALOG}}},bo=(()=>{class t{constructor(e){this.fb=e,this.csAgentTokenLoading=!1,this.submitEvent=new je,se("a11yPasswordVisibliltyBtnValueOverflow"),se("a11yTextSpacingAdjustments")}ngOnInit(){this.csAgentLoginForm=this.fb.group({userId:["",[Y.required]],password:["",[Y.required]]})}onSubmit(){this.csAgentLoginForm.valid?this.submitEvent.emit({userId:this.csAgentLoginForm.get("userId")?.value,password:this.csAgentLoginForm.get("password")?.value}):this.csAgentLoginForm.markAllAsTouched()}static{this.\u0275fac=function(i){return new(i||t)(v(Ze))}}static{this.\u0275cmp=F({type:t,selectors:[["cx-csagent-login-form"]],inputs:{csAgentTokenLoading:"csAgentTokenLoading"},outputs:{submitEvent:"submitEvent"},standalone:!1,decls:2,vars:2,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],["aria-hidden","false",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"label-content"],["required","true","type","text","formControlName","userId"],["id","userIdError",3,"translationParams","control",4,"cxFeature"],[3,"control",4,"cxFeature"],["required","true","type","password","formControlName","password","cxPasswordVisibilitySwitch",""],["id","passwordError",3,"translationParams","control",4,"cxFeature"],["type","submit"],["id","userIdError",3,"translationParams","control"],[3,"control"],["id","passwordError",3,"translationParams","control"],["aria-hidden","false"]],template:function(i,n){i&1&&d(0,Zi,20,24,"form",0)(1,Xi,2,3,"cx-dot-spinner",1),i&2&&(p("ngIf",!n.csAgentTokenLoading),r(),p("ngIf",n.csAgentTokenLoading))},dependencies:[j,xe,ae,ce,he,Fe,Be,ke,Ve,ei,fe,at,V],encapsulation:2})}}return t})(),yo=(()=>{class t{constructor(e,i,n,o,f){this.fb=e,this.asmService=i,this.config=n,this.directionService=o,this.launchDialogService=f,this.subscription=new J,this.searchByCustomer=!1,this.searchByOrder=!1,this.isLoading=!1,this.activeFocusedButtonIndex=-1,this.featureConfig=ee(Le),this.isShowSearchingCustomerByOrderInASM=this.featureConfig.isEnabled("showSearchingCustomerByOrderInASM"),this.submitEvent=new je,se("showSearchingCustomerByOrderInASM")}ngOnInit(){this.isShowSearchingCustomerByOrderInASM?(this.customerSelectionForm=this.fb.group({searchTerm:"",searchOrder:""}),this.subscription.add(this.customerSelectionForm.controls.searchOrder.valueChanges.pipe(Ue(300)).subscribe(e=>{this.searchByCustomer=!1,this.searchByOrder=!0,this.handleSearchByOrder(e)}))):this.customerSelectionForm=this.fb.group({searchTerm:["",Y.required]}),this.asmService.customerSearchReset(),this.searchResultsLoading$=this.asmService.getCustomerSearchResultsLoading(),this.searchResults=this.asmService.getCustomerSearchResults(),this.subscription.add(this.customerSelectionForm.controls.searchTerm.valueChanges.pipe(Ue(300)).subscribe(e=>{this.isShowSearchingCustomerByOrderInASM?(this.searchByCustomer=!0,this.searchByOrder=!1,this.handleSearchByCustomer(e)):this.handleSearchTerm(e)})),this.subscription.add(this.searchResultsLoading$.subscribe(e=>{this.isLoading=e}))}handleSearchTerm(e){this.selectedCustomer&&e!==this.selectedCustomer.name&&(this.selectedCustomer=void 0),!this.selectedCustomer&&(this.asmService.customerSearchReset(),this.activeFocusedButtonIndex=-1,e.trim().length>=3&&this.asmService.customerSearch({query:e,pageSize:this.config.asm?.customerSearch?.maxResults}))}handleSearchByCustomer(e){this.selectedCustomer&&(this.selectedCustomer=void 0),this.customerSelectionForm.controls.searchOrder.value&&this.customerSelectionForm.controls.searchOrder.setValue(void 0,{emitEvent:!1}),this.asmService.customerSearchReset(),this.activeFocusedButtonIndex=-1,e.trim().length>=3&&this.asmService.customerSearch({query:e,pageSize:this.config.asm?.customerSearch?.maxResults})}handleSearchByOrder(e){this.selectedCustomer&&(this.selectedCustomer=void 0),this.customerSelectionForm.controls.searchTerm.value&&this.customerSelectionForm.controls.searchTerm.setValue(void 0,{emitEvent:!1}),this.asmService.customerSearchReset(),this.activeFocusedButtonIndex=-1,e.trim().length>=3&&this.asmService.customerSearch({orderId:e,pageSize:this.config.asm?.customerSearch?.maxResults})}isNoResultMessageInfoVisible(e,i,n){let o=n.value.length>=3,f=!!e.entries&&e.entries.length>0;return!this.isLoading&&o&&i&&!f}isSearchResultsVisible(e,i){return!!e.entries&&i&&e.entries.length>0}selectCustomerFromList(e,i){this.selectedCustomer=i,this.isShowSearchingCustomerByOrderInASM?this.customerSelectionForm.controls.searchTerm.setValue(this.selectedCustomer.name,{emitEvent:!1}):this.customerSelectionForm.controls.searchTerm.setValue(this.selectedCustomer.name),this.asmService.customerSearchReset(),this.isShowSearchingCustomerByOrderInASM||this.searchTerm.nativeElement.focus(),e.preventDefault(),e.stopPropagation()}onSubmit(){this.isShowSearchingCustomerByOrderInASM?this.selectedCustomer?this.submitEvent.emit({customerId:this.selectedCustomer.customerId,parameters:{orderId:this.customerSelectionForm.controls.searchOrder.value}}):this.customerSelectionForm.markAllAsTouched():this.customerSelectionForm.valid&&this.selectedCustomer?this.submitEvent.emit({customerId:this.selectedCustomer.customerId}):this.customerSelectionForm.markAllAsTouched()}onDocumentClick(e){if(this.resultList){if(this.resultList.nativeElement.contains(e.target)||this.searchTerm.nativeElement.contains(e.target))return;this.asmService.customerSearchReset()}}closeResults(e){this.asmService.customerSearchReset(),this.searchTerm.nativeElement.focus(),e.preventDefault(),e.stopPropagation()}closeOrderSearchResults(e){this.asmService.customerSearchReset(),this.searchOrder.nativeElement.focus(),e.preventDefault(),e.stopPropagation()}ngOnDestroy(){this.subscription.unsubscribe(),this.asmService.customerSearchReset()}focusFirstItem(e){e.preventDefault(),this.activeFocusedButtonIndex=0,this.updateItemIndex(this.activeFocusedButtonIndex)}setSelectionEnd(e){if(e.preventDefault(),this.searchTerm.nativeElement.value?.length){let i=this.searchTerm.nativeElement.value.length;this.searchTerm.nativeElement.selectionStart=i,this.searchTerm.nativeElement.selectionEnd=i}}setOrderSearchSelectionEnd(e){if(e.preventDefault(),this.searchOrder.nativeElement.value?.length){let i=this.searchOrder.nativeElement.value.length;this.searchOrder.nativeElement.selectionStart=i,this.searchOrder.nativeElement.selectionEnd=i}}focusPreviousChild(e){e.preventDefault(),this.activeFocusedButtonIndex--,this.activeFocusedButtonIndex<0&&(this.activeFocusedButtonIndex=this.searchResultItems.length-1),this.updateItemIndex(this.activeFocusedButtonIndex)}focusNextChild(e){e.preventDefault(),this.activeFocusedButtonIndex++,this.activeFocusedButtonIndex>this.searchResultItems.length-1&&(this.activeFocusedButtonIndex=0),this.updateItemIndex(this.activeFocusedButtonIndex)}focusInputText(e){if(e.preventDefault(),this.activeFocusedButtonIndex=-1,this.searchTerm.nativeElement.focus(),this.searchTerm.nativeElement.value?.length){let i=this.searchTerm.nativeElement.selectionEnd,n=this.searchTerm.nativeElement.value.length;this.isBackNavigation(e)?i=i<=0?0:i-1:this.isForwardsNavigation(e)?i=i>=n?n:i+1:e.code==="Home"?i=0:e.code==="End"&&(i=n),this.searchTerm.nativeElement.selectionStart=i,this.searchTerm.nativeElement.selectionEnd=i}}focusOrderSearchInputText(e){if(e.preventDefault(),this.activeFocusedButtonIndex=-1,this.searchOrder.nativeElement.focus(),this.searchOrder.nativeElement.value?.length){let i=this.searchOrder.nativeElement.selectionEnd,n=this.searchOrder.nativeElement.value.length;this.isBackNavigation(e)?i=i<=0?0:i-1:this.isForwardsNavigation(e)?i=i>=n?n:i+1:e.code==="Home"?i=0:e.code==="End"&&(i=n),this.searchOrder.nativeElement.selectionStart=i,this.searchOrder.nativeElement.selectionEnd=i}}updateItemIndex(e){this.searchResultItems.toArray()?.[e]?.nativeElement.focus()}createCustomer(){this.asmService.customerSearchReset(),this.launchDialogService.openDialogAndSubscribe(R.ASM_CREATE_CUSTOMER_FORM,this.createCustomerLink),this.isShowSearchingCustomerByOrderInASM&&setTimeout(()=>{this.searchTerm.nativeElement.blur()})}isForwardsNavigation(e){return e.code==="ArrowRight"&&this.isLTRDirection()||e.code==="ArrowLeft"&&this.isRTLDirection()}isBackNavigation(e){return e.code==="ArrowLeft"&&this.isLTRDirection()||e.code==="ArrowRight"&&this.isRTLDirection()}isLTRDirection(){return this.directionService.getDirection()===Xe.LTR}isRTLDirection(){return this.directionService.getDirection()===Xe.RTL}static{this.\u0275fac=function(i){return new(i||t)(v(Ze),v(Re),v(ue),v(ii),v(G))}}static{this.\u0275cmp=F({type:t,selectors:[["cx-customer-selection"]],viewQuery:function(i,n){if(i&1&&(P(en,5),P(tn,5),P(nn,5),P(rn,5),P(on,5)),i&2){let o;$(o=U())&&(n.resultList=o.first),$(o=U())&&(n.searchTerm=o.first),$(o=U())&&(n.searchOrder=o.first),$(o=U())&&(n.createCustomerLink=o.first),$(o=U())&&(n.searchResultItems=o)}},hostBindings:function(i,n){i&1&&h("click",function(f){return n.onDocumentClick(f)},!1,ht)},outputs:{submitEvent:"submitEvent"},standalone:!1,decls:2,vars:2,consts:[["searchTerm",""],["searchOrder",""],["resultList",""],["createCustomerLink",""],["searchResultItem",""],[3,"formGroup","ngSubmit",4,"cxFeature"],[4,"cxFeature"],[3,"ngSubmit","formGroup"],[1,"searchLabel"],["required","true","type","text","formControlName","searchTerm",3,"keydown.arrowdown","keydown.end","placeholder"],[4,"ngIf"],["class","asm-results",4,"ngIf"],["required","true","type","text","formControlName","searchOrder",3,"keydown.arrowdown","keydown.end","placeholder"],["type","submit",3,"disabled"],["class","cx-message cx-message-info selection-message-info",4,"ngIf"],[1,"cx-message","cx-message-info","selection-message-info"],[1,"cx-message-content"],[1,"cx-message-header"],[1,"cx-message-icon"],["ng-reflect-type","INFO",1,"cx-icon","fas","fa-info-circle"],[1,"cx-message-text"],[1,"linkStyleLabel",3,"click"],[1,"asm-results"],[3,"tabindex","active","keydown.arrowup","keydown.arrowdown","keydown.arrowright","keydown.arrowleft","keydown.enter","keydown.escape","keydown.home","keydown.end","click",4,"ngFor","ngForOf"],[3,"keydown.arrowup","keydown.arrowdown","keydown.arrowright","keydown.arrowleft","keydown.enter","keydown.escape","keydown.home","keydown.end","click","tabindex"],[1,"result-name"],[1,"result-id"],["aria-hidden","false"],["id","searchTermError",3,"translationParams","control",4,"cxFeature"],[3,"control",4,"cxFeature"],["type","submit"],["id","searchTermError",3,"translationParams","control"],[3,"control"],[3,"active","click","keydown.escape","keydown.arrowright","keydown.arrowleft","keydown.home","keydown.end",4,"ngIf"],[3,"click","keydown.escape","keydown.arrowright","keydown.arrowleft","keydown.home","keydown.end"],[1,"linkStyleLabel"]],template:function(i,n){i&1&&d(0,Cn,26,33,"form",5)(1,yn,16,22,"div",6),i&2&&(p("cxFeature","showSearchingCustomerByOrderInASM"),r(),p("cxFeature","!showSearchingCustomerByOrderInASM"))},dependencies:[Ee,j,xe,ae,ce,he,Fe,Be,ke,Ve,pe,fe,at,X,V],encapsulation:2})}}return t})(),To=(()=>{class t{transform(e){e<0&&(e=0);let i=Math.floor(e/60),n=e%60,o;i<10?o=("00"+i).slice(-2):o=i+"";let f=("00"+n).slice(-2);return`${o}:${f}`}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275pipe=xt({name:"formatTimer",type:t,pure:!0,standalone:!1})}}return t})(),Io=(()=>{class t{constructor(e,i,n,o,f){this.config=e,this.asmComponentService=i,this.routingService=n,this.changeDetectorRef=o,this.userIdService=f,this.subscriptions=new J,this.maxStartDelayInSeconds=6e4}ngOnInit(){this.initTimer(),this.interval=setInterval(()=>{let e=new Date().getTime()/1e3;this.timeLeft=Math.floor(this.expiredTime-e),this.timeLeft<=0&&(clearInterval(this.interval),this.asmComponentService.logoutCustomerSupportAgentAndCustomer()),this.changeDetectorRef.markForCheck()},1e3),this.resetOnNavigate(),this.resetOnCustomerSessionChange()}resetOnNavigate(){this.subscriptions.add(this.routingService.isNavigating().subscribe(e=>{e&&this.resetTimer()}))}resetOnCustomerSessionChange(){this.subscriptions.add(this.userIdService.getUserId().pipe(Te()).subscribe(()=>this.resetTimer()))}initTimer(){let e=this.getTimerStartDelayInSeconds(),i=new Date().getTime()/1e3;this.timeLeft=e,this.expiredTime=i+this.timeLeft}resetTimer(){this.timeLeft>0&&this.initTimer()}getTimerStartDelayInSeconds(){return this.config.asm?.agentSessionTimer?.startingDelayInSeconds===void 0?600:this.config.asm.agentSessionTimer.startingDelayInSeconds>this.maxStartDelayInSeconds?this.maxStartDelayInSeconds:this.config.asm.agentSessionTimer.startingDelayInSeconds}ngOnDestroy(){this.subscriptions.unsubscribe(),this.interval&&clearInterval(this.interval)}static{this.\u0275fac=function(i){return new(i||t)(v(ue),v(Se),v(oe),v(It),v(Lt))}}static{this.\u0275cmp=F({type:t,selectors:[["cx-asm-session-timer"]],standalone:!1,decls:9,vars:12,consts:[[1,"label"],[1,"time"],[1,"reset",3,"click","title"]],template:function(i,n){i&1&&(a(0,"span",0),C(1),s(2,"cxTranslate"),u(),a(3,"span",1),C(4),s(5,"formatTimer"),s(6,"cxTranslate"),u(),a(7,"button",2),s(8,"cxTranslate"),h("click",function(){return n.resetTimer()}),u()),i&2&&(r(),x("",l(2,4,"asm.agentSessionTimer.label"),":"),r(3),St("",l(5,6,n.timeLeft)," ",l(6,8,"asm.agentSessionTimer.minutes"),""),r(3),B("title",l(8,10,"asm.agentSessionTimer.reset")))},dependencies:[V,To],encapsulation:2})}}return t})(),wo=(()=>{class t{constructor(e,i,n,o){this.asmComponentService=e,this.userAccountFacade=i,this.launchDialogService=n,this.featureModules=o,this.isAsmCustomer360Configured=!1,this.isAsmCustomer360Loaded$=new H(!1),this.subscription=new J,this.featureConfig=ee(Le),this.isShowStyleChangesInASM=this.featureConfig.isEnabled("showStyleChangesInASM")}ngOnInit(){this.isAsmCustomer360Configured=this.featureModules?.isConfigured("asmCustomer360"),this.isAsmCustomer360Configured&&this.featureModules?.resolveFeature("asmCustomer360").subscribe(()=>{this.isAsmCustomer360Loaded$.next(!0)}),this.subscription.add(this.userAccountFacade.get().subscribe(e=>{e&&(this.customer=e)})),this.isCustomerEmulationSessionInProgress$=this.asmComponentService.isCustomerEmulationSessionInProgress()}logoutCustomer(){this.asmComponentService.logoutCustomer()}openAsmCustomer360(){this.subscription.add(this.isAsmCustomer360Loaded$.pipe(k(e=>!!e)).subscribe(()=>{let e={customer:this.customer};this.launchDialogService?.openDialogAndSubscribe(R.ASM_CUSTOMER_360,this.asmCustomer360LauncherElement,e),this.subscription.add(this.launchDialogService?.dialogClose.pipe(k(i=>!!i)).subscribe(i=>{this.asmComponentService.handleAsmDialogAction(i)}))}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||t)(v(Se),v(tt),v(G),v(Nt))}}static{this.\u0275cmp=F({type:t,selectors:[["cx-customer-emulation"]],viewQuery:function(i,n){if(i&1&&P(Tn,5),i&2){let o;$(o=U())&&(n.asmCustomer360LauncherElement=o.first)}},standalone:!1,decls:2,vars:3,consts:[["asmCustomer360Launcher",""],[4,"ngIf"],[1,"cx-asm-customerInfo"],[1,"cx-asm-name"],[1,"cx-asm-uid"],["class","cx-360-button",3,"click",4,"ngIf"],["formcontrolname","logoutCustomer",3,"click"],[1,"cx-360-button",3,"click"]],template:function(i,n){i&1&&(d(0,En,12,7,"ng-container",1),s(1,"async")),i&2&&p("ngIf",l(1,1,n.isCustomerEmulationSessionInProgress$))},dependencies:[j,xo,X,V],encapsulation:2})}}return t})(),Eo=(()=>{class t{constructor(e){this.asmService=e,this.subscription=new J}ngOnInit(){this.subscription.add(this.asmService.getAsmUiState().subscribe(e=>{this.isCollapsed=e.collapsed===void 0?!1:e.collapsed}))}toggleUi(){this.asmService.updateAsmUiState({collapsed:!this.isCollapsed})}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||t)(v(Re))}}static{this.\u0275cmp=F({type:t,selectors:[["cx-asm-toggle-ui"]],standalone:!1,decls:4,vars:3,consts:[["tabindex","0","role","button",1,"toggleUi",3,"click"],[3,"ngClass"],["class","label",4,"ngIf"],[1,"label"]],template:function(i,n){i&1&&(a(0,"a",0),h("click",function(){return n.toggleUi()}),S(1,"span",1),d(2,An,3,3,"span",2)(3,Ln,3,3,"span",2),u()),i&2&&(r(),p("ngClass",n.isCollapsed?"expandIcon":"collapseIcon"),r(),p("ngIf",!n.isCollapsed),r(),p("ngIf",n.isCollapsed))},dependencies:[Ge,j,V],encapsulation:2})}}return t})(),Ao={active:"asm.activeCartAlertInfo",inactive:"asm.saveInactiveCartAlertInfo"},Lo=(()=>{class t{constructor(e,i,n,o,f,I,Q,de){this.authService=e,this.csAgentAuthService=i,this.asmComponentService=n,this.globalMessageService=o,this.routingService=f,this.asmService=I,this.userAccountFacade=Q,this.launchDialogService=de,this.iconTypes=De,this.showDeeplinkCartInfoAlert$=this.asmComponentService.shouldShowDeeplinkCartInfoAlert(),this.deeplinkCartAlertKey="",this.showCreateCustomerSuccessfullyAlert=!1,this.globalMessageType=W,this.disabled=!1,this.startingCustomerSession=!1,this.showCustomerEmulationInfoAlert=!0,this.subscription=new J}ngOnInit(){this.customerSupportAgentLoggedIn$=this.csAgentAuthService.isCustomerSupportAgentLoggedIn().pipe(Te(),O(e=>{e||this.closeModal()})),this.csAgentTokenLoading$=this.csAgentAuthService.getCustomerSupportAgentTokenLoading(),this.customer$=this.authService.isUserLoggedIn().pipe(Ct(e=>e?(this.handleCustomerSessionStartRedirection(),this.userAccountFacade.get()):mt(void 0))),this.isCollapsed$=this.asmService.getAsmUiState().pipe(Z(e=>e.collapsed===void 0?!1:e.collapsed)),this.subscription.add(this.launchDialogService.dialogClose.pipe(k(e=>!!e)).subscribe(e=>{typeof e!="string"&&("selectedUser"in e?(this.startCustomerEmulationSession(e.selectedUser),e.actionType===te.ORDER_HISTORY&&this.routingService.go({cxRoute:"orders"})):"customerId"in e&&(this.startCustomerEmulationSession({customerId:e.customerId}),this.showCreateCustomerSuccessfullyAlert=!0,this.routingService.go("/")),"actionType"in e&&e.actionType===te.ACTIVE_CART?this.routingService.go({cxRoute:"cart"}):"actionType"in e&&e.actionType===te.CUSTOMER_360&&this.customer$.pipe(k(i=>!!i),M(1)).subscribe(i=>{setTimeout(()=>{this.showC360Dialog(i)},500)}))})),this.subscribeForDeeplink()}showC360Dialog(e){let i={customer:e};this.launchDialogService.openDialogAndSubscribe(R.ASM_CUSTOMER_360,this.element,i),this.subscription.add(this.launchDialogService.dialogClose.pipe(k(n=>!!n)).subscribe(n=>{this.asmComponentService.handleAsmDialogAction(n)}))}subscribeForDeeplink(){this.asmComponentService.isEmulateInURL()&&this.routingService.go("/");let e=this.asmComponentService.getDeepLinkUrlParams()??{customerId:this.asmComponentService.getSearchParameter("customerId"),orderId:this.asmComponentService.getSearchParameter("orderId"),ticketId:this.asmComponentService.getSearchParameter("ticketId"),cartId:this.asmComponentService.getSearchParameter("cartId"),cartType:this.asmComponentService.getSearchParameter("cartType"),emulated:!1};this.deeplinkCartAlertKey=Ao[e.cartType||""],this.subscription.add(be([this.customerSupportAgentLoggedIn$,this.authService.isUserLoggedIn(),this.asmComponentService.isEmulatedByDeepLink()]).subscribe(([i,n,o])=>{i&&e.customerId&&(!o&&n?this.confirmSwitchCustomer(e.customerId):setTimeout(()=>this.startSessionWithParameters(ct(Pe({},e),{emulated:o}))))}))}confirmSwitchCustomer(e){this.customer$.pipe(k(i=>!!i),M(1)).subscribe(i=>{i?.customerId!==e?this.userAccountFacade.getById(e).subscribe({next:n=>{this.launchDialogService.openDialogAndSubscribe(R.ASM_SWITCH_CUSTOMER,this.element,{curCustomer:i,switchCustomer:n})},error:n=>{this.globalMessageService.add(n.details?.[0].message??"",W.MSG_TYPE_ERROR)}}):this.asmComponentService.setEmulatedByDeepLink(!0)})}startSessionWithParameters(e){e.emulated||(this.asmComponentService.setEmulatedByDeepLink(!0),this.startCustomerEmulationSession({customerId:e.customerId},e))}handleCustomerSessionStartRedirection(){this.asmComponentService.isCustomerEmulationSessionInProgress().pipe(M(1)).subscribe(e=>{this.startingCustomerSession&&e&&(this.startingCustomerSession=!1,this.globalMessageService.remove(W.MSG_TYPE_ERROR),this.routingService.go("/"))})}loginCustomerSupportAgent({userId:e,password:i}){this.csAgentAuthService.authorizeCustomerSupportAgent(e,i)}logout(){this.asmComponentService.logoutCustomerSupportAgentAndCustomer()}startCustomerEmulationSession({customerId:e},i){e?(this.csAgentAuthService.startCustomerEmulationSession(e),this.startingCustomerSession=!0,this.showCustomerEmulationInfoAlert=!0,this.showCreateCustomerSuccessfullyAlert=!1,i&&this.asmComponentService.handleDeepLinkNavigation(Pe({customerId:e},i))):this.globalMessageService.add({key:"asm.error.noCustomerId"},W.MSG_TYPE_ERROR)}hideUi(){this.disabled=!0,this.asmComponentService.unload()}showCustomList(){this.launchDialogService.openDialogAndSubscribe(R.ASM_CUSTOMER_LIST,this.element)}closeModal(){this.launchDialogService.closeDialog("logout")}createCustomer(){this.launchDialogService?.openDialogAndSubscribe(R.ASM_CREATE_CUSTOMER_FORM,this.addNewCustomerLink)}closeDialogConfirmationAlert(){this.showCreateCustomerSuccessfullyAlert=!1}closeDeeplinkCartInfoAlert(){this.asmComponentService.setShowDeeplinkCartInfoAlert(!1)}closeCustomerEmulationInfoAlert(){this.showCustomerEmulationInfoAlert=!1}ngOnDestroy(){this.subscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||t)(v(He),v(nt),v(Se),v(We),v(oe),v(Re),v(tt),v(G))}}static{this.\u0275cmp=F({type:t,selectors:[["cx-asm-main-ui"]],viewQuery:function(i,n){if(i&1&&(P(Bn,5),P(Ti,5)),i&2){let o;$(o=U())&&(n.element=o.first),$(o=U())&&(n.addNewCustomerLink=o.first)}},hostVars:2,hostBindings:function(i,n){i&2&&L("hidden",n.disabled)},standalone:!1,decls:27,vars:30,consts:[["customerListLink",""],["showLoginForm",""],["showCustomerSelection",""],[1,"asm-bar"],[1,"asm-bar-branding"],["src","data:image/png;base64,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","width","48","height","24",1,"logo",3,"alt","title"],[1,"asm-title"],[1,"asm-bar-actions"],[1,"cx-asm-help-portal"],["href","https://help.sap.com/docs/SAP_COMMERCE_COMPOSABLE_STOREFRONT/d1ca9a1517f847a5b57b4e08400807c1/2367ff04ccb649ac82a3795ecf72a804.html?locale=en-US","target","_blank","rel","noopener noreferrer","role","button"],[3,"type"],["class","cx-asm-customer-list",4,"ngIf"],[4,"ngIf"],["class","close",3,"title","click",4,"ngIf"],["class","logout",3,"title","click",4,"ngIf"],[1,"cx-asm-customer-list"],["tabindex","0","role","button",1,"cx-asm-customer-list-link",3,"click"],[1,"close",3,"click","title"],[1,"logout",3,"click","title"],[4,"ngIf","ngIfElse"],[3,"text","type","closeMessage",4,"ngIf"],[3,"closeMessage","text","type"],[3,"submitEvent",4,"ngIf"],[3,"submitEvent"],[3,"csAgentTokenLoading","submitEvent",4,"ngIf"],[3,"submitEvent","csAgentTokenLoading"]],template:function(i,n){i&1&&(a(0,"div",3)(1,"div",4),S(2,"img",5),s(3,"cxTranslate"),s(4,"cxTranslate"),a(5,"div",6),C(6),s(7,"cxTranslate"),u()(),a(8,"div",7)(9,"div",8)(10,"a",9),S(11,"cx-icon",10),a(12,"span"),C(13),s(14,"cxTranslate"),u()()(),d(15,kn,7,4,"div",11),s(16,"async"),S(17,"cx-asm-toggle-ui"),d(18,Fn,1,0,"cx-asm-session-timer",12),s(19,"async"),d(20,Dn,2,3,"button",13),s(21,"async"),s(22,"async"),d(23,Mn,2,3,"button",14),s(24,"async"),u()(),d(25,Qn,5,4,"ng-container",12),s(26,"async")),i&2&&(r(2),B("alt",l(3,10,"asm.mainLogoLabel")),B("title",l(4,12,"asm.mainLogoLabel")),r(4),x(" ",l(7,14,"asm.mainTitle")," "),r(5),p("type",n.iconTypes.HELP),r(2),T(l(14,16,"asm.helpPortalUrl")),r(2),p("ngIf",l(16,18,n.customerSupportAgentLoggedIn$)),r(3),p("ngIf",l(19,20,n.customerSupportAgentLoggedIn$)),r(2),p("ngIf",!l(21,22,n.customerSupportAgentLoggedIn$)&&!l(22,24,n.csAgentTokenLoading$)),r(3),p("ngIf",l(24,26,n.customerSupportAgentLoggedIn$)),r(2),p("ngIf",!l(26,28,n.isCollapsed$)))},dependencies:[j,pe,Me,bo,yo,Io,wo,Eo,X,V],encapsulation:2})}}return t})(),rt=function(t){return t.CANCEL="CANCEL",t.SWITCH="SWITCH",t}(rt||{}),Bo=(()=>{class t{constructor(e,i){this.launchDialogService=e,this.asmComponentService=i,this.SWITCH_CUSTOMER_DIALOG_ACTION=rt,this.focusConfig={trap:!0,block:!0,autofocus:!0,focusOnEscape:!0}}ngOnInit(){this.launchDialogService.data$.pipe(M(1)).subscribe(e=>{this.curCustomerName=e.curCustomer.name||"",this.switchCustomerName=e.switchCustomer.name||""})}closeModal(e){e===rt.SWITCH&&this.asmComponentService.logoutCustomer(),this.launchDialogService.closeDialog(e)}static{this.\u0275fac=function(i){return new(i||t)(v(G),v(Se))}}static{this.\u0275cmp=F({type:t,selectors:[["cx-asm-switch-customer-dialog"]],standalone:!1,decls:23,vars:23,consts:[["role","dialog","aria-labelledby","asm-switch-customer-dialog-title",1,"cx-asm-switch-customer-dialog","cx-modal-container","cx-asm-dialog",3,"esc","cxFocus"],[1,"cx-modal-content"],[1,"cx-dialog-header","modal-header"],["type","WARNING"],["id","asm-switch-customer-dialog-title",1,"title","modal-title"],[1,"cx-dialog-body","modal-body"],[1,"cx-dialog-row","switch-customer-content"],[1,"cx-dialog-item"],[1,"cx-dialog-footer","modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(i,n){i&1&&(a(0,"div",0),h("esc",function(){return n.closeModal(n.SWITCH_CUSTOMER_DIALOG_ACTION.CANCEL)}),a(1,"div",1)(2,"div",2)(3,"div")(4,"span"),S(5,"cx-icon",3),u(),a(6,"span",4),C(7),s(8,"cxTranslate"),u()()(),a(9,"div",5)(10,"div",6)(11,"div",7),C(12),s(13,"cxTranslate"),u()()(),a(14,"div",8)(15,"button",9),s(16,"cxTranslate"),h("click",function(){return n.closeModal(n.SWITCH_CUSTOMER_DIALOG_ACTION.SWITCH)}),C(17),s(18,"cxTranslate"),u(),a(19,"button",10),s(20,"cxTranslate"),h("click",function(){return n.closeModal(n.SWITCH_CUSTOMER_DIALOG_ACTION.CANCEL)}),C(21),s(22,"cxTranslate"),u()()()()),i&2&&(p("cxFocus",n.focusConfig),r(7),x(" ",l(8,7,"asm.switchCustomer.dialog.title")," "),r(5),x(" ",we(13,9,"asm.switchCustomer.dialog.body",K(20,Hn,n.curCustomerName,n.switchCustomerName))," "),r(3),y("aria-label",l(16,12,"asm.switchCustomer.dialog.actions.switch")),r(2),x(" ",l(18,14,"asm.switchCustomer.dialog.actions.switch")," "),r(2),y("aria-label",l(20,16,"common.cancel")),r(2),x(" ",l(22,18,"common.cancel")," "))},dependencies:[pe,le,V],encapsulation:2})}}return t})(),ko=(()=>{class t{constructor(e,i,n,o,f,I){this.launchDialogService=e,this.breakpointService=i,this.asmConfig=n,this.translation=o,this.asmCustomerListFacade=f,this.occConfig=I,this.DEFAULT_PAGE_SIZE=5,this.focusConfig={trap:!0,block:!0,autofocus:"customer-list-selector",focusOnEscape:!0},this.iconTypes=De,this.BREAKPOINT=ve,this.currentPage=0,this.maxPage=0,this.loaded=!1,this.listsError=!1,this.listsEmpty=!1,this.enableAsmB2bCustomerList=!1,this.customerListColumnActionType=te,this.searchBox=new Ut,this.teardown=new J,se("a11yShowLabelOfSelect"),this.breakpoint$=this.getBreakpoint()}ngOnInit(){this.pageSize=this.asmConfig.asm?.customerList?.pageSize??this.DEFAULT_PAGE_SIZE,this.customerListConfig=this.asmConfig?.asm?.customerList,this.customerListsPage$=this.asmCustomerListFacade.getCustomerListsState().pipe(O(e=>this.listsError=!!e.error),Z(e=>{if(e?.data?.userGroups?.length===0){this.listsEmpty=!0;return}else return e.data}),Te(),O(e=>{this.selectedUserGroupId||(this.selectedUserGroupId=e?.userGroups?.[0]?.uid,this.sorts=null,this.fetchCustomers())}))??ut,this.customerSearchLoading$=this.asmCustomerListFacade.getCustomerListCustomersSearchResultsLoading().pipe(O(e=>this.loaded=!e)),this.teardown.add(this.customerSearchLoading$.subscribe()),this.teardown.add(()=>this.asmCustomerListFacade.customerListCustomersSearchReset()),this.customerSearchError$=this.asmCustomerListFacade.getCustomerListCustomersSearchResultsError(),this.customerSearchPage$=this.asmCustomerListFacade.getCustomerListCustomersSearchResults().pipe(O(e=>{e?.sorts&&(this.sorts=e.sorts,this.sortCode=e.pagination?.sort),e?.entries.length<this.pageSize?this.maxPage=e.pagination?.currentPage??0:this.maxPage=this.currentPage+1}))}ngOnDestroy(){this.teardown.unsubscribe()}changePage(e){let i={customerListId:this.selectedUserGroupId,pageSize:this.pageSize,page:e,sort:this.sortCode};this.searchBox?.value&&(i.query=this.searchBox.value),this.asmCustomerListFacade.customerListCustomersSearch(i)}fetchCustomers(){if(this.enableAsmB2bCustomerList=this.selectedUserGroupId==="b2bCustomerList",this.selectedUserGroupId){let e={customerListId:this.selectedUserGroupId,pageSize:this.pageSize,page:this.currentPage};this.sortCode&&(e.sort=this.sortCode),this.searchBox?.value&&(e.query=this.searchBox.value),this.asmCustomerListFacade.customerListCustomersSearchReset(),this.asmCustomerListFacade.customerListCustomersSearch(e)}this.updateCustomerListColumns()}updateCustomerListColumns(){let e=this.customerListConfig?.columns||[];for(let i of e)(i.headerLocalizationKey==="asm.customerList.tableHeader.account"||i.headerLocalizationKey==="hideHeaders")&&(i.headerLocalizationKey=this.enableAsmB2bCustomerList?"asm.customerList.tableHeader.account":"hideHeaders")}onChangeCustomerGroup(){this.currentPage=0,this.sorts=null,this.sortCode="",this.fetchCustomers()}getGroupName(e,i){return e?.userGroups?.find(n=>n.uid===i)?.name??""}getBadgeText(e){return(e.firstName?.charAt(0)??"")+(e.lastName?.charAt(0)??"")}startColumnAction(e,i){this.selectedCustomer=e;let n={actionType:i,selectedUser:e};this.closeModal(n)}onKey(e){e.key==="Enter"&&this.searchCustomers()}searchCustomers(){this.currentPage=0,this.fetchCustomers()}isRequired(e,i){return i===te.ACTIVE_CART&&!e.lastCartId||i===te.ORDER_HISTORY&&e.hasOrder!==!0}changeSortCode(e){this.sortCode=e,this.fetchCustomers()}goToNextPage(){this.currentPage>=this.maxPage?this.currentPage=this.maxPage:this.loaded&&(this.currentPage++,this.fetchCustomers())}goToPreviousPage(){this.currentPage<=0?this.currentPage=0:this.loaded&&(this.currentPage--,this.fetchCustomers())}closeModal(e){this.launchDialogService.closeDialog(e)}getSortLabels(){return be([this.translation.translate("asm.customerList.tableSort.byName"),this.translation.translate("asm.customerList.tableSort.byNameAsc"),this.translation.translate("asm.customerList.tableSort.byNameDesc"),this.translation.translate("asm.customerList.tableSort.byDateAsc"),this.translation.translate("asm.customerList.tableSort.byDateDesc"),this.translation.translate("asm.customerList.tableSort.byOrderDateAsc"),this.translation.translate("asm.customerList.tableSort.byOrderDateDesc"),this.translation.translate("asm.customerList.tableSort.byUnit"),this.translation.translate("asm.customerList.tableSort.byUnitDesc")]).pipe(Z(([e,i,n,o,f,I,Q,de,ie])=>({byName:e,byNameAsc:i,byNameDesc:n,byOrderDateAsc:I,byOrderDateDesc:Q,byDateAsc:o,byDateDesc:f,byUnit:de,byUnitDesc:ie})))}createCustomer(){this.launchDialogService.closeDialog("Create customer click"),this.launchDialogService?.openDialogAndSubscribe(R.ASM_CREATE_CUSTOMER_FORM,this.addNewCustomerLink)}getBreakpoint(){return this.breakpointService.breakpoint$.pipe(Z(e=>((e===ve.lg||e===ve.xl)&&(e=ve.md),e)))}static{this.\u0275fac=function(i){return new(i||t)(v(G),v(Yt),v(ue),v(Ye),v(Ci),v(Bt))}}static{this.\u0275cmp=F({type:t,selectors:[["cx-customer-list"]],viewQuery:function(i,n){if(i&1&&P(Ti,5),i&2){let o;$(o=U())&&(n.addNewCustomerLink=o.first)}},standalone:!1,decls:48,vars:28,consts:[["cell",""],["cellContent",""],["search",""],["total",""],["sort",""],["pagination",""],["groupSelector",""],["closeButton",""],["createCustomerButton",""],["role","dialog","aria-labelledby","asm-customer-list-title",1,"cx-asm-customer-list","cx-modal-container","cx-asm-dialog",3,"esc","cxFocus"],[1,"cx-modal-content"],[1,"cx-dialog-header","modal-header"],["id","asm-customer-list-title",1,"title","modal-title"],["id","asm-customer-list-desc",1,"cx-visually-hidden"],[4,"ngTemplateOutlet"],["class","cx-dialog-sub-header modal-header",3,"tablet-mobile",4,"ngIf"],[1,"cx-dialog-body","modal-body"],[1,"cx-dialog-row"],[1,"cx-dialog-item"],["class","cx-error-state",4,"ngIf"],[4,"ngIf"],["class","cx-dialog-sub-header modal-header cx-dialog-foot",3,"asm-mobile-pagination",4,"ngIf"],[1,"cx-dialog-footer","modal-footer"],["type","button",1,"btn","cx-asm-customer-list-btn-cancel",3,"click"],[1,"cx-dialog-sub-header","modal-header"],[1,"cx-header-select"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"cx-header-actions"],[1,"cx-error-state"],["id","asm-cusomer-list-table","role","table","class","table",4,"ngIf"],["class","cx-empty-state",4,"ngIf"],["id","asm-cusomer-list-table","role","table",1,"table"],[1,"cx-visually-hidden"],["role","row",4,"ngFor","ngForOf"],["role","row"],["role","columnheader",4,"ngFor","ngForOf"],["role","columnheader"],["role","cell","class","cx-multi-cell",4,"ngIf"],["role","cell",4,"ngFor","ngForOf"],["role","cell"],["role","cell",1,"cx-multi-cell"],[4,"ngFor","ngForOf"],[1,"cx-empty-state"],[1,"cx-dialog-sub-header","modal-header","cx-dialog-foot"],[3,"viewPageEvent","pagination"],["class","cx-cell-container",4,"ngIf"],[1,"cx-cell-container"],["class","cx-header-text",4,"ngIf"],["class","cx-avatar",4,"ngIf"],["class","btn btn-link cx-action-link cx-btn-cell",3,"class","disabled","click",4,"ngIf"],[1,"cx-header-text"],[1,"cx-avatar"],[3,"alt","title",4,"ngIf"],["class","cx-avatar-text",4,"ngIf"],[3,"alt","title"],[1,"cx-avatar-text"],[1,"btn","btn-link","cx-action-link","cx-btn-cell",3,"click","disabled"],[3,"cx-action-color","type",4,"ngIf"],[3,"type"],[1,"form-group","search-wrapper"],["type","text",1,"form-control",3,"keyup","formControl","placeholder"],["role","button",1,"search",3,"click","type","title"],["class","cx-total",4,"ngIf"],[1,"cx-total"],["class","label-content",4,"cxFeature"],["class","cx-visually-hidden",4,"cxFeature"],["ariaControls","asm-cusomer-list-table",1,"sort-selector",3,"sortListEvent","sortOptions","sortLabels","selectedOption","placeholder","ariaLabel"],[1,"label-content"],[1,"cx-pagination-buttons"],["class","btn btn-link cx-action-link cx-btn-previous",3,"disabled","click",4,"ngIf"],["class","btn btn-link cx-action-link cx-btn-next",3,"disabled","click",4,"ngIf"],[1,"btn","btn-link","cx-action-link","cx-btn-previous",3,"click","disabled"],[1,"previous",3,"type"],[1,"btn","btn-link","cx-action-link","cx-btn-next",3,"click","disabled"],[1,"next",3,"type"],["bindLabel","name","bindValue","uid",1,"customer-list-selector",3,"change","ngModelChange","searchable","clearable","tabIndex","ngModel","items","cxNgSelectA11y"],["type","button",1,"close",3,"click","title"],["aria-hidden","true"],["type","button",1,"btn","cx-asm-create-customer-btn",3,"click"]],template:function(i,n){if(i&1){let o=b();a(0,"div",9),h("esc",function(){return _(o),g(n.closeModal("Escape clicked"))}),a(1,"div",10),w(2),a(3,"div",11)(4,"h2",12),C(5),s(6,"cxTranslate"),u(),a(7,"div",13),C(8),s(9,"cxTranslate"),u(),d(10,Zn,1,0,null,14),u(),d(11,ar,11,24,"div",15),s(12,"async"),a(13,"div",16)(14,"div",17)(15,"div",18),d(16,cr,3,3,"div",19)(17,lr,3,3,"div",19)(18,mr,3,3,"div",19),s(19,"async"),d(20,pr,1,0,"cx-spinner",20),s(21,"async"),d(22,Nr,3,2,"div",20),s(23,"async"),u()()(),d(24,$r,6,11,"div",21),s(25,"async"),a(26,"div",22)(27,"button",23),h("click",function(){return _(o),g(n.closeModal("Cancel click"))}),C(28),s(29,"cxTranslate"),u()(),E(),u()(),d(30,Yr,1,1,"ng-template",null,0,D)(32,Xr,3,2,"ng-template",null,1,D)(34,eo,7,14,"ng-template",null,2,D)(36,ro,1,1,"ng-template",null,3,D)(38,ao,6,11,"ng-template",null,4,D)(40,mo,6,8,"ng-template",null,5,D)(42,_o,4,10,"ng-template",null,6,D)(44,go,5,7,"ng-template",null,7,D)(46,Co,5,4,"ng-template",null,8,D)}if(i&2){let o=A(47);p("cxFocus",n.focusConfig),r(5),x(" ",l(6,12,"asm.customerList.title")," "),r(3),x(" ",l(9,14,"asm.customerList.description")," "),r(2),p("ngTemplateOutlet",o),r(),p("ngIf",l(12,16,n.customerListsPage$)),r(5),p("ngIf",n.listsEmpty),r(),p("ngIf",n.listsError),r(),p("ngIf",l(19,18,n.customerSearchError$)),r(2),p("ngIf",l(21,20,n.customerSearchLoading$)),r(2),p("ngIf",l(23,22,n.customerSearchPage$)),r(2),p("ngIf",l(25,24,n.customerListsPage$)),r(4),x(" ",l(29,26,"asm.createCustomerForm.cancel")," ")}},dependencies:[Ee,j,wt,ae,ce,Je,pe,Ht,jt,et,le,ni,ri,ai,fe,X,V],encapsulation:2})}}return t})(),Fo={launch:{ASM_CUSTOMER_LIST:{inlineRoot:!0,component:ko,dialogType:me.DIALOG}}},Do={launch:{ASM:{outlet:"cx-storefront",component:Lo}}},Mo={pagination:{rangeCount:2,addPrevious:!0,addNext:!0,addStart:!1,addEnd:!1,addFirst:!0,addLast:!0,addDots:!0,substituteDotsForSingularPage:!0,dotsLabel:"\xB7\xB7\xB7"}},Vo={launch:{[R.ASM_BIND_CART]:{inlineRoot:!0,component:fo,dialogType:me.DIALOG}}},Ro={launch:{[R.ASM_SAVE_CART]:{inlineRoot:!0,component:ho,dialogType:me.DIALOG}}},Oo={launch:{[R.ASM_SWITCH_CUSTOMER]:{inlineRoot:!0,component:Bo,dialogType:me.DIALOG}}},Ei=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=re({type:t})}static{this.\u0275inj=ne({providers:[z(Do),z(Vo),z(Ro),z(Oo),z(Fo),z(Mo),z(So)],imports:[Ae,Qt,Ot,Xt,Wt,qt,Gt,Jt,ti,Kt,oi,si,ci,Zt,Rt]})}}return t})();var No=(()=>{class t{constructor(e,i,n,o,f){this.http=e,this.occEndpointsService=i,this.converterService=n,this.config=o,this.baseSiteService=f,this.logger=ee(Ft),this.baseSiteService.getActive().subscribe(I=>this.activeBaseSite=I)}getHeaders(){return Ke.createHeader(qe,!0,new Qe)}customerLists(){let e=this.getHeaders(),i=new ge().set("baseSite",this.activeBaseSite),n=this.occEndpointsService.buildUrl("asmCustomerLists",{},{baseSite:!1,prefix:!1});return this.http.get(n,{headers:e,params:i}).pipe(_e(o=>{throw Ce(o,this.logger)}),this.converterService.pipeable(Si))}customerSearch(e){let i=this.getHeaders(),n=new ge().set("baseSite",this.activeBaseSite),o={};e.sort!==void 0?n=n.set("sort",e.sort):e.customerListId||(n=n.set("sort","byNameAsc")),e.query!==void 0&&(o.query=e.query),e.orderId!==void 0&&(o.orderId=e.orderId),e.pageSize!==void 0&&(n=n.set("pageSize",e.pageSize.toString())),e.page!==void 0&&(n=n.set("page",e.page.toString())),e.customerListId!==void 0&&(o.customerListId=e.customerListId);let f=this.occEndpointsService.buildUrl("asmCustomerSearch",{},{baseSite:!1,prefix:!1});return this.http.post(f,o,{headers:i,params:n}).pipe(_e(I=>{throw Ce(I,this.logger)}),this.converterService.pipeable(vi))}bindCart({cartId:e,customerId:i}){let n=Ke.createHeader(qe,!0,new Qe().set("Content-Type","application/x-www-form-urlencoded")),o=new ge().set("baseSite",this.activeBaseSite),f=new URLSearchParams;f.set("cartId",e),f.set("customerId",i);let I=this.occEndpointsService.buildUrl("asmBindCart",{},{baseSite:!1,prefix:!1});return this.http.post(I,f,{headers:n,params:o}).pipe(_e(Q=>{throw Ce(Q,this.logger)}))}createCustomer(e){let i=this.getHeaders(),n=new ge().set("baseSite",this.activeBaseSite),o=this.occEndpointsService.buildUrl("asmCreateCustomer",{},{baseSite:!1,prefix:!1});return this.http.post(o,e,{headers:i,params:n}).pipe(_e(f=>{throw Ce(f,this.logger)}))}static{this.\u0275fac=function(i){return new(i||t)(N(Et),N(Mt),N(Vt),N(ue),N(Dt))}}static{this.\u0275prov=Ie({token:t,factory:t.\u0275fac})}}return t})(),Po={backend:{occ:{endpoints:{asmCustomerSearch:"/assistedservicewebservices/customers/search",asmCustomerLists:"/assistedservicewebservices/customerlists",asmBindCart:"/assistedservicewebservices/bind-cart",asmCreateCustomer:"/assistedservicewebservices/customers"}}}},Ai=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=re({type:t})}static{this.\u0275inj=ne({providers:[z(Po),{provide:xi,useClass:No}],imports:[Ae]})}}return t})();var Ls=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=re({type:t})}static{this.\u0275inj=ne({imports:[Ei,bi,Ai]})}}return t})();export{Ls as AsmModule};
